<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if(''){
            let localStoragePasswdKey = 'ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿä¸‰ä¹‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== '') {
                    if (password != null) {
                        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤è€Œä¸”å¯†ç é”™è¯¯çš„æ—¶å€™, å› ä¸ºå½“password == nullçš„æ—¶å€™è¯´æ˜ç”¨æˆ·ç‚¹äº†å–æ¶ˆ
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== '') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="GafferOnGames,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content="è‡ªæˆ‘æ€»ç»“å¸§åŒæ­¥è¦ç‚¹å¦‚ä¸‹ :   ç¡®å®šæ€§ : å»é™¤éšæœºæ•° ç¼“å†² : å› ä¸ºæ•°æ®åŒ…å¹¶ä¸æ˜¯å‡åŒ€åœ°åˆ°è¾¾, æ‰€ä»¥è¦åšä¸€ä¸ªç¼“å†²åŒº, ç„¶åå†å‡åŒ€åœ°å–å‡º ä¸ç”¨TCP : å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å¯¹æ—¶é—´éå¸¸æ•æ„Ÿ, ä¸æ¥å—åˆ°ç¬¬nä¸ªè¾“å…¥åŒ…å°±æ— æ³•ç»§ç»­æ¨¡æ‹Ÿç¬¬nå¸§, è€ŒTCPçš„ç¡®è®¤æœºåˆ¶ä»¥åŠé‡ä¼ æœºåˆ¶å½“æˆ‘ä»¬ä¸¢åŒ…æ—¶, æˆ‘ä»¬åªèƒ½æš‚åœç­‰å¾…å®ƒé‡å‘é€ æˆå¡é¡¿ ç”¨UDP : å‘é€å†—ä½™æ•°æ® : å› ä¸ºå¸§åŒæ­¥åªå‘é€ç©å®¶inputæ•°æ®, è€ŒinputåŒ…æ˜¯å¾ˆå°çš„,">
<meta name="keywords" content="GafferOnGames">
<meta property="og:type" content="article">
<meta property="og:title" content="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿä¸‰ä¹‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥">
<meta property="og:url" content="https://hulinhong.com/deterministic_lockstep/index.html">
<meta property="og:site_name" content="ğŸš™">
<meta property="og:description" content="è‡ªæˆ‘æ€»ç»“å¸§åŒæ­¥è¦ç‚¹å¦‚ä¸‹ :   ç¡®å®šæ€§ : å»é™¤éšæœºæ•° ç¼“å†² : å› ä¸ºæ•°æ®åŒ…å¹¶ä¸æ˜¯å‡åŒ€åœ°åˆ°è¾¾, æ‰€ä»¥è¦åšä¸€ä¸ªç¼“å†²åŒº, ç„¶åå†å‡åŒ€åœ°å–å‡º ä¸ç”¨TCP : å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å¯¹æ—¶é—´éå¸¸æ•æ„Ÿ, ä¸æ¥å—åˆ°ç¬¬nä¸ªè¾“å…¥åŒ…å°±æ— æ³•ç»§ç»­æ¨¡æ‹Ÿç¬¬nå¸§, è€ŒTCPçš„ç¡®è®¤æœºåˆ¶ä»¥åŠé‡ä¼ æœºåˆ¶å½“æˆ‘ä»¬ä¸¢åŒ…æ—¶, æˆ‘ä»¬åªèƒ½æš‚åœç­‰å¾…å®ƒé‡å‘é€ æˆå¡é¡¿ ç”¨UDP : å‘é€å†—ä½™æ•°æ® : å› ä¸ºå¸§åŒæ­¥åªå‘é€ç©å®¶inputæ•°æ®, è€ŒinputåŒ…æ˜¯å¾ˆå°çš„,">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2025-12-17T18:31:29.631Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿä¸‰ä¹‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥">
<meta name="twitter:description" content="è‡ªæˆ‘æ€»ç»“å¸§åŒæ­¥è¦ç‚¹å¦‚ä¸‹ :   ç¡®å®šæ€§ : å»é™¤éšæœºæ•° ç¼“å†² : å› ä¸ºæ•°æ®åŒ…å¹¶ä¸æ˜¯å‡åŒ€åœ°åˆ°è¾¾, æ‰€ä»¥è¦åšä¸€ä¸ªç¼“å†²åŒº, ç„¶åå†å‡åŒ€åœ°å–å‡º ä¸ç”¨TCP : å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å¯¹æ—¶é—´éå¸¸æ•æ„Ÿ, ä¸æ¥å—åˆ°ç¬¬nä¸ªè¾“å…¥åŒ…å°±æ— æ³•ç»§ç»­æ¨¡æ‹Ÿç¬¬nå¸§, è€ŒTCPçš„ç¡®è®¤æœºåˆ¶ä»¥åŠé‡ä¼ æœºåˆ¶å½“æˆ‘ä»¬ä¸¢åŒ…æ—¶, æˆ‘ä»¬åªèƒ½æš‚åœç­‰å¾…å®ƒé‡å‘é€ æˆå¡é¡¿ ç”¨UDP : å‘é€å†—ä½™æ•°æ® : å› ä¸ºå¸§åŒæ­¥åªå‘é€ç©å®¶inputæ•°æ®, è€ŒinputåŒ…æ˜¯å¾ˆå°çš„,">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿä¸‰ä¹‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥ | ğŸš™</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸš™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ğŸ’¨ ğŸ’¨ ğŸ’¨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">Ã—</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/deterministic_lockstep/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿä¸‰ä¹‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-22T11:13:35+00:00">
                01-22-2017
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º/" rel="next" title="ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/snapshot_interpolation/" rel="prev" title="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå››ä¹‹å¿«ç…§æ’å€¼">
              <p class="post-nav-pre-next-title">
                  ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå››ä¹‹å¿«ç…§æ’å€¼
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <h1 id="è‡ªæˆ‘æ€»ç»“"><a href="#è‡ªæˆ‘æ€»ç»“" class="headerlink" title="è‡ªæˆ‘æ€»ç»“"></a>è‡ªæˆ‘æ€»ç»“</h1><p>å¸§åŒæ­¥è¦ç‚¹å¦‚ä¸‹ : </p>
<ul>
<li><strong>ç¡®å®šæ€§</strong> : å»é™¤éšæœºæ•°</li>
<li><strong>ç¼“å†²</strong> : å› ä¸ºæ•°æ®åŒ…å¹¶ä¸æ˜¯å‡åŒ€åœ°åˆ°è¾¾, æ‰€ä»¥è¦åšä¸€ä¸ªç¼“å†²åŒº, ç„¶åå†å‡åŒ€åœ°å–å‡º</li>
<li><strong>ä¸ç”¨TCP</strong> : å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å¯¹æ—¶é—´éå¸¸æ•æ„Ÿ, ä¸æ¥å—åˆ°ç¬¬nä¸ªè¾“å…¥åŒ…å°±æ— æ³•ç»§ç»­æ¨¡æ‹Ÿç¬¬nå¸§, è€ŒTCPçš„ç¡®è®¤æœºåˆ¶ä»¥åŠé‡ä¼ æœºåˆ¶å½“æˆ‘ä»¬ä¸¢åŒ…æ—¶, æˆ‘ä»¬åªèƒ½æš‚åœç­‰å¾…å®ƒé‡å‘é€ æˆå¡é¡¿</li>
<li><strong>ç”¨UDP</strong> :<ul>
<li><strong>å‘é€å†—ä½™æ•°æ®</strong> : å› ä¸ºå¸§åŒæ­¥åªå‘é€ç©å®¶inputæ•°æ®, è€ŒinputåŒ…æ˜¯å¾ˆå°çš„, æ‰€ä»¥å‘å†—ä½™ä¹Ÿä¸ä¼šå¾ˆå¤§</li>
<li><strong>å¢é‡åŒ…</strong> : åŠ ä¸€ä¸ªbitæ¥æ ‡å¿—è·Ÿä¸Šä¸€ä¸ªåŒ…çš„æ¯”è¾ƒç»“æœ, å¦‚æœè¿™ä¸ªåŒ…è·Ÿä¸Šä¸ªåŒ…ä¸€è‡´åˆ™åªå‘é€ä¸€ä¸ª1, å¦‚æœä¸ä¸€è‡´åˆ™å‘é€0å’Œè¿™ä¸ªåŒ…çš„å®Œæ•´æ•°æ®</li>
</ul>
</li>
<li><strong>å¸§åŒæ­¥çš„ç¼ºç‚¹</strong> : <ul>
<li><strong>ç­‰çš„äººå¤ªå¤š</strong> : å› ä¸ºä½ è¦æ”¶åˆ°æ‰€æœ‰ç©å®¶å¯¹åº”å¸§çš„è¾“å…¥æ‰èƒ½å¯¹è¿™ä¸€å¸§è¿›è¡Œæ¨¡æ‹Ÿ.åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªäººå¿…é¡»ç­‰å¾…æœ€æ»åçš„é‚£ä¸ªç©å®¶.äººè¶Šå¤šç­‰å¾—è¶Šä¹…, æ‰€ä»¥å¸§åŒæ­¥ä¸é€‚åˆmmo.</li>
<li><strong>æ¯”è¾ƒè€—æ€§èƒ½</strong> : å› ä¸ºå¸§åŒæ­¥æŠ€æœ¯çš„è¯, åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½è¦æ‰§è¡Œæ‰€æœ‰çš„ç‰©ç†ä¹‹ç±»çš„è¿ç®—; è€ŒçŠ¶æ€åŒæ­¥å¯ä»¥åªåŒæ­¥å½“å‰ç©å®¶å‘¨å›´å¯¹è±¡çš„çŠ¶æ€, ä¸éœ€è¦åŒæ­¥æ‰€æœ‰å¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>. . .</strong><a id="more"></a></p>
<h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><!-- <h1 id="Deterministic-Lockstep">Deterministic Lockstep</h1> -->
<p><a href="https://gafferongames.com/post/deterministic_lockstep/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p>åŸæ–‡æ ‡é¢˜ : <strong>Deterministic Lockstep</strong> (<em>Keeping simulations in sync by sending only inputs</em>)</p>
<hr>
<div class="container"><br><div class="row"><br><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><br><h2 id="introduction">Introduction</h2><br><p>Hi, I&rsquo;m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <strong><a href="https://gafferongames.com/categories/networked-physics/" target="_blank" rel="noopener">Networked Physics</a></strong>.</p><br><p>In the <a href="https://gafferongames.com/post/introduction_to_networked_physics/" target="_blank" rel="noopener">previous article</a> we explored the physics simulation we&rsquo;re going to network in this article series. In this article specifically, we&rsquo;re going to network this physics simulation using <strong>deterministic lockstep</strong>.</p><br><p>Deterministic lockstep is a method of networking a system from one computer to another by sending only the <em>inputs</em> that control that system, rather than the <em>state</em> of that system. In the context of networking a physics simulation, this means we send across a small amount of input, while avoiding sending state like position, orientation, linear velocity and angular velocity per-object.</p><br><p>The benefit is that bandwidth is proportional to the size of the input, not the number of objects in the simulation. Yes, with deterministic lockstep you can network a physics simulation of one million objects with the same bandwidth as just one.</p><br><p>While this sounds great in theory, in practice it&rsquo;s difficult to implement deterministic lockstep because most physics simulations are not deterministic. Differences in floating point behavior between compilers, OS&rsquo;s and even instruction sets make it almost impossible to guarantee determinism for floating point calculations.</p><br><h2 id="determinism">Determinism</h2><br><p>Determinism means that given the same initial condition and the same set of inputs your simulation gives exactly the same result. And I do mean <em>exactly</em> the same result.</p><br><p>Not close. Not near enough. <strong>Exactly the same</strong>. Exact down to the bit-level. So exact, you could take a checksum of your entire physics state at the end of each frame and it would be identical.</p><br><video preload="auto" autoplay="autoplay" loop="loop" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_1.mp4" type="video/mp4"><br></video><br><p>Above you can see a simulation that is <em>almost</em> deterministic. The simulation on the left is controlled by the player. The simulation on the right has exactly the same inputs applied with a two second delay starting from the same initial condition. Both simulations step forward with the same delta time (a necessary precondition to ensure exactly the same result) and both simulations apply the same inputs. Notice how after the smallest divergence the simulation gets further and further out of sync. This simulation is <strong>non-deterministic</strong>.</p><br><p>What&rsquo;s going on is that the physics engine I&rsquo;m using (<a href="http://www.ode.org/" target="_blank" rel="noopener">Open Dynamics Engine</a>) uses a random number generator inside its solver to randomize the order of constraint processing to improve stability. It&rsquo;s open source. Take a look and see! Unfortunately this breaks determinism because the simulation on the left processes constraints in a different order to the simulation on the right, leading to slightly different results.</p><br><p>Luckily all that is required to make ODE deterministic on the same machine, with the same complied binary and on the same OS (is that enough qualifications?) is to set its internal random seed to the current frame number before running the simulation via dSetRandomSeed. Once this is done ODE gives exactly the same result and the left and right simulations stay in sync.</p><br><video preload="auto" autoplay="autoplay" loop="loop" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_2.mp4" type="video/mp4"><br></video><br><p>And now a word of warning. Even though the simulation above is deterministic on the same machine, that does <em>not</em> necessarily mean it would also be deterministic across different compilers, a different OS or different machine architectures (eg. PowerPC vs. Intel). In fact, it&rsquo;s probably not even deterministic between debug and release builds due to floating point optimizations.</p><br><p>Floating point determinism is a complicated subject and there&rsquo;s no silver bullet.</p><br><p>For more information please refer to this <a href="https://gafferongames.com/post/floating_point_determinism/" target="_blank" rel="noopener">article</a>.</p><br><h2 id="networking-inputs">Networking Inputs</h2><br><p>Now let&rsquo;s get down to implementation.</p><br><p>Our example physics simulation is driven by keyboard input: arrow keys apply forces to make the player cube move, holding space lifts the cube up and blows other cubes around, and holding &lsquo;z&rsquo; enables katamari mode.</p><br><p>How can we network these inputs? Must we send the entire state of the keyboard? No. It&rsquo;s not necessary to send the entire keyboard state, only the state of the keys that affect the simulation. What about key press and release events then? No. This is also not a good strategy. We need to ensure that exactly the same input is applied on the right side, at exactly the same time, so we can&rsquo;t just send &lsquo;key pressed&rsquo;, and &lsquo;key released&rsquo; events over TCP.</p><br><p>What we do instead is represent the input with a struct and at the beginning of each simulation frame on the left side, sample this struct from the keyboard:</p><br><pre><code>    struct Input<br>    {<br>        bool left;<br>        bool right;<br>        bool up;<br>        bool down;<br>        bool space;<br>        bool z;<br>    };<br></code></pre><br><p>Next we send that input from the left simulation to the right simulation in a way that the simulation on the right side knows that the input belongs to frame n.</p><br><p>And here&rsquo;s the key part: the simulation on the right can only simulate frame n when it has the input for that frame. If it doesn&rsquo;t have the input, it has to wait.</p><br><p>For example, if you were sending across using TCP you could simply send the inputs and nothing else, and on the other side you could read the packets coming in, and each input received corresponds to one frame for the simulation to step forward. If no input arrives for a given render frame, the right side can&rsquo;t advance forward, it has to wait for the next input to arrive.</p><br><p>So let&rsquo;s move forward with TCP, you&rsquo;ve disabled <a href="https://en.wikipedia.org/wiki/Nagle's_algorithm" target="_blank" rel="noopener">Nagle&rsquo;s Algorithm</a>, and you&rsquo;re sending inputs from the left to the right simulation once per-frame (60 times per-second).</p><br><p>Here it gets a little complicated. Since we can&rsquo;t simulate forward unless we have the input for the next frame, it&rsquo;s not enough to just take whatever inputs arrive over the network and then run the simulation on inputs as they arrive because the result would be very jittery. Data sent across the network at 60HZ doesn&rsquo;t typically arrive nicely spaced, 1/60th of a second between each packet.</p><br><p>If you want this sort of behavior, you have to implement it yourself.</p><br><h2 id="playout-delay-buffer">Playout Delay Buffer</h2><br><p>Such a device is called a playout delay buffer.</p><br><p>Unfortunately, the subject of playout delay buffers is a patent minefield. I would not advise searching for &ldquo;playout delay buffer&rdquo; or &ldquo;adaptive playout delay&rdquo; while at work. But in short, what you want to do is buffer packets for a short amount of time so they <em>appear</em> to be arriving at a steady rate even though in reality they arrive somewhat jittered.</p><br><p>What you&rsquo;re doing here is similar to what Netflix does when you stream a video. You pause a little bit initially so you have a buffer in case some packets arrive late and then once the delay has elapsed video frames are presented spaced the correct time apart. If your buffer isn&rsquo;t large enough then the video playback will be hitchy. With deterministic lockstep your simulation behaves exactly the same way: showing hitches when the buffer isn&rsquo;t large enough to smooth out the jitter. Of course, the cost of increasing the buffer size is additional latency, so you can&rsquo;t just buffer your way out of all problems. At some point the user says enough! That&rsquo;s too much latency added. No sir, I will <em>not</em> play your game with 1 second of extra delay :)</p><br><p>My playout delay buffer implementation is really simple. You add inputs to it indexed by frame, and when the very first input is received, it stores the current local time on the receiver machine and from that point on delivers packets assuming they should play at that time + 100ms. You&rsquo;ll likely need to something more complex for a real world situation, perhaps something that handles clock drift, and detecting when the simulation should slightly speed up or slow down to maintain a nice amount of buffering safety (being &ldquo;adaptive&rdquo;) while minimizing overall latency, but this is reasonably complicated and probably worth an article in itself.</p><br><p>The goal is that under average conditions the playout delay buffer provides a steady stream of inputs for frame n, n+1, n+2 and so on, nicely spaced 1/60th of a second apart with no drama. In the worst case the time arrives for frame n and the input hasn&rsquo;t arrived yet it returns null and the simulation is forced to wait. If packets get bunched up and delivered late, it&rsquo;s possibly to have multiple inputs ready to dequeue per-frame. In this case I limit to 4 simulated frames per-render frame so the simulation has a chance to catch up, but doesn&rsquo;t simulate for so long that it falls further behind, aka. the &ldquo;spiral of death&rdquo;.</p><br><h2 id="is-tcp-good-enough">Is TCP good enough?</h2><br><p>Using this playout buffer strategy and sending inputs across TCP we ensure that all inputs arrive reliably and in-order. This is convenient, and after all, TCP is designed for exactly this situation: reliable-ordered data.</p><br><p>In fact, It&rsquo;s a common thing out there on the Internet for pundits to say stuff like:</p><br><ul><br><li><p><a href="https://www.reddit.com/r/gamedev/comments/1tvbe0/is_it_just_me_or_is_networking_really_hard/" target="_blank" rel="noopener">If you need reliable-ordered, you can&rsquo;t do better than TCP!</a></p></li><br><li><p><a href="https://thoughtstreams.io/glyph/your-game-doesnt-need-udp-yet/" target="_blank" rel="noopener">Your game doesn&rsquo;t need UDP (yet)</a></p></li><br></ul><br><p>But I&rsquo;m here to tell you this kind of thinking is <strong>dead wrong</strong>.</p><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_3.mp4" type="video/mp4"><br></video><br><p>Above you can see the simulation networked using deterministic lockstep over TCP at 100ms latency and 1% packet loss. If you look closely on the right side you can see hitches every few seconds. What&rsquo;s happening here is that each time a packet is lost, TCP has to wait RTT*2 while it is resent (actually it can be much worse, but I&rsquo;m being generous&hellip;). The hitches happen because with deterministic lockstep the right simulation can&rsquo;t simulate frame n without input n, so it has to pause to wait for input n to be resent!</p><br><p>That&rsquo;s not all. It gets significantly worse as latency and packet loss increase. Here is the same simulation networked using deterministic lockstep over TCP at 250ms latency and 5% packet loss:</p><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_4.mp4" type="video/mp4"><br></video><br><p>Now I will concede that if you have no packet loss and/or a very small amount of latency then you very well may get acceptable results with TCP. But please be aware that if you use TCP it behaves <em>terribly</em> under bad network conditions.</p><br><h2 id="can-we-do-better-than-tcp">Can we do better than TCP?</h2><br><p>Can we beat TCP at its own game. Reliable-ordered delivery?</p><br><p>The answer is an emphatic <b>YES</b>. But <em>only</em> if we change the rules of the game.</p><br><p>Here&rsquo;s the trick. We need to ensure that all inputs arrive reliably and in order. But if we send inputs in UDP packets, some of those packets will be lost. What if, instead of detecting packet loss after the fact and resending lost packets, we redundantly include <em>all inputs</em> in each UDP packet until we know for sure the other side has received them?</p><br><p>Inputs are very small (6 bits). Let&rsquo;s say we&rsquo;re sending 60 inputs per-second (60fps simulation) and round trip time we know is going the be somewhere in 30-250ms range. Let&rsquo;s say just for fun that it could be up to 2 seconds worst case and at this point we&rsquo;ll time out the connection (screw that guy). This means that on average we only need to include between 2-15 frames of input and worst case we&rsquo;ll need 120 inputs. Worst case is 120 x 6 = 720 bits. That&rsquo;s only 90 bytes of input! That&rsquo;s totally reasonable.</p><br><p>We can do even better. It&rsquo;s not common for inputs to change every frame. What if when we send our packet instead we start with the sequence number of the most recent input, and the 6 bits of the first (oldest) input, and the number of un-acked inputs. Then as we iterate across these inputs to write them to the packet we can write a single bit (1) if the next input is different to the previous, and (0) if the input is the same. So if the input is different from the previous frame we write 7 bits (rare). If the input is identical we write just one (common). Where inputs change infrequently this is a big win and in the worst case this really isn&rsquo;t that bad. 120 bits of extra data sent. Just 15 bytes overhead worst case.</p><br><p>Of course another packet is required from the right simulation to the left so the left side knows which inputs have been received. Each frame the right simulation reads input packets from the network before adding them to the playout delay buffer and keeps track of the most recent input it has received and sends this back to the left as an &ldquo;ack&rdquo; or acknowledgment for inputs.</p><br><p>When the left side receives this ack it discards any inputs older than the most recent received input. This way we have only a small number of inputs in flight proportional to the round trip time between the two simulations.</p><br><h2 id="flawless-victory">Flawless Victory</h2><br><p>We have beaten TCP by changing the rules of the game.</p><br><p>Instead of &ldquo;implementing 95% of TCP on top of UDP&rdquo; we have implemented something <em>totally different</em> and better suited to our requirements. A protocol that redundantly sends inputs because we know they are small, so we never have to wait for retransmission.</p><br><p>So exactly how much better is this approach than sending inputs over TCP?</p><br><p>Let&rsquo;s take a look&hellip;</p><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_5.mp4" type="video/mp4"><br></video><br><p>The video above shows deterministic lockstep synchronized over UDP using this technique with <strong>2 seconds</strong> of latency and <strong>25% packet loss</strong>. Imagine how awful TCP would look under these conditions.</p><br><p>So in conclusion, even where TCP should have the most advantage, in the only networking model that relies on reliable-ordered data, we can still easily whip its ass with a simple protocol built on top of UDP.</p><br><br><br><h1 id="è¯‘æ–‡">è¯‘æ–‡</h1><br><br><a href="http://gad.qq.com/program/translateview/7164497" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a><br><br><br><div class="WordSection1"><b><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(58, 58, 58);">ç¿»è¯‘ï¼š</span></span><span style="color: rgb(58, 58, 58); font-family: å¾®è½¯é›…é»‘; font-size: medium;">å¼ ä¹¾å…‰</span><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(58, 58, 58);">ï¼ˆ</span><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(58, 58, 58); text-decoration: none;"><a href="http://gad.qq.com/user/index?id=423474" style="font-family: å¾®è½¯é›…é»‘; font-size: medium;" target="_blank" rel="noopener">æ˜Ÿé™…è¿·èˆª</a></span><span style="color: rgb(58, 58, 58); font-family: å¾®è½¯é›…é»‘; font-size: medium;">ï¼‰ å®¡æ ¡ï¼š</span><span style="color:#3a3a3a;font-family:å¾®è½¯é›…é»‘;font-size:medium;">é™ˆæ•¬å‡¤(nunu)</span></b><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="ä»‹ç»">ä»‹ç»</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ ¼ä¼¦Â·è²å¾·å‹’ã€‚æ¬¢è¿å¤§å®¶é˜…è¯»ç³»åˆ—æ•™ç¨‹ã€Šç½‘ç»œç‰©ç†ä»¿çœŸã€‹ï¼Œè¿™ä¸ªç³»åˆ—æ•™ç¨‹çš„ç›®çš„æ˜¯å°†ç‰©ç†ä»¿çœŸçš„çŠ¶æ€é€šè¿‡ç½‘ç»œè¿›è¡Œå¹¿æ’­ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ç‰©ç†ä»¿çœŸéœ€è¦åœ¨ç½‘ç»œä¸Šè¿›è¡Œå¹¿æ’­çš„å„ç§å±æ€§ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥æŠ€æœ¯æ¥å°†ç‰©ç†ä»¿çœŸé€šè¿‡ç½‘ç»œè¿›è¡Œä¼ é€’å’Œå¹¿æ’­ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥æ˜¯ä¸€ç§ç”¨æ¥åœ¨ä¸€å°ç”µè„‘å’Œå…¶ä»–ç”µè„‘ä¹‹é—´è¿›è¡ŒåŒæ­¥çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å‘é€çš„æ˜¯æ§åˆ¶ä»¿çœŸçŠ¶æ€å˜åŒ–çš„è¾“å…¥ï¼Œè€Œä¸æ˜¯åƒå…¶ä»–æ–¹æ³•é‚£æ ·å‘é€çš„æ˜¯ä»¿çœŸè¿‡ç¨‹ä¸­ç‰©ä½“çš„çŠ¶æ€å˜åŒ–ã€‚è¿™ç§æ–¹æ³•çš„èƒŒåæ€æƒ³æ˜¯ç»™å®šä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œä¸å¦¨è®¾ä¸º<span>S(n)</span>ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨è¾“å…¥ä¿¡æ¯<span>I(n)</span>æ¥è¿è¡Œä»¿çœŸå°±èƒ½å¾—åˆ°<span>S(n+1)</span>è¿™ä¸ªçŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡<span>S(n+1)</span>è¿™ä¸ªçŠ¶æ€å’Œè¾“å…¥ä¿¡æ¯<span>I(n+1)</span>æ¥è¿è¡Œä»¿çœŸå°±èƒ½å¾—åˆ°<span>S(n+2)</span>è¿™ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹å¾—åˆ°<span>S(n+3)</span>ã€<span>S(n+4)</span>ä»¥åŠå…¶åçš„å„ä¸ªçŠ¶æ€ã€‚è¿™çœ‹ä¸Šå»æœ‰ç‚¹åƒæ˜¯æ•°å­¦å½’çº³æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åªé€šè¿‡è¾“å…¥ä¿¡æ¯å’Œä¹‹å‰çš„ä»¿çœŸçŠ¶æ€å°±èƒ½å¾—åˆ°åé¢çš„ä»¿çœŸçŠ¶æ€<span>-</span>è€Œä¸”å¾—åˆ°çš„ä»¿çœŸçŠ¶æ€æ˜¯é«˜åº¦ä¸€è‡´ï¼Œå¹¶ä¸”ä¹Ÿä¸éœ€è¦å‘é€ä»»ä½•çŠ¶æ€æ–¹é¢çš„åŒæ­¥ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¿™ä¸ªç½‘ç»œæ¨¡å‹çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æ‰€éœ€çš„å¸¦å®½ä»…ä»…ç”¨æ¥ä¼ é€’è¾“å…¥ä¿¡æ¯ï¼Œè€Œè¾“å…¥ä¿¡æ¯æ‰€å çš„å¸¦å®½å…¶å®æ˜¯ä¸ä»¿çœŸä¸­ç‰©ä½“çš„æ•°ç›®æ˜¯å®Œå…¨æ— å…³çš„ã€‚ä½ å¯ä»¥é€šè¿‡ç½‘ç»œæ¥å¯¹ä¸€ç™¾ä¸‡ä¸ªç‰©ä½“è¿›è¡Œç‰©ç†ä»¿çœŸï¼Œå®ƒæ‰€éœ€çš„å¸¦å®½ä¼šè·Ÿåªå¯¹ä¸€ä¸ªç‰©ä½“è¿›è¡Œç‰©ç†ä»¿çœŸæ‰€éœ€çš„å¸¦å®½å®Œå…¨ç›¸åŒã€‚å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹åˆ°ç‰©ç†ç‰©ä½“çš„çŠ¶æ€é€šå¸¸æ˜¯åŒ…å«ä½ç½®ã€æ–¹å‘ã€çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼ˆå¦‚æœæ˜¯æœªå‹ç¼©çš„è¯ï¼Œè¿™äº›çŠ¶æ€ä¸€å…±éœ€è¦<span>52</span>å­—èŠ‚ï¼Œåœ¨è¿™é‡Œé¢å‡è®¾æ–¹å‘ä½¿ç”¨çš„æ˜¯å››å…ƒæ•°è€Œå…¶ä»–æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯ç”¨<span>vec3</span>æ¥è¡¨ç¤ºï¼‰ï¼Œæ‰€ä»¥å½“ä½ æœ‰å¤§é‡çš„ç‰©ä½“éœ€è¦è¿›è¡Œç‰©ç†ä»¿çœŸçš„æ—¶å€™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å…·æœ‰å¸å¼•åŠ›çš„æ–¹æ¡ˆã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="ç¡®å®šæ€§">ç¡®å®šæ€§</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å¦‚æœè¦é‡‡ç”¨å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥è¿™ä¸ªæ–¹æ¡ˆæ¥å°†ç‰©ç†ä»¿çœŸç½‘ç»œåŒ–ï¼Œé¦–å…ˆè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦ç¡®ä¿ä½ çš„ä»¿çœŸå…·æœ‰ç¡®å®šæ€§ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œç¡®å®šæ€§å…¶å®å’Œè‡ªç”±æ„å¿—ä¹‹ç±»çš„æ²¡æœ‰å…³ç³»ã€‚å®ƒåªæ˜¯æ„å‘³ç€ç»™å®šç›¸åŒçš„åˆå§‹æ¡ä»¶å’Œç›¸åŒçš„ä¸€ç»„è¾“å…¥ï¼Œä»¿çœŸèƒ½å¤Ÿç»™å‡ºå®Œå…¨ç›¸åŒçš„ç»“æœã€‚è€Œä¸”æˆ‘åœ¨è¿™é‡Œè¦ç€é‡å¼ºè°ƒä¸‹æ˜¯å®Œå…¨ç›¸åŒçš„ç»“æœã€‚è€Œä¸æ˜¯è¯´çš„ä»€ä¹ˆåœ¨åœ¨æµ®ç‚¹æ•°å®¹å¿åº¦å†…è¶³å¤Ÿæ¥è¿‘ã€‚è¿™ç§ç²¾ç¡®æ˜¯ç²¾ç¡®åˆ°æ¯”ç‰¹ä½çš„ã€‚æ‰€ä»¥è¿™ç§ç²¾ç¡®æ€§ä½¿å¾—ä½ å¯ä»¥åœ¨æ¯å¸§çš„æœ«å°¾å¯¹æ•´ä¸ªç‰©ç†çŠ¶æ€åšä¸€ä¸ªæ ¡éªŒå’Œï¼Œä¸åŒæœºå™¨ä¸Šé¢åŒä¸€å¸§å¾—åˆ°çš„æ ¡éªŒå’Œæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_1.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä»ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢çš„ä»¿çœŸå‡ ä¹æ˜¯å…·æœ‰ç¡®å®šæ€§çš„ï¼Œä½†æ˜¯ä¸å®Œå…¨å…·æœ‰ç¡®å®šæ€§ã€‚å·¦è¾¹çš„ä»¿çœŸç”±ç©å®¶è¿›è¡Œæ§åˆ¶ï¼Œè€Œå³è¾¹çš„ä»¿çœŸæœ‰å®Œå…¨ä¸€è‡´çš„åˆå§‹çŠ¶æ€ï¼Œè¾“å…¥ä¿¡æ¯ä¹Ÿå’Œå·¦è¾¹å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯è¦æœ‰<span>2</span>ç§’é’Ÿçš„å»¶è¿Ÿã€‚è¿™ä¸¤ä¸ªä»¿çœŸä½¿ç”¨ç›¸åŒçš„é—´éš”æ—¶é—´è¿›è¡Œæ›´æ–°ï¼ˆä½¿ç”¨ç›¸åŒçš„é—´éš”æ—¶é—´è¿›è¡Œæ›´æ–°ä¹Ÿæ˜¯ç¡®ä¿å¾—åˆ°å®Œå…¨ä¸€è‡´ç»“æœçš„ä¸€ä¸ªå¿…è¦å‰ææ¡ä»¶ï¼‰ï¼Œå¹¶ä¸”åœ¨æ¯ä¸€å¸§å‰å¯¹ç›¸åŒçš„è¾“å…¥ä¿¡æ¯è¿›è¡Œç›¸åº”ã€‚ä½ å¯ä»¥æ³¨æ„åˆ°éšç€ä»¿çœŸçš„è¿›è¡Œï¼Œé‚£äº›ä¸€å¼€å§‹å¾ˆå¾®å°çš„å·®å¼‚æ˜¯å¦‚ä½•ä¸€ç‚¹ç‚¹è¢«æ‰©å¤§ï¼Œæœ€åå¯¼è‡´ä¸¤ä¸ªä»¿çœŸå®Œå…¨ä¸åŒæ­¥ã€‚æ‰€ä»¥è¯´è¿™ä¸ªä»¿çœŸå…¶å®ä¸å…·æœ‰ç¡®å®šæ€§ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä¸Šé¢åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ<span>?</span>æœ€åä¼šå¯¼è‡´ä¸¤ä¸ªä»¿çœŸçš„ç»“æœå·®çš„è¿™ä¹ˆå¤§ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä½¿ç”¨çš„ç‰©ç†å¼•æ“ï¼ˆ<span>ODE</span>ï¼‰åœ¨å®ƒçš„å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨æ¥å¯¹çº¦æŸå¤„ç†çš„é¡ºåºè¿›è¡ŒéšæœºåŒ–æ¥æé«˜ç¨³å®šæ€§ã€‚è¿™ä¸ªç‰©ç†å¼•æ“æ˜¯å®Œå…¨å¼€æºçš„ï¼Œæ‰€ä»¥å¯ä»¥çœ‹çœ‹å®ƒçš„å†…éƒ¨å®ç°ï¼ä¸å¹¸çš„æ˜¯ï¼Œç”±äºå·¦è¾¹çš„ä»¿çœŸå¤„ç†çº¦æŸçš„é¡ºåºå’Œå³è¾¹çš„ä»¿çœŸå¤„ç†çº¦æŸçš„é¡ºåºä¸åŒï¼Œè¿™å¯¼è‡´æœ‰ä¸€äº›è½»å¾®ä¸åŒçš„ç»“æœã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å¹¸è¿çš„æ˜¯æˆ‘ä»¬è¿˜æ˜¯èƒ½æ‰¾åˆ°è®©<span>ODE</span>è¿™ä¸ªç‰©ç†å¼•æ“å…·æœ‰ç¡®å®šæ€§çš„æ¡ä»¶ï¼šè¦åœ¨åŒä¸€å°æœºå™¨ä¸Šã€ä½¿ç”¨åŒä¸€ä¸ªç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€å¹¶ä¸”åœ¨å®Œå…¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ˆè¿™æ˜¯å¿…è¦çš„é™åˆ¶æ¡ä»¶ä¹ˆï¼Ÿï¼‰ï¼Œè¿˜æœ‰å°±æ˜¯åœ¨è¿è¡Œä»¿çœŸä¹‹å‰é€šè¿‡<span>dSetRandomSeed</span>æŠŠéšæœºæ•°çš„ç§å­è®¾ä¸ºå½“å‰å¸§çš„å¸§æ•°ã€‚ä¸€æ—¦æ»¡è¶³è¿™äº›æ¡ä»¶çš„è¯ï¼Œ<span>ODE</span>è¿™ä¸ªç‰©ç†å¼•æ“èƒ½å¤Ÿç»™å‡ºå®Œå…¨ç›¸åŒçš„ç»“æœï¼Œå¹¶ä¸”å·¦è¾¹å’Œå³è¾¹çš„ä»¿çœŸèƒ½å¤Ÿä¿æŒé«˜åº¦ä¸€è‡´çš„åŒæ­¥ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_2.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç°åœ¨è®©æˆ‘ä»¬é’ˆå¯¹ä¸Šé¢è¿™ä¸ªæƒ…å†µç»™å‡ºä¸€ä¸ªè­¦å‘Šã€‚å³ä½¿<span>ODE</span>è¿™ä¸ªç‰©ç†å¼•æ“èƒ½å¤Ÿåœ¨ç›¸åŒçš„æœºå™¨ä¸Šå¾—åˆ°ç¡®å®šæ€§çš„ç»“æœï¼Œä½†æ˜¯è¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€åœ¨ä¸åŒç¼–è¯‘å™¨ã€ä¸åŒçš„æ“ä½œç³»ç»Ÿç”šè‡³ä¸åŒçš„æœºå™¨æ¶æ„ä¸Šï¼ˆæ¯”å¦‚è¯´åœ¨<span>PowerPC</span>æ¶æ„ä¸Šå’Œåœ¨<span>Intel</span>æ¶æ„ä¸Šï¼‰å®ƒèƒ½å¤Ÿå¾—åˆ°ç¡®å®šæ€§çš„ç»“æœã€‚äº‹å®ä¸Šï¼Œç”±äºæµ®ç‚¹æ•°çš„ä¼˜åŒ–ï¼Œåœ¨ç¨‹åºçš„<span>debug</span>ç‰ˆæœ¬å’Œ<span>release</span>ç‰ˆæœ¬ä¹‹é—´å¯èƒ½éƒ½æ²¡æœ‰åŠæ³•å¾—åˆ°ç¡®å®šæ€§çš„ç»“æœã€‚æµ®ç‚¹æ•°çš„ç¡®å®šæ€§æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ï¼Œè€Œä¸”è¿™ä¸ªé—®é¢˜æ²¡æœ‰é“¶å¼¹ï¼ˆæ„å‘³ç€è¿™ä¸ªé—®é¢˜æ²¡æœ‰ä»€ä¹ˆç®€å•å¯è¡Œçš„è§£å†³åŠæ³•ï¼‰ã€‚è¦äº†è§£æ›´å¤šè¿™æ–¹é¢çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ<a href="http://gad.qq.com/college/articledetail/7165586" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="ç½‘ç»œè¾“å…¥">ç½‘ç»œè¾“å…¥ Inputs</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è®©æˆ‘ä»¬è®¨è®ºä¸‹å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥çš„å…·ä½“å®ç°æ–¹æ³•ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½ å¯èƒ½æƒ³çŸ¥é“åœ¨æˆ‘ä»¬è¿™ä¸ªç¤ºä¾‹ä»¿çœŸä¸­è¾“å…¥ä¿¡æ¯åˆ°åº•æ˜¯å•¥ï¼Œä»¥åŠæˆ‘ä»¬è¯¥å¦‚ä½•å§è¿™äº›è¾“å…¥ä¿¡æ¯è¿›è¡Œç½‘ç»œåŒ–ã€‚æˆ‘ä»¬è¿™ä¸ªç¤ºä¾‹ä»¿çœŸæ˜¯ç”±é”®ç›˜è¾“å…¥è¿›è¡Œé©±åŠ¨çš„ï¼šæ–¹å‘é”®ä¼šç»™ä»£è¡¨ç©å®¶çš„ç«‹æ–¹ä½“æ–½åŠ ä¸€ä¸ªåŠ›è®©ä»–è¿›è¡Œç§»åŠ¨ã€æŒ‰ä¸‹ç©ºæ ¼é”®ä¼šæŠŠä»£è¡¨ç©å®¶çš„ç«‹æ–¹ä½“æèµ·æ¥å¹¶æŠŠç¢°åˆ°çš„ç«‹æ–¹ä½“å››å¤„æ»šè½ã€æŒ‰ä¸‹<span>â€˜zâ€™</span>é”®ä¼šå¯åŠ¨<span>katamari</span>æ¨¡å¼ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½†æ˜¯æˆ‘ä»¬è¯¥å¦‚ä½•å¯¹è¿™äº›è¾“å…¥ä¿¡æ¯è¿›è¡Œç½‘ç»œåŒ–å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦æŠŠæ•´ä¸ªé”®ç›˜çš„çŠ¶æ€åœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ä¹ˆï¼Ÿåœ¨è¿™äº›é”®è¢«æŒ‰ä¸‹å’Œé‡Šæ”¾çš„æ—¶å€™æˆ‘ä»¬è¦å‘é€è¿™äº›äº‹ä»¶ä¹ˆï¼Ÿä¸ï¼Œæ•´ä¸ªé”®ç›˜çš„çŠ¶æ€ä¸éœ€è¦åœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ è¾“é‚£äº›ä¼šå½±å“ä»¿çœŸçš„æŒ‰é”®ã€‚é‚£ä¹ˆè¢«æŒ‰ä¸‹å’Œé‡Šæ”¾çš„é”®çš„äº‹ä»¶éœ€è¦åœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ä¹ˆï¼Ÿä¸ï¼Œè¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¥½çš„ç­–ç•¥ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿çš„æ˜¯åœ¨ä»¿çœŸç¬¬<span>n</span>å¸§çš„æ—¶å€™å³è¾¹çš„ä»¿çœŸèƒ½å¤Ÿåº”ç”¨å®Œå…¨ç›¸åŒçš„è¾“å…¥ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä»…ä»…æ˜¯é€šè¿‡<span>TCP</span>æ¥å‘é€â€œæŒ‰é”®æŒ‰ä¸‹â€å’Œâ€œæŒ‰é”®é‡Šæ”¾â€çš„äº‹ä»¶ï¼Œå› ä¸ºè¿™äº›äº‹ä»¶åˆ°è¾¾ç½‘ç»œçš„å¦å¤–ä¸€ä¾§çš„æ—¶é—´å¦‚æœæ—©äºæˆ–è€…æ™šäºç¬¬<span>n</span>å¸§çš„æ—¶å€™éƒ½ä¼šç»™ä»¿çœŸé€ æˆåå·®ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç›¸åæˆ‘ä»¬åšçš„äº‹æƒ…æ˜¯ç”¨ä¸€ä¸ªç»“æ„æ¥è¡¨ç¤ºæ•´ä¸ªè¾“å…¥ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨å·¦è¾¹ä¸€ä¾§ä»¿çœŸå¼€å§‹çš„æ—¶å€™ï¼Œé€šè¿‡é”®ç›˜çš„è®¿é—®æ¥å¡«å……è¿™ä¸ªç»“æ„å¹¶æŠŠå¡«å……å¥½çš„ç»“æ„æ”¾åˆ°ä¸€ä¸ªæ»‘åŠ¨çª—å£ä¸­ï¼Œæˆ‘ä»¬åœ¨åé¢å¯ä»¥æ ¹æ®å¸§å·æ¥å¯¹è¿™ä¸ªè¾“å…¥è¿›è¡Œè®¿é—®ã€‚</span></span></p><div><div id="highlighter_221182" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">Input</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">left;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">right;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">up;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">down;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">space;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">z;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•æ¥æŠŠå·¦è¾¹ä»¿çœŸçš„è¾“å…¥ä¿¡æ¯å‘é€åˆ°å³è¾¹ä»¿çœŸä¸­å»ï¼Œè¿™æ ·å³è¾¹çš„ä»¿çœŸå°±çŸ¥é“å±äºç¬¬<span>n</span>å¸§çš„è¾“å…¥ä¿¡æ¯åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœä½ åœ¨é€šè¿‡<span>TCP</span>è¿›è¡Œå‘é€çš„è¯ï¼Œä½ å¯ä»¥ç®€å•çš„åªå‘é€è¾“å…¥ä¿¡æ¯è€Œä¸å‘é€å…¶ä»–çš„å†…å®¹ï¼Œè€Œå‘é€çš„è¾“å…¥ä¿¡æ¯çš„é¡ºåºéšå«ç€å¸§å·<span>N</span>ã€‚è€Œåœ¨ç½‘ç»œçš„å¦å¤–ä¸€ä¾§ï¼Œä½ å¯ä»¥è¯»å–ä¼ é€è¿‡æ¥çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”å¯¹è¾“å…¥ä¿¡æ¯è¿›è¡Œå¤„ç†å¹¶æŠŠè¾“å…¥ä¿¡æ¯åº”ç”¨åˆ°ä»¿çœŸä¸­å»ã€‚æˆ‘ä¸æ¨èè¿™ç§æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä»è¿™é‡Œå¼€å§‹ï¼Œç„¶åå†å‘ä½ å±•ç¤ºå¦‚ä½•æŠŠè¿™ç§æ–¹æ³•å˜å¾—æ›´å¥½ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åœ¨è¿›ä¸€æ­¥å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œä¼˜åŒ–ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç»Ÿä¸€ä¸‹ä½¿ç”¨çš„ç½‘ç»œç¯å¢ƒï¼Œè®©æˆ‘ä»¬å‡è®¾ä¸‹æˆ‘ä»¬æ˜¯é€šè¿‡<span>TCP</span>è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå·²ç»ç¦æ­¢äº†<span>Nagle</span>ç®—æ³•å¹¶ä¸”æ¯å¸§éƒ½ä¼šä»å·¦è¾¹çš„ä»¿çœŸå‘å³è¾¹çš„ä»¿çœŸå‘é€ä¸€æ¬¡è¾“å…¥ä¿¡æ¯ï¼ˆé¢‘ç‡æ˜¯æ¯ç§’<span>60</span>æ¬¡ï¼‰ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¿™é‡Œé¢æœ‰ä¸€ä¸ªé—®é¢˜ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚ã€‚æŠŠå·¦è¾¹ä»¿çœŸå‘ç”Ÿçš„è¾“å…¥ä¿¡æ¯é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ï¼Œç„¶åå³è¾¹ä»¿çœŸå¹¶æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥ä»ç½‘ç»œä¸Šæ”¶åˆ°è¾“å…¥ä¿¡æ¯å¹¶åˆ©ç”¨è¿™äº›åˆ°è¾¾çš„è¾“å…¥ä¿¡æ¯æ¥æ¨¡æ‹Ÿä»¿çœŸï¼Œå› ä¸ºè¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¸€å®šçš„æ—¶é—´ã€‚ä½ ä¸èƒ½æŒ‰ç…§æŸä¸ªé¢‘ç‡åœ¨ç½‘ç»œä¸Šå‘é€ä¿¡æ¯å¹¶ä¸”æœŸæœ›å®ƒä»¬èƒ½å¤ŸæŒ‰ç…§å®Œå…¨ç›¸åŒä¸€è‡´çš„é¢‘ç‡åˆ°è¾¾ç½‘ç»œçš„å¦å¤–ä¸€ä¾§<span>(</span>æ¯”å¦‚è¯´ï¼Œæ¯å…­ååˆ†ä¹‹ä¸€ç§’åˆ°è¾¾ä¸€ä¸ªæ•°æ®åŒ…<span>)</span>ã€‚äº’è”ç½‘å¹¶ä¸æ˜¯æŒ‰ç…§è¿™ä¸ªæ–¹å¼å·¥ä½œçš„ã€‚æ ¹æœ¬å°±æ²¡æœ‰è¿™æ ·çš„ä¿è¯ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="æ’­æ”¾å»¶è¿Ÿç¼“å†²åŒº">æ’­æ”¾å»¶è¿Ÿç¼“å†²åŒº</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å¦‚æœä½ æƒ³è¦åšåˆ°è¿™ä¸€ç‚¹çš„è¯ï¼Œä½ å¿…é¡»å®ç°ä¸€ä¸ªå«åšæ’­æ”¾å»¶è¿Ÿç¼“å†²åŒºçš„ä¸œè¥¿ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ’­æ”¾å»¶è¿Ÿç¼“å†²åŒºæ”¶åˆ°äº†ä¸“åˆ©ä¿æŠ¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸“åˆ©é›·åŒºã€‚æˆ‘ä¸å»ºè®®è¯»è€…åœ¨å®é™…ä½¿ç”¨ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹çš„æ—¶å€™æœç´¢â€œæ’­æ”¾å»¶è¿Ÿç¼“å†²åŒºâ€æˆ–è€…æ˜¯â€œè‡ªé€‚åº”æ€§å»¶è¿Ÿç¼“å†²åŒºâ€ã€‚ä½†ç®€è€Œè¨€ä¹‹ï¼Œä½ æ‰€éœ€è¦åšçš„äº‹æƒ…æ˜¯ç¼“å­˜æ”¶åˆ°çš„æ•°æ®åŒ…ä¸€å°æ®µæ—¶é—´ä»¥ä¾¿è®©è¿™äº›æ•°æ®åŒ…è¡¨ç°çš„åƒæ˜¯ä»¥ä¸€ä¸ªç¨³å®šçš„é€Ÿåº¦åˆ°è¾¾é‚£æ ·ï¼Œå³ä½¿å®é™…ä¸Šå®ƒä»¬çš„åˆ°è¾¾æ—¶é—´æ˜¯å……æ»¡æŠ–åŠ¨çš„ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½ ç°åœ¨æ‰€åšçš„äº‹æƒ…å°±è·Ÿä½ åœ¨çœ‹ä¸€ä¸ªè§†é¢‘æµçš„æ—¶å€™ï¼Œ<span>Netflix</span>æ‰€åšçš„äº‹æƒ…æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ä½ åœ¨æœ€åˆå¼€å§‹çš„æ—¶å€™åœé¡¿äº†ä¸€ä¸‹ä»¥ä¾¿ä½ å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™æ ·å³ä½¿ä¸€äº›æ•°æ®åŒ…çš„åˆ°è¾¾æ—¶é—´æœ‰ç‚¹æ™šï¼Œä½†æ˜¯è¿™ç§å»¶è¿Ÿä¸ä¼šå¯¹è§†é¢‘å¸§æŒ‰æ­£ç¡®æ—¶é—´é—´è·çš„è¡¨ç°æœ‰ä»€ä¹ˆå½±å“ï¼Œè§†é¢‘å¸§ä»ç„¶ä¼šæŒ‰ç…§æ­£ç¡®çš„æ—¶é—´é—´éš”ä¸€å¸§å¸§çš„æ’­æ”¾ã€‚å½“ç„¶å¦‚æœä½ çš„ç¼“å†²åŒºæ²¡æœ‰è¶³å¤Ÿå¤§çš„è¯ï¼Œé‚£ä¹ˆè¿™äº›è§†é¢‘å¸§çš„æ’­æ”¾å¯èƒ½è¿˜æ˜¯ä¼šå……æ»¡ä¸€äº›æŠ–åŠ¨ã€‚æœ‰äº†ç¡®å®šæ€§çš„å¸§åŒæ­¥æœºåˆ¶ï¼Œä½ çš„æ¨¡æ‹Ÿä»¿çœŸå°†ä¼šä»¥å®Œå…¨ç›¸åŒçš„æ–¹å¼æ‰§è¡Œã€‚æˆ‘å»ºè®®åœ¨æ’­æ”¾çš„æ—¶å€™æœ€å¥½åœ¨ä¸€å¼€å§‹æœ‰<span>100</span>æ¯«ç§’<span>-250</span>æ¯«ç§’çš„å»¶è¿Ÿã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<span>100</span>æ¯«ç§’çš„å»¶è¿Ÿï¼Œè¿™æ˜¯å› ä¸ºæˆ‘è®©å»¶è¿Ÿæœ€å°åŒ–æ¥å¢å¼ºå“åº”æ€§ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">æˆ‘çš„</span><span style="color: rgb(34, 34, 34);">æ’­æ”¾å»¶è¿Ÿç¼“å†²åŒºçš„å®ç°éå¸¸çš„ç®€å•ã€‚æ˜¯å°†è¾“å…¥ä¿¡æ¯æŒ‰ç…§å¸§åºå·è¿›è¡Œæ·»åŠ ï¼Œå½“æ”¶åˆ°ç¬¬ä¸€ä¸ªè¾“å…¥ä¿¡æ¯çš„æ—¶å€™ï¼Œå®ƒä¿å­˜äº†æ¥æ”¶æ–¹æœºå™¨ä¸Šçš„å½“å‰æœ¬åœ°æ—¶é—´ï¼Œå¹¶ä¸”ä»é‚£ä¸€ä¸ªæ—¶åˆ»èµ·å‡è®¾æ‰€æœ‰åˆ°è¾¾çš„æ•°æ®åŒ…éƒ½ä¼šå¸¦ä¸Š<span>100</span>æ¯«ç§’çš„å»¶è¿Ÿã€‚ä½ å¯èƒ½éœ€è¦ä¸€äº›æ›´åŠ å¤æ‚çš„æœºåˆ¶æ¥é€‚åº”çœŸå®ä¸–ç•Œçš„æƒ…å†µï¼Œæ¯”å¦‚è¯´å¯èƒ½éœ€è¦å¤„ç†æ—¶é’Ÿæ¼‚ç§»ã€æ£€æµ‹åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥é€‚å½“çš„åŠ é€Ÿæˆ–è€…å‡æ…¢æ¨¡æ‹Ÿçš„é€Ÿåº¦æ¥è®©ç¼“å†²åŒºçš„å¤§å°åœ¨èƒ½å¤Ÿä¿è¯æ•´ä½“å»¶è¿Ÿæœ€å°çš„æƒ…å†µä¸‹ä¿æŒåœ¨ä¸€ä¸ªé€‚åº¦çš„æƒ…å½¢ï¼ˆè¿™å°±æ˜¯æ‰€è°“çš„â€œè‡ªé€‚åº”â€ï¼‰ï¼Œä½†æ˜¯è¿™äº›å†…å®¹å¯èƒ½ä¼šç›¸å½“çš„å¤æ‚å¹¶ä¸”å¯èƒ½éœ€è¦ä¸€æ•´ç¯‡æ–‡ç« æ¥ä¸“é—¨å¯¹è¿™äº›æƒ…å†µè¿›è¡Œä¸“é—¨è®ºè¿°ã€‚è€Œä¸”å¦‚å‰æ‰€è¿°ï¼Œè¿™äº›å†…å®¹è¿˜æ¶‰åŠåˆ°äº†ä¸“åˆ©ä¿æŠ¤æ–¹é¢çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™äº›å†…å®¹æˆ‘å°±ä¸è¯¦ç»†å±•å¼€äº†ï¼ŒæŠŠå¦‚ä½•å¤„ç†è¿™äº›ä¸œè¥¿å…¨éƒ¨æ‰˜ä»˜ç»™ä½ è‡ªå·±å®ç°ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œæ’­æ”¾å»¶è¿Ÿç¼“å†²åŒºç»™å¸§<span>n</span>ã€<span>n+1</span>ã€<span>n+2</span>ä»¥åŠåç»­çš„å¸§æä¾›äº†ä¸€ä¸ªç¨³å®šçš„è¾“å…¥ä¿¡æ¯æµï¼Œéå¸¸å®Œç¾çš„ä»¥å…­ååˆ†ä¹‹ä¸€ç§’çš„é—´éš”ä¾æ¬¡åˆ°è¾¾ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå°±æ˜¯å·²ç»è¯¥æ‰§è¡Œç¬¬<span>N</span>å¸§çš„æ¨¡æ‹Ÿä»¿çœŸäº†ï¼Œä½†æ˜¯è¿™ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œè¿™æ ·æ•´ä¸ªæ¨¡æ‹Ÿä»¿çœŸå°±å¿…é¡»åœ¨é‚£é‡Œè¿›è¡Œç­‰å¾…äº†ã€‚å¦‚æœæ•°æ®åŒ…è¢«é›†ä¸­èµ·æ¥å‘é€å¹¶ä¸”åˆ°è¾¾æ¥æ”¶æ–¹çš„æ—¶å€™å·²ç»æ¯”é¢„æœŸæ—¶é—´å»¶è¿Ÿäº†ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªå¸§çš„è¾“å…¥ä¿¡æ¯åŒæ—¶å‡†å¤‡å¥½ç­‰å¾…å‡ºåˆ—è¿›è¡Œè®¡ç®—ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µçš„è¯ï¼Œæˆ‘ä¼šé™åˆ¶åœ¨ä¸€ä¸ªæ¸²æŸ“å¸§çš„æ—¶é—´æœ€å¤šåªèƒ½è¿›è¡Œ<span>4</span>æ¬¡æ¨¡æ‹Ÿä»¿çœŸï¼Œè¿™æ ·ç»™æ¨¡æ‹Ÿä»¿çœŸä¸€ä¸ªè¿½ä¸Šæ¥çš„æœºä¼šã€‚å¦‚æœä½ æŠŠè¿™ä¸ªå€¼è®¾ç½®çš„æ›´é«˜çš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¼•èµ·æ›´å¤šå…¶ä»–çš„é—®é¢˜ï¼Œæ¯”å¦‚å¡é¡¿ï¼Œå› ä¸ºä½ å¯èƒ½éœ€è¦è¶…è¿‡å…­ååˆ†ä¹‹ä¸€ç§’çš„æ—¶é—´æ¥è¿è¡Œè¿™äº›å¸§ï¼ˆè¿™å¯èƒ½ä¼šé€ æˆä¸€ä¸ªéå¸¸ä¸å¥½çš„åé¦ˆä½“éªŒï¼‰ã€‚æ€»è€Œè¨€ä¹‹ï¼Œé‡è¦çš„æ˜¯ç¡®ä¿ä½ çš„æ¨¡æ‹Ÿä»¿çœŸåœ¨ä½¿ç”¨ç¡®å®šæ€§çš„å¸§åŒæ­¥è¿™ä¸ªæ–¹æ¡ˆçš„æ—¶å€™æ€§èƒ½ä¸æ˜¯åœ¨ä¸­å¤®å¤„ç†å™¨è¿™ä¸€ç«¯å—é™çš„ï¼Œå¦åˆ™çš„è¯ï¼Œä½ åœ¨è¿è¡Œæ›´å¤šçš„æ¨¡æ‹Ÿå¸§æ¥è¿½ä¸Šæ­£å¸¸çš„æ¨¡æ‹Ÿé€Ÿåº¦çš„æ—¶å€™ä¼šé‡åˆ°å¾ˆå¤šéº»çƒ¦ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="TCPè¶³å¤Ÿå¥½äº†å—">TCPè¶³å¤Ÿå¥½äº†å—</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">é€šè¿‡ä½¿ç”¨è¿™ç§å»¶è¿Ÿç¼“å†²åŒºçš„ç­–ç•¥ä»¥åŠé€šè¿‡<span>TCP</span>åè®®æ¥å‘é€è¾“å…¥ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„ç¡®ä¿æ‰€æœ‰çš„è¾“å…¥ä¿¡æ¯ä¼šæœ‰åºçš„åˆ°è¾¾å¹¶ä¸”ä¼ è¾“æ˜¯å¯ä¿¡èµ–çš„ã€‚è¿™å°±æ˜¯ä¸€å¼€å§‹<span>TCP</span>åè®®åœ¨è®¾è®¡çš„æ—¶å€™å¸Œæœ›è¾¾åˆ°çš„ç›®æ ‡ã€‚å®é™…ä¸Šï¼Œä¸‹é¢è¿™äº›ä¸œè¥¿å°±æ˜¯äº’è”ç½‘çš„ä¸“å®¶å¸¸è¯´çš„ä¸€äº›ä¸œè¥¿ï¼š</span></span></p><p class="MsoListParagraph" align="left" style="margin-left: 36pt; text-indent: -18pt; line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">Â·<span style="font-variant-numeric: normal; font-stretch: normal; line-height: normal;"> </span></span><span style="color: rgb(34, 34, 34);">å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯ä»¥ä¿¡èµ–çš„æœ‰åºçš„å‘é€ä¿¡æ¯çš„æ–¹æ³•ï¼Œä½ ä¸å¯èƒ½æ‰¾åˆ°ä¸€ç§æ¯”é€šè¿‡<span>TCP</span>åè®®è¿›è¡Œä¼ è¾“æ›´å¥½çš„æ–¹æ³•ï¼</span></span></p><p class="MsoListParagraph" align="left" style="margin-left: 36pt; text-indent: -18pt; line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">Â·<span style="font-variant-numeric: normal; font-stretch: normal; line-height: normal;"> </span></span><span style="color: rgb(34, 34, 34);">ä½ çš„æ¸¸æˆæ ¹æœ¬å°±ä¸ä¼šéœ€è¦<span>UDP</span>åè®®ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æˆ‘åœ¨è¿™é‡Œå°†å‘Šè¯‰ä½ ä¸Šé¢è¿™äº›æƒ³æ³•éƒ½æ˜¯å¤§é”™ç‰¹é”™çš„ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_3.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åœ¨ä¸Šé¢çš„è§†é¢‘ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚æœç½‘ç»œåŒæ­¥æ¨¡å‹ä½¿ç”¨åŸºäº<span>TCP</span>åè®®çš„ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹çš„è¯ï¼Œæ¨¡æ‹Ÿä»¿çœŸçš„ç½‘ç»œå»¶è¿Ÿå¤§æ¦‚æ˜¯<span>100</span>æ¯«ç§’ï¼Œå¹¶ä¸”æœ‰ç™¾åˆ†ä¹‹ä¸€çš„ä¸¢åŒ…ç‡ã€‚å¦‚æœä½ ä»”ç»†çœ‹å³è¾¹çš„è¯ï¼Œä½ å¯ä»¥æ¯éš”å‡ ç§’å°±ä¼šå‡ºç°ä¸€äº›æŠ–åŠ¨ã€‚å¦‚æœä½ åœ¨ä¸¤è¾¹éƒ½å‡ºç°è¿™ç§çš„æƒ…å†µï¼Œé‚£ä¹ˆå¾ˆæŠ±æ­‰è¿™æ„å‘³ç€ä½ çš„ç”µè„‘çš„æ€§èƒ½å¯¹äºæ’­æ”¾è¿™äº›è§†é¢‘è€Œè¨€å¯èƒ½æœ‰äº›è‰°éš¾ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µçš„è¯ï¼Œæˆ‘å»ºè®®ä¸‹è½½è¿™ä¸ªè§†é¢‘ç„¶åç¦»çº¿è§‚çœ‹ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™é‡Œæ‰€å‘ç”Ÿçš„äº‹æƒ…æ˜¯å½“ä¸€ä¸ªæ•°æ®åŒ…ä¸¢å¤±çš„æ—¶å€™ï¼Œ<span>TCP</span>åè®®éœ€è¦ç­‰å¾…è‡³å°‘ï¼’ä¸ªå¾€è¿”æ—¶å»¶æ‰ä¼šé‡æ–°å‘é€è¿™ä¸ªæ•°æ®åŒ…ï¼ˆå®é™…ä¸Šè¿™é‡Œé¢çš„ç­‰å¾…æ—¶é—´å¯èƒ½ä¼šæ›´ç³Ÿï¼Œä½†æ˜¯æˆ‘å¾ˆæ…·æ…¨çš„è®¾å®šäº†ä¸€ä¸ªéå¸¸ç†æƒ³çš„æƒ…å†µã€‚ã€‚ã€‚ï¼‰ã€‚æ‰€ä»¥ä¸Šé¢å‘ç”Ÿçš„æŠ–åŠ¨åŸå› æ˜¯ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹è¦æ±‚å³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸåœ¨æ²¡æœ‰ç¬¬<span>n</span>å¸§çš„è¾“å…¥ä¿¡æ¯çš„æ—¶å€™ä¸èƒ½æ‰§è¡Œç¬¬<span>N</span>å¸§çš„æ¨¡æ‹Ÿä»¿çœŸè®¡ç®—ï¼Œæ‰€ä»¥æ•´ä¸ªæ¨¡æ‹Ÿä»¿çœŸå°±åœä¸‹æ¥ç­‰å¾…å¯¹åº”å¸§çš„è¾“å…¥ä¿¡æ¯çš„åˆ°è¾¾<span>!</span></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span><br></span></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼éšç€å»¶è¿Ÿæ—¶é—´çš„å¢å¤§å’Œä¸¢åŒ…ç‡çš„å¢åŠ ï¼Œæ•´ä¸ªæƒ…å†µä¼šå˜å¾—æ›´åŠ çš„ç³Ÿç³•ã€‚è¿™æ˜¯åœ¨<span>250</span>æ¯«ç§’å»¶è¿Ÿå’Œç™¾åˆ†ä¹‹äº”ä¸¢åŒ…ç‡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨åŸºäº<span>TCP</span>åè®®çš„ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹è¿›è¡Œç›¸åŒçš„ä»¿çœŸæ¨¡æ‹Ÿè¿ç®—å¯¼è‡´çš„ç»“æœï¼š</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_4.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç°åœ¨æˆ‘è¦æ‰¿è®¤ä¸€ä¸ªäº‹æƒ…ï¼Œå¦‚æœå»¶è¿Ÿæ—¶é—´è®¾ç½®çš„éå¸¸ä½çš„è¯åŒæ—¶ä¸å­˜åœ¨ä¸¢åŒ…çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆä½¿ç”¨<span>TCP</span>åè®®è¿›è¡Œè¾“å…¥ä¿¡æ¯çš„ä¼ è¾“ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¯ä»¥æ¥å—çš„ç»“æœã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨<span>TCP</span>åè®®æ¥å‘é€æ—¶é—´æ•æ„Ÿçš„æ•°æ®çš„è¯ï¼Œéšç€å»¶è¿Ÿæ—¶é—´çš„å¢å¤§å’Œä¸¢åŒ…ç‡çš„å¢åŠ ï¼Œæ•´ä¸ªç»“æœä¼šæ€¥å‰§æ¶åŒ–ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><br><h2 id="æˆ‘ä»¬èƒ½æ¯”TCPåšå¾—æ›´å¥½å—">æˆ‘ä»¬èƒ½æ¯”TCPåšå¾—æ›´å¥½å—</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½å—<span>?</span>æˆ‘ä»¬èƒ½åœ¨è‡ªå·±çš„æ¸¸æˆé‡Œé¢æ‰¾åˆ°ä¸€ç§æ¯”ä½¿ç”¨<span>TCP</span>åè®®æ›´å¥½çš„åŠæ³•ã€‚åŒæ—¶è¿˜èƒ½å®ç°å¯ä¿¡èµ–çš„æœ‰åºä¼ é€’ï¼Ÿ</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ä½†å‰ææ˜¯æˆ‘ä»¬éœ€è¦æ”¹å˜æ¸¸æˆçš„è§„åˆ™ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä¸‹é¢å°†å…·ä½“æè¿°ä¸‹æˆ‘ä»¬å°†ä½¿ç”¨çš„æŠ€å·§ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿æ‰€æœ‰çš„è¾“å…¥ä¿¡æ¯èƒ½å¤Ÿå¯é åœ°æŒ‰é¡ºåºåˆ°è¾¾ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åªå‘é€<span>UDP</span>æ•°æ®åŒ…è¾“å…¥ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åªä½¿ç”¨<span>UDP</span>æ•°æ®åŒ…æ¥å‘é€è¾“å…¥ä¿¡æ¯çš„è¯ï¼Œè¿™é‡Œé¢çš„ä¸€äº›æ•°æ®åŒ…ä¼šä¸¢å¤±ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸é‡‡ç”¨äº‹åæ£€æµ‹çš„æ–¹æ³•æ¥åˆ¤æ–­å“ªäº›æ•°æ®åŒ…ä¸¢å¤±å¹¶å‘é€è¿™äº›ä¸¢å¤±çš„æ•°æ®åŒ…çš„è¯ï¼Œæˆ‘ä»¬é‡‡ç”¨å¦å¤–ä¸€ç§æ–¹æ³•ï¼Œåªæ˜¯æŠŠæˆ‘ä»¬æœ‰çš„æ‰€æœ‰è¾“å…¥ä¿¡æ¯éƒ½å†—ä½™çš„å‘é€ç›´åˆ°æˆ‘ä»¬çŸ¥é“è¿™äº›è¾“å…¥ä¿¡æ¯æˆåŠŸçš„åˆ°è¾¾å¦å¤–ä¸€ä¾§æ€ä¹ˆæ ·ï¼Ÿ</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¾“å…¥ä¿¡æ¯éƒ½éå¸¸éå¸¸çš„å°ï¼ˆåªæœ‰<span>6</span>æ¯”ç‰¹è¿™ä¹ˆå¤§ï¼‰ã€‚è®©æˆ‘ä»¬å‡è®¾ä¸‹æˆ‘ä»¬åœ¨æ¯ç§’éœ€è¦å‘é€<span>60</span>ä¸ªè¾“å…¥ä¿¡æ¯ï¼ˆå› ä¸ºæ¨¡æ‹Ÿä»¿çœŸçš„é¢‘ç‡æ˜¯<span>60fps </span>ï¼‰ï¼Œè€Œä¸”æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå¾€è¿”çš„æ—¶é—´å¤§æ¦‚æ˜¯åœ¨<span>30</span>æ¯«ç§’åˆ°<span>250</span>æ¯«ç§’ä¹‹é—´ã€‚çº¯ç²¹ä¸ºäº†å¥½ç©ï¼Œè®©æˆ‘ä»¬å‡è®¾ä¸‹è½½æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¾€è¿”çš„æ—¶é—´å¯ä»¥é«˜è¾¾<span>2</span>ç§’ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µçš„è¯ï¼Œé‚£ä¹ˆæ•´ä¸ªè¿æ¥å°±ä¼šè¶…æ—¶ã€‚è¿™æ„å‘³ç€åœ¨å¹³å‡æƒ…å†µæˆ‘ä»¬åªéœ€è¦åŒ…æ‹¬å¤§æ¦‚<span>2</span>åˆ°<span>15</span>å¸§çš„è¾“å…¥ä¿¡æ¯ï¼Œè€Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¤§æ¦‚éœ€è¦<span>120</span>å¸§çš„è¾“å…¥ä¿¡æ¯ã€‚é‚£ä¹ˆæœ€åæƒ…å†µä¸‹ï¼Œè¾“å…¥ä¿¡æ¯çš„å¤§å°æ˜¯<span>120 x 6 = 720</span>æ¯”ç‰¹ã€‚è¿™åªæ˜¯<span>90</span>å­—èŠ‚çš„è¾“å…¥ä¿¡æ¯<span>!</span>è¿™æ˜¯å®‰å…¨åˆç†çš„ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æˆ‘ä»¬è¿˜èƒ½åšçš„æ›´å¥½ã€‚åœ¨æ¯ä¸€å¸§ä¸­éƒ½å‡ºç°è¾“å…¥ä¿¡æ¯çš„å˜åŒ–æ˜¯éå¸¸ä¸å¸¸è§çš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æœ€è¿‘çš„é‚£ä¸ªinputçš„åºåˆ—å·å’Œç¬¬ä¸€ä¸ªinputçš„<span>6</span>æ¯”ç‰¹è¿˜æœ‰æ‰€æœ‰æœªè¢«ç¡®è®¤çš„è¾“å…¥ä¿¡æ¯çš„æ•°ç›®æ¥åšä¸€äº›äº‹ã€‚ç„¶åï¼Œå½“æˆ‘ä»¬å¯¹è¿™äº›è¾“å…¥ä¿¡æ¯è¿›è¡Œéå†å°†å®ƒä»¬å†™å…¥æ•°æ®åŒ…çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°è¿™ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯å¦‚æœå’Œä¹‹å‰å¸§çš„è¾“å…¥ä¿¡æ¯ä¸åŒçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å…¥ä¸€ä¸ªå•ç‹¬çš„æ¯”ç‰¹ä½ï¼ˆ<span>1</span>ï¼‰ï¼Œå¦‚æœå‘ç°è¿™ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯å¦‚æœå’Œä¹‹å‰å¸§çš„è¾“å…¥ä¿¡æ¯ç›¸åŒçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å…¥ä¸€ä¸ªå•ç‹¬çš„æ¯”ç‰¹ä½ï¼ˆ<span>0</span>ï¼‰ã€‚æ‰€ä»¥è¿™ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯å¦‚æœå’Œä¹‹å‰å¸§çš„è¾“å…¥ä¿¡æ¯ä¸åŒçš„è¯ï¼ˆè¿™ç§æƒ…å†µæ¯”è¾ƒå°‘ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å†™å…¥<span>7</span>ä¸ªæ¯”ç‰¹ä½ï¼Œè¿™ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯å¦‚æœå’Œä¹‹å‰å¸§çš„è¾“å…¥ä¿¡æ¯ç›¸åŒçš„è¯ï¼ˆè¿™ç§æƒ…å†µå…¶å®éå¸¸å¸¸è§ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦å†™å…¥<span>1</span>ä¸ªæ¯”ç‰¹ä½ã€‚åœ¨è¾“å…¥ä¿¡æ¯å¾ˆå°‘å‘ç”Ÿå˜åŒ–çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§çš„èƒœåˆ©ï¼Œè€Œåœ¨æœ€åçš„æƒ…å†µä¸‹å‡ºç°çš„æƒ…å†µä¹Ÿä¸ä¼šéå¸¸ç³Ÿç³•ã€‚åªéœ€è¦å‘é€é¢å¤–<span>120</span>ä¸ªæ¯”ç‰¹çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æœ€åæƒ…å†µä¸‹ï¼Œä¹Ÿåªæœ‰<span>15</span>å­—èŠ‚çš„é¢å¤–å¼€é”€.</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å½“ç„¶åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ä»å³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸä¸­å‘é€ä¸€ä¸ªæ•°æ®åŒ…åˆ°å·¦è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸä¸­å»ï¼Œè¿™æ ·å·¦è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸæ‰çŸ¥é“å“ªäº›è¾“å…¥ä¿¡æ¯è¢«æˆåŠŸæ”¶åˆ°äº†ã€‚åœ¨æ¯ä¸€å¸§ï¼Œå³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸéƒ½ä¼šä»ç½‘ç»œä¸­è¯»å–è¾“å…¥çš„æ•°æ®åŒ…ï¼Œç„¶åæ‰ä¼šæŠŠè¿™äº›æ•°æ®åŒ…æ·»åŠ åˆ°å»¶è¿Ÿæ’­æ”¾ç¼“å†²åŒºï¼Œå¹¶ä¸”é€šè¿‡å¸§å·è®°å½•å®ƒå·²ç»æ”¶åˆ°çš„æœ€è¿‘é‚£ä¸€å¸§çš„è¾“å…¥ä¿¡æ¯ï¼Œæˆ–è€…å¦‚æœä½ æƒ³å®¹æ˜“ä¸€ç‚¹å¤„ç†è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸€ä¸ª<span>16</span>æ¯”ç‰¹çš„åºåˆ—å·å°±èƒ½å¾ˆå¥½çš„åŒ…è£…è¿™ä¸ªä¿¡æ¯ã€‚åœ¨æ‰€æœ‰çš„è¾“å…¥æ•°æ®åŒ…éƒ½è¢«å¤„ç†ä»¥åï¼Œå¦‚æœå³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸæ”¶åˆ°ä»»ä½•å¸§çš„è¾“å…¥ä¿¡æ¯ä»¥åéƒ½ä¼šå›å¤ä¸€ä¸ªæ•°æ®åŒ…ç»™å·¦è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸï¼Œå‘Šè¯‰å®ƒæœ€è¿‘æ”¶åˆ°çš„æœ€æ–°åºåˆ—å·æ˜¯å¤šå°‘ï¼Œè¿™åŸºæœ¬å°±æ˜¯ä¸€ä¸ªâ€œ<span>ack</span>â€åŒ…ï¼Œä¹Ÿå°±æ˜¯ç¡®è®¤åŒ…ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å½“å·¦è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸæ”¶åˆ°è¿™ä¸ªâ€œ<span>ack</span>â€åŒ…ï¼Œä¹Ÿå°±æ˜¯ç¡®è®¤åŒ…ä»¥åï¼Œå®ƒä¼šæ»‘åŠ¨è¾“å…¥ä¿¡æ¯çª—å£å¹¶ä¸”ä¸¢å¼ƒæ¯”å·²ç»ç¡®è®¤çš„åºåˆ—å·è¿˜è€çš„è¾“å…¥ä¿¡æ¯åŒ…ã€‚å·²ç»æ²¡æœ‰å¿…è¦å†å‘é€è¿™äº›è¾“å…¥ä¿¡æ¯åŒ…ç»™å³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸäº†ï¼Œå› ä¸ºå·²ç»çŸ¥é“å³è¾¹çš„æ¨¡æ‹Ÿä»¿çœŸæˆåŠŸçš„æ¥å—åˆ°äº†è¿™äº›è¾“å…¥ä¿¡æ¯åŒ…ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬é€šå¸¸åªæœ‰å°‘é‡çš„è¾“å…¥ä¿¡æ¯æ­£åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œè€Œä¸”è¿™ä¸ªæ•°é‡è¿˜æ˜¯ä¸æ•°æ®åŒ…çš„å¾€è¿”æ—¶é—´æˆæ­£æ¯”çš„ã€‚</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><h2 id="å®Œç¾èƒœåˆ©">å®Œç¾èƒœåˆ©</h2><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æˆ‘ä»¬é€šè¿‡æ”¹å˜æ¸¸æˆçš„è§„åˆ™æˆåŠŸäº†æ‰¾åˆ°äº†ä¸€ç§æ¯”<span>TCP</span>åè®®æ›´å¥½çš„åŠæ³•ã€‚æˆ‘ä»¬å¹¶ä¸æ˜¯é€šè¿‡åœ¨<span>UDP</span>åè®®çº¸ä¸Šæ„å»ºäº†å®ç°<span>TCP</span>åè®®ç™¾åˆ†ä¹‹ä¹åäº”çš„åŠŸèƒ½çš„æ–°åè®®ï¼Œè€Œæ˜¯å®ç°äº†ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹æ³•ï¼Œè€Œä¸”æ›´åŠ é€‚åˆæˆ‘ä»¬çš„è¦æ±‚ï¼šæ•°æ®å¯¹æ—¶é—´éå¸¸æ•æ„Ÿã€‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„åè®®ï¼Œå¯ä»¥å†—ä½™çš„å‘é€inputï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“è¿™äº›inputéå¸¸å°, æ‰€ä»¥æˆ‘ä»¬ä¸å¿…å»ç­‰å¾…é‡ä¼ å®ƒä»¬ã€‚</span></span><p></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(34, 34, 34);">æ‰€ä»¥è¿™ç§æ–¹æ³•åˆ°åº•æ¯”é€šè¿‡</span><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(34, 34, 34);">TCP</span><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(34, 34, 34);">åè®®æ¥å‘é€æ•°æ®å¥½å¤šå°‘å‘¢ï¼Ÿ</span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family: å¾®è½¯é›…é»‘; font-size: medium; color: rgb(34, 34, 34);">è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ã€‚</span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video autoplay preload="auto" loop="true" width="100%" controls="controls"><br><source src="/img/deterministic_lockstep_5.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä¸Šé¢çš„è§†é¢‘æ˜¯åŸºäº<span>UDP</span>åè®®æ¥ä½¿ç”¨å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹ï¼Œå»¶è¿Ÿæ—¶é—´æ˜¯ï¼’ç§’ï¼Œå¹¶ä¸”æœ‰ç™¾åˆ†ä¹‹äºŒåäº”çš„ä¸¢åŒ…ç‡ã€‚æƒ³è±¡ä¸‹å¦‚æœæˆ‘ä»¬æ˜¯ä½¿ç”¨åŸºäº<span>TCP</span>åè®®çš„å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥æ¨¡å‹ï¼Œæˆ‘ä»¬è¯¥çœ‹åˆ°å¤šä¹ˆå¯æ€•çš„åœºæ™¯ï¼</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æ‰€ä»¥æœ€åæˆ‘ä»¬èƒ½å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªç»“è®ºï¼šå³ä½¿è¿™æ˜¯ä¸€ä¸ª<span>TCP</span>åè®®æœ€å…·æœ‰ä¼˜åŠ¿çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å”¯ä¸€ä¸€ä¸ªä¾èµ–å¯é æ€§ã€æœ‰åºæ€§æ•°æ®ä¼ è¾“çš„ç½‘ç»œæ¨¡å‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å¾ˆå®¹æ˜“çš„é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰çš„åè®®åŸºäº<span>UDP</span>æ¥å‘é€æˆ‘ä»¬çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”å¾—åˆ°çš„æ•ˆæœæ›´å¥½ã€‚</span></span></p><p class="MsoNormal" align="left"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ã€ç‰ˆæƒå£°æ˜ã€‘</span></span></p><p class="MsoNormal"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åŸæ–‡ä½œè€…æœªåšæƒåˆ©å£°æ˜ï¼Œè§†ä¸ºå…±äº«çŸ¥è¯†äº§æƒè¿›å…¥å…¬å…±é¢†åŸŸï¼Œè‡ªåŠ¨è·å¾—æˆæƒã€‚</span></span></p><p class="MsoNormal"><span><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"> </span></span></p></div>                    </div><br>                </div>
</div>
      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º/" rel="next" title="ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    ç½‘ç»œç‰©ç†æ¨¡æ‹ŸäºŒä¹‹ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„è§†é¢‘æ¼”ç¤º
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/snapshot_interpolation/" rel="prev" title="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå››ä¹‹å¿«ç…§æ’å€¼">
                <p class="post-nav-pre-next-title">
                    ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå››ä¹‹å¿«ç…§æ’å€¼
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">298</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->

        </div>

        
        

        
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#è‡ªæˆ‘æ€»ç»“"><span class="nav-text">è‡ªæˆ‘æ€»ç»“</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸæ–‡"><span class="nav-text">åŸæ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#determinism"><span class="nav-text">Determinism</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#networking-inputs"><span class="nav-text">Networking Inputs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#playout-delay-buffer"><span class="nav-text">Playout Delay Buffer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#is-tcp-good-enough"><span class="nav-text">Is TCP good enough?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#can-we-do-better-than-tcp"><span class="nav-text">Can we do better than TCP?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flawless-victory"><span class="nav-text">Flawless Victory</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è¯‘æ–‡"><span class="nav-text">è¯‘æ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»‹ç»"><span class="nav-text">ä»‹ç»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¡®å®šæ€§"><span class="nav-text">ç¡®å®šæ€§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç½‘ç»œè¾“å…¥"><span class="nav-text">ç½‘ç»œè¾“å…¥ Inputs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ’­æ”¾å»¶è¿Ÿç¼“å†²åŒº"><span class="nav-text">æ’­æ”¾å»¶è¿Ÿç¼“å†²åŒº</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCPè¶³å¤Ÿå¥½äº†å—"><span class="nav-text">TCPè¶³å¤Ÿå¥½äº†å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æˆ‘ä»¬èƒ½æ¯”TCPåšå¾—æ›´å¥½å—"><span class="nav-text">æˆ‘ä»¬èƒ½æ¯”TCPåšå¾—æ›´å¥½å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®Œç¾èƒœåˆ©"><span class="nav-text">å®Œç¾èƒœåˆ©</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
