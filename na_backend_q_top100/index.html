<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if('mmp'){
            let localStoragePasswdKey = 'Java backend Q top 100' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== 'mmp') {
                    if (password != null) {
                        // 如果用户点击了确认而且密码错误的时候, 因为当password == null的时候说明用户点了取消
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== 'mmp') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="noodle,Java,NA,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content=". . .">
<meta name="keywords" content="noodle,Java,NA">
<meta property="og:type" content="article">
<meta property="og:title" content="Java backend Q top 100">
<meta property="og:url" content="https://hulinhong.com/na_backend_q_top100/index.html">
<meta property="og:site_name" content="🚙">
<meta property="og:description" content=". . .">
<meta property="og:locale" content="en">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:updated_time" content="2025-10-15T02:49:27.216Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java backend Q top 100">
<meta name="twitter:description" content=". . .">
<meta name="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>Java backend Q top 100 | 🚙</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">🚙</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">💨 💨 💨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">×</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/na_backend_q_top100/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="🚙">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java backend Q top 100</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-18T23:51:01+00:00">
                02-18-2019
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Noodle/" itemprop="url" rel="index">
                    <span itemprop="name">Noodle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
              
                <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
              
                <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/ssr_server/" rel="next" title="SSR server">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  SSR server
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/na_backend_q_extra/" rel="prev" title="Java backend optional Q extra">
              <p class="post-nav-pre-next-title">
                  Java backend optional Q extra
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <p><strong>. . .</strong><a id="more"></a></p>
<h1 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h1><h2 id="353-When-you-API-request-or-Frontend-page-loading-slowly-how-do-you-handle-it"><a href="#353-When-you-API-request-or-Frontend-page-loading-slowly-how-do-you-handle-it" class="headerlink" title="353. When you API request or Frontend page loading slowly, how do you handle it?"></a>353. When you API request or Frontend page loading slowly, how do you handle it?</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>Key things:</p>
<ol>
<li>For large dataset request, you can use <strong>Pagination</strong>. Just like google search, you can split your data into batches, each request only fetch fixed amount of rows.</li>
<li>Use <strong>cache</strong> instead of database visit, Frontend: cache the visited page data. Backend: <strong>in-memory</strong> java cache for monolithic application, distributed cache, <strong>redis</strong>, for microservices.</li>
<li>Other tools can help improve read performance, like elasticsearch can boost the search.</li>
<li>Database side: <strong>Optimize the SQL</strong>, use Sql tuning tools, like the Oracle explain plan. Add proper index (non-cluster index) on some frequently visited columns.</li>
</ol>
<hr>
<h2 id="298-Key-Difference-Soap-vs-Rest"><a href="#298-Key-Difference-Soap-vs-Rest" class="headerlink" title="298. Key Difference: Soap vs Rest"></a>298. Key Difference: Soap vs Rest</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>SOAP (Simple Object Access Protocol) and REST (Representational State Transfer) are both architectural styles used for data exchange over a network. They have several differences in design concepts, usage scenarios, etc. Here is a detailed introduction for you:</p>
<ol>
<li><p>Protocol Characteristics</p>
<ul>
<li><strong>SOAP</strong>: It is an XML-based protocol with a strict message format specification. It uses XML to describe the structure and content of messages. A SOAP message consists of parts such as Envelope, Header, and Body. This strict format makes message parsing and validation more standardized.</li>
<li><strong>REST</strong>: It is not a protocol but an architectural style. It doesn’t have a strict message format requirement. Usually, it uses various methods of the HTTP protocol (such as GET, POST, PUT, DELETE) to operate on resources. The message format can be XML, JSON, etc. However, due to its lightweight and simplicity, JSON is more widely used in RESTful APIs.</li>
</ul>
</li>
<li><p>Data Transmission</p>
<ul>
<li><strong>SOAP</strong>: Since XML is used for data transmission, the tags and structure of XML will increase the size of the data, resulting in relatively low transmission efficiency. However, the self-descriptiveness of XML makes SOAP messages clearer and easier to understand.</li>
<li><strong>REST</strong>: The JSON data format is relatively concise, small in size, and has high transmission efficiency. In the mobile Internet and scenarios with high performance requirements, the advantages of REST are more obvious.</li>
</ul>
</li>
<li><p>Service Discovery</p>
<ul>
<li><strong>SOAP</strong>: It usually uses WSDL (Web Services Description Language) to describe the interface and operations of the service. Clients can understand the functions and invocation methods of the service through WSDL. WSDL is an XML-based document that describes in detail the input and output parameters and operation methods of the service.</li>
<li><strong>REST</strong>: There is no specific service description language. Usually, API documentation is used to describe the interface and usage methods of the service. The design of RESTful APIs pays more attention to the use of resource URIs and HTTP methods, making the semantics of the interface more intuitive.</li>
</ul>
</li>
<li><p>Error Handling</p>
<ul>
<li><strong>SOAP</strong>: It has a dedicated error handling mechanism and passes error information through SOAP Fault. SOAP Fault contains the error code, description, and detailed information, enabling the client to accurately understand the cause of the error.</li>
<li><strong>REST</strong>: It usually uses HTTP status codes to represent errors. For example, 404 indicates that the resource was not found, and 500 indicates an internal server error, etc. Although HTTP status codes can provide basic error information, for some complex error scenarios, additional error descriptions may need to be added in the response body.</li>
</ul>
</li>
<li><p>Security</p>
<ul>
<li><strong>SOAP</strong>: It supports a variety of security mechanisms, such as WS-Security, which can encrypt, sign, and other operations on messages to ensure the security and integrity of messages. In addition, SOAP can be integrated with enterprise-level security systems, such as LDAP, Kerberos, etc.</li>
<li><strong>REST</strong>: It mainly relies on the security mechanisms of the HTTP protocol, such as HTTPS to ensure the security of data transmission. In terms of authentication, RESTful APIs usually use methods such as OAuth and JWT for identity authentication and authorization.</li>
</ul>
</li>
<li><p>Usage Scenarios</p>
<ul>
<li><strong>SOAP</strong>: It is suitable for enterprise-level application scenarios with high requirements for security, transactionality, and reliability, such as the financial and telecommunications industries. In these scenarios, the accuracy and integrity of data are of great importance, and the strict specifications and security mechanisms of SOAP can meet these needs.</li>
<li><strong>REST</strong>: It is more suitable for Internet applications, mobile applications, and other scenarios with high requirements for performance and development efficiency. The simplicity and flexibility of RESTful APIs enable developers to quickly build and iterate services.</li>
</ul>
</li>
</ol>
<p>Example Code Comparison</p>
<figure class="highlight python"><figcaption><span>SOAP Example</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> zeep <span class="keyword">import</span> Client</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a SOAP client</span></span><br><span class="line">client = Client(<span class="string">'http://www.example.com/service?wsdl'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Invoke the service method</span></span><br><span class="line">result = client.service.SomeMethod(param1=<span class="string">'value1'</span>, param2=<span class="string">'value2'</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>REST Example</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># Send a GET request</span></span><br><span class="line">response = requests.get(<span class="string">'http://www.example.com/api/resource'</span>)</span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    data = response.json()</span><br><span class="line">    print(data)</span><br></pre></td></tr></table></figure>
<p>In conclusion, both SOAP and REST have their own advantages and disadvantages. When choosing which architectural style to use, a comprehensive consideration should be made according to specific application scenarios and requirements.</p>
<hr>
<h2 id="354-How-do-you-implement-security-for-your-application-or-microservices"><a href="#354-How-do-you-implement-security-for-your-application-or-microservices" class="headerlink" title="354. How do you implement security for your application or microservices"></a>354. How do you implement security for your application or microservices</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>Principles:</p>
<p>For Authentication</p>
<ul>
<li><strong>Basic Authentication</strong>: use username and password authentication. the password should be encrypted. common encryption algorithm: BCrypt, SHA256, RSA.</li>
<li><strong>JWT Token</strong>: When the first time user login with username and password, backend will create a JWT token which contains the user info, the token will be stored in the frontend cookie. Every single request will carry this token, backend will validate this token to decide if user is authenticated. A token usually has a expiration time.</li>
<li><strong>Asymmetric key pairs</strong>: this is used for something like AWS command portal validation. It create a private key on server side and give public key to the client side. client with public key should be able to match with the private key on the server side.</li>
<li><strong>OAuth2</strong>: this is like 3rd party SSO (single sign on). Like for some applications, you can login with google or facebook. The application is pre-registered with the 3rd party, when a user login, it sends a request to 3rd party authentication server and gets a token, and once got the token, it will use that token to call the 3rd party authorization server to get the user role. [<a href="https://hulinhong.com/na_backend_q_top100/%60https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2%60">Learn more</a>]</li>
</ul>
<p>For Authentication:</p>
<ul>
<li>OAuth2 is a authorization method.</li>
<li>For other authentication, we can have <strong>AntMatcher</strong> to match the routes/paths and use <strong>hasRole</strong> to allow particular role to access it.</li>
</ul>
<p>Implementations:</p>
<p>In spring, we can override the <strong>WebSecurityConfigureAdaptor</strong> class, it is part of the security filter chain and it contains <strong>configure</strong> method, we will need to override the configure method and override the <strong>UserDetails</strong> object and <strong>UserDetailService</strong> class.</p>
<hr>
<h2 id="451-What-is-micro-frontend-micro-UI-and-how-micro-frontend-communicate-with-each-other"><a href="#451-What-is-micro-frontend-micro-UI-and-how-micro-frontend-communicate-with-each-other" class="headerlink" title="451. What is micro frontend/ micro UI and how micro frontend communicate with each other"></a>451. What is micro frontend/ micro UI and how micro frontend communicate with each other</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<ol>
<li>micro frontend is just like microservcie in backend, it splits the frontend into multiple module based applications</li>
</ol>
<p>TO communicate</p>
<ol>
<li>Use parameter based URL to carry data</li>
<li>Use events, one module emit events, another module subscribe to the events</li>
<li>Use shared data store, like NgRx.</li>
</ol>
<hr>
<h2 id="30-Can-you-talk-about-CI-CD"><a href="#30-Can-you-talk-about-CI-CD" class="headerlink" title="30. Can you talk about CI/CD?"></a>30. Can you talk about CI/CD?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>KeyPoints:</p>
<ol>
<li>CICD is continuous integration and continuous deployment. In the project, we usually use Jenkins with its pipeline scripts to implement CICD.</li>
<li>The script contains multiple parts. The <code>stages</code> parts list each stage and the steps inside. For example, stage one is <code>checkout</code> and steps in this stage are like using git clone to checkout the code from repository and then use maven to package it etc. Another part of the script is <code>post</code> part which handles different result. For example, what to do when the build is success or failure, what to do when the test cases failed etc.</li>
<li>CICD usually starts from when the code is pushed to the target branch, and then it includes checkout and package the code, deploy the jar/war, run the test cases and send reports etc. It could cover from dev to QA/Staging environment, but usually does not cover production.</li>
</ol>
<hr>
<h2 id="235-How-to-use-docker-in-the-Spring-Boot"><a href="#235-How-to-use-docker-in-the-Spring-Boot" class="headerlink" title="235. How to use docker in the Spring Boot?"></a>235. How to use docker in the Spring Boot?</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>Docker is a container with flexible memory management and has dockerHub that you can upload or download images</p>
<p>To use with Spring boot, 1) include docker dependency 2) add a Dockerfile</p>
<hr>
<h2 id="347-ElasticSearch-why-do-you-use-it"><a href="#347-ElasticSearch-why-do-you-use-it" class="headerlink" title="347. ElasticSearch why do you use it"></a>347. ElasticSearch why do you use it</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Elastic Search is an engine to make search data very faster. It is usually put between backend application and database, it works like a cache or a database. Some people think it is a databse, but it is actually defined to only optimize search.</p>
<p>ElasticSearch use index to cache out all the fields you want to search, just like the database Non-Cluster Index.</p>
<p>For example, you have JSON:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Product&#123;</span><br><span class="line">   "id" : "234323423434",</span><br><span class="line">   "name" : "a complete guide to java",</span><br><span class="line">   "description" : "This is a book as a complete description to java, it is mainly focused on java, spring, java 8, jdbc, spring framework. the author is intended to help any one with no or strong experience in java or any programming language, I am very long..",</span><br><span class="line">   <span class="string">"many other fields"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can add the fields or the description texts as the index so you can search any text match in the name or description. It is very fast.</p>
<hr>
<h2 id="41-Git-command-you-used-in-the-project"><a href="#41-Git-command-you-used-in-the-project" class="headerlink" title="41. Git command you used in the project"></a>41. Git command you used in the project</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>There are 2 common repositories working with git: <strong>Github</strong> and <strong>Bitbucket</strong></p>
<ul>
<li>Clone from repository as new project: <strong>git clone</strong> URL</li>
<li>Steps to commit change to remote repository: <strong>git add</strong> (files), <strong>git commit</strong> (-m message), <strong>git push</strong></li>
<li>get remote data: <strong>git pull</strong> or <strong>git fetch</strong> (git fetch just read remote repository, git pull is git fetch + push to current local branch)</li>
<li>rebase and merge: <strong>git rebase</strong>, <strong>git merge</strong></li>
<li>create a branch: <strong>git checkout</strong> branchName</li>
<li>delete a branch: <strong>git branch</strong> -d branchName</li>
<li>to override current branch with remote: <strong>git reset</strong> –hard remoteHead</li>
</ul>
<hr>
<h2 id="370-difference-git-merge-and-rebase"><a href="#370-difference-git-merge-and-rebase" class="headerlink" title="370. difference git merge and rebase"></a>370. difference git merge and rebase</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>Suppose you have 2 branches: f1 and f2 bot derived from main branch and both have some commits. now you are on f1 and you want the commits from f2.</p>
<p>Merge: combine all commits from f1 and f2 as a new commit and put on f1. so merge will create a new commit.</p>
<p>Rebase: your f1 is based on main, rebase is to let your f1 branch based on f2. it will make f2 as the new base for f1.</p>
<p>link: <a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing" target="_blank" rel="noopener">https://www.atlassian.com/git/tutorials/merging-vs-rebasing</a></p>
<hr>
<h2 id="375-Difference-between-Iterator-and-Enumeration"><a href="#375-Difference-between-Iterator-and-Enumeration" class="headerlink" title="375. Difference between Iterator and Enumeration"></a>375. Difference between Iterator and Enumeration</h2><ul>
<li>Both use to loop java collections.</li>
<li>Iterator: can remove elements when iterator.  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line">    <span class="keyword">import</span> java.util.Iterator;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IteratorRemoveExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            list.add(<span class="number">1</span>);</span><br><span class="line">            list.add(<span class="number">2</span>);</span><br><span class="line">            list.add(<span class="number">3</span>);</span><br><span class="line">            Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                <span class="keyword">int</span> element = iterator.next();</span><br><span class="line">                <span class="keyword">if</span> (element % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    iterator.remove();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">- Enumeration: cannot remove elements.</span><br><span class="line">    ```java</span><br><span class="line">    <span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line">    <span class="keyword">import</span> java.util.Vector;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumerationExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            Vector&lt;String&gt; vector = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">            vector.add(<span class="string">"Apple"</span>);</span><br><span class="line">            vector.add(<span class="string">"Banana"</span>);</span><br><span class="line">            Enumeration&lt;String&gt; enumeration = vector.elements();</span><br><span class="line">            <span class="keyword">while</span> (enumeration.hasMoreElements()) &#123;</span><br><span class="line">                System.out.println(enumeration.nextElement());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="209-How-do-you-use-cache-in-your-whole-project"><a href="#209-How-do-you-use-cache-in-your-whole-project" class="headerlink" title="209. How do you use cache in your whole project?"></a>209. How do you use cache in your whole project?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Also refer to the problem of <code>how do you improve performance</code></p>
<p>Cache can be used directly based on different applications.</p>
<p>Frontend, you can cache the page out, you can also cache the data out, so the whole page will be cached.</p>
<p>Backend</p>
<ul>
<li>Inside Java, you can use java native cache, just like static hashmap can cache data as key-value entries</li>
<li>For application level or microservices, you can use distributed cache, like Redis or MemCached.</li>
</ul>
<hr>
<h2 id="40-If-you-have-error-but-it-is-not-showing-in-log-how-do-you-debug-and-find-it"><a href="#40-If-you-have-error-but-it-is-not-showing-in-log-how-do-you-debug-and-find-it" class="headerlink" title="40. If you have error, but it is not showing in log, how do you debug and find it."></a>40. If you have error, but it is not showing in log, how do you debug and find it.</h2><ul>
<li><p>“frequency”: 4,</p>
</li>
<li><p>When you have an error that is not showing in the log, here are some steps you can take to debug and find it:</p>
<ol>
<li><strong>Review the code</strong>: Look for any obvious mistakes, such as incorrect variable names, missing parentheses, or logical errors in the algorithm. Check for any recently made changes that could have introduced the error.</li>
<li><strong>Add additional logging statements</strong>: Insert print statements or use a logging library to output relevant variable values, function calls, and program flow information at various points in the code.</li>
<li><strong>Use a debugger</strong>: If available, use a debugger tool. You can set breakpoints at specific lines of code and then step through the program execution.</li>
<li><strong>Check the environment</strong>: Verify that the runtime environment is set up correctly.</li>
<li><strong>Test in isolation</strong>: If possible, isolate the code that is causing the problem and test it in a simpler, controlled environment.</li>
<li><strong>Check for external factors</strong>: Consider if there are any external factors that could be causing the error, such as network issues, database problems, or interactions with other services.</li>
<li><strong>Review stack traces and error messages</strong>: Even if the error is not showing in the regular log, check if there are any other sources of error information, such as stack traces that might be printed to the console or in other log files.</li>
<li><strong>Use error handling and assertions</strong>: Add more comprehensive error handling and assertions to your code.</li>
<li><strong>Ask for help</strong>: If you are still unable to find the error, reach out to colleagues or online communities for assistance.</li>
</ol>
</li>
</ul>
<hr>
<h2 id="240-What-kind-of-test-experience-do-you-have"><a href="#240-What-kind-of-test-experience-do-you-have" class="headerlink" title="240. What kind of test experience do you have?"></a>240. What kind of test experience do you have?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Unit test: Junit, mockito, powermock – test each method, this is method level. The way to write unit test is to define a hard code input and call the target method and then verify if the result is correct using assert.</p>
<p>Automation test: Selenium, Cucumber, TestNG</p>
<p>Regression test: is to make sure the new part of code does not break the existing functions</p>
<p>Integration test: is to make sure the new parts interacts/works well with the other parts.</p>
<p>End to End test: is to make sure the entire workflow works from beginning to end.</p>
<p>Regression/Integration/End2End tests are just different type of tests, they are mostly implemented by Selenium and Cucumber or TestNG.</p>
<hr>
<h2 id="245-Cucumber-and-its-annotations-How-cucumber-works-give-an-example"><a href="#245-Cucumber-and-its-annotations-How-cucumber-works-give-an-example" class="headerlink" title="245. Cucumber and its annotations / How cucumber works, give an example"></a>245. Cucumber and its annotations / How cucumber works, give an example</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>When they ask what test framework have you done, always mention <code>Junit/Mockito</code> and <code>Selenium/Cucumber</code></p>
<p>Cucumber aims to create tests cases that both business team and developers can understand. Business team knows the requirements but does not know how to write test cases, developer team knows how to write test cases but not very familiar with the requirements. Cucumber uses Gherkins language with feature file and step definitions script to connect them.</p>
<p>Feature file defines test scenarios like below, it uses keyword like <code>scenario</code>, <code>given</code>, <code>when</code>, <code>and</code>, <code>then</code>:</p>
<ul>
<li><strong>Feature</strong>: Login Functionality</li>
<li><strong>Scenario</strong>: Successful login with valid credentials</li>
<li><strong>Given</strong>: the user is on the login page</li>
<li><strong>When</strong>: the user enters a valid username and password</li>
<li><strong>And</strong>: clicks the login button</li>
<li><strong>Then</strong>: the user should be redirected to the dashboard page</li>
</ul>
<p>The step definitions file uses annotations like <code>@Given</code> <code>@When</code> <code>@Then</code> to write test cases. <code>@Given</code> is for given conditions, <code>@When</code> is for input <code>@Then</code> is for result.</p>
<p>For example for login, <code>@Given</code> is user is at the login page, <code>@When</code> is a method when user enters the credentials and click login, <code>@Then</code> will be a method to verify the user enters homepage.</p>
<p>these annotations use brackets to include the feature file steps</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Given</span>(<span class="string">"the user is on the login page"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">the_user_is_on_the_login_page</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.setProperty(<span class="string">"webdriver.chrome.driver"</span>, <span class="string">"/path/to/chromedriver"</span>);</span><br><span class="line">        driver = <span class="keyword">new</span> ChromeDriver();</span><br><span class="line">        driver.get(<span class="string">"https://example.com/login"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@When</span>(<span class="string">"the user enters a valid username and password"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">the_user_enters_a_valid_username_and_password</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        driver.findElement(By.id(<span class="string">"username"</span>)).sendKeys(<span class="string">"validUsername"</span>);</span><br><span class="line">        driver.findElement(By.id(<span class="string">"password"</span>)).sendKeys(<span class="string">"validPassword"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@When</span>(<span class="string">"clicks the login button"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clicks_the_login_button</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        driver.findElement(By.id(<span class="string">"loginButton"</span>)).click();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Then</span>(<span class="string">"the user should be redirected to the dashboard page"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">the_user_should_be_redirected_to_the_dashboard_page</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String expectedUrl = <span class="string">"https://example.com/dashboard"</span>;</span><br><span class="line">        String actualUrl = driver.getCurrentUrl();</span><br><span class="line">        Assert.assertEquals(actualUrl, expectedUrl);</span><br><span class="line">        driver.quit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="43-Abstract-class-vs-Interface-When-to-use-abstract-class-and-when-to-use-interface"><a href="#43-Abstract-class-vs-Interface-When-to-use-abstract-class-and-when-to-use-interface" class="headerlink" title="43. Abstract class vs. Interface. When to use abstract class and when to use interface?"></a>43. Abstract class vs. Interface. When to use abstract class and when to use interface?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<ul>
<li>Abstract Class: <ul>
<li>1) still a class, so you can only extend one abstract class.</li>
<li>2) Have both concrete method and abstract method.</li>
</ul>
</li>
<li>Interface:<ul>
<li>1) you can implement many interfaces</li>
<li>2) Only has abstract method. </li>
<li>3) In java 8, interface can have default and static method</li>
</ul>
</li>
</ul>
<p><strong>Usage:</strong></p>
<p>Most of the places, interfaces are preferred, but if you need some common method to inherit automatically, you can use abstract class.</p>
<p><strong>FOLLOW UP:</strong></p>
<blockquote>
<p>since java 8 allows default and static method in interface, what is the essential difference between abstract class and interface?</p>
</blockquote>
<p>A: abstract class can have fields, the fields can hold value and track the status of the object itself. Interface cannot have fields, it can only have constants.</p>
<p>Difference Between Interface and Abstract Class in Java</p>
<blockquote>
<p>In Java, interfaces and abstract classes are both used to define templates or contracts for other classes, but they have distinct purposes and characteristics. Below is a comparison with examples to clarify their differences.</p>
</blockquote>
<p>Key Differences</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Interface</th>
<th>Abstract Class</th>
</tr>
</thead>
<tbody>
<tr>
<td>Keyword</td>
<td>interface</td>
<td>abstract</td>
</tr>
<tr>
<td>Inheritance</td>
<td>A class can implement multiple interfaces.</td>
<td>A class can extend only one abstract class.</td>
</tr>
<tr>
<td>Method</td>
<td>Implementation    Methods are abstract by default (except <code>default</code> methods, which can have implementations).</td>
<td>Can contain both abstract and concrete (regular) methods.</td>
</tr>
<tr>
<td>Fields</td>
<td>Can only have <code>public</code> <code>static</code> <code>final</code> constants.</td>
<td>Can have instance variables.</td>
</tr>
<tr>
<td>Constructors</td>
<td>Not allowed.</td>
<td>Can have constructors.</td>
</tr>
<tr>
<td>Default Access Level</td>
<td>Methods are implicitly <code>public</code>.</td>
<td>Methods can have <code>public</code>, <code>protected</code>, or <code>package-private</code> access.</td>
</tr>
<tr>
<td>Use Case</td>
<td>Defines a contract or capability.</td>
<td>Defines shared characteristics or behavior.</td>
</tr>
</tbody>
</table>
<p>Example 1: Using an Interface</p>
<blockquote>
<p>An interface is used to define a set of behaviors (a contract) that a class must implement.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Define an interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;  <span class="comment">// Abstract method</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>;  <span class="comment">// Abstract method</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Implement the interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog eats bones."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog sleeps in its kennel."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Animal myDog = <span class="keyword">new</span> Dog();</span><br><span class="line">        myDog.eat();   <span class="comment">// Output: Dog eats bones.</span></span><br><span class="line">        myDog.sleep(); <span class="comment">// Output: Dog sleeps in its kennel.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example 2: Using an Abstract Class</p>
<blockquote>
<p>An abstract class is used when you want to share common code among related classes while still requiring subclasses to provide specific implementations.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Define an abstract class</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>; <span class="comment">// Abstract method</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;       <span class="comment">// Concrete method</span></span><br><span class="line">        System.out.println(<span class="string">"Animal is sleeping."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extend the abstract class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Cat eats fish."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Animal myCat = <span class="keyword">new</span> Cat();</span><br><span class="line">        myCat.eat();   <span class="comment">// Output: Cat eats fish.</span></span><br><span class="line">        myCat.sleep(); <span class="comment">// Output: Animal is sleeping.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When to Use: </p>
<ul>
<li>Interface:<ul>
<li>Use an interface to define a set of behaviors or capabilities that a class must adhere to, without concerning how they are implemented.</li>
<li>Example: The Runnable interface defines the ability to be run in a thread.</li>
</ul>
</li>
<li>Abstract Class:<ul>
<li>Use an abstract class to represent shared characteristics or behavior while allowing subclasses to override specific parts.</li>
<li>Example: The HttpServlet abstract class provides a framework for handling HTTP requests while letting you implement methods like doGet() or doPost().</li>
</ul>
</li>
</ul>
<hr>
<h2 id="44-New-feature-of-Java-8-Give-an-example-of-how-you-use-them-in-your-project"><a href="#44-New-feature-of-Java-8-Give-an-example-of-how-you-use-them-in-your-project" class="headerlink" title="44. New feature of Java 8. Give an example of how you use them in your project"></a>44. New feature of Java 8. Give an example of how you use them in your project</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Top of java 8 features:</p>
<ul>
<li><strong>Functional interface</strong>: is an interface that only has ONE abstract method. We can use lambda expression to implement that method</li>
<li><strong>Lambda expression</strong>: () -&gt; {}. It is to implement functional interface and anonymous class. You can pass a lambda function to a method as argument</li>
<li><strong>Optional</strong>: to prevent NullPointerException in runtime. for example, Optional<employee>, it has methods like isPresent(), isEmpty(), get(), orElse() etc.</employee></li>
<li>Default method in interface:<ul>
<li><strong>Why need it</strong>: When a interface has 10 children classes, all children classes need the same method, before java 8, you need to implement this same method in every child class, but with default method, you just write it once as default method in interface, all children will automatically inherit it.</li>
<li>If a class implements 2 interfaces and both interfaces has same <code>default</code> method, then there will be exception because the class does not know which on to use, the class then has to override them.</li>
</ul>
</li>
<li><strong>Stream API</strong>: a group of methods to handle collections easily. like, filter, map, flatmap, sorted, reduce, groupingBy, joining etc.</li>
<li>Intermediate operator vs terminator operator</li>
<li>flatmap vs map</li>
<li><strong>Java Date Time API update</strong>: new date time API has default timezone, so developer does not need to set it.</li>
</ul>
<h3 id="Lambda-Expressions"><a href="#Lambda-Expressions" class="headerlink" title="Lambda Expressions"></a>Lambda Expressions</h3><p>Lambda expressions enable a more concise way to represent code blocks that can be passed to methods or stored in variables.</p>
<p>Example: In an e-commerce project, filtering a list of products by price. Suppose there is a <code>Product</code> class with a <code>price</code> field.<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">double</span> price, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Product&gt; products = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">100</span>, <span class="string">"Product1"</span>));</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">200</span>, <span class="string">"Product2"</span>));</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">150</span>, <span class="string">"Product3"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use Lambda expression to filter products with price greater than 150</span></span><br><span class="line">        List&lt;Product&gt; filteredProducts = products.stream()</span><br><span class="line">             .filter(product -&gt; product.getPrice() &gt; <span class="number">150</span>)</span><br><span class="line">             .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        filteredProducts.forEach(product -&gt; System.out.println(product.getPrice()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Method-References"><a href="#Method-References" class="headerlink" title="Method References"></a>Method References</h3><p>Method references provide a more concise way to refer to existing methods.</p>
<p>Example: In a logging project, there is a <code>Logger</code> class with a <code>logMessage</code> method for logging messages.<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">logMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Logging: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; messages = Arrays.asList(<span class="string">"Message1"</span>, <span class="string">"Message2"</span>, <span class="string">"Message3"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use method reference to apply the logging method to each message</span></span><br><span class="line">        messages.forEach(Logger::logMessage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Optional-Class"><a href="#Optional-Class" class="headerlink" title="Optional Class"></a>Optional Class</h3><p>The Optional class is used to solve the problem of null pointer exceptions and handle potentially null values more gracefully.</p>
<p>Example: In a user management system, getting a user’s email address. Suppose the <code>User</code> class has a <code>getEmail</code> method that might return <code>null</code>.<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"example@example.com"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use Optional class to safely get the user's email address</span></span><br><span class="line">        Optional&lt;String&gt; emailOptional = Optional.ofNullable(user.getEmail());</span><br><span class="line">        String email = emailOptional.orElse(<span class="string">"default@example.com"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Email: "</span> + email);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="45-Stream-API"><a href="#45-Stream-API" class="headerlink" title="45. Stream API"></a>45. Stream API</h2><h3 id="lazy-evaluation"><a href="#lazy-evaluation" class="headerlink" title="lazy evaluation"></a>lazy evaluation</h3><p>What is lazy evaluation in Stream?</p>
<p>Stream intermediate operations are lazily executed and only run when a terminal operation is invoked. This improves performance and avoids unnecessary work.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazyEvaluationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Intermediate operations: filter and map</span></span><br><span class="line">        System.out.println(<span class="string">"Before terminal operation:"</span>);</span><br><span class="line">        var stream = numbers.stream()</span><br><span class="line">               .filter(num -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Filtering: "</span> + num);</span><br><span class="line">                    <span class="keyword">return</span> num % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">                &#125;)</span><br><span class="line">               .map(num -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Mapping: "</span> + num);</span><br><span class="line">                    <span class="keyword">return</span> num * <span class="number">2</span>;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"After building the stream pipeline but before terminal operation"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Terminal operation: forEach</span></span><br><span class="line">        System.out.println(<span class="string">"Starting terminal operation:"</span>);</span><br><span class="line">        stream.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>output:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Before terminal operation:</span><br><span class="line">After building the stream pipeline but before terminal operation</span><br><span class="line">Starting terminal operation:</span><br><span class="line">Filtering: 1</span><br><span class="line">Filtering: 2</span><br><span class="line">Mapping: 2</span><br><span class="line">4</span><br><span class="line">Filtering: 3</span><br><span class="line">Filtering: 4</span><br><span class="line">Mapping: 4</span><br><span class="line">8</span><br></pre></td></tr></table></figure></p>
<h3 id="真题"><a href="#真题" class="headerlink" title="真题"></a>真题</h3><p>给 <code>&quot;Pencil&quot;, &quot;Pencil&quot;, &quot;Note&quot;, &quot;Pen&quot;, &quot;Book&quot;, &quot;Pencil&quot;, &quot;Book&quot;);</code><br>过滤掉长度小于等于3的字符串, 并请按字符串分组并统计出现次数来排序输出（按值降序）为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;Pencil&quot; - 3</span><br><span class="line">&quot;Book&quot; - 2</span><br><span class="line">&quot;Note&quot; - 1</span><br></pre></td></tr></table></figure>
<p>解法:<br><figure class="highlight java"><figcaption><span>Main.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;  <span class="comment">// important!!</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">example</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; list2 = Arrays.asList(<span class="string">"Pencil"</span>, <span class="string">"Pencil"</span>, <span class="string">"Note"</span>, <span class="string">"Pen"</span>, <span class="string">"Book"</span>, <span class="string">"Pencil"</span>, <span class="string">"Book"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//        / 按字符串进行分组并统计每个字符串的出现次数</span></span><br><span class="line">        Map&lt;String, Long&gt; map = list2.stream()</span><br><span class="line">                .filter(s -&gt; s.length() &gt; <span class="number">3</span>) <span class="comment">// 过滤长度大于3的字符串</span></span><br><span class="line">                .collect(Collectors.groupingBy(</span><br><span class="line">                        s -&gt; s, <span class="comment">// 按字符串本身分组</span></span><br><span class="line">                        Collectors.counting() <span class="comment">// 对每个字符串进行计数</span></span><br><span class="line">                ));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出原始 map</span></span><br><span class="line">        System.out.println(<span class="string">"Original map: "</span> + map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 按计数值降序排序并输出</span></span><br><span class="line">        map.entrySet().stream()</span><br><span class="line">                .sorted((a, b) -&gt; b.getValue().compareTo(a.getValue()))  <span class="comment">// 下面这行也可以</span></span><br><span class="line">                <span class="comment">// .sorted(Comparator.comparing(Map.Entry&lt;String, Long&gt;::getValue).reversed())</span></span><br><span class="line">                .forEach(entry -&gt; System.out.println(entry.getKey() + <span class="string">" - "</span> + entry.getValue()));</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="comment">// ------ steamAPI other examples ------</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"apricot"</span>, <span class="string">"blueberry"</span>);</span><br><span class="line"><span class="comment">//        list.toArray();</span></span><br><span class="line"><span class="comment">//        List&lt;String&gt; list5 = new String[]&#123;"5", "6"&#125;;</span></span><br><span class="line"></span><br><span class="line">        Map&lt;Character, List&lt;String&gt;&gt; grouped = list.stream()</span><br><span class="line">            .collect(Collectors.groupingBy(s -&gt; s.charAt(<span class="number">0</span>)));</span><br><span class="line">        <span class="comment">// 按首字母分组</span></span><br><span class="line">        <span class="comment">// &#123;a=[apple, apricot], b=[banana, blueberry]&#125;</span></span><br><span class="line">        System.out.println(grouped);</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; list2 = Arrays.asList(<span class="string">"Pencil"</span>, <span class="string">"Pencil"</span>, <span class="string">"Note"</span>, <span class="string">"Pen"</span>, <span class="string">"Book"</span>, <span class="string">"Pencil"</span>, <span class="string">"Book"</span>);</span><br><span class="line"><span class="comment">//        / 按字符串进行分组并统计每个长度大于3的字符串的出现次数</span></span><br><span class="line">        Map&lt;String, Long&gt; map = list2.stream()</span><br><span class="line">            .filter(s -&gt; s.length() &gt; <span class="number">3</span>) <span class="comment">// 过滤长度大于3的字符串</span></span><br><span class="line">            .collect(Collectors.groupingBy(</span><br><span class="line">                    s -&gt; s, <span class="comment">// 按字符串本身分组</span></span><br><span class="line">                    Collectors.counting() <span class="comment">// 对每个字符串进行计数</span></span><br><span class="line">            ));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出原始 map</span></span><br><span class="line">        <span class="comment">// Original map: &#123;Book=2, Note=1, Pencil=3&#125;</span></span><br><span class="line">        System.out.println(<span class="string">"Original map: "</span> + map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 按计数值降序排序并输出</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            Pencil - 3</span></span><br><span class="line"><span class="comment">            Book - 2</span></span><br><span class="line"><span class="comment">            Note - 1</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        map.entrySet().stream()</span><br><span class="line">            .sorted((a, b) -&gt; b.getKey().compareTo(a.getKey()))</span><br><span class="line">            .forEach(s -&gt; System.out.println(s.getKey() + <span class="string">" - "</span> + s.getValue()));</span><br><span class="line">        map.entrySet().stream()</span><br><span class="line">            .sorted(Comparator.comparing(Map.Entry&lt;String, Long&gt;::getValue).reversed())</span><br><span class="line">            .forEach(entry -&gt; System.out.println(entry.getKey() + <span class="string">" - "</span> + entry.getValue()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//        map.entrySet().stream()</span></span><br><span class="line"><span class="comment">//                .sorted(Comparator.comparing(Map.Entry::getValue).reversed())</span></span><br><span class="line"><span class="comment">//                .forEach(s -&gt; System.out.println(s.getKey() + " - " + s.getValue()));</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test test = <span class="keyword">new</span> Test();</span><br><span class="line">        test.example();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="中间操作"><a href="#中间操作" class="headerlink" title="中间操作"></a>中间操作</h3><p>中间操作会返回一个新的流，允许你进行链式调用。常见的中间操作有 <code>filter</code>、<code>map</code>、<code>flatMap</code>、<code>distinct</code>、<code>sorted</code> 等。</p>
<h3 id="终端操作"><a href="#终端操作" class="headerlink" title="终端操作"></a>终端操作</h3><p>终端操作会触发流的处理并产生结果，常见的终端操作有 <code>forEach</code>、<code>collect</code>、<code>reduce</code>、<code>count</code>、<code>findFirst</code>、<code>anyMatch</code> 等。</p>
<p>以下是不同类型操作的示例代码：</p>
<h3 id="代码解释"><a href="#代码解释" class="headerlink" title="代码解释"></a>代码解释</h3><ul>
<li><p><strong>中间操作</strong>：</p>
<ul>
<li><strong>filter</strong>：用于筛选出满足指定条件的元素。</li>
<li><strong>map</strong>：将流中的每个元素映射为另一个元素。</li>
<li><strong>flatMap</strong>：将嵌套的流扁平化。</li>
<li><strong>distinct</strong>：去除流中的重复元素。</li>
<li><strong>sorted</strong>：对流中的元素进行排序。</li>
</ul>
</li>
<li><p><strong>终端操作</strong>：</p>
<ul>
<li><strong>forEach</strong>：遍历流中的每个元素。</li>
<li><strong>collect</strong>：将流中的元素收集到一个集合中。</li>
<li><strong>reduce</strong>：对流中的元素进行归约操作，例如求和。</li>
<li><strong>count</strong>：统计流中元素的数量。</li>
<li><strong>findFirst</strong>：查找流中的第一个元素。</li>
<li><strong>anyMatch</strong>：判断流中是否有元素满足指定条件。</li>
</ul>
</li>
</ul>
<p>通过这些示例，你可以了解到 Stream API 不同类型操作的使用方法和效果。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamAPIExamples</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 中间操作示例</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. filter: 过滤出偶数</span></span><br><span class="line">        System.out.println(<span class="string">"filter 操作示例："</span>);</span><br><span class="line">        List&lt;Integer&gt; evenNumbers = numbers.stream()</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"偶数列表: "</span> + evenNumbers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. map: 将每个数字映射为其平方</span></span><br><span class="line">        System.out.println(<span class="string">"\nmap 操作示例："</span>);</span><br><span class="line">        List&lt;Integer&gt; squaredNumbers = numbers.stream()</span><br><span class="line">                .map(n -&gt; n * n)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"平方列表: "</span> + squaredNumbers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. flatMap: 将嵌套列表扁平化</span></span><br><span class="line">        System.out.println(<span class="string">"\nflatMap 操作示例："</span>);</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; nestedList = Arrays.asList(</span><br><span class="line">                Arrays.asList(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">                Arrays.asList(<span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">                Arrays.asList(<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">        );</span><br><span class="line">        List&lt;Integer&gt; flattenedList = nestedList.stream()</span><br><span class="line">                <span class="comment">// .flatMap(List::stream)</span></span><br><span class="line">                .flatMap(innerList -&gt; innerList.stream())</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"扁平化后的列表: "</span> + flattenedList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. distinct: 去除重复元素</span></span><br><span class="line">        System.out.println(<span class="string">"\ndistinct 操作示例："</span>);</span><br><span class="line">        List&lt;Integer&gt; distinctNumbers = numbers.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"去重后的列表: "</span> + distinctNumbers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. sorted: 对元素进行排序</span></span><br><span class="line">        System.out.println(<span class="string">"\nsorted 操作示例："</span>);</span><br><span class="line">        List&lt;Integer&gt; sortedNumbers = numbers.stream()</span><br><span class="line">                .sorted()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"排序后的列表: "</span> + sortedNumbers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 终端操作示例</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. forEach: 遍历元素</span></span><br><span class="line">        System.out.println(<span class="string">"\nforEach 操作示例："</span>);</span><br><span class="line">        numbers.stream()</span><br><span class="line">                .forEach(n -&gt; System.out.print(n + <span class="string">" "</span>));</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. collect: 收集元素到列表</span></span><br><span class="line">        System.out.println(<span class="string">"\ncollect 操作示例："</span>);</span><br><span class="line">        List&lt;Integer&gt; collectedNumbers = numbers.stream()</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"收集到的列表: "</span> + collectedNumbers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 8. reduce: 对元素进行累加</span></span><br><span class="line">        System.out.println(<span class="string">"\nreduce 操作示例："</span>);</span><br><span class="line">        Optional&lt;Integer&gt; sum = numbers.stream()</span><br><span class="line">            .reduce((a, b) -&gt; a + b);</span><br><span class="line">        sum.ifPresent(result -&gt; System.out.println(<span class="string">"元素总和: "</span> + result));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9. count: 统计元素数量</span></span><br><span class="line">        System.out.println(<span class="string">"\ncount 操作示例："</span>);</span><br><span class="line">        <span class="keyword">long</span> count = numbers.stream()</span><br><span class="line">                .count();</span><br><span class="line">        System.out.println(<span class="string">"元素数量: "</span> + count);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 10. findFirst: 查找第一个元素</span></span><br><span class="line">        System.out.println(<span class="string">"\nfindFirst 操作示例："</span>);</span><br><span class="line">        Optional&lt;Integer&gt; firstNumber = numbers.stream()</span><br><span class="line">                .findFirst();</span><br><span class="line">        firstNumber.ifPresent(result -&gt; System.out.println(<span class="string">"第一个元素: "</span> + result));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 11. anyMatch: 判断是否有元素满足条件</span></span><br><span class="line">        System.out.println(<span class="string">"\nanyMatch 操作示例："</span>);</span><br><span class="line">        <span class="keyword">boolean</span> hasEven = numbers.stream()</span><br><span class="line">                .anyMatch(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">"是否有偶数: "</span> + hasEven);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="只有List才能有stream吗"><a href="#只有List才能有stream吗" class="headerlink" title="只有List才能有stream吗"></a>只有List才能有stream吗</h3><p>并非只有 <code>List</code> 能使用 <code>stream</code> 方法。在 Java 里，很多集合类以及其他类型都可以使用 <code>stream</code> 方法来创建流，以下为你详细介绍：</p>
<h4 id="1-实现-Collection-接口的集合类"><a href="#1-实现-Collection-接口的集合类" class="headerlink" title="1. 实现 Collection 接口的集合类"></a>1. 实现 <code>Collection</code> 接口的集合类</h4><p><code>Collection</code> 接口拓展了 <code>stream()</code> 方法，所以所有实现 <code>Collection</code> 接口的类都能够调用此方法生成流。常见的有：</p>
<ul>
<li><p><strong><code>List</code></strong>：像 <code>ArrayList</code>、<code>LinkedList</code> 这类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">"apple"</span>);</span><br><span class="line">        list.add(<span class="string">"banana"</span>);</span><br><span class="line">        list.add(<span class="string">"cherry"</span>);</span><br><span class="line">        <span class="keyword">long</span> count = list.stream().filter(s -&gt; s.startsWith(<span class="string">"a"</span>)).count();</span><br><span class="line">        System.out.println(<span class="string">"以 'a' 开头的元素数量: "</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Set</code></strong>：例如 <code>HashSet</code>、<code>TreeSet</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        set.add(<span class="number">1</span>);</span><br><span class="line">        set.add(<span class="number">2</span>);</span><br><span class="line">        set.add(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">// int sum = set.stream().mapToInt(Integer::intValue).sum();</span></span><br><span class="line">        <span class="keyword">int</span> sum = set.stream().mapToInt(x -&gt; x).sum();</span><br><span class="line">        System.out.println(<span class="string">"集合元素总和: "</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Queue</code></strong>：像 <code>LinkedList</code>（它同时实现了 <code>List</code> 和 <code>Queue</code> 接口）、<code>PriorityQueue</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Queue&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(<span class="string">"one"</span>);</span><br><span class="line">        queue.add(<span class="string">"two"</span>);</span><br><span class="line">        queue.add(<span class="string">"three"</span>);</span><br><span class="line">        queue.stream().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-数组"><a href="#2-数组" class="headerlink" title="2. 数组"></a>2. 数组</h4><p>虽然数组没有直接实现 <code>Collection</code> 接口，不过可以借助 <code>Arrays</code> 工具类的 <code>stream</code> 方法来创建流。<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> sum = Arrays.stream(array).sum();</span><br><span class="line">        System.out.println(<span class="string">"数组元素总和: "</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="3-其他"><a href="#3-其他" class="headerlink" title="3. 其他"></a>3. 其他</h4><ul>
<li><p><strong><code>Map</code></strong>：<code>Map</code> 本身没有 <code>stream()</code> 方法，但可以通过其 <code>keySet()</code>、<code>values()</code> 或者 <code>entrySet()</code> 方法得到对应的集合，再创建流。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"apple"</span>, <span class="number">1</span>);</span><br><span class="line">        map.put(<span class="string">"banana"</span>, <span class="number">2</span>);</span><br><span class="line">        map.put(<span class="string">"cherry"</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="keyword">long</span> count = map.entrySet().stream().filter(entry -&gt; entry.getValue() &gt; <span class="number">1</span>).count();</span><br><span class="line">        System.out.println(<span class="string">"值大于 1 的键值对数量: "</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Stream</code> 类的静态方法</strong>：可以直接利用 <code>Stream</code> 类的静态方法创建流，例如 <code>Stream.of()</code>、<code>Stream.iterate()</code>、<code>Stream.generate()</code> 等。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticStreamExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">// int sum = stream.mapToInt(Integer::intValue).sum();</span></span><br><span class="line">        <span class="keyword">int</span> sum = stream.mapToInt(x -&gt; x).sum();</span><br><span class="line">        System.out.println(<span class="string">"流元素总和: "</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="46-Types-of-Exceptions-and-how-do-you-deal-with-exceptions-in-your-project"><a href="#46-Types-of-Exceptions-and-how-do-you-deal-with-exceptions-in-your-project" class="headerlink" title="46. Types of Exceptions and how do you deal with exceptions in your project?"></a>46. Types of Exceptions and how do you deal with exceptions in your project?</h2><ul>
<li><strong>  “frequency”</strong>: 5,</li>
</ul>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/img/java_top_questions/image.png" alt="Exception"></p>
<ul>
<li><p>Java Exception hierarchy:</p>
<ul>
<li><p>throwable</p>
<ul>
<li>error<ul>
<li>error is like system error which can NOT be handled by program, like OutOfMemoryError, StackOverflowError etc.</li>
</ul>
</li>
<li><p>exception.</p>
<ul>
<li><p>Exception – compile/checked exception + runtime/unchecked exception. Checked exception can be handled using try catch block, like the SQLException, Thread InterrupttedException; Unchecked exception happens in runtime, like NullPointerException, IndexOutOfBoundException etc.</p>
</li>
<li><p>self defined exception: Just extend the java Exception class and define your own constructor and message</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>How to deal with exception<ul>
<li>Java: use Try/Catch/Finally block or use Throws on method level.</li>
<li>Spring: use @ExceptionHandler @ControllerAdvice on the controller level to catch exception in whole application</li>
</ul>
</li>
</ul>
<p>Java Exception hierarchy:</p>
<ul>
<li><strong>throwable</strong> = <code>error</code> + <code>exception</code>.</li>
<li><p><strong>error</strong> is like system error which can NOT be handled by program, like OutOfMemoryError, StackOverflowError etc.</p>
</li>
<li><p><strong>Exception</strong> – compile/checked exception + runtime/unchecked exception. Checked exception can be handled using try catch block, like the SQLException, Thread InterrupttedException; Unchecked exception happens in runtime, like NullPointerException, IndexOutOfBoundException etc.</p>
<ul>
<li>self defined exception: Just extend the java Exception class and define your own constructor and message</li>
</ul>
</li>
<li>How to deal with exception:<ul>
<li>Java: use Try/Catch/Finally block or use Throws on method level.</li>
<li>Spring: use @ExceptionHandler @ControllerAdvice on the controller level to catch exception in whole application</li>
</ul>
</li>
</ul>
<hr>
<h2 id="47-Generics-and-how-do-you-use-generics-in-your-project"><a href="#47-Generics-and-how-do-you-use-generics-in-your-project" class="headerlink" title="47. Generics and how do you use generics in your project?"></a>47. Generics and how do you use generics in your project?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Generics is used to prevent the error when converting data from one type to another type or just to make a method work for multiple type of data.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">getFirstElement</span><span class="params">(List&lt;T&gt; list)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> list.isEmpty() ? <span class="keyword">null</span> : list.get(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Usually T is used to present Type and V is used to represent Value.</p>
<p>With generics, we can 1) make sure the type is safe at compile time. 2) make a method or class work for different type of data.</p>
<hr>
<h2 id="48-Java-OOP-4-principles-and-explain-each-of-them"><a href="#48-Java-OOP-4-principles-and-explain-each-of-them" class="headerlink" title="48. Java OOP 4 principles, and explain each of them"></a>48. Java OOP 4 principles, and explain each of them</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>PIEA:</p>
<p><strong>Polymorphism</strong>: 2 types, static polymorphism/overload and dynamic polymorphism/override. overload is you have 2 methods in the same class, they have SAME method name but different type or numbers of parameters . They can have different access modifier too (they are basically just 2 different methods happening to have the same name).</p>
<p>Override: 2 methods with same method signature(method name, parameters) in Parent and Child class, but different implementations. The child method must have same or broader access modifier than parent method.</p>
<p><strong>Inheritance</strong>: One class can only inherit one parent class, one class can implement many interfaces</p>
<p><strong>Encapsulation</strong>: This is about who can access your method or fields, Access modifer: Public, Private, Protected, Default.</p>
<p><strong>Abstraction</strong>: abstract class and interfaces.</p>
<hr>
<h2 id="49-If-java-8-allows-default-method-in-interface-so-what-is-the-real-difference-between-interface-and-abstract-class"><a href="#49-If-java-8-allows-default-method-in-interface-so-what-is-the-real-difference-between-interface-and-abstract-class" class="headerlink" title="49. If java 8 allows default method in interface, so what is the real difference between interface and abstract class?"></a>49. If java 8 allows default method in interface, so what is the real difference between interface and abstract class?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>abstract class can have regular fields which can host the data, but interface cannot, interface can only have constants.</p>
<hr>
<h2 id="52-Serialization-What-is-Serializable-and-SerialVersionUID"><a href="#52-Serialization-What-is-Serializable-and-SerialVersionUID" class="headerlink" title="52. Serialization, What is Serializable and SerialVersionUID?"></a>52. Serialization, What is Serializable and SerialVersionUID?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Serialization is to convert the java object into byte stream so you can save it to file system or database or send across network.</p>
<p>To implement serialization, just implement serializable interface. private and final fields can be serialized, but static field cannot, because static field does not go with objects.</p>
<p>When a <code>serialVersionUID</code> is presented, it is used to match the byte stream with current java object, if they match, the object can be de-serialized, otherwise, exception will be thrown.</p>
<hr>
<h3 id="What-is-serialVersionUID"><a href="#What-is-serialVersionUID" class="headerlink" title="What is serialVersionUID?"></a>What is <code>serialVersionUID</code>?</h3><ul>
<li><code>serialVersionUID</code> is a unique identifier for a serializable class. It is used during deserialization to ensure that the sender and receiver of a serialized object have compatible versions of that class. It is stored as a <code>long</code> value in the serialized object.</li>
</ul>
<h3 id="When-you-don’t-define-serialVersionUID"><a href="#When-you-don’t-define-serialVersionUID" class="headerlink" title="When you don’t define serialVersionUID"></a>When you don’t define <code>serialVersionUID</code></h3><ul>
<li><p><strong>Behavior</strong>:</p>
<ul>
<li>If you do not explicitly define a <code>serialVersionUID</code> in your serializable class, the Java runtime will automatically generate one for you at runtime based on various aspects of the class, such as the fields, methods, and other characteristics of the class.</li>
<li>This auto-generated <code>serialVersionUID</code> is computed using a complex algorithm that takes into account the class name, the interfaces it implements, and other factors.</li>
</ul>
</li>
<li><p><strong>Implications</strong>:</p>
<ul>
<li><strong>Compatibility issues</strong>: Any change in the class structure (e.g., adding or removing fields, changing the type of a field, or modifying methods) will cause the runtime to generate a different <code>serialVersionUID</code>. This means that if you serialize an object with one version of the class and then try to deserialize it with a modified version of the class, the deserialization will fail with an <code>InvalidClassException</code>.</li>
<li><p><strong>Example</strong>: Consider the following serializable class:</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>If you serialize an object of <code>MyClass</code> in one version of your application, and then you modify the <code>MyClass</code> by adding a new field, like this:</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Then, when you try to deserialize the previously serialized object, you will get an <code>InvalidClassException</code> because the auto-generated <code>serialVersionUID</code> has changed.</p>
</li>
</ul>
</li>
</ul>
<h3 id="When-you-remove-serialVersionUID"><a href="#When-you-remove-serialVersionUID" class="headerlink" title="When you remove serialVersionUID"></a>When you remove <code>serialVersionUID</code></h3><ul>
<li><strong>Behavior</strong>:<ul>
<li>If you initially define a <code>serialVersionUID</code> and then remove it from your class, the Java runtime will again generate a new one based on the current state of the class.</li>
</ul>
</li>
<li><p><strong>Implications</strong>:</p>
<ul>
<li><strong>Compatibility issues</strong>: Similar to not defining it initially, removing the <code>serialVersionUID</code> can lead to deserialization failures. If you have serialized objects using the old version of the class with a defined <code>serialVersionUID</code> and then remove it, the deserialization process will try to use the auto-generated <code>serialVersionUID</code>, which is likely to be different from the original one, resulting in an <code>InvalidClassException</code>.</li>
<li><p><strong>Example</strong>: Consider this class with a defined <code>serialVersionUID</code>:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you serialize objects with this version of <code>MyClass</code>, and then you remove the <code>serialVersionUID</code> from the class like this:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>When you try to deserialize the previously serialized objects, you will face <code>InvalidClassException</code> as the deserialization process will use the new auto-generated <code>serialVersionUID</code> which will not match the old one.</p>
</li>
</ul>
</li>
</ul>
<h3 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h3><ul>
<li><p><strong>Explicitly define <code>serialVersionUID</code></strong>:</p>
<ul>
<li>It is generally recommended to explicitly define <code>serialVersionUID</code> in your serializable classes. This way, you have more control over versioning. You can decide when a change in the class should break compatibility and when it should not.</li>
<li><p><strong>Example</strong>:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you later modify the class by adding a new field but decide that it should still be compatible with the previously serialized objects, you can keep the <code>serialVersionUID</code> the same. However, if you decide that the changes are significant enough to break compatibility, you can change the <code>serialVersionUID</code>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="Serialization-and-Deserialization-Example"><a href="#Serialization-and-Deserialization-Example" class="headerlink" title="Serialization and Deserialization Example"></a>Serialization and Deserialization Example</h3><ul>
<li><p>Here is a simple example of serializing and deserializing an object:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyClass obj = <span class="keyword">new</span> MyClass(<span class="number">42</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Serialization</span></span><br><span class="line">            FileOutputStream fileOut = <span class="keyword">new</span> FileOutputStream(<span class="string">"object.ser"</span>);</span><br><span class="line">            ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(fileOut);</span><br><span class="line">            out.writeObject(obj);</span><br><span class="line">            out.close();</span><br><span class="line">            fileOut.close();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Deserialization</span></span><br><span class="line">            FileInputStream fileIn = <span class="keyword">new</span> FileInputStream(<span class="string">"object.ser"</span>);</span><br><span class="line">            ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(fileIn);</span><br><span class="line">            MyClass deserializedObj = (MyClass) in.readObject();</span><br><span class="line">            in.close();</span><br><span class="line">            fileIn.close();</span><br><span class="line">            System.out.println(deserializedObj.getValue());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>In this example, the <code>MyClass</code> object is serialized to a file and then deserialized. If you change the <code>MyClass</code> and want to maintain compatibility, you should keep the <code>serialVersionUID</code> constant. If you want to break compatibility, change the <code>serialVersionUID</code>.</p>
</li>
</ul>
<hr>
<h2 id="53-HashMap-how-does-it-work-internally-what-is-hash-collision"><a href="#53-HashMap-how-does-it-work-internally-what-is-hash-collision" class="headerlink" title="53. HashMap: how does it work internally, what is hash collision"></a>53. HashMap: how does it work internally, what is hash collision</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>VERY IMPORTANT!!!</p>
<p>HashMap has 2 key important methods, <code>equals()</code> and <code>hashcode()</code></p>
<p>Think there is a list of buckets, each bucket is identified by a hashcode.</p>
<p>When you call get(key), the key will first be passed to <code>hashcode()</code> method and a hashcode is returned, Use this hashcode, you can locate the corresponding bucket. Inside that bucket, it is a tree structure of all key-value pairs that share the same hashcode. so to find the target key-value pair, the <code>equals()</code> method will be called, and once found, the value will be returned.</p>
<p>Hash collision: all the key-value pair that shares the same hashcode stays in same bucket, that is called hash collision. It is preferred in hashmap, because if there is NO hash collsion, each key-value pair will stay in one bucket, then there will be too many buckets, causing too much memory. If all entries in one bucket, then it is hard to search the target. The hash collision makes the time complexity of hashmap to <strong>O(1)</strong> because of hashing.</p>
<p>Why hashmap use Tree structure in bucket: Previously it is a list, but then changed to tree, because tree has left node smaller than root and root smaller than right. So the search is <strong>O(logN)</strong>, much faster than list.</p>
<hr>
<h2 id="59-What-is-the-Functional-Interface-Java-8-built-in-functional-interface"><a href="#59-What-is-the-Functional-Interface-Java-8-built-in-functional-interface" class="headerlink" title="59. What is the Functional Interface? Java 8 built in functional interface?"></a>59. What is the Functional Interface? Java 8 built in functional interface?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Function interface is in java 8, it can only contain Single Abstract Method. You can use lambda to implement it.</p>
<p>Java built-in function interface:</p>
<p><strong>Consumer</strong>: the method takes input but NO output. Example: System.out.println(input)</p>
<p><strong>Supplier</strong>: the method takes NO input but HAS output. Example: RandomNumberGenerator.</p>
<p><strong>Predicate</strong>!: the method return boolean type, true or false, it is widely used in <code>stream().filter(predicate)</code> to filter out collections</p>
<p><strong>Function</strong>: the method takes INPUT and RETURN output. it is used to convert data, like <code>stream().map(function)</code></p>
<p>Binary Operator: the method has 2 input and 1 same type output: like int add(int a, int b)</p>
<p>there are other types, but you only need to anser, the top 4.</p>
<hr>
<h2 id="67-Implement-a-singleton"><a href="#67-Implement-a-singleton" class="headerlink" title="67. Implement a singleton"></a>67. Implement a singleton</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Thread-safe Singleton implementation using double-checked locking.</span></span><br><span class="line"><span class="comment"> * Also defends against cloning and deserialization.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">implements</span> <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Volatile keyword ensures visibility and ordering of writes across threads</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Private constructor prevents instantiation from outside</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the singleton instance with double-checked locking</span></span><br><span class="line"><span class="comment">     * for thread-safe lazy initialization.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123; <span class="comment">// First check (no locking)</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123; <span class="comment">// Second check (with locking)</span></span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Prevents cloning of the singleton instance.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> CloneNotSupportedException(<span class="string">"Cloning of Singleton is not allowed."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ensures that deserialization doesn't create a new instance.</span></span><br><span class="line"><span class="comment">     * Instead, returns the existing singleton instance.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">readResolve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="68-Do-you-know-about-the-Executor-Service-and-Future"><a href="#68-Do-you-know-about-the-Executor-Service-and-Future" class="headerlink" title="68. Do you know about the Executor Service and Future?"></a>68. Do you know about the Executor Service and Future?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Executor Service has thread pool. It can be used run multi threads in parallel.</p>
<p>Thread Pool:</p>
<ul>
<li><strong>Fixed Thread Pool:</strong> create fixed number of threads no matter you will use it or not</li>
<li><strong>Cached Thread Pool</strong>: create threads based on needs, if new task is coming and no threads available, it will create new thread. If a thread idle for some time, it will be terminated.</li>
<li><strong>Scheduled Thread Pool</strong>: can be used to set delays and schedule tasks</li>
<li><strong>Fork Join Pool</strong>: It uses a <strong>work-stealing algorithm</strong>, the tasks are break into many small pieces. If some threads are done with their tasks, they can steal other threads task to run. This will have better performance.</li>
</ul>
<p>When the task has return (callable tasks)</p>
<p>Use <strong>Future</strong> object to host the return. The tasks are like async process, they are submitted, and later on, if there is a return comes back, the return will be stored in Future object.</p>
<p>Future has method like get() to get result or isDone() to check if task is completed.</p>
<h3 id="Executor-Service"><a href="#Executor-Service" class="headerlink" title="Executor Service"></a>Executor Service</h3><ul>
<li>The <code>ExecutorService</code> is an interface in Java that provides a higher-level abstraction for executing tasks asynchronously compared to using raw threads. It is part of the <code>java.util.concurrent</code> package.</li>
<li>It manages a pool of threads, which can be used to execute <code>Runnable</code> or <code>Callable</code> tasks. By using an <code>ExecutorService</code>, you don’t have to deal with the low-level details of thread creation, management, and destruction.</li>
<li>You can submit tasks to the <code>ExecutorService</code>, and it will handle scheduling and execution of those tasks using its thread pool.</li>
<li>Some commonly used implementations of <code>ExecutorService</code> include <code>ThreadPoolExecutor</code> and <code>ScheduledThreadPoolExecutor</code>.</li>
<li><p>Example of creating an <code>ExecutorService</code>:</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExecutorServiceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Creates a fixed-size thread pool with 5 threads</span></span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Submits a Runnable task</span></span><br><span class="line">        executorService.execute(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"Task executed by thread: "</span> + Thread.currentThread().getName());</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Shuts down the executor service after all tasks are completed</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  In the code above:</p>
<ul>
<li><code>Executors.newFixedThreadPool(5)</code> creates a fixed-size thread pool with 5 threads.</li>
<li><code>executorService.execute()</code> submits a <code>Runnable</code> task to the executor service for execution. The <code>Runnable</code> task is defined using a lambda expression, which simply prints the name of the thread that executes the task.</li>
<li><code>executorService.shutdown()</code> shuts down the executor service after all submitted tasks have completed.</li>
</ul>
</li>
</ul>
<h3 id="Future"><a href="#Future" class="headerlink" title="Future"></a>Future</h3><ul>
<li>The <code>Future</code> interface represents the result of an asynchronous computation. It is used in conjunction with <code>ExecutorService</code> when you submit a <code>Callable</code> task.</li>
<li>A <code>Callable</code> is similar to a <code>Runnable</code>, but it can return a result and throw an exception.</li>
<li>When you submit a <code>Callable</code> to an <code>ExecutorService</code>, it returns a <code>Future</code> object, which you can use to check if the computation is done, wait for the computation to complete, and retrieve the result of the computation.</li>
<li><p>Example of using <code>Future</code> with <code>ExecutorService</code>:</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Submits a Callable task</span></span><br><span class="line">        Future&lt;Integer&gt; future = executorService.submit(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="comment">// Simulates some computation</span></span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Waits for the task to complete and gets the result</span></span><br><span class="line">            Integer result = future.get();</span><br><span class="line">            System.out.println(<span class="string">"Result: "</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  In the code above:</p>
<ul>
<li><code>executorService.submit()</code> is used to submit a <code>Callable&lt;Integer&gt;</code> task. The <code>Callable</code> task simulates some computation (in this case, it sleeps for 2 seconds and then returns the value 42).</li>
<li><code>future.get()</code> blocks the calling thread until the computation is completed and returns the result. If the computation throws an exception, it will be wrapped in an <code>ExecutionException</code>.</li>
<li><code>InterruptedException</code> is thrown if the waiting thread is interrupted while waiting for the result.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="364-Difference-future-vs-completableFuture"><a href="#364-Difference-future-vs-completableFuture" class="headerlink" title="364. Difference future vs completableFuture"></a>364. Difference future vs completableFuture</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>When you submit a task to executor service, it returns a future.</p>
<p>CompletableFuture is advanced version of future.</p>
<p>1) It has method like <code>thenApply</code>, <code>thenCombine</code> etc. so you can build thread chain.</p>
<p>2) it has <code>handle</code> and <code>whenComplete</code> method, which you can handle exception with it.</p>
<p>在 Java 里，<code>Future</code> 和 <code>CompletableFuture</code> 都用于处理异步操作，不过 <code>CompletableFuture</code> 是 Java 8 引入的，它在 <code>Future</code> 的基础上做了扩展，功能更强大。下面从多个方面对它们进行对比，并给出示例和表格。</p>
<h3 id="Future-1"><a href="#Future-1" class="headerlink" title="Future"></a>Future</h3><ul>
<li>The <code>Future</code> interface represents the result of an asynchronous computation. It is used in conjunction with <code>ExecutorService</code> when you submit a <code>Callable</code> task.</li>
<li>A <code>Callable</code> is similar to a <code>Runnable</code>, but it can return a result and throw an exception.</li>
<li>When you submit a <code>Callable</code> to an <code>ExecutorService</code>, it returns a <code>Future</code> object, which you can use to check if the computation is done, wait for the computation to complete, and retrieve the result of the computation.</li>
<li><p>Example of using <code>Future</code> with <code>ExecutorService</code>:</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Submits a Callable task</span></span><br><span class="line">        Future&lt;Integer&gt; future = executorService.submit(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="comment">// Simulates some computation</span></span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Waits for the task to complete and gets the result</span></span><br><span class="line">            Integer result = future.get();</span><br><span class="line">            System.out.println(<span class="string">"Result: "</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  In the code above:</p>
<ul>
<li><code>executorService.submit()</code> is used to submit a <code>Callable&lt;Integer&gt;</code> task. The <code>Callable</code> task simulates some computation (in this case, it sleeps for 2 seconds and then returns the value 42).</li>
<li><code>future.get()</code> blocks the calling thread until the computation is completed and returns the result. If the computation throws an exception, it will be wrapped in an <code>ExecutionException</code>.</li>
<li><code>InterruptedException</code> is thrown if the waiting thread is interrupted while waiting for the result.</li>
</ul>
</li>
</ul>
<h3 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h3><ul>
<li><p>Enhanced Functionality:</p>
<ul>
<li><code>CompletableFuture</code> is introduced in Java 8. It implements <code>Future</code> and provides additional functionality for chaining asynchronous operations, combining multiple futures, and handling exceptions.</li>
<li><p>It allows you to perform actions upon completion, combine multiple futures, and transform results.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompletableFutureExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// Simulate a long-running task</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do other work while the future is being computed</span></span><br><span class="line">        System.out.println(<span class="string">"Doing other work..."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Chain another action upon completion</span></span><br><span class="line">        CompletableFuture&lt;String&gt; resultFuture = future.thenApply(result -&gt; <span class="string">"Result: "</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Block until the final result is available</span></span><br><span class="line">        String result = resultFuture.get();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="comment">/* result print:</span></span><br><span class="line"><span class="comment">            Doing other work...</span></span><br><span class="line"><span class="comment">            Result: 42</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>CompletableFuture.supplyAsync(() -&gt; {... });</code>: Creates a <code>CompletableFuture</code> that runs the given task asynchronously.</li>
<li><code>future.thenApply(result -&gt; &quot;Result: &quot; + result);</code>: Chains another action to the <code>CompletableFuture</code>.</li>
<li><code>resultFuture.get();</code>: Blocks until the final result is available.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="对比分析"><a href="#对比分析" class="headerlink" title="对比分析"></a>对比分析</h3><h4 id="1-基本功能"><a href="#1-基本功能" class="headerlink" title="1. 基本功能"></a>1. 基本功能</h4><ul>
<li><strong><code>Future</code></strong>：<code>Future</code> 代表一个异步计算的结果。它提供了检查计算是否完成、等待计算完成以及获取计算结果的方法。不过，它缺乏对异步操作的进一步控制和组合能力。</li>
<li><strong><code>CompletableFuture</code></strong>：<code>CompletableFuture</code> 不仅具备 <code>Future</code> 的基本功能，还支持链式调用和组合多个异步操作，能轻松处理复杂的异步任务。</li>
</ul>
<h4 id="2-异步任务的创建"><a href="#2-异步任务的创建" class="headerlink" title="2. 异步任务的创建"></a>2. 异步任务的创建</h4><ul>
<li><strong><code>Future</code></strong>：通常借助线程池提交任务来创建 <code>Future</code> 对象。</li>
<li><strong><code>CompletableFuture</code></strong>：提供了多种静态方法来创建，例如 <code>runAsync</code>、<code>supplyAsync</code> 等。</li>
</ul>
<h4 id="3-错误处理"><a href="#3-错误处理" class="headerlink" title="3. 错误处理"></a>3. 错误处理</h4><ul>
<li><strong><code>Future</code></strong>：<code>Future</code> 本身没有内置的错误处理机制，需要手动捕获异常。</li>
<li><strong><code>CompletableFuture</code></strong>：有专门的 <code>exceptionally</code> 方法来处理异常，还可以使用 <code>handle</code> 方法同时处理正常结果和异常。</li>
</ul>
<h4 id="4-组合多个异步任务"><a href="#4-组合多个异步任务" class="headerlink" title="4. 组合多个异步任务"></a>4. 组合多个异步任务</h4><ul>
<li><strong><code>Future</code></strong>：组合多个 <code>Future</code> 任务较为复杂，需要手动管理线程和结果。</li>
<li><strong><code>CompletableFuture</code></strong>：提供了丰富的方法来组合多个异步任务，比如 <code>thenCompose</code>、<code>thenCombine</code> 等。</li>
</ul>
<h4 id="对比表格"><a href="#对比表格" class="headerlink" title="对比表格"></a>对比表格</h4><table>
<thead>
<tr>
<th>对比项</th>
<th><code>Future</code></th>
<th><code>CompletableFuture</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>基本功能</td>
<td>代表异步计算的结果，提供检查计算是否完成、等待计算完成以及获取结果的方法</td>
<td>具备 <code>Future</code> 的基本功能，还支持链式调用和组合多个异步操作</td>
</tr>
<tr>
<td>异步任务创建</td>
<td>通常通过线程池提交任务创建</td>
<td>提供多种静态方法创建，如 <code>runAsync</code>、<code>supplyAsync</code></td>
</tr>
<tr>
<td>错误处理</td>
<td>无内置错误处理机制，需手动捕获异常</td>
<td>有 <code>exceptionally</code> 和 <code>handle</code> 方法处理异常</td>
</tr>
<tr>
<td>组合多个异步任务</td>
<td>组合复杂，需手动管理线程和结果</td>
<td>提供丰富方法组合，如 <code>thenCompose</code>、<code>thenCombine</code></td>
</tr>
<tr>
<td>代码可读性</td>
<td>代码复杂，可读性差</td>
<td>支持链式调用，代码简洁易读</td>
</tr>
</tbody>
</table>
<p>通过上述对比和示例可知，<code>CompletableFuture</code> 在功能和易用性上明显优于 <code>Future</code>，更适合处理复杂的异步任务。 </p>
<hr>
<h2 id="69-Explain-the-Factory-design-pattern"><a href="#69-Explain-the-Factory-design-pattern" class="headerlink" title="69. Explain the Factory design pattern"></a>69. Explain the Factory design pattern</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>A factory is a method that if you pass an input, it can return the corresponding objects:</p>
<p>REAL PROJECT Example:</p>
<ol>
<li>Credit card payment, if enter <code>MasterCard</code>, will return mastercard payment object, if enter <code>Visa</code>, will return visa payment etc.</li>
<li>Database Connection, if pass in <code>oracle</code>, will return oracle connection object, if pass <code>mysql</code>, will return mysql payment object.</li>
</ol>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MySQL</span><br><span class="line">PostgreSQL</span><br><span class="line">Unsupported database type:</span><br></pre></td></tr></table></figure>
<h2 id="70-What-design-patterns-did-you-worked-on-before"><a href="#70-What-design-patterns-did-you-worked-on-before" class="headerlink" title="70. What design patterns did you worked on before?"></a>70. What design patterns did you worked on before?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Singleton, Factory + One more (You pick the 3rd one, You need to know how to explain and how to write it)</p>
<h3 id="Factory-Pattern"><a href="#Factory-Pattern" class="headerlink" title="Factory Pattern"></a>Factory Pattern</h3><p>This factory pattern allows you to create objects without exposing the instantiation logic to the client. The client only needs to interact with the <code>ProductFactory</code> and provide the product type, and the factory takes care of creating the appropriate product. This promotes loose coupling and makes the code more modular and maintainable.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Product interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Product A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductA</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"This is ConcreteProductA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Product B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductB</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"This is ConcreteProductB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Factory class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String productType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (productType.equalsIgnoreCase(<span class="string">"A"</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductA();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (productType.equalsIgnoreCase(<span class="string">"B"</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductB();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid product type: "</span> + productType);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Main class to demonstrate the factory pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ProductFactory factory = <span class="keyword">new</span> ProductFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create product A</span></span><br><span class="line">        Product productA = factory.createProduct(<span class="string">"A"</span>);</span><br><span class="line">        productA.show();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create product B</span></span><br><span class="line">        Product productB = factory.createProduct(<span class="string">"B"</span>);</span><br><span class="line">        productB.show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Try to create an invalid product</span></span><br><span class="line">            Product invalidProduct = factory.createProduct(<span class="string">"C"</span>);</span><br><span class="line">            invalidProduct.show();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Obeserver-Pattern"><a href="#Obeserver-Pattern" class="headerlink" title="Obeserver Pattern"></a>Obeserver Pattern</h3><p>This code demonstrates the Observer Pattern, which allows a subject to maintain a list of observers and notify them of any state changes. It promotes loose coupling between the subject and the observers, making it easy to add or remove observers without modifying the subject’s code.<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Observer interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Subject interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">attach</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">detach</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Subject</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attach</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">detach</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        observers.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">            observer.update(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Observer A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserverA</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteObserverA received message: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Observer B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserverB</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteObserverB received message: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Main class to demonstrate the Observer Pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Create subject</span></span><br><span class="line">        ConcreteSubject subject = <span class="keyword">new</span> ConcreteSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create observers</span></span><br><span class="line">        Observer observerA = <span class="keyword">new</span> ConcreteObserverA();</span><br><span class="line">        Observer observerB = <span class="keyword">new</span> ConcreteObserverB();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Attach observers to the subject</span></span><br><span class="line">        subject.attach(observerA);</span><br><span class="line">        subject.attach(observerB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Notify observers</span></span><br><span class="line">        subject.notifyObservers(<span class="string">"Hello, Observers!"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Detach one observer</span></span><br><span class="line">        subject.detach(observerB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Notify remaining observer</span></span><br><span class="line">        subject.notifyObservers(<span class="string">"Goodbye, Observers!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Proxy-Pattern"><a href="#Proxy-Pattern" class="headerlink" title="Proxy Pattern"></a>Proxy Pattern</h3><p>The Proxy Design Pattern is a structural design pattern that provides a surrogate or placeholder for another object to control access to it. It is used to control access to the real object, add additional functionality, or provide a more efficient way of accessing the object. Here’s a detailed explanation:</p>
<h4 id="Structure-of-Proxy-Design-Pattern"><a href="#Structure-of-Proxy-Design-Pattern" class="headerlink" title="Structure of Proxy Design Pattern"></a>Structure of Proxy Design Pattern</h4><ul>
<li>Subject: This is an interface that defines the common interface for the RealSubject and Proxy.</li>
<li>RealSubject: This is the actual object that the proxy represents.</li>
<li>Proxy: This is the object that controls access to the RealSubject. It has a reference to the RealSubject and implements the Subject interface.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RealImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">        loadFromDisk();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadFromDisk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Loading "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Displaying "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealImage realImage;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (realImage == <span class="keyword">null</span>) &#123;</span><br><span class="line">            realImage = <span class="keyword">new</span> RealImage(fileName);</span><br><span class="line">        &#125;</span><br><span class="line">        realImage.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Explanation:</p>
<ol>
<li>Interface <code>Image</code>:<ul>
<li><code>interface Image</code> defines the <code>display()</code> method that both <code>RealImage</code> and <code>ProxyImage</code> will implement.</li>
</ul>
</li>
<li>RealSubject <code>RealImage</code>:<ul>
<li><code>RealImage</code> implements <code>Image</code>.</li>
<li>The <code>RealImage</code> constructor loads the image from disk when an instance is created.</li>
<li>The <code>display()</code> method displays the image.</li>
</ul>
</li>
<li>Proxy <code>ProxyImage</code>:<ul>
<li><code>ProxyImage</code> also implements <code>Image</code>.</li>
<li><code>ProxyImage</code> holds a reference to <code>RealImage</code>.</li>
<li>In the <code>display()</code> method of <code>ProxyImage</code>, if <code>realImage</code> is not instantiated, it creates a <code>RealImage</code> instance.</li>
<li>Then, it calls the <code>display()</code> method of <code>RealImage</code>.</li>
</ul>
</li>
</ol>
<h4 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h4><ul>
<li>Remote Proxy: Used to represent an object that exists in a different address space, like a remote object in a distributed system.</li>
<li>Virtual Proxy: Used to create expensive objects on demand. For example, loading images only when they are needed to be displayed.</li>
<li>Protection Proxy: Used to control access to the real object, providing authentication or authorization.</li>
</ul>
<h4 id="Benefits"><a href="#Benefits" class="headerlink" title="Benefits"></a>Benefits</h4><ul>
<li>Lazy Loading: Objects can be loaded only when they are needed, improving performance.</li>
<li>Access Control: Provides a way to control access to the real object, adding security or authorization.</li>
<li>Enhanced Functionality: Proxies can add additional functionality, like logging or caching, without modifying the real object.</li>
</ul>
<h4 id="Example-of-Usage"><a href="#Example-of-Usage" class="headerlink" title="Example of Usage"></a>Example of Usage</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Image image = <span class="keyword">new</span> ProxyImage(<span class="string">"test.jpg"</span>);</span><br><span class="line">        <span class="comment">// Image is loaded from disk only when display is called</span></span><br><span class="line">        image.display();</span><br><span class="line">        image.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Explanation:</p>
<ol>
<li>We create a <code>ProxyImage</code> instance with the file name “test.jpg”.</li>
<li>The first time <code>display()</code> is called, <code>RealImage</code> is instantiated and the image is loaded and displayed.</li>
<li>The second time <code>display()</code> is called, the already instantiated <code>RealImage</code> is used, avoiding reloading.</li>
</ol>
<hr>
<h2 id="71-How-to-custom-an-Exception"><a href="#71-How-to-custom-an-Exception" class="headerlink" title="71. How to custom an Exception?"></a>71. How to custom an Exception?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Just extend the <code>Exception</code> class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    String message;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">        <span class="comment">//other logic if needed.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="78-What-is-Optional"><a href="#78-What-is-Optional" class="headerlink" title="78. What is Optional?"></a>78. What is Optional?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Optional is introduced in java 8, to prevent null pointer exception.</p>
<p>For example, if you have employee.getAddress().getCity(), in runtime, if employee is null, getAddress() will throw exception.</p>
<p>Wen can use Optional<employee>, optional has method like ifPresent(), isPresent(), get(), orElse() etc.</employee></p>
<hr>
<p>在 Java 中，<code>Optional</code> 是 Java 8 引入的一个容器类，它可以包含一个非空值（<code>Optional.of(value)</code>），也可以表示一个空值（<code>Optional.empty()</code>）。其主要作用是避免 <code>NullPointerException</code>，使代码更具可读性和健壮性。下面详细介绍 <code>Optional</code> 的常见用法：</p>
<h3 id="1-创建-Optional-对象"><a href="#1-创建-Optional-对象" class="headerlink" title="1. 创建 Optional 对象"></a>1. 创建 <code>Optional</code> 对象</h3><ul>
<li><strong><code>Optional.of(T value)</code></strong>：创建一个包含非空值的 <code>Optional</code> 对象。如果传入的参数为 <code>null</code>，会抛出 <code>NullPointerException</code>。</li>
<li><strong><code>Optional.ofNullable(T value)</code></strong>：创建一个可能包含空值的 <code>Optional</code> 对象。如果传入的参数为 <code>null</code>，则返回一个空的 <code>Optional</code> 对象。</li>
<li><strong><code>Optional.empty()</code></strong>：创建一个空的 <code>Optional</code> 对象。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalCreationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用 Optional.of 创建包含非空值的 Optional 对象</span></span><br><span class="line">        String nonNullValue = <span class="string">"Hello"</span>;</span><br><span class="line">        Optional&lt;String&gt; optionalWithValue = Optional.of(nonNullValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 Optional.ofNullable 创建可能包含空值的 Optional 对象</span></span><br><span class="line">        String nullableValue = <span class="keyword">null</span>;</span><br><span class="line">        Optional&lt;String&gt; optionalWithNullableValue = Optional.ofNullable(nullableValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 Optional.empty 创建空的 Optional 对象</span></span><br><span class="line">        Optional&lt;String&gt; emptyOptional = Optional.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-判断-Optional-中是否包含值"><a href="#2-判断-Optional-中是否包含值" class="headerlink" title="2. 判断 Optional 中是否包含值"></a>2. 判断 <code>Optional</code> 中是否包含值</h3><ul>
<li><strong><code>isPresent()</code></strong>：判断 <code>Optional</code> 对象是否包含非空值。如果包含非空值返回 <code>true</code>，否则返回 <code>false</code>。</li>
<li><strong><code>isEmpty()</code></strong>：Java 11 引入的方法，判断 <code>Optional</code> 对象是否为空。如果为空返回 <code>true</code>，否则返回 <code>false</code>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalIsPresentExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Optional&lt;String&gt; optionalWithValue = Optional.of(<span class="string">"Hello"</span>);</span><br><span class="line">        Optional&lt;String&gt; emptyOptional = Optional.empty();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"optionalWithValue 是否包含值: "</span> + optionalWithValue.isPresent()); </span><br><span class="line">        System.out.println(<span class="string">"emptyOptional 是否包含值: "</span> + emptyOptional.isPresent()); </span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"optionalWithValue 是否为空: "</span> + optionalWithValue.isEmpty()); </span><br><span class="line">        System.out.println(<span class="string">"emptyOptional 是否为空: "</span> + emptyOptional.isEmpty()); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-获取-Optional-中的值"><a href="#3-获取-Optional-中的值" class="headerlink" title="3. 获取 Optional 中的值"></a>3. 获取 <code>Optional</code> 中的值</h3><ul>
<li><strong><code>get()</code></strong>：如果 <code>Optional</code> 包含非空值，则返回该值；否则抛出 <code>NoSuchElementException</code>。</li>
<li><strong><code>orElse(T other)</code></strong>：如果 <code>Optional</code> 包含非空值，则返回该值；否则返回指定的默认值 <code>other</code>。</li>
<li><strong><code>orElseGet(Supplier&lt;? extends T&gt; other)</code></strong>：如果 <code>Optional</code> 包含非空值，则返回该值；否则调用 <code>Supplier</code> 函数式接口的 <code>get()</code> 方法获取默认值。</li>
<li><strong><code>orElseThrow()</code></strong>：如果 <code>Optional</code> 包含非空值，则返回该值；否则抛出 <code>NoSuchElementException</code>。在 Java 10 及以后版本，还可以使用 <code>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code> 方法自定义异常。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalGetValueExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Optional&lt;String&gt; optionalWithValue = Optional.of(<span class="string">"Hello"</span>);</span><br><span class="line">        Optional&lt;String&gt; emptyOptional = Optional.empty();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 get 方法</span></span><br><span class="line">        System.out.println(<span class="string">"optionalWithValue 的值: "</span> + optionalWithValue.get());</span><br><span class="line">        <span class="comment">// 下面这行代码会抛出 NoSuchElementException</span></span><br><span class="line">        <span class="comment">// System.out.println("emptyOptional 的值: " + emptyOptional.get()); </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 orElse 方法</span></span><br><span class="line">        String valueWithDefault = emptyOptional.orElse(<span class="string">"Default Value"</span>);</span><br><span class="line">        System.out.println(<span class="string">"emptyOptional 的默认值: "</span> + valueWithDefault);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 orElseGet 方法</span></span><br><span class="line">        String valueWithSupplier = emptyOptional.orElseGet(() -&gt; <span class="string">"Value from Supplier"</span>);</span><br><span class="line">        System.out.println(<span class="string">"emptyOptional 通过 Supplier 获取的默认值: "</span> + valueWithSupplier);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 orElseThrow 方法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            emptyOptional.orElseThrow();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"捕获到异常: "</span> + e.getClass().getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 orElseThrow 自定义异常</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            emptyOptional.orElseThrow(() -&gt; <span class="keyword">new</span> RuntimeException(<span class="string">"Value is absent"</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"捕获到自定义异常: "</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-对-Optional-中的值进行操作"><a href="#4-对-Optional-中的值进行操作" class="headerlink" title="4. 对 Optional 中的值进行操作"></a>4. 对 <code>Optional</code> 中的值进行操作</h3><ul>
<li><strong><code>ifPresent(Consumer&lt;? super T&gt; action)</code></strong>：如果 <code>Optional</code> 包含非空值，则执行指定的 <code>Consumer</code> 操作；否则不做任何处理。</li>
<li><strong><code>ifPresentOrElse(Consumer&lt;? super T&gt; action, Runnable emptyAction)</code></strong>：Java 9 引入的方法，如果 <code>Optional</code> 包含非空值，则执行 <code>action</code>；否则执行 <code>emptyAction</code>。</li>
<li><strong><code>map(Function&lt;? super T,? extends U&gt; mapper)</code></strong>：如果 <code>Optional</code> 包含非空值，则对该值应用 <code>Function</code> 函数式接口的 <code>apply()</code> 方法，并返回一个包含结果的 <code>Optional</code> 对象；否则返回一个空的 <code>Optional</code> 对象。</li>
<li><strong><code>flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper)</code></strong>：与 <code>map</code> 方法类似，但 <code>Function</code> 函数式接口的返回值必须是 <code>Optional</code> 类型。</li>
<li><strong><code>filter(Predicate&lt;? super T&gt; predicate)</code></strong>：如果 <code>Optional</code> 包含非空值，并且该值满足指定的 <code>Predicate</code> 条件，则返回包含该值的 <code>Optional</code> 对象；否则返回一个空的 <code>Optional</code> 对象。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalOperateValueExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Optional&lt;String&gt; optionalWithValue = Optional.of(<span class="string">"Hello"</span>);</span><br><span class="line">        Optional&lt;String&gt; emptyOptional = Optional.empty();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 ifPresent 方法</span></span><br><span class="line">        optionalWithValue.ifPresent(value -&gt; System.out.println(<span class="string">"值存在，执行操作: "</span> + value));</span><br><span class="line">        emptyOptional.ifPresent(value -&gt; System.out.println(<span class="string">"值存在，执行操作: "</span> + value));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 ifPresentOrElse 方法</span></span><br><span class="line">        optionalWithValue.ifPresentOrElse(</span><br><span class="line">                value -&gt; System.out.println(<span class="string">"值存在，执行操作: "</span> + value),</span><br><span class="line">                () -&gt; System.out.println(<span class="string">"值不存在，执行空操作"</span>)</span><br><span class="line">        );</span><br><span class="line">        emptyOptional.ifPresentOrElse(</span><br><span class="line">                value -&gt; System.out.println(<span class="string">"值存在，执行操作: "</span> + value),</span><br><span class="line">                () -&gt; System.out.println(<span class="string">"值不存在，执行空操作"</span>)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 map 方法</span></span><br><span class="line">        Optional&lt;Integer&gt; lengthOptional = optionalWithValue.map(String::length);</span><br><span class="line">        System.out.println(<span class="string">"值的长度: "</span> + lengthOptional.orElse(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 flatMap 方法</span></span><br><span class="line">        Optional&lt;Optional&lt;Integer&gt;&gt; nestedOptional = optionalWithValue.map(s -&gt; Optional.of(s.length()));</span><br><span class="line">        Optional&lt;Integer&gt; flatMappedOptional = optionalWithValue.flatMap(s -&gt; Optional.of(s.length()));</span><br><span class="line">        System.out.println(<span class="string">"flatMap 后的结果: "</span> + flatMappedOptional.orElse(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 filter 方法</span></span><br><span class="line">        Optional&lt;String&gt; filteredOptional = optionalWithValue.filter(s -&gt; s.length() &gt; <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">"过滤后的结果: "</span> + filteredOptional.orElse(<span class="string">"未找到符合条件的值"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过上述示例，你可以了解到 <code>Optional</code> 的常见用法，合理使用 <code>Optional</code> 可以有效避免 <code>NullPointerException</code>，提高代码的健壮性和可读性。 </p>
<hr>
<h2 id="90-ArrayList-vs-LinkedList-which-one-to-choose"><a href="#90-ArrayList-vs-LinkedList-which-one-to-choose" class="headerlink" title="90. ArrayList vs LinkedList, which one to choose?"></a>90. ArrayList vs LinkedList, which one to choose?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Structural: Arraylist has index and get(index) method. LinkedList: has only header and next pointer.</p>
<p>For TIME complexity,</p>
<p>if you know the index of target element in arraylist, arraylist is best O(1), if you dont know index, arraylist and linkedlist are the same O(n)</p>
<p>For Space complexity,</p>
<p>ADD element ArrayList is O(n) because you have to shift all elements after. But linkedlist is O(1) because you just change the pointer.</p>
<hr>
<ul>
<li>“frequency”: 5,</li>
</ul>
<p>Intermediate operator:</p>
<ul>
<li>refer to operators that return another stream which can be appended by another operator. like <code>stream().map()</code>, the map is an intermediate operator because we can chain it with more operations.</li>
<li>Example: filter, map, sorted</li>
</ul>
<p>Terminal operator:</p>
<ul>
<li>refer to final operators in stream api. We cannot append more operations after terminal operator.</li>
<li>Example: forEach, collect, count, findAny</li>
</ul>
<hr>
<h2 id="95-How-do-you-create-a-thread"><a href="#95-How-do-you-create-a-thread" class="headerlink" title="95. How do you create a thread?"></a>95. How do you create a thread?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>There are 2 ways: extend the Thread class or Implement the Runnable interface</p>
<hr>
<h2 id="104-How-does-thread-communicate-interact-share-data-with-each-other"><a href="#104-How-does-thread-communicate-interact-share-data-with-each-other" class="headerlink" title="104. How does thread communicate/interact/share data with each other"></a>104. How does thread communicate/interact/share data with each other</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Communicate/Interact:</p>
<ol>
<li>Wait() and Notify() method: wait() method will let current thread pause and release lock to other threads, this current thread will only be waken up and get lock if other threads call notify() or notifyAll().</li>
<li>Executor service in java concurrent package can interact threads, like the WorkStealingPool use join and fork to interact between threads to improve performance. CompletableFuture also can chain threads.</li>
</ol>
<p>If asking how to share data between threads:</p>
<ol>
<li>Let threads visit same data memory, like same object, same database table, same file or cache</li>
<li>Use message queues. one thread sending data, another thread consume data</li>
</ol>
<hr>
<p>In Java, threads can communicate, interact, and share data with each other through several mechanisms. Here’s a detailed overview of these methods:</p>
<h3 id="Shared-Variables"><a href="#Shared-Variables" class="headerlink" title="Shared Variables"></a>Shared Variables</h3><ul>
<li><p>Using Volatile Variables:</p>
<ul>
<li>A <code>volatile</code> variable ensures that all reads and writes to the variable are directly to and from main memory, not cached by threads. It is useful for simple flags or status indicators.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>private volatile boolean flag = false;</code>: Declares a <code>volatile</code> boolean variable.</li>
<li><code>setFlag()</code> sets the <code>flag</code> to <code>true</code>.</li>
<li><code>getFlag()</code> retrieves the value of <code>flag</code>.</li>
<li>Changes made by one thread to <code>flag</code> are immediately visible to other threads.</li>
</ol>
</li>
</ul>
<h3 id="Synchronization"><a href="#Synchronization" class="headerlink" title="Synchronization"></a>Synchronization</h3><ul>
<li><p>Using Synchronized Methods and Blocks:</p>
<ul>
<li>Synchronization ensures that only one thread can access a synchronized method or block at a time, preventing race conditions.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SharedData</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>public synchronized void increment() {... }</code>: Synchronized method ensures thread-safe access to <code>count</code>.</li>
<li><code>public synchronized int getCount() {... }</code>: Ensures thread-safe access when reading <code>count</code>.</li>
</ol>
</li>
</ul>
<h3 id="Wait-Notify-and-NotifyAll"><a href="#Wait-Notify-and-NotifyAll" class="headerlink" title="Wait, Notify, and NotifyAll"></a>Wait, Notify, and NotifyAll</h3><ul>
<li><p>Using wait(), notify(), and notifyAll():</p>
<ul>
<li>These methods are used in conjunction with synchronized blocks to pause and resume threads.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ready = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">waitForReady</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            ready = <span class="keyword">true</span>;</span><br><span class="line">            lock.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>waitForReady()</code> waits until <code>ready</code> is <code>true</code>, using <code>lock.wait()</code>.</li>
<li><code>setReady()</code> sets <code>ready</code> to <code>true</code> and wakes up waiting threads using <code>lock.notifyAll()</code>.</li>
</ol>
</li>
</ul>
<h3 id="Thread-Confinement"><a href="#Thread-Confinement" class="headerlink" title="Thread Confinement"></a>Thread Confinement</h3><ul>
<li><p>Using ThreadLocal:</p>
<ul>
<li><code>ThreadLocal</code> allows each thread to have its own copy of a variable.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocalExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Integer&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        threadLocal.set(<span class="number">1</span>);</span><br><span class="line">        System.out.println(threadLocal.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ThreadLocal&lt;Integer&gt; threadLocal = new ThreadLocal&lt;&gt;();</code>: Creates a <code>ThreadLocal</code> variable.</li>
<li><code>threadLocal.set(1);</code>: Sets the value for the current thread.</li>
<li><code>threadLocal.get();</code>: Retrieves the value for the current thread.</li>
</ol>
</li>
</ul>
<h3 id="Using-Concurrent-Data-Structures"><a href="#Using-Concurrent-Data-Structures" class="headerlink" title="Using Concurrent Data Structures"></a>Using Concurrent Data Structures</h3><ul>
<li><p>Using Concurrent Collections:</p>
<ul>
<li>Java provides concurrent collections like <code>ConcurrentHashMap</code>, <code>CopyOnWriteArrayList</code>, etc., which are thread-safe.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentMapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConcurrentHashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"key"</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(map.get(<span class="string">"key"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();</code>: Creates a thread-safe map.</li>
<li><code>map.put(&quot;key&quot;, 1);</code>: Puts an entry in the map.</li>
<li><code>map.get(&quot;key&quot;);</code>: Retrieves the value from the map.</li>
</ol>
</li>
</ul>
<h3 id="Using-Locks-and-Condition-Variables"><a href="#Using-Locks-and-Condition-Variables" class="headerlink" title="Using Locks and Condition Variables"></a>Using Locks and Condition Variables</h3><ul>
<li><p>Using ReentrantLock and Condition:</p>
<ul>
<li><code>ReentrantLock</code> provides more flexible locking than <code>synchronized</code>, and <code>Condition</code> allows more control over waiting and signaling.<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockConditionExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Condition condition = lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ready = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">waitForReady</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ready = <span class="keyword">true</span>;</span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ReentrantLock lock = new ReentrantLock();</code>: Creates a reentrant lock.</li>
<li><code>Condition condition = lock.newCondition();</code>: Creates a condition associated with the lock.</li>
<li><code>condition.await();</code> makes the thread wait.</li>
<li><code>condition.signalAll();</code> wakes up waiting threads.</li>
</ol>
</li>
</ul>
<p>By using these mechanisms, threads can communicate, interact, and share data safely and efficiently, avoiding race conditions and ensuring thread-safe access to shared resources.</p>
<hr>
<h2 id="106-What-are-the-meaning-of-thread-methods-join-wait-sleep-yield"><a href="#106-What-are-the-meaning-of-thread-methods-join-wait-sleep-yield" class="headerlink" title="106. What are the meaning of thread methods: join, wait, sleep, yield"></a>106. What are the meaning of thread methods: join, wait, sleep, yield</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>JOIN: to let current thread wait until another thread finishes. So it is used to let threads run in order.</p>
<p>WAIT: wait is to RELEASE lock and let other threads run. this thread will resume only when other threads call notify(), notifyAll()</p>
<p>SLEEP: this thread will NOT RELEASE the lock, it lets current thread to sleep for given time and then it will restart by itself. Different from wait method, the sleep will not release lock and will resume by itself.</p>
<p>YIELD: if some threads share the same priority, yield method is to hold current thread and let others run first.</p>
<h3 id="join-Method"><a href="#join-Method" class="headerlink" title="join() Method"></a>join() Method</h3><ul>
<li><p>Purpose: The <code>join()</code> method is used to wait for a thread to complete its execution. It is often used when one thread needs to wait for another thread to finish before it can continue its own execution.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 completed"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread1.join();</span><br><span class="line">        System.out.println(<span class="string">"Main thread continues after thread1 completes"</span>);</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 completed</span></span><br><span class="line"><span class="comment">            Main thread continues after thread1 completes</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a new <code>Thread</code> (<code>thread1</code>) which sleeps for 2 seconds and then prints a message.</li>
<li>We start <code>thread1</code> with <code>thread1.start()</code>.</li>
<li>We call <code>thread1.join()</code>, which makes the main thread wait until <code>thread1</code> completes its execution.</li>
<li>Only after <code>thread1</code> completes, the main thread prints its message.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="wait-Method"><a href="#wait-Method" class="headerlink" title="wait() Method"></a>wait() Method</h3><ul>
<li><p>Purpose: The <code>wait()</code> method is used to make a thread wait <strong>until some other thread notifies it</strong>. It must be called from a synchronized block or method, and it releases the lock on the object.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread 1 is waiting"</span>);</span><br><span class="line">                    lock.wait();</span><br><span class="line">                    System.out.println(<span class="string">"Thread 1 resumed"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 2 notifying"</span>);</span><br><span class="line">                lock.notify();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        thread2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 is waiting</span></span><br><span class="line"><span class="comment">            Thread 2 notifying</span></span><br><span class="line"><span class="comment">            Thread 1 resumed</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create an object <code>lock</code> which serves as a lock for synchronization.</li>
<li><code>thread1</code> enters a synchronized block, calls <code>wait()</code>, and waits.</li>
<li><code>thread2</code> enters the same synchronized block, calls <code>notify()</code>, and wakes up <code>thread1</code>.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="sleep-Method"><a href="#sleep-Method" class="headerlink" title="sleep() Method"></a>sleep() Method</h3><ul>
<li><p>Purpose: The <code>sleep()</code> method is used to pause the execution of a thread for a specified amount of time. The thread does not release any locks during this time.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 sleeping"</span>);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 awake"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 sleeping</span></span><br><span class="line"><span class="comment">            Thread 1 awake</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a new <code>Thread</code> (<code>thread1</code>).</li>
<li><code>thread1</code> calls <code>Thread.sleep(2000)</code>, which pauses the thread for 2 seconds.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="yield-Method"><a href="#yield-Method" class="headerlink" title="yield() Method"></a>yield() Method</h3><ul>
<li><p>Purpose: The <code>yield()</code> method is used to suggest to the thread scheduler that the current thread is willing to yield its current use of the processor. The thread scheduler is free to ignore this suggestion.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YieldExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 1: "</span> + i);</span><br><span class="line">                Thread.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 2: "</span> + i);</span><br><span class="line">                Thread.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 2: 0</span></span><br><span class="line"><span class="comment">            Thread 2: 1</span></span><br><span class="line"><span class="comment">            Thread 2: 2</span></span><br><span class="line"><span class="comment">            Thread 1: 0</span></span><br><span class="line"><span class="comment">            Thread 1: 1</span></span><br><span class="line"><span class="comment">            Thread 1: 2</span></span><br><span class="line"><span class="comment">            Thread 2: 3</span></span><br><span class="line"><span class="comment">            Thread 2: 4</span></span><br><span class="line"><span class="comment">            Thread 1: 3</span></span><br><span class="line"><span class="comment">            Thread 1: 4</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create two threads (<code>thread1</code> and <code>thread2</code>).</li>
<li>Each thread prints a message and calls <code>Thread.yield()</code>, suggesting that the scheduler can give the CPU to another thread.</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="117-What-is-ConcurrentModificationException-and-how-to-handle-it"><a href="#117-What-is-ConcurrentModificationException-and-how-to-handle-it" class="headerlink" title="117. What is ConcurrentModificationException and how to handle it?"></a>117. What is ConcurrentModificationException and how to handle it?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>ConcurrentModificationException is thrown when you have multiple threads try to modify the NON-thread-safe java collections, like ArrayList, HashSet, HashMap etc.</p>
<p>To handle:</p>
<ol>
<li>When modify collection, like remove element, using Iterator instead of for loop.</li>
<li>Use thread safe collection, like CopyOnWriteArrayList, ConcurrentHashMap, CopyOnWriteHashSet etc.</li>
</ol>
<hr>
<h2 id="118-Relationship-between-equals-and-hashcode"><a href="#118-Relationship-between-equals-and-hashcode" class="headerlink" title="118. Relationship between equals() and hashcode()"></a>118. Relationship between equals() and hashcode()</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>In HashMap, when you do a get(key) call, first key is passed to hashcode() to locate a bucket, and then inside bucket, call equals() to find the entry.</p>
<p>HashCode() and Equals() should use exactly the same object fields.</p>
<ol>
<li>If two objects are equal according to the <code>equals()</code> method, they must have the same hash code (equal objects must produce equal hash codes).</li>
<li>However, the reverse is not necessarily true: two objects with the same hash code may or may not be equal.</li>
</ol>
<hr>
<p>In Java, the <code>equals()</code> method is used to compare the equality of two objects. Here’s a detailed explanation:</p>
<h3 id="Default-Implementation"><a href="#Default-Implementation" class="headerlink" title="Default Implementation"></a>Default Implementation</h3><ul>
<li>The <code>equals()</code> method is defined in the <code>Object</code> class, which is the superclass of all classes in Java.</li>
<li><p>The default implementation of <code>equals()</code> uses the <code>==</code> operator, which checks if two references point to the same object (i.e., reference equality).</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EqualsExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Object obj1 = <span class="keyword">new</span> Object();</span><br><span class="line">        Object obj2 = <span class="keyword">new</span> Object();</span><br><span class="line">        Object obj3 = obj1;</span><br><span class="line"></span><br><span class="line">        System.out.println(obj1.equals(obj2)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(obj1.equals(obj3)); <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>obj1.equals(obj2)</code> returns <code>false</code> because <code>obj1</code> and <code>obj2</code> are different object instances.</li>
<li><code>obj1.equals(obj3)</code> returns <code>true</code> because <code>obj3</code> refers to the same object as <code>obj1</code>.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="Overriding-equals"><a href="#Overriding-equals" class="headerlink" title="Overriding equals()"></a>Overriding equals()</h3><ul>
<li><p>You should override the <code>equals()</code> method in your custom classes if you want to compare objects based on their state (content equality) rather than reference equality.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass()!= o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Person person = (Person) o;</span><br><span class="line">        <span class="keyword">return</span> age == person.age &amp;&amp; name.equals(person.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>if (this == o) return true;</code> checks if the objects are the same reference.</li>
<li><code>if (o == null || getClass()!= o.getClass()) return false;</code> checks if <code>o</code> is <code>null</code> or not of the same class.</li>
<li><code>Person person = (Person) o;</code> casts <code>o</code> to <code>Person</code>.</li>
<li><code>return age == person.age &amp;&amp; name.equals(person.name);</code> compares the <code>age</code> and <code>name</code> fields.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="hashCode-and-equals"><a href="#hashCode-and-equals" class="headerlink" title="hashCode() and equals()"></a>hashCode() and equals()</h3><ul>
<li>If you override <code>equals()</code>, you should also override <code>hashCode()</code>.</li>
<li><p>The <code>hashCode()</code> method is used in hash-based collections like <code>HashMap</code> and <code>HashSet</code>.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass()!= o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Person person = (Person) o;</span><br><span class="line">        <span class="keyword">return</span> age == person.age &amp;&amp; name.equals(person.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = name.hashCode();</span><br><span class="line">        result = <span class="number">31</span> * result + age;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>hashCode()</code> is overridden to generate a hash code based on <code>name</code> and <code>age</code>.</li>
<li>The formula <code>int result = name.hashCode(); result = 31 * result + age;</code> is a common way to combine hash codes.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="Rules-for-equals"><a href="#Rules-for-equals" class="headerlink" title="Rules for equals()"></a>Rules for equals()</h3><ul>
<li>Reflexive: <code>x.equals(x)</code> should always be <code>true</code>.</li>
<li>Symmetric: If <code>x.equals(y)</code> is <code>true</code>, then <code>y.equals(x)</code> should also be <code>true</code>.</li>
<li>Transitive: If <code>x.equals(y)</code> is <code>true</code> and <code>y.equals(z)</code> is <code>true</code>, then <code>x.equals(z)</code> should be <code>true</code>.</li>
<li>Consistent: Repeated calls to <code>equals()</code> should return the same result, if the objects have not changed.</li>
<li>Null Check: <code>x.equals(null)</code> should always be <code>false</code>.</li>
</ul>
<h3 id="Using-equals"><a href="#Using-equals" class="headerlink" title="Using equals()"></a>Using equals()</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EqualsUsage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="number">30</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="number">30</span>);</span><br><span class="line">        Person p3 = <span class="keyword">new</span> Person(<span class="string">"Jane"</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(p1.equals(p2)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(p1.equals(p3)); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>p1.equals(p2)</code> returns <code>true</code> because <code>p1</code> and <code>p2</code> have the same <code>name</code> and <code>age</code>(because we overrode its <code>equals</code> method above).</li>
<li><code>p1.equals(p3)</code> returns <code>false</code> because <code>p1</code> and <code>p3</code> have different <code>name</code> and <code>age</code>.</li>
</ol>
</li>
</ul>
<hr>
<h2 id="119-How-to-make-class-immutable"><a href="#119-How-to-make-class-immutable" class="headerlink" title="119. How to make class immutable?"></a>119. How to make class immutable?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Immutable means it cannot be changed. So we should prevent all ways to change a class and its object</p>
<ul>
<li>make class final, public final class ..so we cannot extend and modify it</li>
<li>make fields private, so we cannot modify it directly from outside</li>
<li>Do NOT provide setter method.</li>
<li>in the get method, don’t return fields directly, return copy of the fields.</li>
</ul>
<hr>
<h2 id="121-What-is-the-deadlock-How-to-FIND-it-How-to-avoid-it"><a href="#121-What-is-the-deadlock-How-to-FIND-it-How-to-avoid-it" class="headerlink" title="121. What is the deadlock? How to FIND it? How to avoid it?"></a>121. What is the deadlock? How to FIND it? How to avoid it?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Deadlock is when you have 2 threads, Thread1 is waiting Thread2 to release lock on an object while Thread2 is waiting for Thread1 to release lock on an object. They are waiting on each other.</p>
<p>To find:</p>
<p>use <strong>Thread dump</strong>, thread dump is like to take a snapshot/photos of all current threads, so it will show if there are deadlocks.</p>
<p>JProfiler/FastThread/JStack are all tools can show thread dump.</p>
<p>To prevent:</p>
<p>1) For all shared objects/resources by both threads should be combined as a whole entity and should be locked together.</p>
<p>2) Set global orders for the shared objects, so that threads will only lock them in same order.</p>
<hr>
<p>Deadlock is when you have 2 threads, Thread1 is waiting Thread2 to release lock on an object while Thread2 is waiting for Thread1 to release lock on an object. They are waiting on each other.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLock</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R1 = <span class="string">"Hello Welcome to Pilot!"</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R2 = <span class="string">"Visit Pilot!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// creating thread T1</span></span><br><span class="line">        Thread T1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="comment">// implementing run method</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// thread T1 locking the R1 resource</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T1 locked -&gt;   Resource R1"</span>);</span><br><span class="line">                    <span class="comment">// thread T1 locking the R2 resource</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// creating thread T2</span></span><br><span class="line">        Thread T2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="comment">// implementing run method</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// thread T2 locking the R2 resource</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T2 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    <span class="comment">// thread T2 locking the R1 resource</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R1"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// starting both the threads</span></span><br><span class="line">        T1.start();</span><br><span class="line">        T2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread T1 locked -&gt;   Resource R1</span></span><br><span class="line"><span class="comment">            Thread T2 locked -&gt; Resource R2</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Finding-Deadlocks"><a href="#Finding-Deadlocks" class="headerlink" title="Finding Deadlocks"></a>Finding Deadlocks</h3><ul>
<li><p>Thread Dump Analysis:</p>
<ul>
<li>You can use tools like <code>jstack</code> (part of the JDK) to take a thread dump of a running Java application. A thread dump shows the state of all threads, including which locks they hold and which locks they are waiting for.</li>
<li><p>Example of using <code>jstack</code>:</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jstack &lt;PID&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Here, <code>&lt;PID&gt;</code> is the process ID of the Java application.</p>
</li>
<li>Analyzing the thread dump:<ul>
<li>Look for threads that are in the <code>BLOCKED</code> state. If two or more threads are waiting on locks held by each other, it indicates a deadlock.</li>
<li>For example, if Thread A is waiting for a lock held by Thread B, and Thread B is waiting for a lock held by Thread A, it’s a deadlock.</li>
</ul>
</li>
</ul>
</li>
<li>Java VisualVM:<ul>
<li>Java VisualVM is a monitoring and profiling tool. It can detect deadlocks automatically.</li>
<li>Steps:<ol>
<li>Start your Java application.</li>
<li>Open Java VisualVM.</li>
<li>Locate your application in the list of running Java processes.</li>
<li>Go to the “Threads” tab.</li>
<li>Look for deadlock warnings, and examine thread states and locks.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="Avoiding-Deadlocks"><a href="#Avoiding-Deadlocks" class="headerlink" title="Avoiding Deadlocks"></a>Avoiding Deadlocks</h3><ul>
<li><p>Lock Ordering:</p>
<ul>
<li>Always acquire locks in a consistent order across all threads.</li>
<li><p>Example:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadlockAvoidance</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock1 = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock2 = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ul>
<li>Both <code>method1()</code> and <code>method2()</code> acquire <code>lock1</code> before <code>lock2</code>. This ensures that no thread holds <code>lock2</code> while waiting for <code>lock1</code>.</li>
</ul>
</li>
</ul>
</li>
<li><p>Lock Timeout:</p>
<ul>
<li>Use <code>tryLock()</code> with a timeout instead of <code>synchronized</code> or <code>lock()</code>.</li>
<li><p>Example:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeoutLockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock1 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock2 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> lock1Acquired = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">boolean</span> lock2Acquired = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock1Acquired = lock1.tryLock(<span class="number">100</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">            lock2Acquired = lock2.tryLock(<span class="number">100</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">            <span class="keyword">if</span> (lock1Acquired &amp;&amp; lock2Acquired) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// Handle interruption</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lock1Acquired) lock1.unlock();</span><br><span class="line">            <span class="keyword">if</span> (lock2Acquired) lock2.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>tryLock(100, TimeUnit.MILLISECONDS)</code> tries to acquire the lock with a timeout of 100 milliseconds.</li>
<li>If the lock cannot be acquired within the timeout, the thread can take corrective action.</li>
</ol>
</li>
</ul>
</li>
<li>Avoid Nested Locks:<ul>
<li>Minimize the use of nested locks. If possible, design your code to use a single lock or fewer nested locks.</li>
</ul>
</li>
</ul>
<h3 id="Best-Practices-1"><a href="#Best-Practices-1" class="headerlink" title="Best Practices"></a>Best Practices</h3><ul>
<li>Resource Allocation Graph:<ul>
<li>Use a resource allocation graph to analyze potential deadlocks before implementation.</li>
<li>Ensure that the graph does not contain cycles, which indicate potential deadlocks.</li>
</ul>
</li>
<li>Deadlock Detection Algorithms:<ul>
<li>Implement deadlock detection algorithms like the Banker’s algorithm in more complex systems, especially in operating systems or resource management systems.</li>
</ul>
</li>
</ul>
<h2 id="132-What-is-fail-fast-and-fail-safe"><a href="#132-What-is-fail-fast-and-fail-safe" class="headerlink" title="132. What is fail-fast and fail-safe?"></a>132. What is fail-fast and fail-safe?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Fail-Fast: detects the possible failures before it happens. Like when you loop element of <strong>HashMap</strong> and try to remove it. It will fail fast with ConcurrentModificationException</p>
<p>Fail-safe: Use the data structure that can handle ConcurrentModificationException by itself, so it will not throw exception, like when loop and remove elements from <strong>ConcurrentHashMap</strong>.</p>
<hr>
<p>Here’s an explanation of fail-fast and fail-safe mechanisms in Java, particularly in the context of collections:</p>
<h3 id="Fail-Fast"><a href="#Fail-Fast" class="headerlink" title="Fail-Fast"></a>Fail-Fast</h3><ul>
<li>Concept:<ul>
<li>Fail-fast iterators in Java immediately throw a <code>ConcurrentModificationException</code> if the collection is modified structurally during iteration. Structural modifications include adding or removing elements.</li>
<li>It is designed to fail as soon as possible to avoid unpredictable behavior due to concurrent modifications.</li>
</ul>
</li>
<li><p>Example of Fail-Fast Iterator:</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ConcurrentModificationException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">"A"</span>);</span><br><span class="line">        list.add(<span class="string">"B"</span>);</span><br><span class="line">        list.add(<span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                String element = iterator.next();</span><br><span class="line">                <span class="keyword">if</span> (element.equals(<span class="string">"A"</span>)) &#123;</span><br><span class="line">                    <span class="comment">// Structural modification</span></span><br><span class="line">                    list.remove(element);</span><br><span class="line">                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    the correct way!! When we want to remove an element, we use iterator.remove() instead of list.remove(element). This is the correct way to remove elements while iterating through the list, as the iterator's remove() method is designed to handle the modification safely, updating the internal state of the iterator and avoiding ConcurrentModificationException.</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ConcurrentModificationException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ConcurrentModificationException caught: "</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* result print:</span></span><br><span class="line"><span class="comment">            ConcurrentModificationException caught: null</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create an <code>ArrayList</code> and add elements “A”, “B”, and “C”.</li>
<li>We obtain an iterator using <code>list.iterator()</code>.</li>
<li>While iterating, we attempt to remove an element using <code>list.remove(element)</code>.</li>
<li>This results in a <code>ConcurrentModificationException</code> because the collection is modified during iteration.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="Fail-Safe"><a href="#Fail-Safe" class="headerlink" title="Fail-Safe"></a>Fail-Safe</h3><ul>
<li>Concept:<ul>
<li>Fail-safe iterators in Java do not throw <code>ConcurrentModificationException</code> when the collection is modified structurally during iteration.</li>
<li>They operate on a copy of the collection, not the original collection, so changes to the original collection do not affect the iteration.</li>
</ul>
</li>
<li><p>Example of Fail-Safe Iterator:</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FailSafeExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">                CopyOnWriteArrayList&lt;String&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">                list.add(<span class="string">"A"</span>);</span><br><span class="line">                list.add(<span class="string">"B"</span>);</span><br><span class="line">                list.add(<span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line">                Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">                <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                        String element = iterator.next();</span><br><span class="line">                        <span class="keyword">if</span> (element.equals(<span class="string">"B"</span>)) &#123;</span><br><span class="line">                                <span class="comment">// Structural modification</span></span><br><span class="line">                                list.remove(element);</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a <code>CopyOnWriteArrayList</code>.</li>
<li>We add elements “A”, “B”, and “C”.</li>
<li>We obtain an iterator using <code>list.iterator()</code>.</li>
<li>We attempt to remove an element using <code>list.remove(element)</code> during iteration.</li>
<li>No <code>ConcurrentModificationException</code> is thrown because <code>CopyOnWriteArrayList</code> uses a fail-safe iterator that works on a copy of the list.</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="135-Map-vs-FlatMap"><a href="#135-Map-vs-FlatMap" class="headerlink" title="135. Map vs. FlatMap"></a>135. Map vs. FlatMap</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>In Java 8 stream api.</p>
<p>Map is to convert data, it takes a function as input.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list2 = Arrays.asList(<span class="string">"Pencil"</span>, <span class="string">"Pencil"</span>, <span class="string">"Note"</span>, <span class="string">"Pen"</span>, <span class="string">"Book"</span>, <span class="string">"Pencil"</span>, <span class="string">"Book"</span>);</span><br><span class="line">List&lt;String&gt; tempList = list2.stream()</span><br><span class="line">        .sorted(Comparator.comparing(s -&gt; s.toLowerCase()))</span><br><span class="line">        .map(s -&gt; s.toLowerCase())</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"><span class="comment">// [book, book, note, pen, pencil, pencil, pencil]</span></span><br><span class="line">System.out.println(tempList);</span><br></pre></td></tr></table></figure>
<p>FlatMap is Map + Flat. It can handle 2 dimensional matrix, and apply Map on each row and then Flat each row result into a final 1 dimensional array.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;List&lt;String&gt;&gt; list3 = Arrays.asList(</span><br><span class="line">        Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>),</span><br><span class="line">        Arrays.asList(<span class="string">"c"</span>, <span class="string">"d"</span>)</span><br><span class="line">);</span><br><span class="line">Set&lt;String&gt; result = list3.stream()</span><br><span class="line">        <span class="comment">// .flatMap(Collection::stream)</span></span><br><span class="line">        .flatMap(innerList -&gt; innerList.stream())</span><br><span class="line">        .collect(Collectors.toSet());</span><br><span class="line"><span class="comment">// [a, b, c, d]</span></span><br><span class="line">System.out.println(result);</span><br></pre></td></tr></table></figure>
<p>In functional programming, <code>Map</code> and <code>FlatMap</code> are two commonly used higher-order functions, especially in languages like Java, Scala, Python, and JavaScript. Here’s a detailed explanation of both:</p>
<ul>
<li><p>Map</p>
<ul>
<li><p>Purpose: The <code>Map</code> function takes a function and applies it to each element of a collection, transforming each element into a new element. The result is a collection of the same size, where each element has been transformed by the function.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Map each integer to its square</span></span><br><span class="line">        List&lt;Integer&gt; squaredNumbers = numbers.stream()</span><br><span class="line">                                    .map(n -&gt; n * n)</span><br><span class="line">                                    .collect(Collectors.toList());</span><br><span class="line">        System.out.println(squaredNumbers);  <span class="comment">// [1, 4, 9, 16, 25]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We have a list of integers <code>numbers</code>.</li>
<li>We use the <code>stream()</code> method to convert the list into a stream.</li>
<li>The <code>map()</code> function takes a lambda expression <code>n -&gt; n * n</code>, which squares each element.</li>
<li>The <code>collect(Collectors.toList())</code> method collects the transformed elements back into a list.</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>FlatMap</p>
<ul>
<li><p>Purpose: The <code>FlatMap</code> function takes a function that returns a collection for each element in the original collection. It then flattens all these collections into a single collection. It is used when you have a collection of collections and want to transform them into a single collection.</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlatMapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; numberLists = Arrays.asList(</span><br><span class="line">                Arrays.asList(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">                Arrays.asList(<span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">                Arrays.asList(<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// FlatMap to convert a list of lists into a single list</span></span><br><span class="line">        List&lt;Integer&gt; flattenedNumbers = numberLists.stream()</span><br><span class="line">                                            .flatMap(list -&gt; list.stream())</span><br><span class="line">                                            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(flattenedNumbers);  <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We have a list of lists of integers <code>numberLists</code>.</li>
<li>We use <code>stream()</code> to convert the list of lists into a stream.</li>
<li>The <code>flatMap()</code> function takes a lambda expression <code>list -&gt; list.stream()</code>, which converts each inner list into a stream.</li>
<li>The <code>flatMap()</code> function then flattens all these streams into a single stream.</li>
<li>Finally, <code>collect(Collectors.toList())</code> collects the elements from the flattened stream into a single list.</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="163-what-is-SOLID-principle"><a href="#163-what-is-SOLID-principle" class="headerlink" title="163. what is SOLID principle"></a>163. what is SOLID principle</h2><p>The SOLID principles are a set of five design principles in object - oriented programming and software design. These principles help in creating more maintainable, flexible, and understandable software systems. Here’s a detailed look at each of them:</p>
<ul>
<li><strong>Single Responsibility Principle (SRP)</strong><ul>
<li>Definition: A class should have only one reason to change. In other words, a class should have only one job or responsibility.</li>
<li>Example: Consider a class that is responsible for calculating the area of different geometric shapes (like circles, rectangles, etc.) and also responsible for saving the calculated results to a database. This violates the SRP. A better design would be to have one class for calculating the areas and another class for handling the database operations.</li>
<li>Benefits: It makes the classes more focused and easier to understand and maintain. When a change is required related to a particular responsibility (say, a change in the area - calculation formula), it’s clear which class needs to be modified and other classes are not affected.</li>
</ul>
</li>
<li><strong>Open - Closed Principle (OCP)</strong><ul>
<li>Definition: Software entities (classes, modules, functions, etc.) should be open for extension but closed for modification.</li>
<li>Example: Let’s say you have a drawing application that can draw different shapes. Initially, it can draw circles and rectangles. If you want to add a new shape like a triangle, you should be able to do it without modifying the existing drawing code for circles and rectangles. This can be achieved through inheritance or interfaces. For instance, you can have an abstract <code>Shape</code> class with a <code>draw()</code> method, and concrete classes for <code>Circle</code>, <code>Rectangle</code>, and <code>Triangle</code> that implement the <code>draw()</code> method.</li>
<li>Benefits: It allows for easy addition of new functionality without the risk of breaking the existing code that has already been tested and is working. This leads to more stable and maintainable software over time.</li>
</ul>
</li>
<li><strong>Liskov Substitution Principle (LSP)</strong><ul>
<li>Definition: Subtypes must be substitutable for their base types. In other words, if you have a program that is using a base class, you should be able to substitute a derived class in its place without changing the correctness of the program.</li>
<li>Example: Consider a base class <code>Vehicle</code> with a method <code>startEngine()</code>. A subclass <code>Car</code> inherits from <code>Vehicle</code>. If the <code>Car</code> class redefines the <code>startEngine()</code> method in such a way that it violates the expected behavior (for example, the <code>startEngine()</code> method in the <code>Car</code> class throws an exception every time it’s called, while in the <code>Vehicle</code> class it starts the engine successfully most of the time), then it violates the LSP.</li>
<li>Benefits: It ensures that the inheritance hierarchy is used in a way that is consistent with the expected behavior. This helps in building more reliable and understandable object - oriented hierarchies.</li>
</ul>
</li>
<li><strong>Interface Segregation Principle (ISP)</strong><ul>
<li>Definition: Clients should not be forced to depend on interfaces they do not use. Instead of having a large, monolithic interface, it’s better to have smaller, more specific interfaces.</li>
<li>Example: Suppose you have an interface <code>Worker</code> that has methods like <code>work()</code>, <code>takeBreak()</code>, <code>attendMeeting()</code>, and <code>doPaperwork()</code>. Now, consider a class <code>ManualLaborer</code> that only needs to implement the <code>work()</code> method and doesn’t need to deal with <code>doPaperwork()</code> etc. Having a single <code>Worker</code> interface forces the <code>ManualLaborer</code> class to implement methods it doesn’t need. A better approach would be to split the <code>Worker</code> interface into smaller interfaces like <code>PhysicalWorker</code> (with <code>work()</code> method) and <code>OfficeWorker</code> (with <code>doPaperwork()</code>, <code>attendMeeting()</code> etc.)</li>
<li>Benefits: It reduces the coupling between different parts of the system. Classes only need to implement the interfaces that are relevant to them, which makes the code more modular and easier to understand and maintain.</li>
</ul>
</li>
<li><strong>Dependency Inversion Principle (DIP)</strong><ul>
<li>Definition: <code>High-level</code> modules should not depend on <code>low-level</code> modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.</li>
<li>Example: Consider a <code>high-level</code> module like a <code>UserController</code> in a web application that depends on a <code>low-level</code> module like a <code>UserRepository</code> which is responsible for database operations. Instead of the <code>UserController</code> directly depending on the <code>UserRepository</code>, they both can depend on an abstraction like an <code>IUserRepository</code> interface. The <code>UserRepository</code> class implements this interface, and the <code>UserController</code> uses the methods defined in the interface. This way, if you want to change the way user data is stored (say, from a SQL database to a NoSQL database), you only need to change the implementation of the <code>IUserRepository</code> interface, and the <code>UserController</code> remains unaffected.</li>
<li>Benefits: It makes the code more flexible and easier to test. By depending on abstractions, different implementations can be swapped in and out without major changes to the <code>high-level</code> modules.</li>
</ul>
</li>
</ul>
<h2 id="139-why-using-static-and-why-not"><a href="#139-why-using-static-and-why-not" class="headerlink" title="139. why using static and why not?"></a>139. why using static and why not?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>What: static is a keyword to make sure there is only 1 copy of the resource. like static field, static method or static inner class</p>
<p>For What: static resources can be shared across whole applications, like use static block so initalize some global data. Static method can be used as helper or util methods, we can just call Class.StaticMethod so we dont need to create instances.</p>
<p>Why Not: Static object will not be garbage collected. They will stay in memory forever. Too many static objects can cause memory leak.</p>
<hr>
<h2 id="296-Difference-Synchronized-ThreadLocal-Volatile-AtomicInteger"><a href="#296-Difference-Synchronized-ThreadLocal-Volatile-AtomicInteger" class="headerlink" title="296. Difference: Synchronized, ThreadLocal, Volatile, AtomicInteger"></a>296. Difference: Synchronized, ThreadLocal, Volatile, AtomicInteger</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p><strong>Synchronized</strong>: it is to make resource thread safe in multi-threading environments, can be used on block of code OR method. If we have Employee object and it contains another address object and updateEmployee() method. If we put synchronized on the method, it will lock the whole employee object. If we use synchronized(address) in the code, it will only lock the address field, will not lock whole employee object, So the synchronized block has better performance.</p>
<p><strong>ThreadLocal</strong>: If a variable is defined as ThreadLocal, then when a thread gets this variable, it will gets its own copy, so when this thread update this variable, it only updates its own copy, the other copies used by other threads will not be affected.</p>
<p><strong>Volatile</strong>: If a variable is volatile, it is kept at a core main memory. All threads will only read and update this main copy. They will not have their own copy. All threas share exactly the same main copy. It guarantees that if one thread updates the value, the other threads will get that updated value because there is only 1 copy.</p>
<p><strong>AtomicInteger</strong>: AtomicInteger/AtomicBoolean/AtomicReference etc: the ‘atomic’ is to make sure the operations on the variable is a single operation and cannot be splitted further. It is typically used as a Global Counting and prevent thread race conditions.</p>
<h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><p>在Java中，<code>volatile</code>是一个关键字，用于修饰变量，它主要有以下作用和含义：</p>
<h4 id="保证可见性"><a href="#保证可见性" class="headerlink" title="保证可见性"></a>保证可见性</h4><ul>
<li>可见性是指当一个线程修改了共享变量的值，其他线程能够立即得知这个修改。在没有<code>volatile</code>关键字修饰的情况下，线程可能会从自己的本地缓存中读取变量的值，而不是从主内存中获取最新的值，这就可能导致数据不一致的问题。</li>
<li>当变量被声明为<code>volatile</code>时，任何线程对该变量的写操作都会立即刷新到主内存中，而其他线程在读取该变量时，也会强制从主内存中获取最新的值，从而保证了不同线程之间对该变量的可见性。例如：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileExample</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义一个volatile修饰的变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Flag is true"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Flag is false"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述代码中，<code>flag</code>变量被<code>volatile</code>修饰，当一个线程调用<code>setFlag</code>方法修改<code>flag</code>的值为<code>true</code>时，其他线程调用<code>checkFlag</code>方法能够立即获取到<code>flag</code>的最新值。</p>
<h4 id="禁止指令重排序"><a href="#禁止指令重排序" class="headerlink" title="禁止指令重排序"></a>禁止指令重排序</h4><ul>
<li>指令重排序是指编译器和处理器为了优化程序性能，可能会对指令进行重新排序，但是这种重排序可能会导致程序的执行结果与预期不符。</li>
<li><code>volatile</code>关键字可以禁止指令重排序，保证变量的读写操作按照代码中的顺序执行。例如，在单例模式的双重检查锁定（DCL）实现中，如果不使用<code>volatile</code>修饰单例对象，可能会出现问题：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 这里需要使用volatile修饰，防止指令重排序</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述代码中，<code>instance</code>变量被<code>volatile</code>修饰，这可以确保在创建单例对象时，不会因为指令重排序而导致其他线程获取到未完全初始化的对象。</p>
<p>需要注意的是，<code>volatile</code>关键字并不能保证原子性。如果需要保证原子性，通常可以使用<code>java.util.concurrent.atomic</code>包下的原子类，或者使用<code>synchronized</code>关键字来实现。</p>
<hr>
<h2 id="303-How-does-string-works-Why-is-String-immutable-in-Java"><a href="#303-How-does-string-works-Why-is-String-immutable-in-Java" class="headerlink" title="303. How does string works? Why is String immutable in Java?"></a>303. How does string works? Why is String immutable in Java?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>String is immutable in java, means once you create a string object, you cannot change it anymore. If you want to use mutable string, use StringBuilder instead.</p>
<p>How string memory works:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s1 = <span class="string">"abc"</span>;</span><br><span class="line">String s2 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">String s3 = <span class="string">"abc"</span>;</span><br><span class="line">String s4 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">String s5 = <span class="string">"abc"</span>.intern();</span><br></pre></td></tr></table></figure>
<p>In memory, there is a <code>constant pool</code> which only stores the quoted string, like <code>abc</code>, it will not have duplicates in this constant pool. </p>
<p>So when we create s1, it goes to constant pool. </p>
<p>S2 is created by new String() constructor, whenever we call this constructore, we create a separate copy in the heap memory, not in the constant pool. </p>
<p>For intern() method, it will check if the constant pool has a copy, it will use it, if not, it will create one copy in the constant pool,.</p>
<p>So <code>s1 == s3 == s5 != s2 != s4</code></p>
<p>Why is string immutable:</p>
<ol>
<li>So we can use it in many places, like as Map key.</li>
<li>We can use it for security reasons, like store passwords or keys</li>
<li>It will be thread safe, multi-thread cannot change the value.</li>
<li>We can use for caching and hashing.. like as the Cache key or used in other APIs.</li>
</ol>
<hr>
<h2 id="330-New-features-in-java-11-and-17"><a href="#330-New-features-in-java-11-and-17" class="headerlink" title="330. New features in java 11 and 17"></a>330. New features in java 11 and 17</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>Java 11</p>
<ol>
<li>Local variable in lambda expression. Now you can use <strong>var</strong> to define local variables in java 11.</li>
<li>New Garbage Collector: like Epsilon (for testing) and ZGC for low-latency and large heap system.</li>
</ol>
<p>Java 17:</p>
<ol>
<li><p>Sealed Class: Use <code>sealed</code> keyword to control which class can be subclass of this class. Use <code>permits</code> keyword to allow subclass.</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">sealed <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> <span class="title">permits</span> <span class="title">Circle</span>, <span class="title">Rectangle</span>, <span class="title">Triangle</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Common methods and properties for all subclasses</span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">calculateArea</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Hidden Class: which can not be seen by java reflection.</p>
</li>
<li>Text Blocks: allow you to use text like long strings.</li>
</ol>
<hr>
<h2 id="331-What’s-Garbage-collection-types-and-What’s-new-about-GC-in-java-8"><a href="#331-What’s-Garbage-collection-types-and-What’s-new-about-GC-in-java-8" class="headerlink" title="331. What’s Garbage collection types and What’s new about GC in java 8"></a>331. What’s Garbage collection types and What’s new about GC in java 8</h2><p>Reference: <a href="https://zhuanlan.zhihu.com/p/25539690" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25539690</a></p>
<h3 id="What-are-Java-Generations-in-memory-Young-Old-etc"><a href="#What-are-Java-Generations-in-memory-Young-Old-etc" class="headerlink" title="What are Java Generations in memory? (Young, Old, etc.)"></a>What are Java Generations in memory? (Young, Old, etc.)</h3><p>JVM heap has Young Generation (Eden + Survivor), Old Generation, and Metaspace. Young Gen collects short-lived objects, Old Gen holds long-lived ones.</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_java_top_q_notes/image-1.png" alt="alt text"></p>
<ul>
<li>What is PermGen? What replaced it and why?<ul>
<li>PermGen was a memory pool for class metadata, fixed in size. It was replaced by Metaspace in Java 8 for dynamic growth and fewer memory issues.</li>
</ul>
</li>
<li>What is Metaspace? How is it better?<ul>
<li>Metaspace stores class metadata in native memory, growing automatically as needed. It avoids OutOfMemory errors common in PermGen.</li>
</ul>
</li>
<li>important GC: <ul>
<li>ZGC</li>
<li>G1GC (java 17 default GC)</li>
</ul>
</li>
<li>What is ZGC in Java 11? What are its benefits?<ul>
<li>ZGC is a scalable, low-latency garbage collector with sub-10ms pause times. It supports large heaps (up to TBs) and does most work concurrently.</li>
</ul>
</li>
<li>Java allows you to choose different GC algorithms based on your JVM version. Common GC options include -XX:+UseSerialGC, -XX:+UseParallelGC, -XX:+UseConcMarkSweepGC, and -XX:+UseG1GC.</li>
</ul>
<h3 id="Metaspace-vs-Permanent-Generation"><a href="#Metaspace-vs-Permanent-Generation" class="headerlink" title="Metaspace vs. Permanent Generation"></a>Metaspace vs. Permanent Generation</h3><table>
<thead>
<tr>
<th>Comparison Aspect</th>
<th>Permanent Generation</th>
<th>Metaspace</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Definition</strong></td>
<td>It was a space in the Java Virtual Machine (JVM) heap used to store class metadata, such as class definitions, method byte - code, and constant pool information.</td>
<td>It is a native memory area in the JVM that serves the same purpose as the Permanent Generation, storing class metadata.</td>
</tr>
<tr>
<td><strong>Memory Management</strong></td>
<td>The size of the Permanent Generation was fixed, and it was part of the heap. If the space was exhausted, a <code>java.lang.OutOfMemoryError: PermGen space</code> error would occur.</td>
<td>Metaspace uses native memory, and its size can be adjusted dynamically. By default, it can grow as needed, reducing the likelihood of out - of - memory errors due to insufficient metadata space.</td>
</tr>
<tr>
<td><strong>Configuration</strong></td>
<td>Its size was configured using parameters like <code>-XX:PermSize</code> and <code>-XX:MaxPermSize</code>.</td>
<td>You can configure Metaspace using parameters such as <code>-XX:MetaspaceSize</code> (the initial size) and <code>-XX:MaxMetaspaceSize</code> (the maximum size).</td>
</tr>
<tr>
<td><strong>Introduced in</strong></td>
<td>Present in Java 7 and earlier versions.</td>
<td>Introduced in Java 8 to replace the Permanent Generation.</td>
</tr>
</tbody>
</table>
<h3 id="ZGC-vs-G1GC"><a href="#ZGC-vs-G1GC" class="headerlink" title="ZGC vs. G1GC"></a>ZGC vs. G1GC</h3><table>
<thead>
<tr>
<th>Comparison Aspect</th>
<th>ZGC</th>
<th>G1GC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Goal</strong></td>
<td>Designed to achieve extremely low pause times (sub - millisecond pauses) even for very large heaps (multi - terabyte heaps).</td>
<td>Aims to balance between throughput and pause times, suitable for medium - to large - sized heaps.</td>
</tr>
<tr>
<td><strong>Heap Layout</strong></td>
<td>Uses a region - based and page - based heap layout. It divides the heap into small, fixed - size regions.</td>
<td>Also uses a region - based heap layout. It divides the heap into multiple regions of equal size.</td>
</tr>
<tr>
<td><strong>Pause Time</strong></td>
<td>Offers very short and predictable pause times, regardless of the heap size. Pauses are mostly in the sub - millisecond range.</td>
<td>Can have longer pause times compared to ZGC, especially for very large heaps. However, it can control pause times to some extent using the <code>-XX:MaxGCPauseMillis</code> parameter.</td>
</tr>
<tr>
<td><strong>Throughput</strong></td>
<td>Generally has lower throughput compared to G1GC, especially for smaller heaps. This is because it spends more time on concurrent operations to achieve low pause times.</td>
<td>Can provide relatively high throughput, especially when configured correctly for the application’s workload.</td>
</tr>
<tr>
<td><strong>Application Scenarios</strong></td>
<td>Ideal for applications with large heaps and strict low - latency requirements, such as financial trading systems and real - time analytics platforms.</td>
<td>Suitable for a wide range of applications, especially those that need a balance between throughput and pause times, like enterprise - level Java applications.</td>
</tr>
<tr>
<td><strong>Introduced in</strong></td>
<td>Introduced in Java 11 as an experimental feature and became production - ready in later versions.</td>
<td>Introduced in Java 7 as a replacement for the Concurrent Mark Sweep (CMS) collector.</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="343-Suppose-when-you-have-Employee-class-to-store-data-when-do-you-use-list-or-map"><a href="#343-Suppose-when-you-have-Employee-class-to-store-data-when-do-you-use-list-or-map" class="headerlink" title="343. Suppose when you have Employee class to store data, when do you use list or map"></a>343. Suppose when you have Employee class to store data, when do you use list or map</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>1) List can have duplicates and it is just to store all information. Map is key value pair, key must be unique</p>
<p>2) In application, if you just want to show all employees in json format, you can use list; but if you want to show list of employee Ids and if you click the Ids it will display the whole employee json, so it is like you need a id –&gt; employee association, then you can use map.</p>
<hr>
<h2 id="344-Difference-Arraylist-vs-LinkedList-when-to-use-which"><a href="#344-Difference-Arraylist-vs-LinkedList-when-to-use-which" class="headerlink" title="344. Difference: Arraylist vs LinkedList, when to use which"></a>344. Difference: Arraylist vs LinkedList, when to use which</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>READ:</p>
<ul>
<li>ArrayList: is usually faster because it has index. It can be O(1), or worst O(n) if you dont know index</li>
<li>LinkedList: is slower because you have to traverse from header, so it is always O(n)</li>
</ul>
<p>ADD/REMOVE</p>
<ul>
<li>ArrayList: is usually slower because when you add element, you have to shift all elements after it. So it is O(n)</li>
<li>LinkedList: is faster because you just change the pointer, O(1)</li>
</ul>
<p>INTERNAL IMPLEMENTATION:</p>
<ul>
<li>ArrayList: implemented by dynamic Array, Need less space because it only need to store value and index</li>
<li>Linkedlist: double linkedlist, with value and pointers. Need more space to store, value, left and right pointer</li>
</ul>
<p>WHICH ONE:</p>
<ul>
<li>If your app need more READ, less ADD/REMOVE, then linkedlist is good</li>
</ul>
<p>USE CASE:</p>
<ul>
<li>ArrayList: for example to store a list of objects</li>
<li>Linkedlist: to store object where you just need previous or next value, like browser history or stack.</li>
</ul>
<hr>
<h2 id="363-Callable-vs-Runnable"><a href="#363-Callable-vs-Runnable" class="headerlink" title="363. Callable vs Runnable"></a>363. Callable vs Runnable</h2><table>
<thead>
<tr>
<th>Feature</th>
<th><strong>Runnable</strong></th>
<th><strong>Callable</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Introduced In</strong></td>
<td>Java 1.0</td>
<td>Java 1.5 (as part of <code>java.util.concurrent</code>)</td>
</tr>
<tr>
<td><strong>Return Value</strong></td>
<td>Cannot return a result (<code>void run()</code>)</td>
<td>Returns a result (<code>V call() throws Exception</code>)</td>
</tr>
<tr>
<td><strong>Can Throw Exceptions</strong></td>
<td>Cannot throw checked exceptions</td>
<td>Can throw checked exceptions</td>
</tr>
<tr>
<td><strong>Used With</strong></td>
<td><code>Thread</code>, <code>Executor</code></td>
<td><code>ExecutorService.submit()</code></td>
</tr>
<tr>
<td><strong>Result Retrieval</strong></td>
<td>No result</td>
<td>Returns a <code>Future&lt;V&gt;</code></td>
</tr>
<tr>
<td><strong>Lambda Support</strong></td>
<td>Yes (since Java 8)</td>
<td>Yes (since Java 8)</td>
</tr>
<tr>
<td><strong>Common Use Case</strong></td>
<td>Fire-and-forget tasks</td>
<td>Tasks needing a result or exception handling</td>
</tr>
</tbody>
</table>
<p>Using <code>Runnable</code>:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Runnable task = () -&gt; System.out.println(<span class="string">"Running a Runnable"</span>);</span><br><span class="line"><span class="keyword">new</span> Thread(task).start();</span><br></pre></td></tr></table></figure>
<p>Using <code>Callable</code>:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Callable&lt;String&gt; task = () -&gt; <span class="string">"Result from Callable"</span>;</span><br><span class="line">Future&lt;String&gt; future = Executors.newSingleThreadExecutor().submit(task);</span><br><span class="line">System.out.println(future.get()); <span class="comment">// Blocks until result is available</span></span><br></pre></td></tr></table></figure>
<p>When to Use Which:</p>
<ul>
<li>Use <strong><code>Runnable</code></strong> for simple background tasks with <strong>no result</strong> or exception propagation.</li>
<li>Use <strong><code>Callable</code></strong> when you need to <strong>return a result</strong> or <strong>handle exceptions</strong>.</li>
</ul>
<hr>
<h2 id="371-JDK-vs-JRE-vs-JVM"><a href="#371-JDK-vs-JRE-vs-JVM" class="headerlink" title="371. JDK vs JRE vs JVM"></a>371. JDK vs JRE vs JVM</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>JDK is for developer to write java code, it can <strong>compile</strong> the java code to binary class code and also it has <strong>debug</strong> mode.</p>
<p>JRE is a java running environment, if you want to run java application, you have to have JRE installed.</p>
<p>JVM: java virtual machine, is to mange java memory, like heap, stack, metaspace etc.</p>
<hr>
<h2 id="373-How-do-you-implement-a-deadlock"><a href="#373-How-do-you-implement-a-deadlock" class="headerlink" title="373. How do you implement a deadlock"></a>373. How do you implement a deadlock</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLock</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R1 = <span class="string">"Hello Welcome\nto Pilot!"</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R2 = <span class="string">"Visit Pilot!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Creating thread T1</span></span><br><span class="line">        Thread T1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// Thread T1 locking resource R1</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R1"</span>);</span><br><span class="line">                    <span class="comment">// Thread T1 locking resource R2</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Creating thread T2</span></span><br><span class="line">        Thread T2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// Thread T2 locking resource R2</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T2 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    <span class="comment">// Thread T2 locking resource R1</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T2 locked -&gt; Resource R1"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Starting both threads</span></span><br><span class="line">        T1.start();</span><br><span class="line">        T2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="374-Synchronized-method-vs-Synchronized-block"><a href="#374-Synchronized-method-vs-Synchronized-block" class="headerlink" title="374. Synchronized method vs Synchronized block"></a>374. Synchronized method vs Synchronized block</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lockUserServiceClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//synchronized method is to lock whole object, but since this method is static, it only stays in the class</span></span><br><span class="line">       <span class="comment">//so `static synchronized` will lock the class, not the created objects/instances</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lockUserServiceInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//this method will lock the entier userService Instance</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockBlock</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(address)&#123;</span><br><span class="line">        <span class="comment">//here only lock the `address` object, not the whole instance, performance is best</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>detailed explanation:</p>
<ul>
<li><p>Synchronized Method</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedMethodExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ul>
<li>The <code>synchronized</code> keyword is applied directly to the method signature.</li>
<li>When a thread calls <code>increment()</code>, <strong>it acquires the lock on the object instance (this) of the class.</strong></li>
<li>No other thread can execute any other synchronized method of the same object until the first thread completes the execution of the synchronized method.</li>
<li>It’s a simple way to ensure thread safety but can lead to performance issues if the method contains non-critical code that doesn’t need synchronization.</li>
</ul>
</li>
</ul>
</li>
<li><p>Synchronized Block</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedBlockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ul>
<li>A synchronized block is used within a method.</li>
<li>The <code>synchronized (lock)</code> statement takes an object (in this case, <code>lock</code>) as an argument. This object serves as the lock.</li>
<li>Only one thread can enter the synchronized block that uses the same <code>lock</code> object at a time.</li>
<li>This allows for more granular control over what part of the method is synchronized, which can improve performance by limiting the scope of synchronization to only the critical section.</li>
</ul>
</li>
</ul>
</li>
<li>Key Differences<ul>
<li>Scope of Synchronization:<ul>
<li>Synchronized Method: The entire method is synchronized, even if not all code within the method requires synchronization.</li>
<li>Synchronized Block: Only the code within the synchronized block is synchronized, allowing other parts of the method to be executed concurrently by different threads.</li>
</ul>
</li>
<li>Lock Object:<ul>
<li>Synchronized Method: The lock object is the instance of the class itself (this) for instance methods, or the class object for static methods.</li>
<li>Synchronized Block: You can specify any object as the lock, giving you flexibility in choosing the granularity of locking.</li>
</ul>
</li>
<li>Performance:<ul>
<li>Synchronized Method: May lead to unnecessary locking and reduced performance if the method contains code that does not need to be synchronized.</li>
<li>Synchronized Block: Allows for more efficient locking by only synchronizing the necessary parts of the code.</li>
</ul>
</li>
</ul>
</li>
<li>Best Practices<ul>
<li>Use Synchronized Method: When the entire method needs to be thread-safe and the method is relatively small.</li>
<li>Use Synchronized Block: When only a part of the method needs to be synchronized, especially in longer methods where only a small part accesses shared resources.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="454-What-is-Java-17-new-feature-sealed-class？"><a href="#454-What-is-Java-17-new-feature-sealed-class？" class="headerlink" title="454. What is Java 17 new feature - sealed class？"></a>454. What is Java 17 new feature - sealed class？</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Java sealed class defines who can extend this class, so it adds more restrictions on class inheritance.</p>
<p>Key things:</p>
<ol>
<li>it uses <code>sealed</code> and <code>permits</code> to define who can extend this sealed class</li>
<li>the permitted children classes HAVE TO be in the same package as parent class</li>
<li>Children classes MUST be decorated with one of three keywords: sealed, non-sealed, final..</li>
<li>the sealed child class can be further extended by permitted children</li>
<li>the non-sealed child class can be extended by another class</li>
<li>the final child class cannot be extended by any children class</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> sealed <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> <span class="title">permits</span> <span class="title">Truck</span>, <span class="title">Sedan</span>, <span class="title">SUV</span> </span>&#123;…&#125;</span><br><span class="line"><span class="comment">//same package</span></span><br><span class="line">sealed <span class="class"><span class="keyword">class</span> <span class="title">Truck</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> <span class="title">permits</span> <span class="title">PickupTruck</span> </span>&#123;…&#125;</span><br><span class="line">non-sealed <span class="class"><span class="keyword">class</span> <span class="title">Sedan</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> </span>&#123;…&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">SUV</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> </span>&#123;…&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="455-What-is-difference-between-synchronized-and-ReentrantLock"><a href="#455-What-is-difference-between-synchronized-and-ReentrantLock" class="headerlink" title="455. What is difference between synchronized and ReentrantLock?"></a>455. What is difference between synchronized and ReentrantLock?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Java has two types of locks, implicit and explicit. Synchronized is implicit lock which java controls everything, as a developer, we just add synchronized keyword. ReentrantLock is explicit lock which we have more control on the locked object.</p>
<p>Things we can do with ReentrantLock:</p>
<ul>
<li>TryLock – a thread can try lock object, if it returns true, it will acquire lock, otherwise, it will keep waiting</li>
<li>Fair Lock – if there are many threads waiting, for Fair lock, the longest waiting thread will get the lock, FIFO order. ReentrantLock rl = new ReentrantLock(true);</li>
<li>Lock Interrupt – thread can try to interrupt the lock</li>
<li>access count – It can count how many times a thread has gain access. Count can increase and decrease, when it decrease to 0 means the thread unlocked the object.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>; </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        lock.lock();  <span class="comment">//lock it</span></span><br><span class="line">        <span class="keyword">try</span> </span><br><span class="line">        &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123; </span><br><span class="line">            lock.unlock();  <span class="comment">//need to release the lock</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="448-What-is-proxy-design-pattern"><a href="#448-What-is-proxy-design-pattern" class="headerlink" title="448. What is proxy design pattern"></a>448. What is proxy design pattern</h2><ul>
<li>The Proxy Design Pattern is a structural design pattern that provides a surrogate or placeholder for another object to control access to it.</li>
<li>usage: It is used to control access to the real object, add additional functionality, or provide a more efficient way of accessing the object. Here’s a detailed explanation:</li>
<li>Subject: This is an interface that defines the common interface for the RealSubject and Proxy.</li>
<li>RealSubject: This is the actual object that the proxy represents.</li>
<li>Proxy: This is the object that controls access to the RealSubject. It has a reference to the RealSubject and implements the Subject interface.</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RealImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">        loadFromDisk();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadFromDisk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Loading "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Displaying "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealImage realImage;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (realImage == <span class="keyword">null</span>) &#123;</span><br><span class="line">            realImage = <span class="keyword">new</span> RealImage(fileName);</span><br><span class="line">        &#125;</span><br><span class="line">        realImage.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Explanation:</p>
<ol>
<li>Interface <code>Image</code>:<ul>
<li><code>interface Image</code> defines the <code>display()</code> method that both <code>RealImage</code> and <code>ProxyImage</code> will implement.</li>
</ul>
</li>
<li>RealSubject <code>RealImage</code>:<ul>
<li><code>RealImage</code> implements <code>Image</code>.</li>
<li>The <code>RealImage</code> constructor loads the image from disk when an instance is created.</li>
<li>The <code>display()</code> method displays the image.</li>
</ul>
</li>
<li>Proxy <code>ProxyImage</code>:<ul>
<li><code>ProxyImage</code> also implements <code>Image</code>.</li>
<li><code>ProxyImage</code> holds a reference to <code>RealImage</code>.</li>
<li>In the <code>display()</code> method of <code>ProxyImage</code>, if <code>realImage</code> is not instantiated, it creates a <code>RealImage</code> instance.</li>
<li>Then, it calls the <code>display()</code> method of <code>RealImage</code>.</li>
</ul>
</li>
</ol>
<hr>
<h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><h2 id="143-Did-you-use-Kafka-in-your-project-How-does-it-work"><a href="#143-Did-you-use-Kafka-in-your-project-How-does-it-work" class="headerlink" title="143. Did you use Kafka in your project? How does it work?"></a>143. Did you use Kafka in your project? How does it work?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Kafka has 3 parts, Producer, Cluster/Broker, Consumer (!DO NOT READ AS CUSTOMER!)</p>
<p>Producer send message (has topic) to broker</p>
<p>Broker has topics, each topic has several partitions, the messages are send to these partitions.</p>
<p>Consumer belongs to one consumer group, they will read the message from partition.</p>
<hr>
<h2 id="149-Talk-about-Kafka-and-Zookeeper"><a href="#149-Talk-about-Kafka-and-Zookeeper" class="headerlink" title="149. Talk about Kafka and Zookeeper"></a>149. Talk about Kafka and Zookeeper</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p>In Early version of Kafka, Zookeeper is like manager, it managers the metadata, like which broker is the leader and the offset tracking.</p>
<p>In new Kafka version, it uses Raft consensus algorithm for leader election. So it does not need Zookeeper.</p>
<hr>
<h2 id="334-How-to-prevent-data-loss-in-kafka"><a href="#334-How-to-prevent-data-loss-in-kafka" class="headerlink" title="334. How to prevent data loss in kafka"></a>334. How to prevent data loss in kafka</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>There are 3 parts of Kafka, all 3 parts need to prevent data loss.</p>
<p>Producer: when producer sends message to broker, the broker will send a status back to producer if the message is received, if not received, producer will keep sending the same message again and again.</p>
<p>Broker: Each partition has K replications/backups, there is a parameter <strong>ACKS</strong> (acknowledgement), ACKS = 0 means broker will not tell if the message is received, so if there broker is down, then it is lost. ACKS = 1 means if the message is received by leader partition, but not yet received by replications, it will tell producer the message is received, so when ACKS = 1 and the leader broker is down, the message will be lost. ACKS = ALL means only when all replications of partitions receive the message and then the producer will be notified. ACKS = 0/1 could cause message loss, but ACKS = ALL will slow down performance.</p>
<p>Consumer: <strong>enable.auto.commit</strong> is a configuration that let consumer auto commit the offset, once auto commit, the message is considered read by consumer successfully. But if the consumer has some error, it may cause the read failure. so we can set enable.auto.commit = false and manually commit the offset.</p>
<hr>
<h2 id="335-How-to-keep-message-order-in-Kafka"><a href="#335-How-to-keep-message-order-in-Kafka" class="headerlink" title="335. How to keep message order in Kafka"></a>335. How to keep message order in Kafka</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Key: message in one partition is consumed in order. So to make message in order, we just need to send them to same partition. In kafka, each message has an id, if you don’t give id, kafka will assign auto generated id, Kafka use hashing to convert this id to hashcode which is corresponding the partition. (just like hashmap hashcode and bucket). So to make message in order, we need to assign same message ID to them, like if it is order message, we can use order id, if it is like transaction messages, we can use transaction id.</p>
<hr>
<h2 id="336-How-to-prevent-duplicate-message-in-kafka"><a href="#336-How-to-prevent-duplicate-message-in-kafka" class="headerlink" title="336. How to prevent duplicate message in kafka"></a>336. How to prevent duplicate message in kafka</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Kafka has consumer and producer. To prevent duplicate, we should try on both side [<a href="https://hulinhong.com/na_backend_q_top100/%60https://i-topolev-vladimir.medium.com/how-to-handle-duplicate-messages-and-message-ordering-in-kafka-82e2fef82025%60">reference</a>]</p>
<p>Producer:</p>
<ul>
<li>Kakfa has many producers and each producer can send many messages, to make each message unique, we need to assign producer an ID and each message an ID, so the producer ID + message ID combination will be unique.</li>
</ul>
<p>Consumer:</p>
<ul>
<li><strong>enable.auto.commit</strong> should be set to false. enable.auto.commit = true means kafka will auto commit the offset even if consumer failed to process the message, this could cause message loss.</li>
<li>Consumer has 2 ways to prevent duplicate messages, 1) it can check the message unique id, if found that id is already processed, it will ignore it. 2) it can make its opreation idempotent, just like put, update once and twice will yield same results.</li>
</ul>
<p>One more thing, if each message is sent only once, but the consumer is down, then we could have message lost, so we need to configure <strong>auto.offset.reset</strong>, this is a parameter to decide when consumer is down, whether we should restart reading from last failed position (latest - default) or beginning of the partition (<strong>earliest</strong>).</p>
<hr>
<h2 id="345-Kafka-how-to-let-two-consumers-read-the-same-message"><a href="#345-Kafka-how-to-let-two-consumers-read-the-same-message" class="headerlink" title="345. Kafka how to let two consumers read the same message"></a>345. Kafka how to let two consumers read the same message</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>Put them in different consumer group.</p>
<p>In kafka, consumers in same group can only read different partitions - that is why the number of consumers cannot be more than number of partitions in each group. But consumer in different group can read the same partition.</p>
<hr>
<h2 id="359-How-to-implement-security-to-kafka-Kafka-Security"><a href="#359-How-to-implement-security-to-kafka-Kafka-Security" class="headerlink" title="359. How to implement security to kafka. Kafka Security"></a>359. How to implement security to kafka. Kafka Security</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<ol>
<li>Broker authentication: Add authentication for kafka broker, only authenticated applications can connect to kafka brokers.</li>
</ol>
<ul>
<li>We can use SASL (Simple authentication and security layer) to implement it, SASL supports secure authenticaiton like PLAIN, SCRAM. SASL is a tool to add security to many network protocols, like LDAP, SMTP, IMAP etc.</li>
</ul>
<ol>
<li>Data Encryption: Add encryption to broker so that data sent in and out of kafka brokers are encrypted.</li>
</ol>
<ul>
<li>We can use <strong>SSL</strong>/TLS to encrypt data. To add SSL certificate to kafka. We can first use <strong>openSSL</strong> to create a <strong>certificate</strong> and then use <strong>keytool</strong> to create a <strong>truststore</strong> and add the certificate to it. We also need to configure kafka to use the SSL certificate like <strong>security.portocol=SSL</strong></li>
</ul>
<ol>
<li>Maintain a Access Control List (ACL) to specify which user or group can access which topic or partition.</li>
</ol>
<hr>
<h2 id="450-What-is-kafka-dead-letter-queue-and-how-do-you-handle-it"><a href="#450-What-is-kafka-dead-letter-queue-and-how-do-you-handle-it" class="headerlink" title="450. What is kafka dead letter queue and how do you handle it?"></a>450. What is kafka dead letter queue and how do you handle it?</h2><ul>
<li><p>“frequency”: 4,</p>
</li>
<li><p>A Kafka dead - letter queue (DLQ) is a special topic in a Kafka cluster that is used to store messages that cannot be successfully processed for some reason. Here’s an overview of what it is and how to handle it:</p>
</li>
<li><strong>Purpose</strong>: The main purpose of a DLQ is to prevent messages from being lost when they encounter processing failures. Instead of discarding the messages, they are sent to the DLQ for further analysis and possible re - processing.</li>
<li><strong>How Messages End Up in the DLQ</strong>: Messages can end up in the DLQ due to various reasons, such as application - level errors (e.g., incorrect message format, missing required fields), network issues, or problems with the processing logic. When a consumer fails to process a message after a certain number of retries, the message is typically redirected to the DLQ.</li>
<li><strong>Monitoring and Analysis</strong>:<ul>
<li><strong>Monitor DLQ Size</strong>: Regularly check the size of the DLQ to identify any unusual spikes. A growing DLQ may indicate a problem with the message processing pipeline.</li>
<li><strong>Inspect Messages</strong>: Examine the messages in the DLQ to determine the cause of the processing failures. This can involve looking at the message payload, headers, and any error messages associated with the failed processing attempts.</li>
</ul>
</li>
<li><strong>Error Resolution</strong>:<ul>
<li><strong>Fix Application Bugs</strong>: If the errors are due to bugs in the consumer application, fix the code and redeploy the application.</li>
<li><strong>Data Correction</strong>: If the messages in the DLQ contain incorrect data, correct the data either manually or through an automated process.</li>
</ul>
</li>
<li><strong>Message Re - processing</strong>:<ul>
<li><strong>Manual Re - processing</strong>: For critical or complex messages, you may choose to re - process them manually. This allows for careful inspection and ensures that the processing is done correctly.</li>
<li><strong>Automated Re - processing</strong>: Set up a mechanism to automatically re - process messages from the DLQ. This can be a separate consumer that reads from the DLQ and attempts to process the messages again, perhaps with some additional error - handling logic.</li>
</ul>
</li>
<li><strong>Configuration and Tuning</strong>:<ul>
<li><strong>Retry Policies</strong>: Review and adjust the retry policies for your consumers. Determine the appropriate number of retries and the delay between retries based on the nature of your application and the expected failure scenarios.</li>
<li><strong>DLQ Topic Configuration</strong>: Configure the DLQ topic with appropriate settings, such as retention policies and replication factors. Ensure that the DLQ has enough storage to handle the potentially large number of messages.</li>
</ul>
</li>
<li>Handling a Kafka dead - letter queue effectively requires a combination of monitoring, error resolution, message re - processing, and proper configuration to ensure the reliability and integrity of the message processing system.</li>
</ul>
<hr>
<h1 id="MicroService"><a href="#MicroService" class="headerlink" title="MicroService"></a>MicroService</h1><h2 id="152-How-to-use-the-Zuul-Gateway-API-How-does-the-Zuul-Gateway-API-work"><a href="#152-How-to-use-the-Zuul-Gateway-API-How-does-the-Zuul-Gateway-API-work" class="headerlink" title="152. How to use the Zuul Gateway API? / How does the Zuul Gateway API work?"></a>152. How to use the Zuul Gateway API? / How does the Zuul Gateway API work?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Zuul API Gateway is to distribute the traffic to a particular service.</p>
<p>For example, Amazon has 3 services, order service is at localhost:8070, payment service is at localhost:8080, delivery service is at localhost: 8090. You don’t want to expose all 3 different addresses to customers. So you add one API Gateway like at localhost:9000. Customers only access to API Gateway. API will redirect to different services based on the URL. For example, localhost:9000/order will be redirected to order service, localhost:9000/payment will be redirected to payment service, localhost:9000/delivery will be redirected to delivery service.</p>
<p>To set API Gateway, we need Zuul gateway server, all the other services should register the zuul gateway server in their application.properties.</p>
<hr>
<h2 id="153-How-to-manage-the-entire-transaction-across-different-microservices-How-to-rollback"><a href="#153-How-to-manage-the-entire-transaction-across-different-microservices-How-to-rollback" class="headerlink" title="153. How to manage the entire transaction across different microservices? How to rollback?"></a>153. How to manage the entire transaction across different microservices? How to rollback?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Saga Pattern</p>
<p>Saga Orchestration Pattern is a design pattern to manage global transaction across multiple microservices based on message queue.</p>
<p>For example, if you make one order which involves Order Service, Payment Service and Delivery Service as one transaction. In saga orchestration pattern, you will need one command center service, like Command Service which works as a communication center for all the services.</p>
<p>When order service is completed, it sends a completion message to command center, the command center received and send a message to payment service, the payment service will process payment and send complete message to command service, the command service received payment completion message and send message to delivery service and once delivery is done, it tells command service and command service will mark the entire transaction as completed.</p>
<p>When there is error, the transaction will be rolled back in reverse order. For example, if delivery service failed, it sends failure message to command service, the command service will tell payment service to rollback payments, once payment service completes the rollback and tells the command service, the command service will ask the order service to rollback. It goes this way until the entire transaction is rolled back.</p>
<hr>
<h2 id="191-How-to-communicate-between-microservices"><a href="#191-How-to-communicate-between-microservices" class="headerlink" title="191. How to communicate between microservices"></a>191. How to communicate between microservices</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>There are two ways to communicate between services, sync and async</p>
<ul>
<li>Sync: RestTemplate/RestClient/<code>FeignClient</code> – when service 1 call rest api of service 2, service 1 will have wait for the return from service 2, so this is sync communication.</li>
<li>Async: message queue like <code>Kafka</code>, <code>RabbitMQ</code> – service 1 as producer sends message to kafka cluster, service 2 as consumer subscribes from kakfa cluster.</li>
</ul>
<hr>
<h2 id="157-Suppose-you-have-two-Eureka-servers-how-does-each-application-know-which-Eureka-server-it-is-registered-to"><a href="#157-Suppose-you-have-two-Eureka-servers-how-does-each-application-know-which-Eureka-server-it-is-registered-to" class="headerlink" title="157. Suppose you have two Eureka servers, how does each application know which Eureka server it is registered to?"></a>157. Suppose you have two Eureka servers, how does each application know which Eureka server it is registered to?</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>Every application doesn’t register only to a single Eureka server. It registers with all the servers that are configured. And these servers replicate data between each other. You can check the logs, look at the Eureka dashboards, or query the registration status in your code to find out which server the app initially registered with.</p>
<hr>
<h2 id="158-What-is-the-circuit-breaker"><a href="#158-What-is-the-circuit-breaker" class="headerlink" title="158. What is the circuit breaker?"></a>158. What is the circuit breaker?</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>A circuit breaker is a design pattern used in distributed systems to handle failures gracefully and prevent cascading failures. It’s a kind of protection. When a service is failing, it stops requests to that service for a while, giving the service time to fix itself. and it usually has three status, like 1. Closed: Requests go as usual, but we watch for failures. If too many failures happen, it turns to Open.2. Open: Requests don’t even try the service and just fail right away. After a break, it changes to Half - Open. 3. Half - Open: We let a few test requests through. If they work, it goes back to Closed. If not, it stays Open.</p>
<hr>
<h2 id="159-How-does-microservices-communicate-with-each-other"><a href="#159-How-does-microservices-communicate-with-each-other" class="headerlink" title="159. How does microservices communicate with each other?"></a>159. How does microservices communicate with each other?</h2><ul>
<li>“answer”: null,</li>
<li>“frequency”: 0,</li>
</ul>
<hr>
<h1 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h1><h2 id="237-Ways-to-connect-to-database"><a href="#237-Ways-to-connect-to-database" class="headerlink" title="237. Ways to connect to database"></a>237. Ways to connect to database</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<ol>
<li>JDBC - the basic way to connect to database, use statement/preparedStatement/callableStatement to run SQL direclty, use RestSet to host data. JDBC is the core for all other connections</li>
<li>Hibernate - ORM framework. Use ORM so you dont need to write statement, SQL and ResultSet. Use Session and SessionFactory to do CRUD. Has 3 types of cache.</li>
<li>Spring Data JPA - build on top of Java JPA. Use ORM framework as internal mapping tools and Use Naming Convention to do CRUD.</li>
</ol>
<hr>
<h2 id="352-How-do-you-decide-which-database-to-choose-SQL-or-NoSQL"><a href="#352-How-do-you-decide-which-database-to-choose-SQL-or-NoSQL" class="headerlink" title="352. How do you decide which database to choose, SQL or NoSQL"></a>352. How do you decide which database to choose, SQL or NoSQL</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>Several Main difference</p>
<ul>
<li><ol>
<li>SQL: only have pre-defined structure schema/data, it is table based.</li>
</ol>
</li>
<li><ol>
<li>NOSQL: unstructure data, like MongoDB can store PDF/audio/video/text/json data easily. Cassandra is column based, you can easily expand the columns</li>
</ol>
</li>
<li><ol>
<li>SQL: based on ACID rules, designed to handle transactions.</li>
</ol>
</li>
<li><ol>
<li>NOSQL: based on CAP theorem, not good for transactions.</li>
</ol>
</li>
<li><ol>
<li>SQL: traditional database with SQL, not designed for big data</li>
</ol>
</li>
<li><ol>
<li>NOSQL: designed for big data, have partitions.</li>
</ol>
</li>
</ul>
<hr>
<h2 id="290-Explain-CAP-theorem-and-which-database-use-them"><a href="#290-Explain-CAP-theorem-and-which-database-use-them" class="headerlink" title="290. Explain CAP theorem and which database use them"></a>290. Explain CAP theorem and which database use them</h2><ul>
<li>“answer”:<ul>
<li>The CAP theorem, also known as Brewer’s theorem, is a key concept in distributed systems. It says that in a distributed system, it’s impossible to have all three of the following qualities at the same time:<ul>
<li><strong>Consistency</strong>: All nodes in the system see the same data at the same time. In a consistent system, a read operation will always return the most recent write.</li>
<li><strong>Availability</strong>: Every request received by a non - failed node in the system must get a response. The system is always available to handle requests, even when there are failures.</li>
<li><strong>Partition tolerance</strong>: The system can still work even if there are network partitions. Network partitions happen when the network is split into parts that can’t talk to each other.</li>
</ul>
</li>
<li>In practice, distributed systems have to make choices between these three qualities. Different databases make different choices based on their design goals and what the applications they serve need.</li>
<li>For <strong>MySQL</strong>, it aims to provide high consistency and availability. It uses techniques like data replication and a shared - nothing architecture to achieve these. But when there are network partitions, it may have to make some trade - offs between availability and consistency, depending on how it’s set up and the specific failure situation. In general, MySQL leans more towards consistency and availability, sacrificing some partition tolerance.</li>
<li><strong>MongoDB</strong> is a NoSQL database that focuses on high availability and partition tolerance. It can handle a large amount of data across multiple nodes in a distributed environment. It replicates data across nodes to ensure availability and can continue to operate even when there are network partitions. However, it sacrifices strong consistency. The data may not be exactly the same across all nodes at the same time, but it provides eventual consistency, which means that over time, the data will become consistent.</li>
<li><strong>Redis</strong> is an in - memory data store that is often used for caching and real - time applications. It emphasizes high availability and consistency. It usually runs on a single node or in a cluster with replication for high availability. It provides strong consistency for operations within a single node. But in a distributed setup, if there are network issues, it may face challenges in maintaining all three CAP properties. It sacrifices partition tolerance to some extent to ensure consistency and availability for typical use cases.</li>
<li>In summary, different databases make different trade - offs based on the CAP theorem to meet the specific needs of different applications.</li>
</ul>
</li>
<li><p>“frequency”: 0,</p>
<hr>
</li>
</ul>
<h2 id="376-What-is-sharding-in-MongoDB"><a href="#376-What-is-sharding-in-MongoDB" class="headerlink" title="376. What is sharding in MongoDB?"></a>376. What is sharding in MongoDB?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Sharding is to split the dataset into multiple partitions. For example, if you have data from 1 to 10 million, you can store the id from 1 to 1 million as first shard, 1 million to 2 million as 2nd shard etc.</p>
<hr>
<h2 id="377-How-replication-works-in-MongoDB"><a href="#377-How-replication-works-in-MongoDB" class="headerlink" title="377. How replication works in MongoDB"></a>377. How replication works in MongoDB</h2><ul>
<li>“frequency”: 1,</li>
</ul>
<p>To prevent the data loss, MongoDB set replication of the nodes.</p>
<p>like if you have 20 shards, the 1st shard is in Virginia, MongoDB can make 2 replications (copies) of this node and put them in Ohio and California so if Virginia server is down, the other 2 replications will back up.</p>
<hr>
<h2 id="31-Different-type-of-Joins"><a href="#31-Different-type-of-Joins" class="headerlink" title="31. Different type of Joins"></a>31. Different type of Joins</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Supposed you have table A 100 records, table B 50 records, they match by 20 records</p>
<ol>
<li><strong>Inner/Equi Join:</strong> the match part (like: where a.id = b.ta_id), should be 20 records</li>
<li><strong>Left Join</strong> : match plus remaining of left side table, if A left join B, then return 100, if B left join A, then return 50</li>
<li><strong>Right Join</strong>, match plus remaining of right side table. A left join B = B right join A</li>
<li><strong>Full Outer Join</strong>: match plus remaining of A and B, 20 + 80 + 30 = 130</li>
<li><strong>Cross Join</strong>: Each row of A join Each row of B: 100 * 50 = 5000</li>
<li><strong>Self Join</strong>: A self Join A, treat as 2 tables, A1, A2, so A self join is like A1 join A2</li>
</ol>
<hr>
<h2 id="33-Write-a-query-find-the-most-popular-product-of-one-month"><a href="#33-Write-a-query-find-the-most-popular-product-of-one-month" class="headerlink" title="33. Write a query: find the most popular product of one month"></a>33. Write a query: find the most popular product of one month</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p><strong>Analysis</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">most popular –&gt; appear most times –&gt; max count –&gt; find count and order, GROUP BY always needed for aggregate function</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> p.name, <span class="keyword">count</span>()</span><br><span class="line"><span class="keyword">FROM</span> product p</span><br><span class="line"><span class="keyword">WHERE</span> p.month = ‘GivenMonth’</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> p.name.  //<span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">name</span> –<span class="keyword">count</span> <span class="keyword">by</span> <span class="keyword">name</span>, <span class="keyword">field</span> must appear <span class="keyword">in</span> <span class="keyword">select</span> caluse</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">count</span>() <span class="keyword">DESC</span> //<span class="keyword">order</span> <span class="keyword">in</span> <span class="keyword">desc</span> <span class="keyword">of</span> <span class="keyword">count</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span> // just find top1</span><br></pre></td></tr></table></figure>
<h2 id="34-Query-the-average-salary"><a href="#34-Query-the-average-salary" class="headerlink" title="34. Query the average salary"></a>34. Query the average salary</h2><p>定义了一个名为 <code>Employee</code> 的表：</p>
<ul>
<li><code>Id</code>：整数类型（<code>Integer</code>）</li>
<li><code>Name</code>：可变字符类型，长度为 60（<code>varchar(60)</code>） </li>
<li><code>Dept</code>：可变字符类型，长度为 60（<code>varchar(60)</code>） </li>
<li><code>Salary</code>：双精度浮点类型（<code>Double</code>）</li>
</ul>
<p>table data: </p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Dept</th>
<th>Salary</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>E1</td>
<td>Finance</td>
<td>100</td>
</tr>
<tr>
<td>2</td>
<td>E2</td>
<td>IT</td>
<td>200.5</td>
</tr>
<tr>
<td>3</td>
<td>E3</td>
<td>Finance</td>
<td>300.5</td>
</tr>
<tr>
<td>4</td>
<td>E4</td>
<td>Marketing</td>
<td>150</td>
</tr>
<tr>
<td>5</td>
<td>E5</td>
<td>Accounting</td>
<td>150.75</td>
</tr>
<tr>
<td>6</td>
<td>E6</td>
<td>IT</td>
<td>100</td>
</tr>
<tr>
<td>7</td>
<td>E7</td>
<td>Finance</td>
<td>75.5</td>
</tr>
</tbody>
</table>
<p>give me a <code>SQL</code> 语句用于：先按部门分组查询各部门员工的平均薪资 ，然后通过 <code>UNION ALL</code> 将所有员工的平均薪资（以<code>&quot;Company&quot;</code> 作为标识）结果合并显示。 First, group by department to query the average salary of employees in each department, and then use <code>UNION ALL</code> to combine the average salary of all employees</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> dept, <span class="keyword">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> Employee</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dept</span><br><span class="line"><span class="keyword">UNION</span> ALL</span><br><span class="line"><span class="keyword">Select</span> <span class="string">"Company"</span>, <span class="keyword">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br></pre></td></tr></table></figure>
<p>result:</p>
<table>
<thead>
<tr>
<th>dept</th>
<th>AVG(salary)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accounting</td>
<td>150.75</td>
</tr>
<tr>
<td>Finance</td>
<td>158.67（约）</td>
</tr>
<tr>
<td>IT</td>
<td>150.25</td>
</tr>
<tr>
<td>Marketing</td>
<td>150</td>
</tr>
<tr>
<td>Company</td>
<td>156.26（约）</td>
</tr>
</tbody>
</table>
<p>Here is a <strong>line-by-line explanation in English</strong> of the SQL query:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> dept, <span class="keyword">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> Employee</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dept</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>SELECT dept, AVG(salary)</code><br>→ This selects two columns: the department name (<code>dept</code>) and the <strong>average salary</strong> of employees within each department.</p>
</li>
<li><p><code>FROM Employee</code><br>→ The data is retrieved from the <code>Employee</code> table.</p>
</li>
<li><p><code>GROUP BY dept</code><br>→ Groups all rows by the <code>dept</code> column so that <code>AVG(salary)</code> is calculated <strong>per department</strong>.</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">UNION ALL</span><br></pre></td></tr></table></figure>
<ul>
<li>Combines the results of the <strong>first query</strong> with the results of the <strong>second query</strong> <strong>without removing duplicates</strong> (unlike <code>UNION</code>, which removes duplicates). So, all rows from both queries will be included.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="string">"Company"</span>, <span class="keyword">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>Select &quot;Company&quot;, AVG(salary)</code><br>→ Selects two values:</p>
<ul>
<li>A fixed string <code>&quot;Company&quot;</code> as the <strong>label</strong> (appears in the same column as <code>dept</code>)</li>
<li>The <strong>average salary across the entire company</strong></li>
</ul>
</li>
<li><p><code>FROM employee</code><br>→ Uses the same table. Since there is <strong>no <code>GROUP BY</code></strong>, this gives a <strong>single-row result</strong>: the overall average.</p>
</li>
</ul>
<hr>
<h2 id="35-Is-the-primary-key-unique-Difference-between-the-primary-key-and-unique-key"><a href="#35-Is-the-primary-key-unique-Difference-between-the-primary-key-and-unique-key" class="headerlink" title="35. Is the primary key unique? Difference between the primary key and unique key"></a>35. Is the primary key unique? Difference between the primary key and unique key</h2><ul>
<li>“frequency”: 2,</li>
</ul>
<p>Primary Key must be Unique. Unique key may not be primary key</p>
<p>For example, User table, UserID is primary key, it must be unique. UserEmail and SSN are also unique, but it is not primary key</p>
<hr>
<h2 id="38-Explain-the-ACID-concepts"><a href="#38-Explain-the-ACID-concepts" class="headerlink" title="38. Explain the ACID concepts"></a>38. Explain the ACID concepts</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>ACID is the design principle for SQL relational database.</p>
<p>A: atomicity: means every transaction to database should be atomic, should be as a whole operation. If there is any failure inside, the whole transaction should rollback.</p>
<p>C: Consistency. Data should be consistent. It should not violate any rules of the database constraints.</p>
<p>I: Isolation, it refers to the isolation level, like READ_COMMITTED, READ_UNCOMMITED. The READ_COMMITTED level means you can only read the data that is already committed.</p>
<p>D: durability: when there is system crash or node failure, the data should still be available.</p>
<hr>
<h2 id="39-What-kind-of-database-did-you-use-and-how-do-you-communicate-with-the-DB"><a href="#39-What-kind-of-database-did-you-use-and-how-do-you-communicate-with-the-DB" class="headerlink" title="39. What kind of database did you use and how do you communicate with the DB"></a>39. What kind of database did you use and how do you communicate with the DB</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Ways to communicate with database: JDBC, JPA, HIBERNATE, MYBATIS etc</p>
<hr>
<h2 id="355-Find-the-2nd-largest-salary-in-employee-table"><a href="#355-Find-the-2nd-largest-salary-in-employee-table" class="headerlink" title="355. Find the 2nd largest salary in employee table"></a>355. Find the 2nd largest salary in employee table</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p><strong>SOLUTION 1</strong>: (best for highest, 2nd highest, not good for 3rd, 4th etc, need to understand subquery)</p>
<figure class="highlight sql"><figcaption><span>solution1</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) </span><br><span class="line"><span class="keyword">FROM</span> employee </span><br><span class="line"><span class="keyword">WHERE</span> salary &lt; (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) <span class="keyword">FROM</span> employee);</span><br></pre></td></tr></table></figure>
<p><strong>SOLUTION 2</strong>: (best for Kth highest. need to understand OFFSET, LIMIT)</p>
<figure class="highlight sql"><figcaption><span>solution2</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary </span><br><span class="line"><span class="keyword">FROM</span> employee </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span> </span><br><span class="line"><span class="keyword">OFFSET</span> <span class="number">1</span> </span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>的含义逐行解释如下：</p>
<ul>
<li><p><code>SELECT DISTINCT salary</code><br>→ Selects unique (non-duplicate) salary values from the <code>employee</code> table.</p>
</li>
<li><p><code>FROM employee</code><br>→ Data source is the <code>employee</code> table.</p>
</li>
<li><p><code>ORDER BY salary DESC</code><br>→ Sorts all unique salaries <strong>from highest to lowest</strong>.</p>
</li>
<li><p><code>OFFSET 1</code><br>→ <strong>Skips the first row</strong> (i.e., the highest salary).</p>
</li>
<li><p><code>LIMIT 1</code><br>→ <strong>Takes the next one row only</strong> — which will be the <strong>second-highest salary</strong>.</p>
</li>
</ul>
<p>✅ 整体作用：</p>
<p><strong>Return the second-highest distinct salary</strong> from the <code>employee</code> table.</p>
<p>🔍 举个例子：</p>
<p>假设 employee 表中有这些 salary：</p>
<table>
<thead>
<tr>
<th>salary</th>
</tr>
</thead>
<tbody>
<tr>
<td>100000</td>
</tr>
<tr>
<td>90000</td>
</tr>
<tr>
<td>90000</td>
</tr>
<tr>
<td>80000</td>
</tr>
</tbody>
</table>
<p>执行后：</p>
<ul>
<li><code>DISTINCT salary</code> → <code>[100000, 90000, 80000]</code></li>
<li><code>ORDER BY DESC</code> → <code>[100000, 90000, 80000]</code></li>
<li><code>OFFSET 1 LIMIT 1</code> → 取 <code>90000</code></li>
</ul>
<p>如果你要找第 N 高的工资，只需要把 <code>OFFSET N-1 LIMIT 1</code> 即可。</p>
<hr>
<h2 id="356-Find-employee-whose-salary-is-higher-than-its-own-manager-only-given-employee-table-which-contains-employee-id-and-its-manager-id"><a href="#356-Find-employee-whose-salary-is-higher-than-its-own-manager-only-given-employee-table-which-contains-employee-id-and-its-manager-id" class="headerlink" title="356. Find employee whose salary is higher than its own manager (only given employee table which contains employee id and its manager id)"></a>356. Find employee whose salary is higher than its own manager (only given employee table which contains employee id and its manager id)</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<p>Employee (id, name, salary, managerId)</p>
<p>KEY: we need to get employee salary and manager salary from same table, it is SELF JOIN, when do SELF join, we can always treat Employee as 2 tables, employee and manager</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> emp.name</span><br><span class="line"><span class="keyword">FROM</span> employee emp</span><br><span class="line"><span class="keyword">JOIN</span> employee mgr</span><br><span class="line"><span class="keyword">ON</span> emp.managerId = mgr.id</span><br><span class="line"><span class="keyword">WHERE</span> emp.salary &gt; mgr.salary;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="316-SQL-how-to-delete-duplicate-rows-only-keep-unique-rows"><a href="#316-SQL-how-to-delete-duplicate-rows-only-keep-unique-rows" class="headerlink" title="316. SQL how to delete duplicate rows, only keep unique rows"></a>316. SQL how to delete duplicate rows, only keep unique rows</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> temp_table <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> * <span class="keyword">FROM</span> your_table;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> your_table;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> temp_table <span class="keyword">RENAME</span> <span class="keyword">TO</span> your_table;</span><br></pre></td></tr></table></figure>
<ul>
<li>“frequency”: 0,</li>
</ul>
<hr>
<h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="12-How-do-you-config-for-multiple-environments"><a href="#12-How-do-you-config-for-multiple-environments" class="headerlink" title="12. How do you config for multiple environments?"></a>12. How do you config for multiple environments?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<ol>
<li>In spring boot, we can define different <strong>profiles</strong> for different environments, like DEV, QA/Staging, PROD etc.</li>
<li>We can have <code>application-dev.propeties</code>, <code>application-staging.properties</code>, <code>application-prod.applications</code>, when we run the application, we just need to set the active profile to corresponding env.</li>
<li>In microservice, we can also use Config Server, which we can config the different profiles and put them in server hardware or in code repository and use active profile to refer to it. The benefit is we can track the version of the files.</li>
</ol>
<hr>
<h2 id="196-Why-do-you-use-Spring-Boot-Benefits-of-Spring-Boot"><a href="#196-Why-do-you-use-Spring-Boot-Benefits-of-Spring-Boot" class="headerlink" title="196. Why do you use Spring Boot? / Benefits of Spring Boot"></a>196. Why do you use Spring Boot? / Benefits of Spring Boot</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Top 1 question in spring boot.</p>
<p>Spring boot has many benefits, the top 4 are like:</p>
<ol>
<li><strong>Embedded Server</strong>: spring boot has <code>Web</code> starter which contains the tomcat or Jetty server, you dont need to deploy the application, it is auto-deployed by one click or one command line. You just run your whole application with server together as a JAR file</li>
<li><strong>Auto Configuration</strong>: Spring boot has auto configuration, as long as you put the properties there, spring boot will auto setup everything. Example, if you have Data Source entries in the application.properties file, Spring boot will try to auto connect the database for you. it’s implemented by <code>@SpringBootApplication</code> , some Key Things included in this annotation<ul>
<li><code>@EnableAutoConfiguration</code></li>
<li><code>@ComponentScan</code>: will scan all beans at current level or lower level, this is why the <code>@SpringBootApplication</code> is on top of a main class that is higher than all other classes, so that it can scan all beans</li>
<li><code>@AutoConfiguration</code>: will let spring boot auto configure. For example, if you have put datasource in the application.properties, spring boot will auto connect for you. If you dont want auto configuration, use <code>Excludes=XXX.Class</code> like <code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})</code> to exclude that particular configuration</li>
<li><code>@Configuration</code>: means this is a configuration class.</li>
</ul>
</li>
<li><strong>Dependency Management</strong>: Spring boot wraps up related dependencies into <code>starters</code>, like the Web Starter contains json, rest api, mvc model, server etc. You don’t need to add them to POM.XML separately, also you dont need to worry about the version conflicts in the dependencies.</li>
<li><strong>Actuator</strong>: Spring boot provides actuator which has many endpoints to tell the status of the spring boot application. Like: <em>/info</em> is to tell the status, <em>/health</em> summarizes the health status of our application. <em>/metrics</em> details metrics of our application. This might include generic metrics as well as custom ones.</li>
</ol>
<p>Disadvantage:</p>
<p>Spring boot wrap too many things in the box, so many things are in under the cover.</p>
<h3 id="Actuator细节"><a href="#Actuator细节" class="headerlink" title="Actuator细节"></a>Actuator细节</h3><h4 id="how-to-secure-Actuator-endpoints-in-a-production-environment"><a href="#how-to-secure-Actuator-endpoints-in-a-production-environment" class="headerlink" title="how to secure Actuator endpoints in a production environment"></a>how to secure Actuator endpoints in a production environment</h4><p>Limit exposed endpoints like this, Only expose the endpoints you absolutely need.<br><figure class="highlight yml"><figcaption><span>application.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line"><span class="attr">  endpoints:</span></span><br><span class="line"><span class="attr">    web:</span></span><br><span class="line"><span class="attr">      exposure:</span></span><br><span class="line"><span class="attr">        include:</span> <span class="string">health,</span> <span class="string">metrics,</span> <span class="string">prometheus</span></span><br></pre></td></tr></table></figure></p>
<p>or use Spring Security:<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http</span><br><span class="line">  .requestMatcher(EndpointRequest.toAnyEndpoint())</span><br><span class="line">  .authorizeRequests()</span><br><span class="line">  .anyRequest().hasRole(<span class="string">"ADMIN"</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="HealthIndicator-是什么？"><a href="#HealthIndicator-是什么？" class="headerlink" title="HealthIndicator 是什么？"></a><code>HealthIndicator</code> 是什么？</h4><p>在 Spring Boot 中，<code>HealthIndicator</code> 和 <code>MeterRegistry</code> 是 Actuator 和 Micrometer（Spring Boot 默认的指标收集框架) 的核心机制，用于实现<strong>服务健康监控</strong>和<strong>指标采集</strong>，分别服务于：</p>
<ul>
<li><strong><code>HealthIndicator</code></strong> → 自定义健康检查（用于 <code>/actuator/health</code>）</li>
<li><strong><code>MeterRegistry</code></strong> → 自定义业务/系统指标（用于 <code>/actuator/metrics</code>）</li>
</ul>
<p>如果你在某个项目中要同时监控系统健康状态和关键业务指标，两者通常是<strong>配合使用</strong>的。</p>
<p><code>HealthIndicator</code> 是 Spring Boot Actuator 提供的一个接口，用于<strong>定义你自己的健康检查逻辑</strong>。</p>
<p>Spring Boot 默认实现了很多指标（比如数据库、Redis、Kafka、磁盘空间等），你也可以实现这个接口，来让系统健康检查涵盖你自定义的服务或依赖。</p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServiceHealthIndicator</span> <span class="keyword">implements</span> <span class="title">HealthIndicator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Health <span class="title">health</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> serviceUp = pingMyRemoteService();</span><br><span class="line">        <span class="keyword">if</span> (serviceUp) &#123;</span><br><span class="line">            <span class="keyword">return</span> Health.up().build();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Health.down().withDetail(<span class="string">"error"</span>, <span class="string">"Timeout when calling remote service"</span>).build();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个类会自动集成到 <code>/actuator/health</code> 的输出中，表现为：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span>: <span class="string">"DOWN"</span>,</span><br><span class="line">  <span class="attr">"components"</span>: &#123;</span><br><span class="line">    <span class="attr">"myService"</span>: &#123;</span><br><span class="line">      <span class="attr">"status"</span>: <span class="string">"DOWN"</span>,</span><br><span class="line">      <span class="attr">"details"</span>: &#123;</span><br><span class="line">        <span class="attr">"error"</span>: <span class="string">"Timeout when calling remote service"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="MeterRegistry-是什么？"><a href="#MeterRegistry-是什么？" class="headerlink" title="MeterRegistry 是什么？"></a><code>MeterRegistry</code> 是什么？</h4><p><code>MeterRegistry</code> 是 Micrometer（Spring Boot 默认的指标收集框架）提供的<strong>指标注册器</strong>，你可以通过它手动添加各种指标，如：</p>
<ul>
<li>业务指标：订单数量、支付成功率等</li>
<li>技术指标：某方法调用次数、异常次数等</li>
</ul>
<p>Spring Boot Actuator + Micrometer 会将这些指标自动暴露在 <code>/actuator/metrics</code>，并可以导出给 Prometheus 等系统。</p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> MeterRegistry meterRegistry;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processOrder</span><span class="params">(Order order)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 自定义业务指标</span></span><br><span class="line">    meterRegistry.counter(<span class="string">"orders.processed"</span>, <span class="string">"type"</span>, order.getType()).increment();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后你就可以通过 <code>/actuator/metrics/orders.processed</code> 看到数据，或者被 Prometheus 采集后用 Grafana 画图。</p>
<hr>
<h2 id="220-How-to-start-a-Spring-Boot-project"><a href="#220-How-to-start-a-Spring-Boot-project" class="headerlink" title="220. How to start a Spring Boot project?"></a>220. How to start a Spring Boot project?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Several Steps in order:</p>
<ol>
<li>Go to spring initializer, fill information like Java Version, Build Tool Maven, enter project name description, Package type as Jar or War</li>
<li>Choose Starters, like Web Stater, Spring Data Starter, Security Starter etc</li>
<li>generate the project and download the zipfile</li>
<li>Unzip and import into IDE as new project.</li>
</ol>
<hr>
<h2 id="228-What-does-SpringBootApplication-mean"><a href="#228-What-does-SpringBootApplication-mean" class="headerlink" title="228. What does @SpringBootApplication mean?"></a>228. What does @SpringBootApplication mean?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>some Key Things included in this application</p>
<ul>
<li><code>@EnableAutoConfiguration</code></li>
<li><code>@ComponentScan</code>: will scan all beans at current level or lower level, this is why the <code>@SpringBootApplication</code> is on top of a main class that is higher than all other classes, so that it can scan all beans</li>
<li><code>@AutoConfiguration</code>: will let spring boot auto configure. For example, if you have put datasource in the application.properties, spring boot will auto connect for you. If you dont want auto configuration, use <code>Excludes=XXX.Class</code> like <code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})</code> to exclude that particular configuration</li>
<li><code>@Configuration</code>: means this is a configuration class.</li>
</ul>
<hr>
<h2 id="234-For-Spring-Boot-how-do-I-use-another-server-such-as-WebLogic-instead-of-the-embedded-Tomcat-server"><a href="#234-For-Spring-Boot-how-do-I-use-another-server-such-as-WebLogic-instead-of-the-embedded-Tomcat-server" class="headerlink" title="234. For Spring Boot, how do I use another server such as WebLogic instead of the embedded Tomcat server?"></a>234. For Spring Boot, how do I use another server such as WebLogic instead of the embedded Tomcat server?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Some configurations needed:</p>
<ol>
<li>add <strong>Exclusions</strong> in POM.XML to exclude the embedded tomcat and jetty server</li>
<li>need to add JNDI in the application.properteis for the new server (such as weblogic)</li>
<li>the main class needs to extend the <strong>SpringBootServletInitializer</strong></li>
<li>Change <strong>package</strong> in POM.XML from JAR to WAR.</li>
</ol>
<hr>
<h2 id="350-Difference-between-Spring-boot-and-Spring"><a href="#350-Difference-between-Spring-boot-and-Spring" class="headerlink" title="350. Difference between Spring boot and Spring"></a>350. Difference between Spring boot and Spring</h2><ul>
<li>“frequency”: 0,</li>
</ul>
<ol>
<li>Spring boot use starter to manager dependencies, like Web Starter has MVC, REST, JSON, TOMCAT, IOC etc all included in one web starter. You dont need to worry about dependency conflicts.</li>
<li>Spring boot has tomcat in web starter by default, so you dont need to package and deploy to tomcat. You can just run it directly or package it as JAR file and run it everywhere.</li>
<li>Spring boot put everything in annotation by default, you dont need to write a lot code as in Spring.</li>
<li>Spring boot add auto configuration, like if you put datasource in application.properties file, it will auto connect for you. You dont need to write the java connection code.</li>
<li>Spring boot provide actuator which you can use to measure the metrics of the applications, like /info, /heath etc to tell the metrics, it is very useful in microservice environments.</li>
</ol>
<hr>
<h2 id="447-How-to-do-cache-in-spring-boot-and-how-to-refresh-the-cache"><a href="#447-How-to-do-cache-in-spring-boot-and-how-to-refresh-the-cache" class="headerlink" title="447. How to do cache in spring boot and how to refresh the cache"></a>447. How to do cache in spring boot and how to refresh the cache</h2><h3 id="Enable-Caching"><a href="#Enable-Caching" class="headerlink" title="Enable Caching"></a>Enable Caching</h3><p>First, activate Spring’s caching mechanism in your config class:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Define-a-Cacheable-Method"><a href="#Define-a-Cacheable-Method" class="headerlink" title="Define a Cacheable Method"></a>Define a Cacheable Method</h3><p>Use <code>@Cacheable</code> to cache a method’s result. Example:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable</span>(value = <span class="string">"products"</span>, key = <span class="string">"#id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">getProductById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Simulate expensive DB call</span></span><br><span class="line">        <span class="keyword">return</span> productRepository.findById(id).orElseThrow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>value</code> is the name of the cache (can be mapped to a specific backend like Redis, EhCache, etc.)</li>
<li><code>key</code> determines how the cache is indexed (SpEL expression)</li>
</ul>
<hr>
<h3 id="Cache-Refresh-Options"><a href="#Cache-Refresh-Options" class="headerlink" title="Cache Refresh Options"></a>Cache Refresh Options</h3><p><strong>1. Manual Refresh (<code>@CachePut</code>)</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CachePut</span>(value = <span class="string">"products"</span>, key = <span class="string">"#product.id"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Product <span class="title">updateProduct</span><span class="params">(Product product)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> productRepository.save(product);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Updates the cache with the new value returned by the method.</li>
<li>Doesn’t skip method execution (unlike <code>@Cacheable</code>).</li>
</ul>
<hr>
<p><strong>2. Cache Invalidation (<code>@CacheEvict</code>)</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"products"</span>, key = <span class="string">"#id"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteProduct</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">    productRepository.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Removes the cache entry explicitly.</li>
<li>Use <code>allEntries = true</code> to wipe the whole cache region:</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"products"</span>, allEntries = <span class="keyword">true</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearAllProductsCache</span><span class="params">()</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>3. Scheduled Refresh (via <code>@Scheduled</code>)</strong></p>
<p>Use this when you want to auto-refresh cache periodically.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span>(fixedRate = <span class="number">3600000</span>) <span class="comment">// every hour</span></span><br><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"products"</span>, allEntries = <span class="keyword">true</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refreshProductsCache</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Triggers eviction; next @Cacheable call will reload.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Make sure you enable scheduling:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Backing-Cache-Store"><a href="#Backing-Cache-Store" class="headerlink" title="Backing Cache Store"></a>Backing Cache Store</h3><p>By default, Spring Boot uses a simple in-memory cache via <code>ConcurrentMapCacheManager</code>. For production, plug in:</p>
<ul>
<li><strong>Redis</strong> (<code>spring-boot-starter-data-redis</code>)</li>
<li><strong>Caffeine</strong></li>
<li><strong>EhCache</strong></li>
<li><strong>Hazelcast</strong></li>
</ul>
<p><strong>Example (Redis):</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">spring.cache.type=redis</span></span><br></pre></td></tr></table></figure>
<p>Redis auto-integrates with <code>@Cacheable</code> and supports TTL and eviction policies.</p>
<hr>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><table>
<thead>
<tr>
<th>Annotation</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Cacheable</code></td>
<td>Read from cache, populate if missing</td>
</tr>
<tr>
<td><code>@CachePut</code></td>
<td>Update cache forcibly</td>
</tr>
<tr>
<td><code>@CacheEvict</code></td>
<td>Remove cache entry or all entries</td>
</tr>
<tr>
<td><code>@Scheduled</code></td>
<td>Automate refresh by clearing entries</td>
</tr>
</tbody>
</table>
<p>Use <code>@Cacheable</code> for reads, <code>@CachePut</code> on writes/updates, and <code>@CacheEvict</code> to invalidate. Use Redis or Caffeine for production-grade caching.</p>
<hr>
<h1 id="SpringCore"><a href="#SpringCore" class="headerlink" title="SpringCore"></a>SpringCore</h1><h2 id="174-Spring-Annotation-you-used-in-your-project"><a href="#174-Spring-Annotation-you-used-in-your-project" class="headerlink" title="174. Spring Annotation you used in your project?"></a>174. Spring Annotation you used in your project?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p><code>@Controller</code>, <code>@RestController</code>, <code>@RequsetMapping</code> <code>@GetMapping</code> <code>@PutMapping</code> <code>@PostMapping</code> <code>@DeleteMapping</code></p>
<p><code>@PathVariable</code> <code>@RequestParam</code></p>
<p><code>@Autowired</code>, <code>@Qualifier</code></p>
<p><code>@Service</code> <code>@Repository</code> <code>@Componenet</code></p>
<hr>
<h2 id="176-What-is-IoC-Dependency-Injection"><a href="#176-What-is-IoC-Dependency-Injection" class="headerlink" title="176. What is IoC/Dependency Injection?"></a>176. What is IoC/Dependency Injection?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>That is the most basic module of spring. Without spring, if you want to use another bean in one class, you have to create instance by yourself by calling the constructor. But with spring, you dont need to do that, you just use @component or @bean and other spring annotations to let spring manage the beans for you, so spring has a bucket called bean factory, it manages all the beans there for you, if you need to inject a bean, you just use @autowired, spring will find the instance and wire it for you. So you are giving the control of creating instance to spring, that is why it is also called inversion of control.</p>
<hr>
<h2 id="177-What-is-AOP-and-how-do-you-implement-AOP-in-the-project"><a href="#177-What-is-AOP-and-how-do-you-implement-AOP-in-the-project" class="headerlink" title="177. What is AOP and how do you implement AOP in the project?"></a>177. What is AOP and how do you implement AOP in the project?</h2><ul>
<li>“frequency”: 3,</li>
</ul>
<p><code>AOP</code> - Aspect oriented programming, is to interfere with main application execution.</p>
<p><code>Aspect</code>: @Aspect is to mark a class as AOP class which contains AOP annotations and methods</p>
<p><code>Pointcut</code>: an expression to find all the main application package or methods to apply AOP. like <code>execution(* com.example.CalculatorService.*(..))</code> means find all methods in CalculatorService package.</p>
<p><strong>Advise</strong>: when to apply the AOP logic, @before, @after @around @afterThrowing etc.</p>
<p><strong>Purpose of AOP</strong>:</p>
<ul>
<li>1)exception handling</li>
<li>2) logging</li>
</ul>
<hr>
<h2 id="180-Spring-bean-annotation-bean-life-cycle-and-bean-scope"><a href="#180-Spring-bean-annotation-bean-life-cycle-and-bean-scope" class="headerlink" title="180. Spring bean annotation, bean life cycle and bean scope"></a>180. Spring bean annotation, bean life cycle and bean scope</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Annotations:</p>
<ul>
<li>@Component @Bean @Controlelr @Service @Configuration etc</li>
</ul>
<p>Bean lifecycle</p>
<ul>
<li>Bean instantiated –&gt; dependency injected –&gt; init() –&gt; custom operation –&gt; destory()</li>
</ul>
<p>Bean Scope:</p>
<ul>
<li>Singleton (DEFAULT): only one instance per whole applcation/container</li>
<li>Prototype: create a new instance whenever you need to INJECT this bean</li>
<li>session: one instance per user session</li>
<li>request: one instance per user request-response cycle.</li>
</ul>
<p>EXTRA: Does spring has thread scope? – NO: if you need, create by yourself.</p>
<hr>
<h2 id="184-Spring-Bean-scope-and-explain-the-request-scope"><a href="#184-Spring-Bean-scope-and-explain-the-request-scope" class="headerlink" title="184. Spring Bean scope and explain the request scope"></a>184. Spring Bean scope and explain the request scope</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Singleton: DEFAULT scope, only one instance per application.</p>
<p>Prototype: create new instance whenever you use @Autowired to inject</p>
<p>Request: create new instance per user request response cycle</p>
<p>Session: create one new instance per one user session</p>
<hr>
<h2 id="186-Different-ways-of-DI"><a href="#186-Different-ways-of-DI" class="headerlink" title="186. Different ways of DI"></a>186. Different ways of DI</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Constructor based, Setter based, Field based</p>
<p>Assume you have Bean A and Bean B. A depends on B and B also depends on A.</p>
<p><strong>Constructor based</strong>: when you start spring application, spring will create bean and inject the dependencies. So in this case, when create Bean A, it will need Bean B to inject, so it will create Bean B, and then it finds Bean B will need Bean A. So Bean A and Bean B are waiting for each other. It will throw BeanCurrentlyInCreation exception.</p>
<p><strong>Setter based</strong>: the dependency is only injected when it is used. Spring will first create Bean A and Bean B, but will not inject to each other until B is used in methods inside A. so there will be no exceptions</p>
<p><strong>Field Based</strong>: it is based on java reflection, so it will not throw exception either.</p>
<hr>
<h2 id="193-When-there-is-circular-dependency-use-which-type-of-Injection-Setter-based-Injection-vs-Constructor-based"><a href="#193-When-there-is-circular-dependency-use-which-type-of-Injection-Setter-based-Injection-vs-Constructor-based" class="headerlink" title="193. When there is circular dependency, use which type of Injection? / Setter based Injection vs. Constructor based"></a>193. When there is circular dependency, use which type of Injection? / Setter based Injection vs. Constructor based</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p><strong>Circular Dependency</strong>: when 2 beans are dependent for each other. Bean A and B, A is injected into B and B is also injected into A.</p>
<p><strong>Constructor based</strong>: the beans are injected when initialized. So when you create bean A, it will try to create bean B so it can be injected, but while it tries to create bean B, it needs bean A. So using constructor based, it will throw <strong>BeanCurrentlyInCreationException</strong>.</p>
<p><strong>Setter Based</strong>: Dependencies are only injected when they are used, they are not injected when spring initialize the ApplicationContext. So this will not throw the exception.</p>
<hr>
<h2 id="218-How-to-inject-bean-when-there-are-two-beans-with-same-type"><a href="#218-How-to-inject-bean-when-there-are-two-beans-with-same-type" class="headerlink" title="218. How to inject bean when there are two beans with same type?"></a>218. How to inject bean when there are two beans with same type?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>Use <code>@Qualifier</code>. Like if you have an interface and 2 children, you can use <code>@Qualifier</code> to decide which one to inject</p>
<hr>
<h2 id="365-How-does-spring-inject-singleton-bean-into-prototype-bean"><a href="#365-How-does-spring-inject-singleton-bean-into-prototype-bean" class="headerlink" title="365. How does spring inject singleton bean into prototype bean?"></a>365. How does spring inject singleton bean into prototype bean?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<h3 id="Essential-point"><a href="#Essential-point" class="headerlink" title="Essential point"></a>Essential point</h3><p>Injecting a <em>singleton‑scoped</em> bean into a <em>prototype‑scoped</em> bean is completely straightforward. Spring just treats it like any other dependency: when it creates each new prototype instance it fetches (or lazily creates) the singleton once and wires that same reference in. No extra factory, proxy, or <code>ObjectProvider</code> is needed.</p>
<hr>
<h3 id="Why-it-“just-works”"><a href="#Why-it-“just-works”" class="headerlink" title="Why it “just works”"></a>Why it “just works”</h3><table>
<thead>
<tr>
<th>Step</th>
<th>What Spring does</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>The container already holds (or can eagerly create) exactly one instance of <code>SingletonBean</code>.</td>
</tr>
<tr>
<td>2</td>
<td>Each time you request the prototype bean, Spring constructs a fresh <code>PrototypeBean</code>.</td>
</tr>
<tr>
<td>3</td>
<td>During construction, the container resolves constructor/field parameters. Seeing a dependency on <code>SingletonBean</code>, it re‑uses the existing singleton instance.</td>
</tr>
<tr>
<td>4</td>
<td>The new prototype instance now holds a reference to the singleton. Every prototype object points to the same singleton, which is normally what you want.</td>
</tr>
</tbody>
</table>
<p>Since there is no lifecycle mismatch—the singleton outlives every prototype—no special wiring tricks are required.</p>
<hr>
<h3 id="Minimal-working-example"><a href="#Minimal-working-example" class="headerlink" title="Minimal working example"></a>Minimal working example</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"singleton"</span>)                <span class="comment">// default—annotation here just for clarity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">id</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"I am the one and only"</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrototypeWorker</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SingletonService singletonService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span>                       <span class="comment">// constructor injection preferred</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PrototypeWorker</span><span class="params">(SingletonService singletonService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.singletonService = singletonService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(singletonService.id());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Each call to <code>context.getBean(PrototypeWorker.class)</code> returns a fresh <code>PrototypeWorker</code>, but the <code>SingletonService</code> inside is always <strong>the same</strong> object.</p>
<hr>
<h3 id="Common-pitfall-to-avoid"><a href="#Common-pitfall-to-avoid" class="headerlink" title="Common pitfall to avoid"></a>Common pitfall to avoid</h3><p>Confusion usually arises in the <em>opposite</em> direction—injecting a prototype into a singleton—because that really <strong>does</strong> need an <code>ObjectFactory</code>, <code>Provider</code>, or scoped proxy. For your case (singleton ➜ prototype) stick to normal injection; anything heavier is over‑engineering.</p>
<hr>
<h3 id="Practical-recommendation"><a href="#Practical-recommendation" class="headerlink" title="Practical recommendation"></a>Practical recommendation</h3><ol>
<li><strong>Use constructor injection</strong> (as shown) for immutability and testability.</li>
<li><strong>Leave the singleton scope implicit</strong> unless you need lazy initialization; avoid unnecessary annotations.</li>
<li><strong>Document the scope</strong> of the prototype bean so future maintainers understand why they see many instances pointing to one shared dependency.</li>
</ol>
<p>Spring already handles the lifecycle alignment for you, so keep the wiring simple and focus on the business logic.</p>
<hr>
<h2 id="449-What-to-lazy-loading-a-spring-bean"><a href="#449-What-to-lazy-loading-a-spring-bean" class="headerlink" title="449. What to lazy loading a spring bean"></a>449. What to lazy loading a spring bean</h2><p>Lazy - loading a Spring bean means that the bean is instantiated only when it’s first needed, rather than during the application context startup.<br><strong>How to achieve it</strong>:</p>
<ol>
<li><strong>XML configuration</strong>:<ul>
<li>In traditional XML - based Spring configuration, you can use the <code>lazy - init</code> attribute. For example:<ul>
<li><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">lazy</span> <span class="attr">-</span> <span class="attr">init</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p><strong>Java - based configuration</strong>:</p>
<ul>
<li>In Java - based configuration classes (using <code>@Configuration</code>), you can use the <code>@Lazy</code> annotation.</li>
<li><p>Suppose you have a configuration class like this:</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Lazy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Lazy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyBeanClass <span class="title">myBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyBeanClass();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>The <code>MyBeanClass</code> bean (represented by the <code>myBean</code> method) will be lazily loaded.</p>
</li>
</ul>
</li>
</ol>
<p>The main advantage of lazy - loading is that it can speed up the application startup time, especially when you have a lot of beans and not all of them are needed immediately. However, the first access to a lazy - loaded bean may take a bit longer because the bean needs to be instantiated and initialized at that time.,</p>
<hr>
<h2 id="319-How-to-configure-multiple-database-using-JPA"><a href="#319-How-to-configure-multiple-database-using-JPA" class="headerlink" title="319. How to configure multiple database using JPA"></a>319. How to configure multiple database using JPA</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>Each database is connected by its own datasource(driver, url, username, password). We need to list them in application.properties and use them to create different dataSource beans, so JPA can use these beans.</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">spring.datasource</span></span><br><span class="line"><span class="string">spring.second-datasource</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="SpringRest"><a href="#SpringRest" class="headerlink" title="SpringRest"></a>SpringRest</h1><h2 id="178-Http-status-code-you-ever-met"><a href="#178-Http-status-code-you-ever-met" class="headerlink" title="178. Http status code you ever met"></a>178. Http status code you ever met</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<ul>
<li>2XX: success<ul>
<li>200: Success</li>
<li>201: Resource created successfully</li>
<li>202: Accepted: the request is accepted, but not processed yet.</li>
<li>204: No Content: request is success, nothing to return</li>
</ul>
</li>
<li>3XX: the requested resources have been moved, client needs to do a redirect.<ul>
<li>301: resource is permanently moved.</li>
<li>302: resource is not found - temporary moved to another location</li>
<li>308: permanently redirected to a new location</li>
</ul>
</li>
<li>4XX: client side error<ul>
<li>400: Bad Request</li>
<li>401: Unauthorized</li>
<li>403: Forbidden</li>
<li>404: Not found</li>
<li>405: Method not Allowed</li>
</ul>
</li>
<li>5XX: server side error<ul>
<li>500: Internal server error</li>
<li>502: Bad Gateway</li>
<li>503: Service Unavailable</li>
<li>504: Gateway timeout</li>
</ul>
</li>
</ul>
<hr>
<h2 id="187-Explain-MVC-and-the-order-of-each-components"><a href="#187-Explain-MVC-and-the-order-of-each-components" class="headerlink" title="187. Explain MVC and the order of each components"></a>187. Explain MVC and the order of each components</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Request –&gt; security –&gt; controller –&gt; service –&gt; repository –&gt; response</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Security</strong>: handles request authentication and authorization</li>
<li><strong>controller</strong>: handles request, contains the mapping, endpoint, methods, return type etc.</li>
<li><strong>service</strong>: for business logic</li>
<li><strong>repository</strong>: crud operation with database tables</li>
</ul>
<hr>
<h2 id="197-Different-types-of-request-mapping-rest-api-http-methods"><a href="#197-Different-types-of-request-mapping-rest-api-http-methods" class="headerlink" title="197. Different types of request mapping/rest api/http methods"></a>197. Different types of request mapping/rest api/http methods</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>CRUD METHODS: <code>C - POST</code>, <code>R - GET</code>, <code>U - PUT</code>, <code>D - DELETE</code></p>
<p><code>PUT</code> vs <code>POST</code>:</p>
<ol>
<li><code>PUT</code> is to update, it is idempotent (means, if you do PUT 2 times with same data, you get the same results)</li>
<li><code>POST</code> is to create new object, if you do POST 2 times, you create 2 objects, so it is not idempotent.</li>
</ol>
<p>Can you write create object or update object in GET request?</p>
<p>YES. the methods are contracts in REST api, it is just to limit how you call the rest api, the detailed logic has to be implemented by yourself, so you can write any logic you want, but it is not good idea to write post or put logic inside get method.</p>
<hr>
<h2 id="226-How-to-handle-controller-exceptions-How-spring-handles-exception"><a href="#226-How-to-handle-controller-exceptions-How-spring-handles-exception" class="headerlink" title="226. How to handle controller exceptions? How spring handles exception?"></a>226. How to handle controller exceptions? How spring handles exception?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p><code>@ExceptionHandler</code> can handle exceptions at controller level. <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> together can handle exceptions in all exceptions.</p>
<hr>
<h2 id="228-create-a-Transactional-service"><a href="#228-create-a-Transactional-service" class="headerlink" title="228. create a Transactional service"></a>228. create a Transactional service</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span>(rollbackFor = Exception.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processOrder</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        userRepo.save(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!user.isValidUser()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Invalid user"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="229-How-do-you-create-a-controller"><a href="#229-How-do-you-create-a-controller" class="headerlink" title="229. How do you create a controller?"></a>229. How do you create a controller?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HelloService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello/&#123;employee_name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">greetings</span><span class="params">(@PathVariable(<span class="string">"employee_name"</span>)</span> String name) </span>&#123;  <span class="comment">// TODO pathVariable要指定名字吗?</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"How are you, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// In the second example, strname is the path variable in the URL, but the method parameter is named username. Without "strname" in @PathVariable, Spring wouldn’t know how to map it.</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/greeting/&#123;employee_name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">greetingsEmployee</span><span class="params">(@PathVariable String employee_name)</span> </span>&#123;  <span class="comment">// TODO pathVariable要指定名字吗?</span></span><br><span class="line"><span class="comment">//        return "How are you, " + employee_name;</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">"How are you, "</span> + employee_name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/testRequestParam"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">testRequestParam</span><span class="params">(@RequestParam(<span class="string">"num"</span>)</span> <span class="keyword">int</span> number) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(String.valueOf(number));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/create"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">testPostBody</span><span class="params">(@RequestBody UserInfo userInfo, @RequestParam(value = <span class="string">"userRole"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"guest"</span>)</span> String userRole) </span>&#123;</span><br><span class="line"><span class="comment">//        @PageableDefault(size = 10) Pageable pageable) &#123;</span></span><br><span class="line"><span class="comment">//        return ResponseEntity.ok(userInfo.getUserName() + ": " + userRole + ": pageable = " + pageable);</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userInfo.getUserName() + <span class="string">": "</span> + userRole );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="232-What-is-difference-between-path-variable-and-query-param"><a href="#232-What-is-difference-between-path-variable-and-query-param" class="headerlink" title="232. What is difference between path variable and query param?"></a>232. What is difference between path variable and query param?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<ul>
<li>PathVariable is a <strong>MUST-HAVE</strong> parameter in URL.</li>
<li>Query Param is more like for optional parameters.</li>
</ul>
<hr>
<h2 id="236-What-will-happen-after-clicking-the-URL"><a href="#236-What-will-happen-after-clicking-the-URL" class="headerlink" title="236. What will happen after clicking the URL?"></a>236. What will happen after clicking the URL?</h2><ul>
<li>“frequency”: 4,</li>
</ul>
<p>How is application deployed?</p>
<p>For example, when you deploy amazon application to amazon.com, the application is deployed on a server with a static URL, that static URL is mapped to the domain name <code>amazon.com</code>, the mapping is managed by DNS(Domain Name System), so when someone click domain amazon.com, the DNS will find mapping and redirect to the original static URL.</p>
<p>What happens after clicking a URL?</p>
<ol>
<li>browser will parse the URL, find protocol (http or https), domain name, path, query parameter etc.</li>
<li>browser will call to check DNS to find the IP address for the application for the URL domain.</li>
<li>browser will attempt to visit the original URL and build the connection</li>
<li>The request will goes through security layer, and then to controller, service, repository and then to database</li>
<li>the data comes back as a response will go back to the browser</li>
<li>the browser will render the view</li>
</ol>
<hr>
<h2 id="201-How-does-JWT-work"><a href="#201-How-does-JWT-work" class="headerlink" title="201. How does JWT work?"></a>201. How does JWT work?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>JWT is to a tool that you don’t need to keep login with your username and password.</p>
<p>JWT token has 3 parts, the header, payload body and signature. The header contains the type of the token and the algorithms such as SHA256. The payload body contains the user data like username and userrole etc. The signature is to a string used to verify the payload data.</p>
<p>Flow:</p>
<ol>
<li>User login with username and password, the backend will validate and create a JWT token.</li>
<li>The token is sent back to frontend and stored in the Cookie.</li>
<li>Subsequent requests come with the cookie and the JWT token is passed in the request header.</li>
<li>The token will be validated to check if user is authenticated.</li>
<li>The token expiration time can be extended.</li>
</ol>
<p>You dont have to store the token in database, but if you want to persist it or set the expiration time, you can store it in the database.</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_backend_q_top100/image.png" alt="alt text"></p>
<hr>
<h2 id="211-Have-you-used-security-how-do-you-protect-your-rest-api-how-do-you-protect-your-application"><a href="#211-Have-you-used-security-how-do-you-protect-your-rest-api-how-do-you-protect-your-application" class="headerlink" title="211. Have you used security? how do you protect your rest api? how do you protect your application?"></a>211. Have you used security? how do you protect your rest api? how do you protect your application?</h2><ul>
<li>“frequency”: 5,</li>
</ul>
<p>What: We use spring security.</p>
<p>How: We override the spring framework <strong>WebSecurityConfigureAdaptor</strong> and its many <strong>configure</strong> method. We can use JdbcAuthentication, InMemoryAuthentication etc and Store the user credentials in the <strong>UserDetails</strong> object. We can also use <strong>BCrypt</strong> to encode the password and JWT token to do validations. We can use use <code>antMatcher</code> to let certain URLs only be accessed by certain User Roles.</p>
<p>Ways for authentication and Authorization:</p>
<ul>
<li>UserNamePassword authentication: When user fill username password in frontend, we can encode their password and validate with database or check if credentials match in UserDetails object.</li>
<li>JWT token, if the user is validated, we can use JWT token to validate the subsequent requests so user won’t need to to enter credentials anymore for a validate token period. The JWT token is stored in cookie and will be passed along every request. Each token can have an expiration time and can be extended. The token does not have to be saved to database.</li>
<li>Oauth2: we can also use Oauth2 to do authorization, it is 3rd part authorization, just like <code>login with google</code>, :<code>login with facebook</code> etc. You first request 3rd party to get authentication token and then use that authentication token to get authorization access.</li>
<li>Asymmetric Key pair, also called public key and private key. Many online portal uses it, just like AWS SDK.</li>
<li>Remember-Me feature, it is just to let user choose to let application remember the credentials and store the settings in the user cookie</li>
<li>Authorization: can use AntMatcher to do authorization for certain roles.</li>
</ul>

      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
            
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
            
              <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/ssr_server/" rel="next" title="SSR server">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    SSR server
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/na_backend_q_extra/" rel="prev" title="Java backend optional Q extra">
                <p class="post-nav-pre-next-title">
                    Java backend optional Q extra
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">🚙 🚗 💨 💨 If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">296</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- 网易云音乐 -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- 网易云音乐 -->

        </div>

        
        

        
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Misc"><span class="nav-text">Misc</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#353-When-you-API-request-or-Frontend-page-loading-slowly-how-do-you-handle-it"><span class="nav-text">353. When you API request or Frontend page loading slowly, how do you handle it?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#298-Key-Difference-Soap-vs-Rest"><span class="nav-text">298. Key Difference: Soap vs Rest</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#354-How-do-you-implement-security-for-your-application-or-microservices"><span class="nav-text">354. How do you implement security for your application or microservices</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#451-What-is-micro-frontend-micro-UI-and-how-micro-frontend-communicate-with-each-other"><span class="nav-text">451. What is micro frontend/ micro UI and how micro frontend communicate with each other</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30-Can-you-talk-about-CI-CD"><span class="nav-text">30. Can you talk about CI/CD?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#235-How-to-use-docker-in-the-Spring-Boot"><span class="nav-text">235. How to use docker in the Spring Boot?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#347-ElasticSearch-why-do-you-use-it"><span class="nav-text">347. ElasticSearch why do you use it</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#41-Git-command-you-used-in-the-project"><span class="nav-text">41. Git command you used in the project</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#370-difference-git-merge-and-rebase"><span class="nav-text">370. difference git merge and rebase</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#375-Difference-between-Iterator-and-Enumeration"><span class="nav-text">375. Difference between Iterator and Enumeration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#209-How-do-you-use-cache-in-your-whole-project"><span class="nav-text">209. How do you use cache in your whole project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#40-If-you-have-error-but-it-is-not-showing-in-log-how-do-you-debug-and-find-it"><span class="nav-text">40. If you have error, but it is not showing in log, how do you debug and find it.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#240-What-kind-of-test-experience-do-you-have"><span class="nav-text">240. What kind of test experience do you have?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#245-Cucumber-and-its-annotations-How-cucumber-works-give-an-example"><span class="nav-text">245. Cucumber and its annotations / How cucumber works, give an example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java"><span class="nav-text">Java</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#43-Abstract-class-vs-Interface-When-to-use-abstract-class-and-when-to-use-interface"><span class="nav-text">43. Abstract class vs. Interface. When to use abstract class and when to use interface?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#44-New-feature-of-Java-8-Give-an-example-of-how-you-use-them-in-your-project"><span class="nav-text">44. New feature of Java 8. Give an example of how you use them in your project</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lambda-Expressions"><span class="nav-text">Lambda Expressions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-References"><span class="nav-text">Method References</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional-Class"><span class="nav-text">Optional Class</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#45-Stream-API"><span class="nav-text">45. Stream API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lazy-evaluation"><span class="nav-text">lazy evaluation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#真题"><span class="nav-text">真题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#中间操作"><span class="nav-text">中间操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#终端操作"><span class="nav-text">终端操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码解释"><span class="nav-text">代码解释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#只有List才能有stream吗"><span class="nav-text">只有List才能有stream吗</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-实现-Collection-接口的集合类"><span class="nav-text">1. 实现 Collection 接口的集合类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-数组"><span class="nav-text">2. 数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-其他"><span class="nav-text">3. 其他</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#46-Types-of-Exceptions-and-how-do-you-deal-with-exceptions-in-your-project"><span class="nav-text">46. Types of Exceptions and how do you deal with exceptions in your project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#47-Generics-and-how-do-you-use-generics-in-your-project"><span class="nav-text">47. Generics and how do you use generics in your project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#48-Java-OOP-4-principles-and-explain-each-of-them"><span class="nav-text">48. Java OOP 4 principles, and explain each of them</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#49-If-java-8-allows-default-method-in-interface-so-what-is-the-real-difference-between-interface-and-abstract-class"><span class="nav-text">49. If java 8 allows default method in interface, so what is the real difference between interface and abstract class?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#52-Serialization-What-is-Serializable-and-SerialVersionUID"><span class="nav-text">52. Serialization, What is Serializable and SerialVersionUID?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-serialVersionUID"><span class="nav-text">What is serialVersionUID?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#When-you-don’t-define-serialVersionUID"><span class="nav-text">When you don’t define serialVersionUID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#When-you-remove-serialVersionUID"><span class="nav-text">When you remove serialVersionUID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practices"><span class="nav-text">Best Practices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Serialization-and-Deserialization-Example"><span class="nav-text">Serialization and Deserialization Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#53-HashMap-how-does-it-work-internally-what-is-hash-collision"><span class="nav-text">53. HashMap: how does it work internally, what is hash collision</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#59-What-is-the-Functional-Interface-Java-8-built-in-functional-interface"><span class="nav-text">59. What is the Functional Interface? Java 8 built in functional interface?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#67-Implement-a-singleton"><span class="nav-text">67. Implement a singleton</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#68-Do-you-know-about-the-Executor-Service-and-Future"><span class="nav-text">68. Do you know about the Executor Service and Future?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Executor-Service"><span class="nav-text">Executor Service</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Future"><span class="nav-text">Future</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#364-Difference-future-vs-completableFuture"><span class="nav-text">364. Difference future vs completableFuture</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Future-1"><span class="nav-text">Future</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CompletableFuture"><span class="nav-text">CompletableFuture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对比分析"><span class="nav-text">对比分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-基本功能"><span class="nav-text">1. 基本功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-异步任务的创建"><span class="nav-text">2. 异步任务的创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-错误处理"><span class="nav-text">3. 错误处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-组合多个异步任务"><span class="nav-text">4. 组合多个异步任务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对比表格"><span class="nav-text">对比表格</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#69-Explain-the-Factory-design-pattern"><span class="nav-text">69. Explain the Factory design pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#70-What-design-patterns-did-you-worked-on-before"><span class="nav-text">70. What design patterns did you worked on before?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Factory-Pattern"><span class="nav-text">Factory Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Obeserver-Pattern"><span class="nav-text">Obeserver Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Proxy-Pattern"><span class="nav-text">Proxy Pattern</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Structure-of-Proxy-Design-Pattern"><span class="nav-text">Structure of Proxy Design Pattern</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Use-Cases"><span class="nav-text">Use Cases</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Benefits"><span class="nav-text">Benefits</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-of-Usage"><span class="nav-text">Example of Usage</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#71-How-to-custom-an-Exception"><span class="nav-text">71. How to custom an Exception?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#78-What-is-Optional"><span class="nav-text">78. What is Optional?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-创建-Optional-对象"><span class="nav-text">1. 创建 Optional 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-判断-Optional-中是否包含值"><span class="nav-text">2. 判断 Optional 中是否包含值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-获取-Optional-中的值"><span class="nav-text">3. 获取 Optional 中的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-对-Optional-中的值进行操作"><span class="nav-text">4. 对 Optional 中的值进行操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#90-ArrayList-vs-LinkedList-which-one-to-choose"><span class="nav-text">90. ArrayList vs LinkedList, which one to choose?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#95-How-do-you-create-a-thread"><span class="nav-text">95. How do you create a thread?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#104-How-does-thread-communicate-interact-share-data-with-each-other"><span class="nav-text">104. How does thread communicate/interact/share data with each other</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shared-Variables"><span class="nav-text">Shared Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Synchronization"><span class="nav-text">Synchronization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wait-Notify-and-NotifyAll"><span class="nav-text">Wait, Notify, and NotifyAll</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thread-Confinement"><span class="nav-text">Thread Confinement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Concurrent-Data-Structures"><span class="nav-text">Using Concurrent Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Locks-and-Condition-Variables"><span class="nav-text">Using Locks and Condition Variables</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#106-What-are-the-meaning-of-thread-methods-join-wait-sleep-yield"><span class="nav-text">106. What are the meaning of thread methods: join, wait, sleep, yield</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#join-Method"><span class="nav-text">join() Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wait-Method"><span class="nav-text">wait() Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sleep-Method"><span class="nav-text">sleep() Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#yield-Method"><span class="nav-text">yield() Method</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#117-What-is-ConcurrentModificationException-and-how-to-handle-it"><span class="nav-text">117. What is ConcurrentModificationException and how to handle it?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#118-Relationship-between-equals-and-hashcode"><span class="nav-text">118. Relationship between equals() and hashcode()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Default-Implementation"><span class="nav-text">Default Implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overriding-equals"><span class="nav-text">Overriding equals()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashCode-and-equals"><span class="nav-text">hashCode() and equals()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rules-for-equals"><span class="nav-text">Rules for equals()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-equals"><span class="nav-text">Using equals()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#119-How-to-make-class-immutable"><span class="nav-text">119. How to make class immutable?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#121-What-is-the-deadlock-How-to-FIND-it-How-to-avoid-it"><span class="nav-text">121. What is the deadlock? How to FIND it? How to avoid it?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Finding-Deadlocks"><span class="nav-text">Finding Deadlocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Avoiding-Deadlocks"><span class="nav-text">Avoiding Deadlocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practices-1"><span class="nav-text">Best Practices</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#132-What-is-fail-fast-and-fail-safe"><span class="nav-text">132. What is fail-fast and fail-safe?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Fail-Fast"><span class="nav-text">Fail-Fast</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fail-Safe"><span class="nav-text">Fail-Safe</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#135-Map-vs-FlatMap"><span class="nav-text">135. Map vs. FlatMap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#163-what-is-SOLID-principle"><span class="nav-text">163. what is SOLID principle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#139-why-using-static-and-why-not"><span class="nav-text">139. why using static and why not?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#296-Difference-Synchronized-ThreadLocal-Volatile-AtomicInteger"><span class="nav-text">296. Difference: Synchronized, ThreadLocal, Volatile, AtomicInteger</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#volatile"><span class="nav-text">volatile</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#保证可见性"><span class="nav-text">保证可见性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#禁止指令重排序"><span class="nav-text">禁止指令重排序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#303-How-does-string-works-Why-is-String-immutable-in-Java"><span class="nav-text">303. How does string works? Why is String immutable in Java?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#330-New-features-in-java-11-and-17"><span class="nav-text">330. New features in java 11 and 17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#331-What’s-Garbage-collection-types-and-What’s-new-about-GC-in-java-8"><span class="nav-text">331. What’s Garbage collection types and What’s new about GC in java 8</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-Java-Generations-in-memory-Young-Old-etc"><span class="nav-text">What are Java Generations in memory? (Young, Old, etc.)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Metaspace-vs-Permanent-Generation"><span class="nav-text">Metaspace vs. Permanent Generation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZGC-vs-G1GC"><span class="nav-text">ZGC vs. G1GC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#343-Suppose-when-you-have-Employee-class-to-store-data-when-do-you-use-list-or-map"><span class="nav-text">343. Suppose when you have Employee class to store data, when do you use list or map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#344-Difference-Arraylist-vs-LinkedList-when-to-use-which"><span class="nav-text">344. Difference: Arraylist vs LinkedList, when to use which</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#363-Callable-vs-Runnable"><span class="nav-text">363. Callable vs Runnable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#371-JDK-vs-JRE-vs-JVM"><span class="nav-text">371. JDK vs JRE vs JVM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#373-How-do-you-implement-a-deadlock"><span class="nav-text">373. How do you implement a deadlock</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#374-Synchronized-method-vs-Synchronized-block"><span class="nav-text">374. Synchronized method vs Synchronized block</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#454-What-is-Java-17-new-feature-sealed-class？"><span class="nav-text">454. What is Java 17 new feature - sealed class？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#455-What-is-difference-between-synchronized-and-ReentrantLock"><span class="nav-text">455. What is difference between synchronized and ReentrantLock?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#448-What-is-proxy-design-pattern"><span class="nav-text">448. What is proxy design pattern</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Kafka"><span class="nav-text">Kafka</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#143-Did-you-use-Kafka-in-your-project-How-does-it-work"><span class="nav-text">143. Did you use Kafka in your project? How does it work?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#149-Talk-about-Kafka-and-Zookeeper"><span class="nav-text">149. Talk about Kafka and Zookeeper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#334-How-to-prevent-data-loss-in-kafka"><span class="nav-text">334. How to prevent data loss in kafka</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#335-How-to-keep-message-order-in-Kafka"><span class="nav-text">335. How to keep message order in Kafka</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#336-How-to-prevent-duplicate-message-in-kafka"><span class="nav-text">336. How to prevent duplicate message in kafka</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#345-Kafka-how-to-let-two-consumers-read-the-same-message"><span class="nav-text">345. Kafka how to let two consumers read the same message</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#359-How-to-implement-security-to-kafka-Kafka-Security"><span class="nav-text">359. How to implement security to kafka. Kafka Security</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#450-What-is-kafka-dead-letter-queue-and-how-do-you-handle-it"><span class="nav-text">450. What is kafka dead letter queue and how do you handle it?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MicroService"><span class="nav-text">MicroService</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#152-How-to-use-the-Zuul-Gateway-API-How-does-the-Zuul-Gateway-API-work"><span class="nav-text">152. How to use the Zuul Gateway API? / How does the Zuul Gateway API work?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#153-How-to-manage-the-entire-transaction-across-different-microservices-How-to-rollback"><span class="nav-text">153. How to manage the entire transaction across different microservices? How to rollback?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#191-How-to-communicate-between-microservices"><span class="nav-text">191. How to communicate between microservices</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#157-Suppose-you-have-two-Eureka-servers-how-does-each-application-know-which-Eureka-server-it-is-registered-to"><span class="nav-text">157. Suppose you have two Eureka servers, how does each application know which Eureka server it is registered to?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#158-What-is-the-circuit-breaker"><span class="nav-text">158. What is the circuit breaker?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#159-How-does-microservices-communicate-with-each-other"><span class="nav-text">159. How does microservices communicate with each other?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Database"><span class="nav-text">Database</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#237-Ways-to-connect-to-database"><span class="nav-text">237. Ways to connect to database</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#352-How-do-you-decide-which-database-to-choose-SQL-or-NoSQL"><span class="nav-text">352. How do you decide which database to choose, SQL or NoSQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#290-Explain-CAP-theorem-and-which-database-use-them"><span class="nav-text">290. Explain CAP theorem and which database use them</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#376-What-is-sharding-in-MongoDB"><span class="nav-text">376. What is sharding in MongoDB?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#377-How-replication-works-in-MongoDB"><span class="nav-text">377. How replication works in MongoDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-Different-type-of-Joins"><span class="nav-text">31. Different type of Joins</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-Write-a-query-find-the-most-popular-product-of-one-month"><span class="nav-text">33. Write a query: find the most popular product of one month</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-Query-the-average-salary"><span class="nav-text">34. Query the average salary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-Is-the-primary-key-unique-Difference-between-the-primary-key-and-unique-key"><span class="nav-text">35. Is the primary key unique? Difference between the primary key and unique key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-Explain-the-ACID-concepts"><span class="nav-text">38. Explain the ACID concepts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-What-kind-of-database-did-you-use-and-how-do-you-communicate-with-the-DB"><span class="nav-text">39. What kind of database did you use and how do you communicate with the DB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#355-Find-the-2nd-largest-salary-in-employee-table"><span class="nav-text">355. Find the 2nd largest salary in employee table</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#356-Find-employee-whose-salary-is-higher-than-its-own-manager-only-given-employee-table-which-contains-employee-id-and-its-manager-id"><span class="nav-text">356. Find employee whose salary is higher than its own manager (only given employee table which contains employee id and its manager id)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#316-SQL-how-to-delete-duplicate-rows-only-keep-unique-rows"><span class="nav-text">316. SQL how to delete duplicate rows, only keep unique rows</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot"><span class="nav-text">SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-How-do-you-config-for-multiple-environments"><span class="nav-text">12. How do you config for multiple environments?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#196-Why-do-you-use-Spring-Boot-Benefits-of-Spring-Boot"><span class="nav-text">196. Why do you use Spring Boot? / Benefits of Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Actuator细节"><span class="nav-text">Actuator细节</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#how-to-secure-Actuator-endpoints-in-a-production-environment"><span class="nav-text">how to secure Actuator endpoints in a production environment</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HealthIndicator-是什么？"><span class="nav-text">HealthIndicator 是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MeterRegistry-是什么？"><span class="nav-text">MeterRegistry 是什么？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#220-How-to-start-a-Spring-Boot-project"><span class="nav-text">220. How to start a Spring Boot project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#228-What-does-SpringBootApplication-mean"><span class="nav-text">228. What does @SpringBootApplication mean?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#234-For-Spring-Boot-how-do-I-use-another-server-such-as-WebLogic-instead-of-the-embedded-Tomcat-server"><span class="nav-text">234. For Spring Boot, how do I use another server such as WebLogic instead of the embedded Tomcat server?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#350-Difference-between-Spring-boot-and-Spring"><span class="nav-text">350. Difference between Spring boot and Spring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#447-How-to-do-cache-in-spring-boot-and-how-to-refresh-the-cache"><span class="nav-text">447. How to do cache in spring boot and how to refresh the cache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Enable-Caching"><span class="nav-text">Enable Caching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Define-a-Cacheable-Method"><span class="nav-text">Define a Cacheable Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Refresh-Options"><span class="nav-text">Cache Refresh Options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Backing-Cache-Store"><span class="nav-text">Backing Cache Store</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary"><span class="nav-text">Summary</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringCore"><span class="nav-text">SpringCore</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#174-Spring-Annotation-you-used-in-your-project"><span class="nav-text">174. Spring Annotation you used in your project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#176-What-is-IoC-Dependency-Injection"><span class="nav-text">176. What is IoC/Dependency Injection?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#177-What-is-AOP-and-how-do-you-implement-AOP-in-the-project"><span class="nav-text">177. What is AOP and how do you implement AOP in the project?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#180-Spring-bean-annotation-bean-life-cycle-and-bean-scope"><span class="nav-text">180. Spring bean annotation, bean life cycle and bean scope</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#184-Spring-Bean-scope-and-explain-the-request-scope"><span class="nav-text">184. Spring Bean scope and explain the request scope</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#186-Different-ways-of-DI"><span class="nav-text">186. Different ways of DI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#193-When-there-is-circular-dependency-use-which-type-of-Injection-Setter-based-Injection-vs-Constructor-based"><span class="nav-text">193. When there is circular dependency, use which type of Injection? / Setter based Injection vs. Constructor based</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#218-How-to-inject-bean-when-there-are-two-beans-with-same-type"><span class="nav-text">218. How to inject bean when there are two beans with same type?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#365-How-does-spring-inject-singleton-bean-into-prototype-bean"><span class="nav-text">365. How does spring inject singleton bean into prototype bean?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Essential-point"><span class="nav-text">Essential point</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-it-“just-works”"><span class="nav-text">Why it “just works”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Minimal-working-example"><span class="nav-text">Minimal working example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-pitfall-to-avoid"><span class="nav-text">Common pitfall to avoid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Practical-recommendation"><span class="nav-text">Practical recommendation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#449-What-to-lazy-loading-a-spring-bean"><span class="nav-text">449. What to lazy loading a spring bean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#319-How-to-configure-multiple-database-using-JPA"><span class="nav-text">319. How to configure multiple database using JPA</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringRest"><span class="nav-text">SpringRest</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#178-Http-status-code-you-ever-met"><span class="nav-text">178. Http status code you ever met</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#187-Explain-MVC-and-the-order-of-each-components"><span class="nav-text">187. Explain MVC and the order of each components</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#197-Different-types-of-request-mapping-rest-api-http-methods"><span class="nav-text">197. Different types of request mapping/rest api/http methods</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#226-How-to-handle-controller-exceptions-How-spring-handles-exception"><span class="nav-text">226. How to handle controller exceptions? How spring handles exception?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#228-create-a-Transactional-service"><span class="nav-text">228. create a Transactional service</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#229-How-do-you-create-a-controller"><span class="nav-text">229. How do you create a controller?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#232-What-is-difference-between-path-variable-and-query-param"><span class="nav-text">232. What is difference between path variable and query param?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#236-What-will-happen-after-clicking-the-URL"><span class="nav-text">236. What will happen after clicking the URL?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#201-How-does-JWT-work"><span class="nav-text">201. How does JWT work?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#211-Have-you-used-security-how-do-you-protect-your-rest-api-how-do-you-protect-your-application"><span class="nav-text">211. Have you used security? how do you protect your rest api? how do you protect your application?</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
