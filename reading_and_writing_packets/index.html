<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if(''){
            let localStoragePasswdKey = 'æ„å»ºæ¸¸æˆç½‘ç»œåè®®ä¸€ä¹‹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== '') {
                    if (password != null) {
                        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤è€Œä¸”å¯†ç é”™è¯¯çš„æ—¶å€™, å› ä¸ºå½“password == nullçš„æ—¶å€™è¯´æ˜ç”¨æˆ·ç‚¹äº†å–æ¶ˆ
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== '') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="GafferOnGames,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content="è‡ªæˆ‘æ€»ç»“è¿™ç¯‡æ–‡ç« åªæ˜¯ä»‹ç», ä¹‹åçš„æ–‡ç« æ‰æ˜¯æ­£é¢˜. æ­¤ç¯‡æ–‡ç« å¤§ä½“ä»‹ç»äº† :   æ–‡æœ¬æ ¼å¼ä¼ è¾“çš„ä½æ•ˆç‡é—®é¢˜ï¼Œ ä¸ºäº†å¯è¯»æ€§è€Œäº§ç”Ÿäº†å¤ªå¤šå†—ä½™æ— ç”¨æ•°æ® ä¸ºä»€ä¹ˆä¸ç”¨ç›®å‰å·²ç»æœ‰äº†çš„åº“æ¯”å¦‚Protocol Buffersï¼šå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆè·¨è¯­è¨€çš„æ”¯æŒã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰è¿™äº›åŠŸèƒ½å¹¶ç”¨æˆ‘ä»¬è‡ªå·±çš„ä¸å¸¦å±æ€§çš„äºŒè¿›åˆ¶æµè¿›è¡Œä»£æ›¿ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„æ§åˆ¶æ€§å’Œçµæ´»æ€§ è¦æ³¨æ„å¤§å°ç«¯çš„é—®é¢˜ å®ç°ä¸€ä¸ª">
<meta name="keywords" content="GafferOnGames">
<meta property="og:type" content="article">
<meta property="og:title" content="æ„å»ºæ¸¸æˆç½‘ç»œåè®®ä¸€ä¹‹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥">
<meta property="og:url" content="https://hulinhong.com/reading_and_writing_packets/index.html">
<meta property="og:site_name" content="ğŸš™">
<meta property="og:description" content="è‡ªæˆ‘æ€»ç»“è¿™ç¯‡æ–‡ç« åªæ˜¯ä»‹ç», ä¹‹åçš„æ–‡ç« æ‰æ˜¯æ­£é¢˜. æ­¤ç¯‡æ–‡ç« å¤§ä½“ä»‹ç»äº† :   æ–‡æœ¬æ ¼å¼ä¼ è¾“çš„ä½æ•ˆç‡é—®é¢˜ï¼Œ ä¸ºäº†å¯è¯»æ€§è€Œäº§ç”Ÿäº†å¤ªå¤šå†—ä½™æ— ç”¨æ•°æ® ä¸ºä»€ä¹ˆä¸ç”¨ç›®å‰å·²ç»æœ‰äº†çš„åº“æ¯”å¦‚Protocol Buffersï¼šå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆè·¨è¯­è¨€çš„æ”¯æŒã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰è¿™äº›åŠŸèƒ½å¹¶ç”¨æˆ‘ä»¬è‡ªå·±çš„ä¸å¸¦å±æ€§çš„äºŒè¿›åˆ¶æµè¿›è¡Œä»£æ›¿ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„æ§åˆ¶æ€§å’Œçµæ´»æ€§ è¦æ³¨æ„å¤§å°ç«¯çš„é—®é¢˜ å®ç°ä¸€ä¸ª">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2025-12-17T18:31:29.672Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ„å»ºæ¸¸æˆç½‘ç»œåè®®ä¸€ä¹‹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥">
<meta name="twitter:description" content="è‡ªæˆ‘æ€»ç»“è¿™ç¯‡æ–‡ç« åªæ˜¯ä»‹ç», ä¹‹åçš„æ–‡ç« æ‰æ˜¯æ­£é¢˜. æ­¤ç¯‡æ–‡ç« å¤§ä½“ä»‹ç»äº† :   æ–‡æœ¬æ ¼å¼ä¼ è¾“çš„ä½æ•ˆç‡é—®é¢˜ï¼Œ ä¸ºäº†å¯è¯»æ€§è€Œäº§ç”Ÿäº†å¤ªå¤šå†—ä½™æ— ç”¨æ•°æ® ä¸ºä»€ä¹ˆä¸ç”¨ç›®å‰å·²ç»æœ‰äº†çš„åº“æ¯”å¦‚Protocol Buffersï¼šå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆè·¨è¯­è¨€çš„æ”¯æŒã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰è¿™äº›åŠŸèƒ½å¹¶ç”¨æˆ‘ä»¬è‡ªå·±çš„ä¸å¸¦å±æ€§çš„äºŒè¿›åˆ¶æµè¿›è¡Œä»£æ›¿ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„æ§åˆ¶æ€§å’Œçµæ´»æ€§ è¦æ³¨æ„å¤§å°ç«¯çš„é—®é¢˜ å®ç°ä¸€ä¸ª">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>æ„å»ºæ¸¸æˆç½‘ç»œåè®®ä¸€ä¹‹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥ | ğŸš™</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸš™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ğŸ’¨ ğŸ’¨ ğŸ’¨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">Ã—</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/reading_and_writing_packets/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">æ„å»ºæ¸¸æˆç½‘ç»œåè®®ä¸€ä¹‹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-24T13:13:35+00:00">
                02-24-2017
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘/" rel="next" title="kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/serialization_strategies/" rel="prev" title="æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥">
              <p class="post-nav-pre-next-title">
                  æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <h1 id="è‡ªæˆ‘æ€»ç»“"><a href="#è‡ªæˆ‘æ€»ç»“" class="headerlink" title="è‡ªæˆ‘æ€»ç»“"></a>è‡ªæˆ‘æ€»ç»“</h1><p>è¿™ç¯‡æ–‡ç« åªæ˜¯ä»‹ç», ä¹‹åçš„æ–‡ç« æ‰æ˜¯æ­£é¢˜. æ­¤ç¯‡æ–‡ç« å¤§ä½“ä»‹ç»äº† : </p>
<ul>
<li>æ–‡æœ¬æ ¼å¼ä¼ è¾“çš„ä½æ•ˆç‡é—®é¢˜ï¼Œ ä¸ºäº†å¯è¯»æ€§è€Œäº§ç”Ÿäº†å¤ªå¤šå†—ä½™æ— ç”¨æ•°æ®</li>
<li>ä¸ºä»€ä¹ˆä¸ç”¨ç›®å‰å·²ç»æœ‰äº†çš„åº“æ¯”å¦‚Protocol Buffersï¼šå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆè·¨è¯­è¨€çš„æ”¯æŒã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰è¿™äº›åŠŸèƒ½å¹¶ç”¨æˆ‘ä»¬è‡ªå·±çš„ä¸å¸¦å±æ€§çš„äºŒè¿›åˆ¶æµè¿›è¡Œä»£æ›¿ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„æ§åˆ¶æ€§å’Œçµæ´»æ€§</li>
<li>è¦æ³¨æ„å¤§å°ç«¯çš„é—®é¢˜</li>
<li>å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨ï¼Œ å·¥ä½œåœ¨32ä½æˆ–è€…64ä½çš„çº§åˆ«ï¼Œ è€Œä¸æ˜¯æ˜¯å·¥ä½œåœ¨å­—èŠ‚è¿™ä¸ªçº§åˆ«ã€‚å› ä¸ºç°ä»£æœºå™¨å¯¹è¿™ä¸ªé•¿åº¦è¿›è¡Œäº†ä¸“é—¨çš„ä¼˜åŒ–è€Œä¸åº”è¯¥åƒ1985å¹´é‚£æ ·åœ¨å­—èŠ‚çš„çº§åˆ«å¯¹ç¼“å†²åŒºè¿›è¡Œå¤„ç†ã€‚</li>
<li>è¦æ³¨æ„é˜²æ­¢æ¶æ„æ•°æ®åŒ…çš„é—®é¢˜ ï¼š<ul>
<li>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­æ•´æ•°å€¼æ˜¯å¦è¶…å‡ºé¢„æœŸèŒƒå›´ï¼Œå¦‚æœè¶…å‡ºäº†å°±è¦ä¸­æ­¢ç½‘ç»œåŒ…çš„è¯»å–å’Œè§£æï¼Œå› ä¸ºä¼šæœ‰ä¸€äº›ä¸æ€€å¥½æ„çš„äººç»™æˆ‘ä»¬å‘é€æ¶æ„ç½‘ç»œåŒ…å¸Œæœ›æˆ‘ä»¬çš„ç¨‹åºå’Œå†…å­˜å´©æºƒæ‰ã€‚ç½‘ç»œåŒ…çš„è¯»å–å’Œè§£æçš„ä¸­æ­¢å¿…é¡»æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œè€Œä¸”ä¸èƒ½ä½¿ç”¨å¼‚å¸¸å¤„ç†ï¼Œå› ä¸ºå¼‚å¸¸å¤„ç†å¤ªæ…¢äº†ä¼šæ‹–ç´¯æˆ‘ä»¬çš„ç¨‹åºã€‚</li>
<li>å¦‚æœç‹¬ç«‹çš„è¯»å–å’Œå†™å…¥å‡½æ•°æ˜¯æ‰‹åŠ¨ç¼–è§£ç çš„ï¼Œé‚£ä¹ˆç»´æŠ¤å®ƒä»¬çœŸçš„æ˜¯ä¸€ä¸ªå™©æ¢¦ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä¸ºåŒ…ä¸€æ¬¡æ€§çš„ç¼–å†™å¥½åºåˆ—åŒ–ä»£ç å¹¶ä¸”æ²¡æœ‰ä»»ä½•è¿è¡Œæ—¶çš„æ€§èƒ½æ¶ˆè€—ï¼ˆä¸»è¦æ˜¯é¢å¤–çš„åˆ†æ”¯ã€è™šåŒ–ç­‰ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>æˆ‘ä»¬ä¸ºäº†ä¸æƒ³è‡ªå·±æ‰‹åŠ¨æ£€æŸ¥å„ç§å¯èƒ½ä¼šè¢«æ”»å‡»çš„åœ°æ–¹ï¼Œ éœ€è¦å®ç°æ£€æŸ¥è‡ªåŠ¨åŒ–ï¼Œ åœ¨ä¸‹ä¸€ç¯‡æ–‡ç«  <a href="/serialization_strategies/" title="æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥">æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥</a> é‡Œå°†ä¼šè¯´ã€‚<br><strong>. . .</strong><a id="more"></a></li>
</ul>
<h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><p><a href="https://gafferongames.com/post/reading_and_writing_packets/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p>åŸæ–‡æ ‡é¢˜ : <strong>Reading and Writing Packets</strong> (<em>Best practices for reading and writing packets</em>)</p>
<hr>
<p></p><h2 id="introduction">Introduction</h2><p></p>
<p>Hi, Iâ€™m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <strong><a href="https://gafferongames.com/categories/building-a-game-network-protocol/" target="_blank" rel="noopener">Building a Game Network Protocol</a></strong>.</p><br><p>In this article we&rsquo;re going to explore how AAA multiplayer games like first person shooters read and write packets. We&rsquo;ll start with text based formats then move into binary hand-coded binary formats and bitpacking.</p><br><p>At the end of this article and the next, you should understand exactly how to implement your own packet read and write the same way the pros do it.</p><br><h2 id="background">Background</h2><br><p>Consider a web server. It listens for requests, does some work asynchronously and sends responses back to clients. Itâ€™s stateless and generally not real-time, although a fast response time is great. Web servers are most often IO bound.</p><br><p>Game server are different. They&rsquo;re a headless version of the game running in the cloud. As such they are stateful and CPU bound. The traffic patterns are different too. Instead of infrequent request/response from tens of thousands of clients, a game server has far fewer clients, but processes a continuous stream of input packets sent from each client 60 times per-second, and broadcasts out the state of the world to clients 10, 20 or even 60 times per-second.</p><br><p>And this state is <strong>huge</strong>. Thousands of objects with hundreds of properties each. Game network programmers spend a lot of their time optimizing exactly how this state is sent over the network with crazy bit-packing tricks, hand-coded binary formats and delta encoding.</p><br><p>What would happen if we just encoded this world state as XML?</p><br><pre>&lt;world_update world_time=â€0.0â€&gt;<br>  &lt;object id=â€1â€ class=â€playerâ€&gt;<br>    &lt;property name=â€positionâ€ value=â€(0,0,0)â€&lt;/property&gt;<br>    &lt;property name=â€orientationâ€ value=â€(1,0,0,0)â€&lt;/property&gt;<br>    &lt;property name=â€velocityâ€ value=â€(10,0,0)â€&lt;/property&gt;<br>    &lt;property name=â€healthâ€ value=â€100â€&gt;&lt;/property&gt;<br>    &lt;property name=â€weaponâ€ value=â€110â€&gt;&lt;/property&gt;<br>    â€¦ 100s more properties per-object â€¦<br> &lt;/object&gt;<br> &lt;object id=â€100â€ class=â€gruntâ€&gt;<br>   &lt;property name=â€positionâ€ value=â€(100,100,0)â€&lt;/property&gt;<br>   &lt;property name=â€healthâ€ value=â€10â€&lt;/property&gt;<br> &lt;/object&gt;<br> &lt;object id=â€110â€ class=â€weaponâ€&gt;<br>   &lt;property type=â€semi-automaticâ€&gt;&lt;/property&gt;<br>   &lt;property ammo_in_clip=â€8â€&gt;&lt;/property&gt;<br>   &lt;property round_in_chamber=â€trueâ€&gt;&lt;/property&gt;<br> &lt;/object&gt;<br> â€¦ 1000s more objects â€¦<br>&lt;/world_update&gt;<br></pre><br><p>Pretty verbose&hellip; it&rsquo;s hard to see how this would be practical for a large world.</p><br><p>JSON is a bit more compact:</p><br><pre>{<br>  â€œworld_timeâ€: 0.0,<br>  â€œobjectsâ€: {<br>    1: {<br>      â€œclassâ€: â€œplayerâ€,<br>      â€œpositionâ€: â€œ(0,0,0)â€,<br>      â€œorientationâ€: â€œ(1,0,0,0)â€,<br>      â€œvelocityâ€: â€œ(10,0,0)â€,<br>      â€œhealthâ€: 100,<br>      â€œweaponâ€: 110<br>    }<br>    100: {<br>      â€œclassâ€: â€œgruntâ€,<br>      â€œpositionâ€: â€œ(100,100,0)â€,<br>      â€œhealthâ€: 10<br>    }<br>    110: {<br>      â€œclassâ€: â€œweaponâ€,<br>      â€œtype: â€œsemi-automaticâ€<br>      â€œammo_in_clipâ€: 8,<br>      â€œround_in_chamberâ€: 1<br>    }<br>    // etcâ€¦<br>  }<br>}<br></pre><br><p>But it still suffers from the same problem: the description of the data is larger than the data itself. What if instead of fully describing the world state in each packet, we split it up into two parts?</p><br><ol><br><li><p>A schema that describes the set of object classes and properties per-class, <strong>sent only once</strong> when a client connects to the server.</p></li><br><li><p>Data sent rapidly from server to client, <strong>which is encoded relative to the schema</strong>.</p></li><br></ol><br><p>The schema could look something like this:</p><br><pre>{<br>  â€œclassesâ€: {<br>    0: â€œplayerâ€ {<br>      â€œpropertiesâ€: {<br>        0: {<br>          â€œnameâ€: â€œpositionâ€,<br>          â€œtypeâ€: â€œvec3fâ€<br>        }<br>        1: {<br>          â€œnameâ€: â€œorientationâ€,<br>          â€œtypeâ€: â€œquat4fâ€<br>        }<br>        2: {<br>          â€œnameâ€: â€œvelocityâ€,<br>          â€œtypeâ€: â€œvec3fâ€<br>        }<br>        3: {<br>          â€œnameâ€: â€œhealthâ€,<br>          â€œtypeâ€: â€œfloatâ€<br>        }<br>        4: {<br>          â€œnameâ€: â€œweaponâ€,<br>          â€œtypeâ€: â€œobjectâ€,<br>        }<br>      }<br>    }<br>    1: â€œgruntâ€: {<br>      â€œpropertiesâ€: {<br>        0: {<br>          â€œnameâ€: â€œpositionâ€,<br>          â€œtypeâ€: â€œvec3fâ€<br>        }<br>        1: {<br>          â€œnameâ€: â€œhealthâ€,<br>          â€œtypeâ€: â€œfloatâ€<br>        }<br>      }<br>    }<br>    2: â€œweaponâ€: {<br>      â€œpropertiesâ€: {<br>        0: {<br>          â€œnameâ€: â€œtypeâ€,<br>          â€œtypeâ€: â€œenumâ€,<br>          â€œenum_valuesâ€: [ â€œrevolverâ€, â€œsemi-automaticâ€ ]<br>        }<br>        1: {<br>          â€œnameâ€: â€œammo_in_clipâ€,<br>          â€œtypeâ€: â€œintegerâ€,<br>          â€œrangeâ€: â€œ0..9â€,<br>        }<br>        2: {<br>          â€œnameâ€: â€œround_in_chamberâ€,<br>          â€œtypeâ€: â€œintegerâ€,<br>          â€œrangeâ€: â€œ0..1â€<br>        }<br>      }<br>    }<br>  }<br>}</pre><br><p>The schema is quite big, but that&rsquo;s beside the point. It&rsquo;s sent only once, and now the client knows the set of classes in the game world and the number, name, type and range of properties per-class.</p><br><p>With this knowledge we can make the rapidly sent portion of the world state much more compact:</p><br><pre>{<br>  â€œworld_timeâ€: 0.0,<br>  â€œobjectsâ€: {<br>    1: [0,â€(0,0,0)â€,â€(1,0,0,0)â€,â€(10,0,0)â€,100,110],<br>    100: [1,â€(100,100,0)â€,10],<br>    110: [2,1,8,1]<br>  }<br>}<br></pre><br><p>And we can compress it even further by switching to a custom text format:</p><br><pre>0.0<br>1:0,0,0,0,1,0,0,0,10,0,0,100,110<br>100:1,100,100,0,10<br>110:2,1,8,1<br></pre><br><p>As you can see, itâ€™s much more about what you <strong>donâ€™t send</strong> than what you do.</p><br><h2 id="the-inefficiencies-of-text">The Inefficiencies of Text</h2><br><p>Weâ€™ve made good progress on our text format so far, moving from a highly attributed stream that fully describes the data (more description than actual data) to an unattributed text format that&rsquo;s an order of magnitude more efficient.</p><br><p>But there are inherent inefficiencies when using text format for packets:</p><br><ul><br><li><p>We are most often sending data in the range <strong>A-Z</strong>, <strong>a-z</strong> and <strong>0-1</strong>, plus a few other symbols. This wastes the remainder of the <strong>0-255</strong> range for each character sent. From an information theory standpoint, this is an inefficient encoding.</p></li><br><li><p>The text representation of integer values are in the general case much less efficient than the binary format. For example, in text format the worst case unsigned 32 bit integer <strong>4294967295</strong> takes 10 bytes, but in binary format it takes just four.</p></li><br><li><p>In text, even the smallest numbers in <strong>0-9</strong> range require at least one byte, but in binary, smaller values like <strong>0, 11, 31, 100</strong> can be sent with fewer than 8 bits if we know their range ahead of time.</p></li><br><li><p>If an integer value is negative, you have to spend a whole byte on <strong>&rsquo;-&rsquo;</strong> to indicate that.</p></li><br><li><p>Floating point numbers waste one byte specifying the decimal point.</p></li><br><li><p>The text representation of numerical values are variable length: <strong>â€œ5â€</strong>, <strong>â€œ12345â€</strong>, <strong>â€œ3.141593â€. </strong>Because of this we need to spend one byte on a separator after each value so we know when it ends.</p></li><br><li><p>Newlines <strong>&lsquo;\n&rsquo;</strong> or some other separator are required to distinguish between the set of variables belonging to one object and the next. When you have thousands of objects, this really adds up.</p></li><br></ul><br><p>In short, if we wish to optimize any further, it&rsquo;s necessary to switch to a binary format.</p><br><h2 id="switching-to-a-binary-format">Switching to a Binary Format</h2><br><p>In the web world there are some really great libraries that read and write binary formats like <a href="http://bjson.org" target="_blank" rel="noopener">BJSON</a>, <a href="https://developers.google.com/protocol-buffers/" target="_blank" rel="noopener">Protocol Buffers</a>, <a href="https://google.github.io/flatbuffers/" target="_blank" rel="noopener">Flatbuffers</a>, <a href="https://thrift.apache.org" target="_blank" rel="noopener">Thrift</a>, <a href="https://capnproto.org" target="_blank" rel="noopener">Capâ€™n Proto</a> and <a href="http://msgpack.org/index.html" target="_blank" rel="noopener">MsgPack</a>.</p><br><p>In manay cases, these libraries are great fit for building your game network protocol. But in the fast-paced world of first person shooters where efficiency is paramount, a hand-tuned binary protocol is still the gold standard.</p><br><p>There are a few reasons for this. Web binary formats are designed for situations where versioning of data is <em>extremely</em> important. If you upgrade your backend, older clients should be able to keep talking to it with the old format. Data formats are also expected to be language agnostic. A backend written in Golang should be able to talk with a web client written in JavaScript and other server-side components written in Python or Java.</p><br><p>Game servers are completely different beasts. The client and server are almost always written in the same language (C++), and versioning is much simpler. If a client with an incompatible version tries to connect, that connection is simply rejected. There&rsquo;s simply no need for compatibility across different versions.</p><br><p>So if you donâ€™t need versioning and you donâ€™t need cross-language support what are the benefits for these libraries? Convenience. Ease of use. Not needing to worry about creating, testing and debugging your own binary format.</p><br><p>But this convenience is offset by the fact that these libraries are less efficient and less flexible than a binary protocol we can roll ourselves. So while I encourage you to evaluate these libraries and see if they suit your needs, for the rest of this article, we&rsquo;re going to move forward with a custom binary protocol.</p><br><h2 id="getting-started-with-a-binary-format">Getting Started with a Binary Format</h2><br><p>One option for creating a custom binary protocol is to use the in-memory format of your data structures in C/C++ as the over-the-wire format. People often start here, so although I donâ€™t recommend this approach, lets explore it for a while before we poke holes in it.</p><br><p>First define the set of packets, typically as a union of structs:</p><br><pre>struct Packet<br>{<br>    enum PacketTypeEnum { PACKET_A, PACKET_B, PACKET_C };<br><br>    uint8_t packetType;<br><br>    union<br>    {<br>        struct PacketA<br>        {<br>            int x,y,z;<br>        } a;<br><br>        struct PacketB<br>        {<br>            int numElements;<br>            int elements[MaxElements];<br>        } b;<br><br>        struct PacketC<br>        {<br>            bool x;<br>            short y;<br>            int z;<br>        } c;<br>    };<br>};<br></pre><br><p>When writing the packet, set the first byte in the packet to the packet type number (0, 1 or 2). Then depending on the packet type, memcpy the appropriate union struct into the packet. On read do the reverse: read in the first byte, then according to the packet type, copy the packet data to the corresponding struct.</p><br><p>It couldnâ€™t get simpler. So why do most games avoid this approach?</p><br><p>The first reason is that different compilers and platforms provide different packing of structs. If you go this route youâ€™ll spend a lot of time with <strong>#pragma pack</strong> trying to make sure that different compilers and different platforms lay out the structures in memory exactly the same way.</p><br><p>The next one is endianness. Most computers are mostly <a href="https://en.wikipedia.org/wiki/Endianness#Little-endian" target="_blank" rel="noopener">little endian</a> these days but historically some architectures like PowerPC were <a href="https://en.wikipedia.org/wiki/Endianness#Big-endian" target="_blank" rel="noopener">big endian</a>. If you need to support communication between little endian and big endian machines, the memcpy the struct in and out of the packet approach simply wonâ€™t work. At minimum you need to write a function to swap bytes between host and network byte order on read and write for each variable in your struct.</p><br><p>There are other issues as well. If a struct contains pointers you canâ€™t just serialize that value over the network and expect a valid pointer on the other side. Also, if you have variable sized structures, such as an array of 32 elements, but most of the time itâ€™s empty or only has a few elements, it&rsquo;s wasteful to always send the array at worst case size. A better approach would support a variable length encoding that only sends the actual number of elements in the array.</p><br><p>But ultimately, what really drives a stake into the heart of this approach is <strong>security</strong>. Itâ€™s a <em>massive</em> security risk to take data coming in over the network and trust it, and that&rsquo;s exactly what you do if you just copy a block of memory sent over the network into your struct. Wheee! What if somebody constructs a malicious <strong>PacketB</strong> and sends it to you with <strong>numElements</strong> = 0xFFFFFFFF?</p><br><p>You should, no you <em>must</em>, at minimum do some sort of per-field checking that values are in range vs. blindly accepting what is sent to you. This is why the memcpy struct approach is rarely used in professional games.</p><br><h2 id="read-and-write-functions">Read and Write Functions</h2><br><p>The next level of sophistication is read and write functions per-packet.</p><br><p>Start with the following simple operations:</p><br><pre>void WriteInteger( Buffer &amp; buffer, uint32_t value );<br>void WriteShort( Buffer &amp; buffer, uint16_t value );<br>void WriteChar( Buffer &amp; buffer, uint8_t value );<br><br>uint32_t ReadInteger( Buffer &amp; buffer );<br>uint16_t ReadShort( Buffer &amp; buffer );<br>uint8_t ReadByte( Buffer &amp; buffer );<br></pre><br><p>These operate on a structure which keeps track of the current position:</p><br><pre>struct Buffer<br>{<br>    uint8_t <em> data;     // pointer to buffer data<br>    int size;           // size of buffer data (bytes)<br>    int index;          // index of next byte to be read/written<br>};<br></em></pre><br><p>The write integer function looks something like this:</p><br><pre>void WriteInteger( Buffer &amp; buffer, uint32_t value )<br>{<br>    assert( buffer.index + 4 &lt;= size );<br>#ifdef BIG_ENDIAN
    ((uint32_t<em>)(buffer.data+buffer.index)) = bswap( value );<br>#else // #ifdef BIG_ENDIAN
    </em>((uint32_t<em>)(buffer.data+buffer.index)) = value;<br>#endif // #ifdef BIG_ENDIAN<br>    buffer.index += 4;<br>}<br></em></pre><br><p>And the read integer function looks like this:</p><br><pre>uint32_t ReadInteger( Buffer &amp; buffer )<br>{<br>    assert( buffer.index + 4 &lt;= size );<br>    uint32_t value;<br>#ifdef BIG_ENDIAN<br>    value = bswap( ((uint32_t<em>)(buffer.data+buffer.index)) );<br>#else // #ifdef BIG_ENDIAN<br>    value = </em>((uint32_t<em>)(buffer.data+buffer.index));<br>#endif // #ifdef BIG_ENDIAN<br>    buffer.index += 4;<br>    return value;<br>}<br></em></pre><br><p>Now, instead of copying across packet data in and out of structs, we implement read and write functions for each packet type:</p><br><pre>struct PacketA<br>{<br>    int x,y,z;<br><br>    void Write( Buffer &amp; buffer )<br>    {<br>        WriteInteger( buffer, x );<br>        WriteInteger( buffer, y );<br>        WriteInteger( buffer, z );<br>    }<br><br>    void Read( Buffer &amp; buffer )<br>    {<br>        ReadInteger( buffer, x );<br>        ReadInteger( buffer, y );<br>        ReadInteger( buffer, z );<br>    }<br>};<br><br>struct PacketB<br>{<br>    int numElements;<br>    int elements[MaxElements];<br><br>    void Write( Buffer &amp; buffer )<br>    {<br>        WriteInteger( buffer, numElements );<br>        for ( int i = 0; i &lt; numElements; ++i )<br>            WriteInteger( buffer, elements[i] );<br>    }<br><br>    void Read( Buffer &amp; buffer )<br>    {<br>        ReadInteger( buffer, numElements );<br>        for ( int i = 0; i &lt; numElements; ++i )<br>            ReadInteger( buffer, elements[i] );<br>    }<br>};<br><br>struct PacketC<br>{<br>    bool x;<br>    short y;<br>    int z;<br><br>    void Write( Buffer &amp; buffer )<br>    {<br>        WriteByte( buffer, x );<br>        WriteShort( buffer, y );<br>        WriteInt( buffer, z );<br>    }<br><br>    void Read( Buffer &amp; buffer )<br>    {<br>        ReadByte( buffer, x );<br>        ReadShort( buffer, y );<br>        ReadInt( buffer, z );<br>    }<br>};<br></pre><br><p>When reading and writing packets, start the packet with a byte specifying the packet type via ReadByte/WriteByte, then according to the packet type, call the read/write on the corresponding packet struct in the union.</p><br><p>Now we have a system that allows machines with different endianness to communicate and supports variable length encoding of elements.</p><br><h2 id="bitpacking">Bitpacking</h2><br><p>What if we have a value in the range [0,1000] we really only need 10 bits to represent all possible values. Wouldn&rsquo;t it be nice if we could write just 10 bits, instead of rounding up to 16? What about boolean values? It would be nice to send these as one bit instead of 8!</p><br><p>One way to implement this is to manually organize your C++ structures into packed integers with bitfields and union tricks, such as grouping all bools together into one integer type via bitfield and serializing them as a group. But this is tedious and error prone and thereâ€™s no guarantee that different C++ compilers pack bitfields in memory exactly the same way.</p><br><p>A much more flexible way that trades a small amount of CPU on packet read and write for convenience is a <strong>bitpacker</strong>. This is code that reads and writes non-multiples of 8 bits to a buffer.</p><br><h2 id="writing-bits">Writing Bits</h2><br><p>Many people write bitpackers that work at the byte level. This means they flush bytes to memory as they are filled. This is simpler to code, but the ideal is to read and write words at a time, because modern machines are optimized to work this way instead of farting across a buffer at byte level like itâ€™s 1985.</p><br><p>If you want to write 32 bits at a time, you&rsquo;ll need a scratch word twice that size, eg. uint64_t. The reason is that you need the top half for overflow. For example, if you have just written a value 30 bits long into the scratch buffer, then write another value that is 10 bits long you need somewhere to store 30 + 10 = 40 bits.</p><br><pre>uint64_t scratch;<br>int scratch_bits;<br>int word_index;<br>uint32_t  buffer;<br></pre><br><p>When we start writing with the bitpacker, all these variables are cleared to zero except <strong>buffer</strong> which points to the start of the packet we are writing to. Because we&rsquo;re accessing this packet data at a word level, not byte level, make sure packet buffers lengths are a multiple of 4 bytes.</p><br><p>Letâ€™s say we want to write 3 bits followed by 10 bits, then 24. Our goal is to pack this tightly in the scratch buffer and flush that out to memory, 32 bits at a time. Note that 3 + 10 + 24 = 37. We have to handle this case where the total number of bits donâ€™t evenly divide into 32. This is actually the <em>common case</em>.</p><br><p>At the first step, write the 3 bits to <strong>scratch</strong> like this:</p><br><pre>xxx</pre><br><p><strong>scratch_bits</strong> is now 3.</p><br><p>Next, write 10 bits:</p><br><pre>yyyyyyyyyyxxx</pre><br><p><strong>scratch_bits</strong> is now 13 (3+10).</p><br><p>Next write 24 bits:</p><br><pre>zzzzzzzzzzzzzzzzzzzzzzzzyyyyyyyyyyxxx</pre><br><p><strong>scratch_bits</strong> is now 37 (3+10+24). Weâ€™re straddling the 32 bit word boundary in our 64 bit <strong>scratch</strong> variable and have 5 bits in the upper 32 bits (overflow). Flush the lower 32 bits of <strong>scratch</strong> to memory, advance <strong>word_index</strong> by one, shift <strong>scratch</strong> right by 32 and subtract 32 from <strong>scratch_bits</strong>.</p><br><p><strong>scratch</strong> now looks like this:</p><br><pre>zzzzz</pre><br><p>We&rsquo;ve finished writing bits but we still have data in scratch that&rsquo;s not flushed to memory. For this data to be included in the packet we need to make sure to flush any remaining bits in <strong>scratch</strong> to memory at the end of writing.</p><br><p>When we flush a word to memory it is converted to little endian byte order. To see why this is important consider what happens if we flush bytes to memory in big endian order:</p><br><pre>DCBA000E</pre><br><p>Since we fill bits in the word from right to left, the last byte in the packet E is actually on the right. If we try to send this buffer in a packet of 5 bytes (the actual amount of data we have to send) the packet catches 0 for the last byte instead of E. Ouch!</p><br><p>But when we write to memory in little endian order, bytes are reversed back out in memory like this:</p><br><pre>ABCDE000</pre><br><p>And we can write 5 bytes to the network and catch E at the end. Et voilÃ !</p><br><h2 id="reading-bits">Reading Bits</h2><br><p>To read the bitpacked data, start with the buffer sent over the network:</p><br><pre>ABCDE</pre><br><p>The bit reader has the following state:</p><br><pre>uint64_t scratch;<br>int scratch_bits;<br>int total_bits;<br>int num_bits_read;<br>int word_index;<br>uint32_t <em> buffer;<br></em></pre><br><p>To start all variables are cleared to zero except <strong>total_bits</strong> which is set to the size of the packet as bytes  8, and <strong>buffer</strong> which points to the start of the packet.</p><br><p>The user requests a read of 3 bits. Since <strong>scratch_bits</strong> is zero, itâ€™s time to read in the first word. Read in the word to <strong>scratch</strong>, shifted left by <strong>scratch_bits</strong> (0). Add 32 to <strong>scratch_bits</strong>.</p><br><p>The value of <strong>scratch</strong> is now:</p><br><pre>zzzzzzzzzzzzzzzzzzzyyyyyyyyyyxxx</pre><br><p>Read off the low 3 bits, giving the expected value of:</p><br><pre>xxx</pre><br><p>Shift <strong>scratch</strong> to the right 3 bits and subtract 3 from <strong>scratch_bits</strong>:</p><br><pre>zzzzzzzzzzzzzzzzzzzyyyyyyyyyy</pre><br><p>Read off another 10 bits in the same way, giving the expected value of:</p><br><pre>yyyyyyyyyy</pre><br><p>Scratch now looks like:</p><br><pre>zzzzzzzzzzzzzzzzzzz</pre><br><p>The next read asks for 24 bits but <strong>scratch_bits</strong> is only 19 (=32-10-3).</p><br><p>Itâ€™s time to read in the next word. Shifting the word in memory left by <strong>scratch_bits</strong> (19) and or it on top of <strong>scratch</strong>.</p><br><p>Now we have all the bits necessary for z in <strong>scratch</strong>:</p><br><pre>zzzzzzzzzzzzzzzzzzzzzzzz</pre><br><p>Read off 24 bits and shift <strong>scratch</strong> right by 24. <strong>scratch</strong> is now all zeros.</p><br><p>We&rsquo;re done!</p><br><h2 id="beyond-bitpacking">Beyond Bitpacking</h2><br><p>Reading and writing integer values into a packet by specifying the number of bits to read/write is not the most user friendly option.</p><br><p>Consider this example:</p><br><pre>const int MaxElements = 32;<br><br>struct PacketB<br>{<br>    int numElements;<br>    int elements[MaxElements];<br><br>    void Write( BitWriter &amp; writer )<br>    {<br>        WriteBits( writer, numElements, 6 );<br>        for ( int i = 0; i &lt; numElements; ++i )<br>            WriteBits( writer, elements[i] );<br>    }<br><br>    void Read( BitReader &amp; reader )<br>    {<br>        ReadBits( reader, numElements, 6 );<br>        for ( int i = 0; i &lt; numElements; ++i )<br>            ReadBits( reader, elements[i] );<br>    }<br>};<br></pre><br><p>This code looks fine at first glance, but letâ€™s assume that some time later you, or somebody else on your team, increases <strong>MaxElements</strong> from 32 to 200 but forget to update the number of bits required to <strong>7</strong>ï¼ˆæ³¨æ„çœ‹<code>WriteBits( writer, numElements, 6 )çš„6ï¼Œ ç°åœ¨éœ€è¦7äº†</code>ï¼‰. Now the high bit of <strong>numElements</strong> are being silently truncated on send. It&rsquo;s pretty hard to track something like this down after the fact.</p><br><p>The simplest option is to just turn it around and define the maximum number of elements in terms of the number of bits sent:</p><br><pre>const int MaxElementBits = 7;<br>const int MaxElements = ( 1 &lt;&lt; MaxElementBits ) - 1;<br></pre><br><p>Another option is to get fancy and work out the number of bits required at compile time:</p><br><pre>template &lt;uint32_t x&gt; struct PopCount<br>{<br>    enum { a = x - ( ( x &gt;&gt; 1 ) &amp; 0x55555555 ),<br>           b = ( ( ( a &gt;&gt; 2 ) &amp; 0x33333333 ) + ( a &amp; 0x33333333 ) ),<br>           c = ( ( ( b &gt;&gt; 4 ) + b ) &amp; 0x0f0f0f0f ),<br>           d = c + ( c &gt;&gt; 8 ),<br>           e = d + ( d &gt;&gt; 16 ),<br>    result = e &amp; 0x0000003f };<br>};<br><br>template &lt;uint32_t x&gt; struct Log2<br>{<br>    enum { a = x | ( x &gt;&gt; 1 ),<br>           b = a | ( a &gt;&gt; 2 ),<br>           c = b | ( b &gt;&gt; 4 ),<br>           d = c | ( c &gt;&gt; 8 ),<br>           e = d | ( d &gt;&gt; 16 ),<br>           f = e &gt;&gt; 1,<br>    result = PopCount&lt;f&gt;::result };<br>};<br><br>template &lt;int64_t min, int64_t max&gt; struct BitsRequired<br>{<br>    static const uint32_t result =<br>        ( min == max ) ? 0 : ( Log2&lt;uint32_t(max-min)&gt;::result + 1 );<br>};<br><br>#define BITS_REQUIRED( min, max ) BitsRequired&lt;min,max&gt;::result<br></pre><br><p>Now you canâ€™t mess up the number of bits, and you can specify non-power of two maximum values and it everything works out.</p><br><pre>const int MaxElements = 32;<br>const int MaxElementBits = BITS_REQUIRED( 0, MaxElements );<br></pre><br><p>But be careful when array sizes aren&rsquo;t a power of two! In the example above <strong>MaxElements</strong> is 32, so <strong>MaxElementBits</strong> is 6. This seems fine because all values in [0,32] fit in 6 bits. The problem is that there are additional values within 6 bits that are <em>outside</em> our array bounds: [33,63]. An attacker can use this to construct a malicious packet that corrupts memory!</p><br><p>This leads to the <em>inescapable</em> conclusion that itâ€™s not enough to just specify the number of bits required when reading and writing a value, we must also check that it is within the valid range: [min,max]. This way if a value is outside of the expected range we can detect that and abort read.</p><br><p>I used to implement this using C++ exceptions, but when I profiled, I found it to be incredibly slow. In my experience, itâ€™s much faster to take one of two approaches: set a flag on the bit reader that it should abort, or return false from read functions on failure. But now, in order to be completely safe on read you must to check for error on every read operation.</p><br><pre>const int MaxElements = 32;<br>const int MaxElementBits = BITS_REQUIRED( 0, MaxElements );<br><br>struct PacketB<br>{<br>    int numElements;<br>    int elements[MaxElements];<br><br>    void Write( BitWriter &amp; writer )<br>    {<br>        WriteBits( writer, numElements, MaxElementBits );<br>        for ( int i = 0; i &lt; numElements; ++i )<br>        {<br>            WriteBits( writer, elements[i], 32 );<br>        }<br>    }<br><br>    void Read( BitReader &amp; reader )<br>    {<br>        ReadBits( reader, numElements, MaxElementBits );<br><br>        if ( numElements &gt; MaxElements )<br>        {<br>            reader.Abort();<br>            return;<br>        }<br><br>        for ( int i = 0; i &lt; numElements; ++i )<br>        {<br>            if ( reader.IsOverflow() )<br>                break;<br><br>            ReadBits( buffer, elements[i], 32 );<br>        }<br>    }<br>};<br></pre><br><p>If you miss any of these checks, you expose yourself to buffer overflows and infinite loops when reading packets. Clearly you donâ€™t want this to be a manual step when writing a packet read function. <em>You want it to be automatic</em>, just read the NEXT ARTICLE.</p>



<h1 id="è¯‘æ–‡">è¯‘æ–‡</h1>


<p><a href="http://gad.qq.com/program/translateview/7165591" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a></p>
<div class="WordSection1"><b style="margin: 0cm 0cm 0.0001pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;line-height:240%;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222;font-weight:normal">è¯‘è€…ï¼šé™ˆæ•¬å‡¤ï¼ˆ<span>nunu</span>ï¼‰<span>    </span>å®¡æ ¡ï¼šå´”å›½å†›ï¼ˆé£æ‰¬<span>971</span>ï¼‰</span> </b><p class="MsoNormal"><span> </span> </p><br><h2 id="å¯¼è®º">å¯¼è®º</h2><br><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ ¼ä¼¦Â·è²å¾·å‹’ã€‚æ¬¢è¿å¤§å®¶é˜…è¯»æˆ‘æ–°å¼€çš„è¿™ä¸ªç³»åˆ—æ•™ç¨‹ï¼šã€Šæ„å»ºæ¸¸æˆç½‘ç»œåè®®ã€‹ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘å°†å®Œå…¨ä»å¤´å¼€å§‹ä¸ºåŠ¨ä½œæ¸¸æˆï¼ˆæ¯”å¦‚è¯´ç¬¬ä¸€äººç§°å°„å‡»æ¸¸æˆã€è¿‘èº«æ ¼æ–—å’Œå®æ—¶å¤šäººåœ¨çº¿æˆ˜æ–—ç«æŠ€åœºæ¸¸æˆéƒ½æ˜¯åŠ¨ä½œæ¸¸æˆï¼‰åŸºäº<span>UDP</span>åè®®æ„å»ºä¸€ä¸ªä¸“ä¸šçº§åˆ«çš„æ¸¸æˆç½‘ç»œåè®®ã€‚æˆ‘æ‰€ä½¿ç”¨çš„å·¥å…·åªåŒ…æ‹¬æˆ‘çš„<span>Macbook Pro</span>ã€<span> Sublime Text 3</span>ï¼ˆè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ç¼–è¾‘å™¨ï¼Œéå¸¸å€¼å¾—ä¸€è¯•ï¼‰ã€æˆ‘ä¿¡èµ–çš„<span>C++</span>ç¼–è¯‘å™¨å’Œä¸€ç»„<span>UDP</span>å¥—æ¥å­—ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘å†™è¿™ä¸ªç³»åˆ—æ–‡ç« çš„ç›®çš„æ˜¯åˆ†äº«åœ¨è¿‡å»åå¹´é‡Œæˆ‘åœ¨è¿™ä¸ªé¢†åŸŸå­¦åˆ°çš„æœ‰å…³æ¸¸æˆç½‘ç»œæ–¹é¢çš„ä¸“ä¸šçŸ¥è¯†ï¼Œå› ä¸ºä¼¼ä¹æ²¡æœ‰äººå†™è¿‡è¿™äº›æ–¹é¢çš„ä¸œè¥¿ã€‚æ‰€ä»¥å…¶ä»–çš„ç½‘ç»œç¨‹åºå‘˜åˆ°åº•æ˜¯å¦‚ä½•æƒ³å¦‚ä½•åšçš„ï¼Œæˆ‘æƒ³é€šè¿‡è¿™ä¸ªç³»åˆ—æ–‡ç« æ¥è¿›è¡Œä¸€å®šçš„åˆ†äº«ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ä»·å€¼çš„è¯ï¼Œè¯·åœ¨<span>patreon</span>ä¸Šæ”¯æŒæˆ‘çš„å†™ä½œï¼Œè¿™æ ·æˆ‘å¯ä»¥æœ‰æœºä¼šæ¥å†™æ›´å¤šçš„æ–‡ç« ã€‚å¦‚æœä½ å¯¹æˆ‘çš„å·¥ä½œè¿›è¡Œæ”¯æŒå’Œæèµ çš„è¯ï¼Œä½ è¿˜å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªç³»åˆ—æ–‡ç« çš„ç¤ºä¾‹æºä»£ç <span>(</span>è¿™äº›æºä»£ç éƒ½æ˜¯å¼€æºçš„<span>,</span>æ‰€ä»¥æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³ç”¨çš„åœ°æ–¹ç”šè‡³æ˜¯å•†ä¸šå†…å®¹ä¸Šï¼<span>)</span>ä»¥åŠä¸€ä¸ªå¯†ç ä»¥ä¾¿è®¿é—®è¿™ä¸ªç½‘ç«™ä¸Šè¿˜æ²¡æœ‰å‘è¡¨çš„ä¸€äº›æ–‡ç« ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å…³äºæˆ‘çš„æƒ…å†µï¼Œå·²ç»è¯´å¾—è¶³å¤Ÿå¤šäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å¼€å§‹è¿™ä¸ªç³»åˆ—æ–‡ç« æŠŠï¼</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br></p><h2 id="å¯¹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥">å¯¹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½ æ˜¯å¦æœ‰æƒ³è¿‡å¤šäººåœ¨çº¿æ¸¸æˆæ˜¯å¦‚ä½•è¯»å–å’Œå†™å…¥æ•°æ®åŒ…çš„ï¼Ÿ</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœä½ æœ‰<span>web</span>å¼€å‘çš„èƒŒæ™¯è¯ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨<span>XML</span>ã€<span>JSON</span>æˆ–<span>YAML</span>ä»¥æ–‡æœ¬æ ¼å¼æ¥é€šè¿‡ç½‘ç»œå‘é€æ•°æ®ã€‚ä½†å¤§å¤šæ•°æ¸¸æˆç½‘ç»œç¨‹åºå‘˜ä¼šå˜²ç¬‘è¿™ç§å¯¹æ¸¸æˆæ•°æ®è¿›è¡Œç¼–ç çš„å»ºè®®ã€‚ä»–ä»¬å¯èƒ½ä¼šè¯´ï¼š<span>â€</span>å“ˆå“ˆå“ˆï¼Œè¿™çœŸçš„å¾ˆæœ‰è¶£ã€‚ä½ ä¸æ˜¯è®¤çœŸçš„å¯¹å§ï¼Ÿ<span>â€œ</span>å“¦ã€‚ä½ <span>â€¦</span>æ˜¯è®¤çœŸçš„ã€‚ä½ è¢«è§£é›‡äº†ã€‚ä½ å¯ä»¥æ”¶æ‹¾ä¸œè¥¿å›å®¶äº†ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘åªæ˜¯å¼€äº†ä¸€ä¸ªç©ç¬‘ï¼Œä½†æ˜¯ç©ç¬‘å½’ç©ç¬‘ï¼Œä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•ä¸å¥½ï¼Ÿ</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸€ä¸ªç½‘é¡µæœåŠ¡å™¨ä½äºç½‘ç»œä¸Šçš„æŸä¸ªä½ç½®ï¼Œç›‘å¬è¯·æ±‚å¹¶å‘é€å“åº”ã€‚è¿™äº›è¯·æ±‚å’Œå“åº”éƒ½æ˜¯æ— çŠ¶æ€çš„å¹¶ä¸”å¯¹å®æ—¶æ€§è¦æ±‚éå¸¸éå¸¸ä½ï¼ˆå½“ç„¶æœ‰ä¸ªå¿«é€Ÿçš„å“åº”æ˜¯éå¸¸é‡è¦çš„ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ï¼‰ã€‚å› ä¸ºæ— çŠ¶æ€å’Œè¯·æ±‚<span>/</span>å“åº”çš„é¢‘ç‡éå¸¸ä½ï¼Œæ‰€ä»¥å…·æœ‰éå¸¸è‰¯å¥½çš„æ‰©å±•æ€§ã€‚ä½†æ˜¯å¤šäººåœ¨çº¿æ¸¸æˆçš„æœåŠ¡å™¨ä¸è¿™ç§ç½‘é¡µæœåŠ¡å™¨å®Œå…¨æ˜¯ä¸åŒçš„ã€‚å®ƒæ˜¯ä»¥æ¯ç§’<span>60</span>æ¬¡çš„é€Ÿåº¦æ¥å¯¹æ¸¸æˆä¸–ç•Œçš„çŠ¶æ€è¿›è¡Œæ¨¡æ‹Ÿã€‚å®ƒæ˜¯å®æ—¶çš„å¹¶ä¸”æœ‰çŠ¶æ€çš„ï¼Œå¹¶ä¸”éœ€è¦æŠŠæ‰€æœ‰çš„çŠ¶æ€ä»¥æ¯ç§’<span>20</span>æ¬¡æˆ–è€…<span>30</span>æ¬¡çš„é¢‘ç‡ä¸‹å‘ç»™å®¢æˆ·ç«¯ã€‚å› ä¸ºæ•´ä¸ªæ¸¸æˆä¸–ç•Œæœ‰å‡ åƒä¸ªç‰©ä½“ï¼Œæ¯ä¸ªç‰©ä½“å¯èƒ½ä¼šæœ‰å‡ ç™¾ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥ä¸‹å‘ç»™å®¢æˆ·ç«¯çš„çŠ¶æ€å¯èƒ½æ˜¯æµ·é‡çš„ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœä½ ä½¿ç”¨æ–‡æœ¬æ ¼å¼<span>(</span>å¦‚<span>XML</span>æˆ–<span>JSON)</span>å¯¹è¿™ä¸ªæ¸¸æˆçŠ¶æ€è¿›è¡Œç¼–ç çš„è¯ï¼Œæœ‰å¯èƒ½è¿™ç§æ–¹æ³•æ˜¯éå¸¸ä½æ•ˆçš„ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹ä¸‹é¢è¿™ä¸ª<span>XML</span>æ–‡æ¡£ï¼š</span> </p><div><div id="highlighter_836053" class="syntaxhighlighter  xml"><div><div id="highlighter_745852" class="syntaxhighlighter  xml"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">world_update</code> <code class="xml color1">world_time</code><code class="xml plain">=</code><code class="xml string">â€œ0.0â€</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">  </code><code class="xml plain">&lt;</code><code class="xml keyword">object</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">â€œ1â€</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">â€œplayerâ€</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">    </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œpositionâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ(0,0,0)â€</code> <code class="xml plain">&lt;=â€â€ </code><code class="xml color1">property</code><code class="xml plain">=</code><code class="xml string">â€œâ€</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">    </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œorientationâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ(1,0,0,0)â€</code> <code class="xml plain">&lt;=â€â€ </code><code class="xml color1">property</code><code class="xml plain">=</code><code class="xml string">â€œâ€</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">    </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œvelocityâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ(10,0,0)â€</code> <code class="xml plain">&lt;=â€â€ </code><code class="xml color1">property</code><code class="xml plain">=</code><code class="xml string">â€œâ€</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">    </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œhealthâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ100â€</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">    </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œweaponâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ110â€</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">    </code><code class="xml plain">â€¦ 100s more properties per-object â€¦</code></div><div class="line number9 index8 alt2"><code class="xml spaces">   </code><code class="xml plain">&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">object</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces"> </code><code class="xml plain">&lt;</code><code class="xml keyword">object</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">â€œ100â€</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">â€œgruntâ€</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">   </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œpositionâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ(100,100,0)â€</code> <code class="xml plain">&lt;=â€â€ </code><code class="xml color1">property</code><code class="xml plain">=</code><code class="xml string">â€œâ€</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">   </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">â€œhealthâ€</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">â€œ10â€</code> <code class="xml plain">&lt;=â€â€ </code><code class="xml color1">property</code><code class="xml plain">=</code><code class="xml string">â€œâ€</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces"> </code><code class="xml plain">&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">object</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces"> </code><code class="xml plain">&lt;</code><code class="xml keyword">object</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">â€œ110â€</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">â€œweaponâ€</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">   </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">â€œsemi-automaticâ€</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">   </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">ammo_in_clip</code><code class="xml plain">=</code><code class="xml string">â€œ8â€</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">   </code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml color1">round_in_chamber</code><code class="xml plain">=</code><code class="xml string">â€œtrueâ€</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">property</code><code class="xml plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="xml spaces"> </code><code class="xml plain">&lt;/</code><code class="xml keyword">object</code><code class="xml plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces"> </code><code class="xml plain">â€¦ 1000s more objects â€¦</code></div><div class="line number20 index19 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">world_update</code><code class="xml plain">&gt;</code></div></div></td></tr></table></div></div></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™çœ‹ä¸Šå»çœŸçš„å¾ˆè®©äººè®¨åŒã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½å—<span>?</span>å½“ç„¶ã€‚ã€‚ã€‚ä½¿ç”¨<span>JSON</span>æ¥ç¼–ç çš„è¯æ–‡æœ¬é‡å¯ä»¥å°‘ä¸€äº›ï¼š</span> </p><div><div id="highlighter_819404" class="syntaxhighlighter  json"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="json plain">{</code></div><div class="line number2 index1 alt1"><code class="json spaces">  </code><code class="json string">â€œworld_timeâ€</code><code class="json plain">: 0.0,</code></div><div class="line number3 index2 alt2"><code class="json spaces">  </code><code class="json string">â€œobjectsâ€</code><code class="json plain">: {</code></div><div class="line number4 index3 alt1"><code class="json spaces">    </code><code class="json plain">1: {</code></div><div class="line number5 index4 alt2"><code class="json spaces">      </code><code class="json string">â€œclassâ€</code><code class="json plain">: </code><code class="json string">â€œplayerâ€</code><code class="json plain">,</code></div><div class="line number6 index5 alt1"><code class="json spaces">      </code><code class="json string">â€œpositionâ€</code><code class="json plain">: </code><code class="json string">â€œ(0,0,0)â€</code><code class="json plain">,</code></div><div class="line number7 index6 alt2"><code class="json spaces">      </code><code class="json string">â€œorientationâ€</code><code class="json plain">: </code><code class="json string">â€œ(1,0,0,0)â€</code><code class="json plain">,</code></div><div class="line number8 index7 alt1"><code class="json spaces">      </code><code class="json string">â€œvelocityâ€</code><code class="json plain">: </code><code class="json string">â€œ(10,0,0)â€</code><code class="json plain">,</code></div><div class="line number9 index8 alt2"><code class="json spaces">      </code><code class="json string">â€œhealthâ€</code><code class="json plain">: 100,</code></div><div class="line number10 index9 alt1"><code class="json spaces">      </code><code class="json string">â€œweaponâ€</code><code class="json plain">: 110</code></div><div class="line number11 index10 alt2"><code class="json spaces">    </code><code class="json plain">}</code></div><div class="line number12 index11 alt1"><code class="json spaces">    </code><code class="json plain">100: {</code></div><div class="line number13 index12 alt2"><code class="json spaces">      </code><code class="json string">â€œclassâ€</code><code class="json plain">: </code><code class="json string">â€œgruntâ€</code><code class="json plain">,</code></div><div class="line number14 index13 alt1"><code class="json spaces">      </code><code class="json string">â€œpositionâ€</code><code class="json plain">: </code><code class="json string">â€œ(100,100,0)â€</code><code class="json plain">,</code></div><div class="line number15 index14 alt2"><code class="json spaces">      </code><code class="json string">â€œhealthâ€</code><code class="json plain">: 10</code></div><div class="line number16 index15 alt1"><code class="json spaces">    </code><code class="json plain">}</code></div><div class="line number17 index16 alt2"><code class="json spaces">    </code><code class="json plain">110: {</code></div><div class="line number18 index17 alt1"><code class="json spaces">      </code><code class="json string">â€œclassâ€</code><code class="json plain">: </code><code class="json string">â€œweaponâ€</code><code class="json plain">,</code></div><div class="line number19 index18 alt2"><code class="json spaces">      </code><code class="json string">â€œtype: â€œ</code><code class="json plain">semi-automatic</code><code class="json string">â€œ</code></div><div class="line number20 index19 alt1"><code class="json spaces">      </code><code class="json string">â€œ</code><code class="json plain">ammo_in_clip</code><code class="json string">â€œ: 8,</code></div><div class="line number21 index20 alt2"><code class="json spaces">      </code><code class="json string">â€œ</code><code class="json plain">round_in_chamberâ€: 1 </code></div><div class="line number22 index21 alt1"><code class="json spaces">    </code><code class="json plain">}</code></div><div class="line number23 index22 alt2"><code class="json spaces">  </code><code class="json plain">}</code></div><div class="line number24 index23 alt1"><code class="json plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left"><br></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†è¦æ³¨æ„çš„æ˜¯æè¿°æ•°æ®çš„å±æ€§æ¯”å®é™…è¦å‘é€çš„æ•°æ®è¿˜å¤§ã€‚è¿™ç³Ÿé€äº†ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠæ•°æ®åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†å‘¢<span>?</span></span> </p><p class="MsoNormal" align="left" style="margin-left: 36.05pt; text-indent: -18pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">1.<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">    </span></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸€ä¸ªæ¨¡å¼æ¥æè¿°ç‰©ä½“ç±»çš„å‡ ä½•ä»¥åŠæ¯ä¸ªç±»çš„å±æ€§ã€‚</span> </p><p class="MsoNormal" align="left" style="margin-left: 36.05pt; text-indent: -18pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">2.<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">    </span></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ•°æ®ç›¸å¯¹äºè¯¥æ¨¡å¼è¿›è¡Œç¼–ç æ¥å¿«é€Ÿä¸‹å‘ç»™å„ä¸ªå®¢æˆ·ç«¯ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸‹é¢æ˜¯<span>JSON</span>çš„ä¸€ä¸ªæ¨¡å¼ã€‚å®ƒåªä¼šè¢«ä¸‹å‘ä¸€æ¬¡ï¼š</span><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"> </span></p><div><div id="highlighter_69521" class="syntaxhighlighter  json"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="json plain">{</code></div><div class="line number2 index1 alt1"><code class="json spaces">  </code><code class="json string">â€œclassesâ€</code><code class="json plain">: {</code></div><div class="line number3 index2 alt2"><code class="json spaces">    </code><code class="json plain">0: </code><code class="json string">â€œplayerâ€</code> <code class="json plain">{</code></div><div class="line number4 index3 alt1"><code class="json spaces">      </code><code class="json string">â€œpropertiesâ€</code><code class="json plain">: {</code></div><div class="line number5 index4 alt2"><code class="json spaces">        </code><code class="json plain">0: {</code></div><div class="line number6 index5 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œpositionâ€</code><code class="json plain">,</code></div><div class="line number7 index6 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œvec3fâ€</code></div><div class="line number8 index7 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number9 index8 alt2"><code class="json spaces">        </code><code class="json plain">1: {</code></div><div class="line number10 index9 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œorientationâ€</code><code class="json plain">,</code></div><div class="line number11 index10 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œquat4fâ€</code></div><div class="line number12 index11 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number13 index12 alt2"><code class="json spaces">        </code><code class="json plain">2: {</code></div><div class="line number14 index13 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œvelocityâ€</code><code class="json plain">,</code></div><div class="line number15 index14 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œvec3fâ€</code></div><div class="line number16 index15 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number17 index16 alt2"><code class="json spaces">        </code><code class="json plain">3: {</code></div><div class="line number18 index17 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œhealthâ€</code><code class="json plain">,</code></div><div class="line number19 index18 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œfloatâ€</code></div><div class="line number20 index19 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number21 index20 alt2"><code class="json spaces">        </code><code class="json plain">4: {</code></div><div class="line number22 index21 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œweaponâ€</code><code class="json plain">,</code></div><div class="line number23 index22 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œobjectâ€</code><code class="json plain">, </code></div><div class="line number24 index23 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number25 index24 alt2"><code class="json spaces">      </code><code class="json plain">}</code></div><div class="line number26 index25 alt1"><code class="json spaces">    </code><code class="json plain">}</code></div><div class="line number27 index26 alt2"><code class="json spaces">    </code><code class="json plain">1: </code><code class="json string">â€œgruntâ€</code><code class="json plain">: {</code></div><div class="line number28 index27 alt1"><code class="json spaces">      </code><code class="json string">â€œpropertiesâ€</code><code class="json plain">: {</code></div><div class="line number29 index28 alt2"><code class="json spaces">        </code><code class="json plain">0: {</code></div><div class="line number30 index29 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œpositionâ€</code><code class="json plain">,</code></div><div class="line number31 index30 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œvec3fâ€</code></div><div class="line number32 index31 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number33 index32 alt2"><code class="json spaces">        </code><code class="json plain">1: {</code></div><div class="line number34 index33 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œhealthâ€</code><code class="json plain">,</code></div><div class="line number35 index34 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œfloatâ€</code></div><div class="line number36 index35 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number37 index36 alt2"><code class="json spaces">      </code><code class="json plain">}</code></div><div class="line number38 index37 alt1"><code class="json spaces">    </code><code class="json plain">}</code></div><div class="line number39 index38 alt2"><code class="json spaces">    </code><code class="json plain">2: </code><code class="json string">â€œweaponâ€</code><code class="json plain">: {</code></div><div class="line number40 index39 alt1"><code class="json spaces">      </code><code class="json string">â€œpropertiesâ€</code><code class="json plain">: {</code></div><div class="line number41 index40 alt2"><code class="json spaces">        </code><code class="json plain">0: {</code></div><div class="line number42 index41 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œtypeâ€</code><code class="json plain">,</code></div><div class="line number43 index42 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œenumâ€</code><code class="json plain">,</code></div><div class="line number44 index43 alt1"><code class="json spaces">          </code><code class="json string">â€œenum_valuesâ€</code><code class="json plain">: [ </code><code class="json string">â€œrevolverâ€</code><code class="json plain">, </code><code class="json string">â€œsemi-automaticâ€</code> <code class="json plain">]</code></div><div class="line number45 index44 alt2"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number46 index45 alt1"><code class="json spaces">        </code><code class="json plain">1: {</code></div><div class="line number47 index46 alt2"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œammo_in_clipâ€</code><code class="json plain">,</code></div><div class="line number48 index47 alt1"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œintegerâ€</code><code class="json plain">,</code></div><div class="line number49 index48 alt2"><code class="json spaces">          </code><code class="json string">â€œrangeâ€</code><code class="json plain">: </code><code class="json string">â€œ0..9â€</code><code class="json plain">,</code></div><div class="line number50 index49 alt1"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number51 index50 alt2"><code class="json spaces">        </code><code class="json plain">2: {</code></div><div class="line number52 index51 alt1"><code class="json spaces">          </code><code class="json string">â€œnameâ€</code><code class="json plain">: </code><code class="json string">â€œround_in_chamberâ€</code><code class="json plain">,</code></div><div class="line number53 index52 alt2"><code class="json spaces">          </code><code class="json string">â€œtypeâ€</code><code class="json plain">: </code><code class="json string">â€œintegerâ€</code><code class="json plain">,</code></div><div class="line number54 index53 alt1"><code class="json spaces">          </code><code class="json string">â€œrangeâ€</code><code class="json plain">: </code><code class="json string">â€œ0..1â€</code></div><div class="line number55 index54 alt2"><code class="json spaces">        </code><code class="json plain">}</code></div><div class="line number56 index55 alt1"><code class="json spaces">      </code><code class="json plain">}</code></div><div class="line number57 index56 alt2"><code class="json spaces">    </code><code class="json plain">}  </code></div><div class="line number58 index57 alt1"><code class="json spaces">  </code><code class="json plain">}</code></div><div class="line number59 index58 alt2"><code class="json plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ›´åŠ ç´§å‡‘çš„è¿›è¡ŒçŠ¶æ€æ›´æ–°<span>(</span>æ¯ç§’è¿›è¡Œ<span>20</span>æ¬¡æˆ–<span>30</span>æ¬¡çŠ¶æ€æ›´æ–°<span>â€¦)</span>ï¼š</span> </p><div><div id="highlighter_532621" class="syntaxhighlighter  json"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="json plain">{</code></div><div class="line number2 index1 alt1"><code class="json spaces">  </code><code class="json string">â€œworld_timeâ€</code><code class="json plain">: 0.0,</code></div><div class="line number3 index2 alt2"><code class="json spaces">  </code><code class="json string">â€œobjectsâ€</code><code class="json plain">: {</code></div><div class="line number4 index3 alt1"><code class="json spaces">    </code><code class="json plain">1: [0,</code><code class="json string">â€œ(0,0,0)â€</code><code class="json plain">,</code><code class="json string">â€œ(1,0,0,0)â€</code><code class="json plain">,</code><code class="json string">â€œ(10,0,0)â€</code><code class="json plain">,100,110],</code></div><div class="line number5 index4 alt2"><code class="json spaces">    </code><code class="json plain">100: [1,</code><code class="json string">â€œ(100,100,0)â€</code><code class="json plain">,10],</code></div><div class="line number6 index5 alt1"><code class="json spaces">    </code><code class="json plain">110: [2,1,8,1]</code></div><div class="line number7 index6 alt2"><code class="json spaces">  </code><code class="json plain">}</code></div><div class="line number8 index7 alt1"><code class="json plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™ç¡®å®æ›´å¥½ä¸€ç‚¹äº†ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä¸‹å‘ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ ¼å¼è€Œæ²¡æœ‰ä»»ä½•åºŸè¯å—<span>?</span></span> </p><div><div id="highlighter_467241" class="syntaxhighlighter  csharp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">0.0</code></div><div class="line number2 index1 alt1"><code class="csharp plain">1:0,0,0,0,1,0,0,0,10,0,0,100,110</code></div><div class="line number3 index2 alt2"><code class="csharp plain">100:1,100,100,0,10</code></div><div class="line number4 index3 alt1"><code class="csharp plain">110:2,1,8,1</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™æ¯”åŸæ¥ç´§å‡‘å¤šäº†ã€‚å½“ç„¶å®ƒåœ¨æ²¡æœ‰æ¨¡å¼çš„æƒ…å†µä¸‹æ˜¯å®Œå…¨ä¸å¯è¯»çš„ï¼Œä½†æ˜¯è¿™ä¹Ÿæ˜¯æ•´ä¸ªé—®é¢˜çš„æ‰€åœ¨ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><br><h2 id="æ–‡æœ¬æ ¼å¼å­˜åœ¨çš„é—®é¢˜">æ–‡æœ¬æ ¼å¼å­˜åœ¨çš„é—®é¢˜</h2><br><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬ç¡®å®å–å¾—äº†ä¸€äº›è¿›å±•ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶åœ¨ä½¿ç”¨æ–‡æœ¬æ ¼å¼ï¼Œæ‰€ä»¥å°±ç»§æ‰¿äº†æ–‡æœ¬æ ¼å¼å›ºæœ‰çš„ä½æ•ˆã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸ºä»€ä¹ˆï¼Ÿ</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªæµ®ç‚¹æ•°ä¸ºä¾‹æ¥åˆ†æè¿™ä¸ªé—®é¢˜ã€‚åœ¨äºŒè¿›åˆ¶æ ¼å¼ä¸­ä¸€ä¸ªæµ®ç‚¹æ•°éœ€è¦å æ®<span>4</span>ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åœ¨æ–‡æœ¬æ ¼å¼ä¸‹ä¸€ä¸ªæµ®ç‚¹æ•°éœ€è¦å¤šçš„å¤šçš„ç©ºé—´ã€‚è®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šâ€œ<span>3.141592653589793â€</span>ä¸€å…±ç”¨äº†<span>17</span>ä¸ªå­—èŠ‚ï¼ˆå¹¶æ²¡æœ‰åŒ…æ‹¬ç»ˆæ­¢ç¬¦â€˜<span>\0</span>â€™ï¼‰ã€‚å½“ç„¶ä½ å¯ä»¥è¯´è®©æˆ‘ä»¬æŠŠè¿™ä¸ªæµ®ç‚¹æ•°ç¼©çŸ­åˆ°<span>6</span>ä½æœ‰æ•ˆæ•°å­—çš„æƒ…å†µã€‚ä½†æ˜¯å°±ç®—æˆ‘ä»¬è¿™æ ·å¤„ç†äº†ï¼Œæ‰€å¾—åˆ°çš„â€œ<span>3.141593</span>â€æ‰€å æ®çš„ç©ºé—´ä»ç„¶æ˜¯äºŒè¿›åˆ¶è¡¨ç¤ºæ³•çš„<span>2</span>å€å¤§å°ã€‚<span><br></span>æ›´ç³Ÿç³•çš„æ˜¯å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆå¤§çš„è¡¨ç¤ºä½ç½®çš„æ•°å€¼ï¼Œæ¯”å¦‚<span>â€12134.534112â€</span>ã€‚ ä½ ä»ç„¶éœ€è¦<span>6</span>ä½ç²¾åº¦çš„å‡†ç¡®æ€§æ‰€ä»¥ç°åœ¨ä½ éœ€è¦ä½¿ç”¨<span>12</span>ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºè¿™ä¸ªæµ®ç‚¹æ•°ã€‚è€Œè¿™æ ·æ‰€å æ®çš„ç©ºé—´æ˜¯äºŒè¿›åˆ¶è¡¨ç¤ºæ³•çš„<span>3</span>å€å¤§å°ã€‚ä½ è¿˜ä¼šä¸ºæ¯ä¸€ä¸ª<span>â€˜,â€™</span>åˆ†éš”ç¬¦æµªè´¹ä¸€ä¸ªå­—èŠ‚ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘å¸Œæœ›ä½ èƒ½çœ‹åˆ°ï¼Œåœ¨å¤šäººåœ¨çº¿æ¸¸æˆä¸­ä½¿ç”¨æ–‡æœ¬æ ¼å¼è¿›è¡Œé€šä¿¡æ˜¯å®Œå…¨ä¸å¯è¡Œçš„ã€‚â€œä½†æ˜¯æ ¼ä¼¦ï¼Œæ•´ä¸ªäº’è”ç½‘éƒ½æ˜¯æ„å»ºäºæ–‡æœ¬æ ¼å¼ä¹‹ä¸Šçš„ï¼Œä¸ºä»€ä¹ˆåœ¨å¤šäººåœ¨çº¿æ¸¸æˆä¸­ä½¿ç”¨æ–‡æœ¬æ ¼å¼è¿›è¡Œé€šä¿¡å®Œå…¨ä¸å¯è¡Œï¼Ÿâ€ã€‚æ©ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯é‚£äº›åˆ›é€ äº’è”ç½‘çš„äººåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­çŠ¯ä¸‹çš„ä¸€äº›é”™è¯¯ã€‚<span>(</span>è¯‘æ³¨ï¼šåŸä½œè€…çš„è¿™ä¸ªç»“è®ºä¸‹çš„å¤ªæ­¦æ–­äº†ï¼Œæˆ‘è§‰å¾—ä¸»è¦æ˜¯å› ä¸ºäº’è”ç½‘å’Œæ¸¸æˆé€šä¿¡åè®®çš„é¢å‘å¯¹è±¡ä¸åŒï¼Œæ¸¸æˆé€šä¿¡åè®®é¢å‘çš„ç›®æ ‡æ˜¯éå¸¸ç‰¹å®šè€Œä¸”å›ºå®šçš„ï¼Œè¿™ä½¿å¾—ä»–ä»¬å¯ä»¥æå‰æ²Ÿé€šåˆ°åº•ä»¥ä»€ä¹ˆæ ¼å¼æ¥ä¼ è¾“åè®®ï¼Œæˆ–è€…è¯´ä¸éœ€è¦ä¼ è¾“ä»»ä½•è§£è¯»çš„æ ‡ç­¾å°±èƒ½å¤Ÿäº’ç›¸ç†è§£ï¼Œè€Œè¿™ç§äº’ç›¸ç†è§£çš„åŸºç¡€æ˜¯é€šè¿‡å…¶ä»–æ–¹å¼å·²ç»è¿›è¡Œäº†æ²Ÿé€šï¼Œä½†æ˜¯äº’è”ç½‘çš„é€šä¿¡åˆ™æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå®ƒè¦éå¸¸çš„é€šç”¨ï¼Œå…¼é¡¾æ›´å¤šçš„éœ€æ±‚ï¼Œè€Œä¸”æ ¹æœ¬å°±ä¸çŸ¥é“æ˜¯è°æ¥è§£è¯»è¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥ä¿¡æ¯çš„å¯è¯»æ€§å°±éå¸¸éå¸¸çš„é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å…¶ä»–çš„ç®¡é“è¿›è¡Œé€šä¿¡ï¼Œåªèƒ½å‡­å€Ÿä¼ è¾“è¿‡å»çš„ä¿¡æ¯æœ¬èº«æ¥è§£è¯»ï¼Œæ‰€ä»¥äº’è”ç½‘çš„åè®®æ‰æ˜¯è®¾è®¡æˆè¿™æ ·ã€‚<span>)</span>ã€‚å¯è¯»æ€§å¯èƒ½åœ¨è¿™äº›æ—©æœŸåè®®å¾ˆé‡è¦ï¼Œä½†æˆ‘å¯ä»¥å‘ä½ ä¿è¯ï¼Œè®©äººä»¬å¾ˆå®¹æ˜“æ¥é˜…è¯»è¿™äº›åè®®å’Œä¿®æ”¹ä½ çš„æ¸¸æˆçš„ç½‘ç»œåè®®æ­£å¥½æ˜¯ç¡¬å¸çš„ä¸¤é¢ï¼Œæ ¹æœ¬æ²¡æœ‰åŠæ³•å…¼å¾—ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è€Œä¸”å› ä¸ºå¸¦å®½æ˜¯éå¸¸å…³é”®çš„è¦ç´ ï¼Œå¹¶ä¸”ä½ å¸Œæœ›åœ¨æ¯ç§’ç”¨å°½å¯èƒ½å°‘çš„æ¯”ç‰¹æ•°æ¥ä¼ é€’å°½å¯èƒ½å¤šçš„æ¸¸æˆå†…å®¹ï¼Œæ‰€ä»¥ä½ å®Œå…¨æ²¡æœ‰åŠæ³•ä½¿ç”¨æ–‡æœ¬æ ¼å¼ï¼Œå¿…é¡»åˆ‡æ¢æˆäºŒè¿›åˆ¶æ ¼å¼ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><br><h2 id="åˆ‡æ¢æˆäºŒè¿›åˆ¶æ ¼å¼">åˆ‡æ¢æˆäºŒè¿›åˆ¶æ ¼å¼</h2><br><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨ç½‘ç»œä¸–ç•Œä¸­å­˜åœ¨ä¸€äº›ç”¨æ¥è¯»å–å’Œå†™å…¥äºŒè¿›åˆ¶æ ¼å¼çš„åº“ï¼Œæ¯”å¦‚</span><span><a rel="noopener" href="http://bjson.org/" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">BJSON</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">,</span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€</span><span><a rel="noopener" href="https://developers.google.com/protocol-buffers/" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">Protocol Buffers</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ </span><span><a rel="noopener" href="https://google.github.io/flatbuffers/" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">Flatbuffers</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ </span><span><a rel="noopener" href="https://thrift.apache.org/" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">Thrift</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ </span><span><a rel="noopener" href="https://capnproto.org/" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">Capâ€™n Proto</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å’Œ </span><span><a rel="noopener" href="http://msgpack.org/index.html" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">MsgPack</span></a></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€‚è¿™å‡ ä¹éƒ½æ˜¯å¸¸è¯†äº†ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™äº›åº“å…¶å®éƒ½è¿˜ä¸é”™ã€‚å€ŸåŠ©æ¥å£æè¿°è¯­è¨€å’Œä¸€äº›ä»£ç ç”Ÿæˆå·¥å…·çš„å¸®åŠ©èƒ½å¤Ÿè¯»å–å’Œå†™å…¥ï¼ˆè¿™é€šå¸¸è¢«ç§°ä¸ºåºåˆ—åŒ–ï¼‰ä½ çš„æ¸¸æˆæ•°æ®ç»“æ„æˆä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œè€Œè¿™äº›äºŒè¿›åˆ¶æ•°æ®ä¼šåœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ é€’ã€‚åœ¨ç½‘ç»œçš„å¦å¤–ä¸€ä¾§ï¼Œè¿™äº›æ•°æ®ä¼šè¢«ååºåˆ—åŒ–å¹¶ä¸”è½¬æ¢å›åŸå§‹çš„æ•°æ®ç»“æ„ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œä¼ è¯´ç½‘ç»œæ•°æ®çš„ä¼˜ç‚¹æœ‰ï¼š<span>1)</span></span><span> </span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½ ä¸å¿…è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªåºåˆ—åŒ–å±‚ã€‚<span>2</span>ï¼‰è¿™äº›åº“å¾€å¾€æ˜¯è¯­è¨€æ— å…³çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ç¨‹åºçš„å‰ç«¯ï¼ˆä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ï¼‰ä½¿ç”¨ä¸€ç§è¯­è¨€è€Œåœ¨ç¨‹åºçš„åç«¯ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡ç«¯ï¼‰ä½¿ç”¨å¦å¤–ä¸€ç§è¯­è¨€ï¼Œè€Œåœ¨è¿™ç§æƒ…å†µä¸‹æ‰‹ï¼Œç¨‹åºçš„å‰ç«¯å’Œç¨‹åºçš„åç«¯ä»ç„¶æ˜¯å¯ä»¥è¿›è¡Œé€šä¿¡çš„ã€‚<span>3)</span>æä¾›äº†ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœä½ çš„å®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„åè®®ï¼Œè€ŒæœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°ç‰ˆæœ¬çš„åè®®çš„è¯ï¼Œå®ƒä»¬ä»ç„¶æ˜¯å¯ä»¥è¿›è¡Œé€šä¿¡çš„ã€‚åè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™äº›åº“çœ‹ä¸Šå»å¾ˆæ£’ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯å®ç°ä½ çš„æ¸¸æˆçš„ç½‘ç»œåè®®çš„ä¸€ç§å¾ˆæ£’çš„æ–¹æ³•ä¹ˆï¼Ÿ</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å…¶å®æƒ…å†µå¹¶ä¸æ€»æ˜¯å¦‚æ­¤ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªåè®®ï¼Œè¿™ä¸ªåè®®æ˜¯è´Ÿè´£å‘ç½‘é¡µæœåŠ¡å™¨è¿›è¡Œè¯·æ±‚å’Œæ¥å—å“åº”ï¼Œä½†æ˜¯éœ€è¦æ”¯æŒå¤šç§è¯­è¨€å¹¶ä¸”ç‰ˆæœ¬ä¿¡æ¯å¯¹ä½ æ¥è¯´éå¸¸çš„é‡è¦ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºæœ‰äº†å¯ä»¥æ”¯æŒè¿™äº›åŠŸèƒ½çš„åº“çš„å­˜åœ¨ï¼Œä½ å†è‡ªå·±å»å®ç°è‡ªå·±çš„å¸¦ç‰ˆæœ¬ä¿¡æ¯çš„åºåˆ—åŒ–å±‚å’Œå¤šè¯­è¨€æ”¯æŒå°±æ˜¯ä¸€ä»¶ç‰¹åˆ«å‚»çš„äº‹æƒ…ã€‚å¦‚æœä½ çš„æ¸¸æˆéœ€è¦ä»ä¸€å°æœºå™¨ä¸Šè¿œç¨‹è°ƒç”¨å¦å¤–ä¸€å°æœºå™¨çš„å‡½æ•°ã€‚é‚£ä¹ˆå¯èƒ½åªç”¨è¿™äº›å·²æœ‰çš„åº“å°±æ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚ã€‚ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯åœ¨æ€§èƒ½è‡³å…³é‡è¦çš„ç½‘ç»œé€šä¿¡çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« ä¸­è®¨è®ºçš„è¿™ç§æƒ…å†µï¼ˆå¯¹äºç¬¬ä¸€äººç§°å°„å‡»æ¸¸æˆæ¸¸æˆã€åŠ¨ä½œæ¸¸æˆç­‰ç­‰ï¼‰ï¼Œæ¸¸æˆç½‘ç»œçš„åŸºæœ¬å•ä½æ˜¯çŠ¶æ€è€Œä¸æ˜¯è¿œç¨‹å‡½æ•°è°ƒç”¨ã€‚åŒæ—¶<span>,</span>è·¨è¯­è¨€æ”¯æŒäºŒè¿›åˆ¶æ ¼å¼æ‰€èƒ½æä¾›çš„å¥½å¤„å¾ˆå°ï¼Œè¿™æ˜¯å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨ä¸€ç§è¯­è¨€è¿›è¡Œå¼€å‘çš„ï¼ˆæ¯”å¦‚<span>C++</span>ï¼‰ã€‚è¿™äº›æ¸¸æˆä¹Ÿä¸éœ€è¦å¤æ‚çš„ç‰ˆæœ¬ä¿¡æ¯å’Œç‰ˆæœ¬éªŒè¯æœºåˆ¶ï¼Œå› ä¸ºå¦‚ä½•å®¢æˆ·ç«¯è¯•å›¾ä»¥ä¸€ä¸ªä¸åŒçš„åè®®ç‰ˆæœ¬ä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å¯ä»¥ç›´æ¥æ‹’ç»è¿™ä¸ªè¿æ¥å°±å¥½ã€‚æœ‰ä¸€ç§ç‰¹åˆ«ç®€å•ä½†æ˜¯æœ‰æ•ˆçš„åŠæ³•å¯ä»¥è§£å†³ç‰ˆæœ¬çš„é—®é¢˜ï¼Œå°±æ˜¯ç»•è¿‡å®¢æˆ·ç«¯æ°¸è¿œç”¨å’ŒæœåŠ¡å™¨ç›¸åŒçš„åè®®ç‰ˆæœ¬è¿›è¡Œè¿æ¥ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ‰€ä»¥å¦‚æœä½ çš„åè®®ä¸æ˜¯å¤§éƒ¨åˆ†ä½¿ç”¨è¿œç¨‹å‡½æ•°è°ƒç”¨çš„è¯ï¼Œä½ å…¶å®æ ¹æœ¬å°±ä¸éœ€è¦ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆè·¨è¯­è¨€çš„æ”¯æŒï¼Œåˆ°åº•è¿™ä¹ˆåšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿä»æˆ‘çš„è§‚ç‚¹æ¥çœ‹å¥½å¤„å…¶å®å¹¶ä¸å¤šã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰è¿™äº›åŠŸèƒ½å¹¶ç”¨æˆ‘ä»¬è‡ªå·±çš„ä¸å¸¦å±æ€§çš„äºŒè¿›åˆ¶æµè¿›è¡Œä»£æ›¿ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„æ§åˆ¶æ€§å’Œçµæ´»æ€§ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br></p><h2 id="å¦‚ä½•å¼€å§‹ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼">å¦‚ä½•å¼€å§‹ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœä½ åœ¨ç”¨<span>C</span>æˆ–<span>C++</span>å¯¹ä½ çš„æ¸¸æˆè¿›è¡Œç¼–ç ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä½¿ç”¨<span>memcpy</span>ï¼ˆè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå†…å­˜æ‹·è´<span>, </span>å°†<span>n</span>å­—èŠ‚é•¿çš„å†…å®¹ä»ä¸€ä¸ªå†…å­˜åœ°å€å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°å€ï¼‰æŠŠæˆ‘çš„ç»“æ„æ‹·è´åˆ°æ•°æ®åŒ…é‡Œé¢ï¼Ÿå¾ˆå¤šäººä¼šç»å¸¸ä»è¿™é‡Œå¼€å§‹ï¼Œå› æ­¤å°½ç®¡æˆ‘ä¸æ¨èè¿™ç§æ–¹æ³•ï¼Œè¿˜æ˜¯è®©æˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹å¦‚æœç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿›è¡Œç½‘ç»œåŒ…ä¼ é€’çš„è¯ä¼šæœ‰å“ªäº›é—®é¢˜ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">é¦–å…ˆè¦å®šä¹‰ä½ çš„æ•°æ®åŒ…çš„é›†åˆï¼Œé€šå¸¸æƒ…å†µä¸‹è¿™æ˜¯ç»“æ„çš„<span>â€</span>è”åˆ<span>â€œ</span>ï¼ˆ<span>C</span>è¯­è¨€çš„ä¸€ç§è¯­æ³•åå­—ï¼‰ï¼š</span> </p><div><div id="highlighter_21108" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">Packet</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">enum</code> <code class="cpp plain">PacketTypeEnum { PACKET_A, PACKET_B, PACKET_C };</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp plain">uint8_t packetType;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces"> </code> </div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">union</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">        </code><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketA</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">        </code><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">            </code><code class="cpp color1 bold">int</code> <code class="cpp plain">x,y,z;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">        </code><code class="cpp plain">} a;</code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketB</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">        </code><code class="cpp plain">{</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">            </code><code class="cpp color1 bold">int</code> <code class="cpp plain">numElements;</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">            </code><code class="cpp color1 bold">int</code> <code class="cpp plain">elements[MaxElements];</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">        </code><code class="cpp plain">} b;</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketC</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">        </code><code class="cpp plain">{</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">            </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">x;</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">            </code><code class="cpp color1 bold">short</code> <code class="cpp plain">y;</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">            </code><code class="cpp color1 bold">int</code> <code class="cpp plain">z;</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">        </code><code class="cpp plain">} c;</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}; </code></div><div class="line number27 index26 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å½“å¯¹æ•°æ®åŒ…è¿›è¡Œå†™å…¥çš„æ—¶å€™ï¼Œè®¾ç½®æ•°æ®åŒ…çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºæ•°æ®åŒ…çš„ç±»å‹ï¼ˆ<span>0</span>æˆ–è€…<span>1</span>æˆ–è€…<span>2</span>ï¼‰ã€‚ç„¶åä¾æ®æ•°æ®åŒ…çš„ç±»å‹ï¼Œä½¿ç”¨<span>memcpy</span>å‡½æ•°å°†åˆé€‚çš„è”åˆç»“æ„æ‹·è´åˆ°æ•°æ®åŒ…é‡Œé¢ã€‚åœ¨è¯»å–æ•°æ®åŒ…çš„æ—¶å€™è¿›è¡Œå®Œå…¨ç›¸åçš„æ“ä½œï¼šè¯»å–çš„æ•°æ®åŒ…çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œç„¶åæ ¹æ®æ•°æ®åŒ…çš„ç±»å‹å°±èƒ½åˆ¤æ–­å‡ºè¿™ä¸ªæ•°æ®åŒ…è¿˜æœ‰å¤šå°‘å­—èŠ‚æ²¡æœ‰è¯»å–ã€‚ç„¶åä½¿ç”¨<span>memcpy</span>å‡½æ•°å°†æ•°æ®åŒ…çš„æ•°æ®æ‹·è´åˆ°åˆé€‚çš„è”åˆç»“æ„é‡Œé¢ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™ç§æ–¹æ³•æ²¡æœ‰åŠæ³•æ›´åŠ ç®€åŒ–äº†ï¼Œæ‰€ä»¥è¿™å°±å®Œäº†ä¹ˆï¼Ÿä¸å®Œå…¨æ˜¯è¿™æ ·çš„ï¼æˆ‘ä¸æ¨èè¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå®ƒæœ‰ä¸€äº›å¾ˆè®¨åŒçš„é—®é¢˜ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">é¦–å…ˆï¼Œä¸åŒçš„ç¼–è¯‘å™¨å’Œå¹³å°å¯¹äºæ•°æ®ç»“æ„çš„æ‰“åŒ…æ–¹å¼æ˜¯å®Œå…¨ä¸åŒçš„ã€‚å¦‚æœä½ èµ°è¿™æ¡è·¯çš„è¯ï¼Œä½ ä¼šèŠ±å¾ˆå¤šæ—¶é—´æ¥ä½¿ç”¨<span>#pragma</span>æ¥åŠªåŠ›ç¡®ä¿åœ¨ä¸åŒå¹³å°çš„ä¸åŒçš„ç¼–è¯‘å™¨ä¸Šå¸ƒå±€ç»“æ„åœ¨å†…å­˜ä¸­ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ–¹å¼ã€‚è®©è¿™ç§æ–¹å¼å¯ä»¥åœ¨<span>32</span>ä½å’Œ<span>64</span>ä½æ¶æ„ä¸Šéƒ½èƒ½é¡ºåˆ©å·¥ä½œæ˜¯ä¸€ä¸ªå¾ˆæœ‰<span>â€œ</span>æ„æ€<span>â€</span>çš„è¿‡ç¨‹ã€‚è¿™å¹¶ä¸æ˜¯è¯´è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†å®ƒè‚¯å®šä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸‹ä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯å­—èŠ‚é¡ºåºã€‚ç°ä»£è®¡ç®—æœºå¤§å¤šæ˜¯ä½¿ç”¨å°ç«¯è¿™ç§å­—èŠ‚é¡ºåºï¼ˆè‹±ç‰¹å°”çš„ä¸­å¤®å¤„ç†å™¨éƒ½æ˜¯å¦‚æ­¤ï¼‰ï¼Œä½†<span>PowerPC</span>çš„å†…æ ¸ä½¿ç”¨å¤§ç«¯è¿™ç§å­—èŠ‚é¡ºåºã€‚å†å²ä¸Šçš„ç½‘ç»œæ•°æ®é€šè¿‡ç”¨å¤§ç«¯è¿™ç§å­—èŠ‚é¡ºåºï¼ˆç½‘ç»œå­—èŠ‚é¡ºåºï¼‰æ¥è¿›è¡Œå‘é€ï¼Œä½†æ²¡æœ‰ç†ç”±è®©ä½ éµå¾ªè¿™ä¸€ä¼ ç»Ÿã€‚åœ¨æˆ‘çš„ä»£ç é‡Œé¢ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯å°ç«¯è¿™ç§å­—èŠ‚é¡ºåºï¼Œè¿™ä¹ˆåšçš„åŸå› æ˜¯ä½¿ç”¨è¿™ä¸ªå­—èŠ‚é¡ºåºåœ¨æœ€å¸¸è§çš„å¹³å°ï¼ˆè‹±ç‰¹å°”ï¼‰ä¸Šåœ¨æ‰“åŒ…å’Œè§£åŒ…ä¸­æ‰€è¦åšçš„å·¥ä½œé‡æœ€å°‘ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœä½ éœ€è¦æ”¯æŒä½¿ç”¨å°ç«¯å­—èŠ‚é¡ºåºçš„æœºå™¨å’Œä½¿ç”¨å¤§ç«¯å­—èŠ‚é¡ºåºçš„æœºå™¨ä¹‹é—´è¿›è¡Œé€šä¿¡çš„è¯ï¼Œåªæ˜¯ä½¿ç”¨<span>memcpy</span>å‡½æ•°æ¥å°†ç»“æ„ä½“æ‹·è´åˆ°æ•°æ®åŒ…çš„æ–¹æ³•æ ¹æœ¬è¡Œä¸é€šã€‚ä½ è‡³å°‘éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åœ¨ç»“æ„è¢«è¯»å–ä»¥åå¯¹å®ƒçš„æ¯ä¸ªå±æ€§çš„å­—èŠ‚é¡ºåºè¿›è¡Œè°ƒæ•´ï¼Œç„¶åæ‰èƒ½é¡ºåˆ©çš„è¯»å–å’Œå†™å…¥ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å°é—®é¢˜ã€‚å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœä½ çš„ç»“æ„ä¸­åŒ…å«æŒ‡é’ˆï¼Œä½ ä¸èƒ½ç›´æ¥æŠŠæŒ‡é’ˆè¿›è¡Œåºåˆ—åŒ–ç„¶ååœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ é€’ç„¶åæœŸæœ›åœ¨ç½‘ç»œçš„å¦å¤–ä¸€ç«¯ååºåˆ—åŒ–è¿™ä¸ªæŒ‡é’ˆä»¥åï¼Œè¿™ä¸ªæŒ‡é’ˆåœ¨é‚£è¾¹è¿˜èƒ½å¤Ÿæ­£å¸¸çš„ä½¿ç”¨ã€‚å¦å¤–ï¼Œå¦‚æœä½ æœ‰å¯å˜å¤§å°çš„ç»“æ„ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªå¯ä»¥å¤šè¾¾<span>32</span>ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œä½†æ˜¯å®ƒåœ¨å¤§å¤šæ•°æ—¶é—´é‡Œé¢éƒ½æ˜¯ç©ºçš„æˆ–è€…åªæœ‰å¾ˆå°‘ä¸€äº›å…ƒç´ ï¼Œä½†æ˜¯ä¸ºäº†é˜²æ­¢æœ€å·®çš„æƒ…å†µä½ æ€»æ˜¯éœ€è¦å‡è®¾å®ƒæœ‰<span>32</span>ä¸ªå…ƒç´ å¹¶ä¸”è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™éå¸¸éå¸¸çš„æµªè´¹ã€‚ä¸€ä¸ªæ›´å¥½çš„åŠæ³•æ˜¯è®©ä½ å¯ä»¥å¯¹ä½ çš„å¯å˜é•¿åº¦çš„ç»“æ„è¿›è¡Œç¼–ç ï¼Œèƒ½å¤ŸæŠŠé•¿åº¦ä¿¡æ¯ç¼–ç åˆ°æ•°æ®ç»“æ„æœ¬èº«ï¼Œè¿™æ ·åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ—¶å€™éƒ½èƒ½å¦¥å–„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘è§‰å¾—çœŸæ­£å½±å“è¿™ä¸ªæ–¹æ³•çš„å¯ç”¨æ€§çš„æœ€åä¸€ä¸ªé—®é¢˜æ˜¯å®‰å…¨æ€§ã€‚å¦‚æœä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ ç›¸å½“äºç›´æ¥æŠŠæ•´ä¸ª<span>C++</span>ç»“æ„ä¸­çš„æ•°æ®åŒ…ç›´æ¥æ‹·è´ï¼Œç„¶ååœ¨ç½‘ç»œä¸Šè¿›è¡Œå‘é€ã€‚ä½ åˆ°åº•åœ¨æƒ³ä»€ä¹ˆï¼Ÿ<span>!!</span>å¦‚æœæœ‰äººæ„é€ äº†ä¸€ä¸ªæ¶æ„çš„æ•°æ®åŒ…ï¼Œå¹¶æŠŠè¿™ä¸ªåŒ…çš„é•¿åº¦æ ‡è®°ä¸º<span>0xFFFFFFFF</span>å‘é€ç»™ä½ çš„è¯ï¼Œè¿™æ ·ä½ åœ¨å¤„ç†è¿™ä¸ªæ•°æ®åŒ…çš„æ—¶å€™ï¼Œå°†å¯¼è‡´ä½ è€—è´¹å°½æ‰€æœ‰çš„å†…å­˜ç©ºé—´ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„å®‰å…¨é£é™©ï¼Œè®©ä½ çš„åŸå§‹æ•°æ®ç›´æ¥åœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“å¹¶ä¸”é€‰æ‹©ç›¸ä¿¡è¿™äº›åœ¨ç½‘ç»œä¸Šæ¥æ”¶åˆ°çš„æ•°æ®ã€‚ã€‚ä½ åº”è¯¥ï¼Œè‡³å°‘ï¼Œå¯¹è¿™äº›å€¼è¿›è¡Œä¸€ä¸ªå–å€¼èŒƒå›´çš„æ£€æŸ¥ï¼Œè®©è¿™äº›å€¼ç¡®ä¿è½åœ¨ä½ æœŸæœ›çš„èŒƒå›´ä¹‹å†…ï¼Œè€Œä¸æ˜¯ç›²ç›®çš„ç›¸ä¿¡æ‰€æœ‰å‘é€ç»™ä½ çš„æ•°æ®ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br></p><h2 id="è¯»å–å’Œå†™å…¥å‡½æ•°">è¯»å–å’Œå†™å…¥å‡½æ•°</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™ä¸ªå¤æ‚åº¦å¯¼è‡´çš„ä¸‹ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ¯ä¸ªæ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥å‡½æ•°ã€‚è®©æˆ‘ä»¬å…ˆä»ä»¥ä¸‹å‡ ä¸ªç®€å•çš„æ“ä½œå¼€å§‹ï¼š</span> </p><div><div id="highlighter_861556" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">WriteInteger( Buffer &amp; buffer, uint32_t value );</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">WriteShort( Buffer &amp; buffer, uint16_t value );</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">WriteChar( Buffer &amp; buffer, uint8_t value );</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp plain">uint32_t ReadInteger( Buffer &amp; buffer );</code></div><div class="line number6 index5 alt1"><code class="cpp plain">uint16_t ReadShort( Buffer &amp; buffer );</code></div><div class="line number7 index6 alt2"><code class="cpp plain">uint8_t ReadByte( Buffer &amp; buffer );</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™å‡ ä¸ªå‡½æ•°æ˜¯å¯¹ä¸€ä¸ªç¼“å†²åŒºç»“æ„è¿›è¡Œæ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼è¿™æ ·ï¼š</span> </p><div><div id="highlighter_449982" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">Buffer</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp plain">uint8_t <em> data;     </em></code><code class="cpp comments">// pointer to buffer data</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">size;           </code><code class="cpp comments">// size of buffer data (bytes)</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">index;          </code><code class="cpp comments">// index of next byte to be read/written</code></div><div class="line number6 index5 alt1"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><br></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œå†™å…¥æ•´æ•°çš„å‡½æ•°ä¼šåƒæ˜¯å¦‚ä¸‹è¿™æ ·ï¼š</span> </p><div><div id="highlighter_219838" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">WriteInteger( Buffer &amp; buffer, uint32_t value )</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">assert</code><code class="cpp plain">( buffer.index + 4 &lt;= size );</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#ifdef BIG_ENDIAN</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp plain">((uint32_t<em>)(buffer.data+buffer.index)) = bswap( value ); </em></code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#else // #ifdef BIG_ENDIAN</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp plain">((uint32_t<em>)(buffer.data+buffer.index)) = value; </em></code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#endif // #ifdef BIG_ENDIAN</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp plain">buffer.index += 4;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è€Œè¯»å–æ•´æ•°çš„å‡½æ•°ä¼šåƒæ˜¯å¦‚ä¸‹è¿™æ ·ï¼š</span> </p><div><div id="highlighter_432752" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">uint32_t ReadInteger( Buffer &amp; buffer )</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">assert</code><code class="cpp plain">( buffer.index + 4 &lt;= size );</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp plain">uint32_t value;</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#ifdef BIG_ENDIAN</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp plain">value = bswap( ((uint32_t<em>)(buffer.data+buffer.index)) );</em></code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#else // #ifdef BIG_ENDIAN</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp plain">value = ((uint32_t<em>)(buffer.data+buffer.index));</em></code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#endif // #ifdef BIG_ENDIAN</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">    </code><code class="cpp plain">buffer.index += 4;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp plain">value;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨å°±ä¸ä»…ä»…æ˜¯ç›´æ¥ä½¿ç”¨<span>memcpy</span>å‡½æ•°æŠŠå†…å­˜ä¸­çš„æ•°æ®ç»“æ„ç›´æ¥æ‹·è´åˆ°æ•°æ®åŒ…é‡Œé¢ï¼Œè€Œæ˜¯ä¸ºæ¯ä¸ªæ•°æ®åŒ…ç±»å‹ä½¿ç”¨äº†å•ç‹¬çš„è¯»å–å’Œå†™å…¥å‡½æ•°ï¼š</span><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"> </span></p><div><div id="highlighter_690559" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketA</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">x,y,z;</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( Buffer &amp; buffer )</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteInteger( buffer, x );</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">        </code><code class="cpp plain">WriteInteger( buffer, y );</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteInteger( buffer, z );</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( Buffer &amp; buffer )</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">        </code><code class="cpp plain">ReadInteger( buffer, x );</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadInteger( buffer, y );</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">        </code><code class="cpp plain">ReadInteger( buffer, z ); </code></div><div class="line number17 index16 alt2"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number18 index17 alt1"><code class="cpp plain">};</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketB</code></div><div class="line number21 index20 alt2"><code class="cpp plain">{</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">numElements;</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">elements[MaxElements];</code></div><div class="line number24 index23 alt1"> </div><div class="line number25 index24 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( Buffer &amp; buffer )</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteInteger( buffer, numElements );</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">            </code><code class="cpp plain">WriteInteger( buffer, elements[i] );</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number31 index30 alt2"> </div><div class="line number32 index31 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( Buffer &amp; buffer )</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">        </code><code class="cpp plain">ReadInteger( buffer, numElements );</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">            </code><code class="cpp plain">ReadInteger( buffer, elements[i] );</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number38 index37 alt1"><code class="cpp plain">};</code></div><div class="line number39 index38 alt2"> </div><div class="line number40 index39 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketC</code></div><div class="line number41 index40 alt2"><code class="cpp plain">{</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">x;</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">short</code> <code class="cpp plain">y;</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">z;</code></div><div class="line number45 index44 alt2"> </div><div class="line number46 index45 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( Buffer &amp; buffer )</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">        </code><code class="cpp plain">WriteByte( buffer, x );</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteShort( buffer, y );</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">        </code><code class="cpp plain">WriteInt( buffer, z );</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number52 index51 alt1"> </div><div class="line number53 index52 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( Buffer &amp; buffer )</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadByte( buffer, x );</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">        </code><code class="cpp plain">ReadShort( buffer, y );</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadInt( buffer, z );</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number59 index58 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><br><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å½“å¯¹æ•°æ®åŒ…è¿›è¡Œè¯»å–å’Œå†™å…¥çš„æ—¶å€™ï¼Œé€šè¿‡<span>ReadByte / WriteByte</span>å‡½æ•°æ¥åœ¨æ•°æ®åŒ…çš„æ•°æ®ä¹‹å‰åŠ ä¸Šä¸€ä¸ªå­—èŠ‚ï¼Œç”¨æ¥è¡¨æ˜æ•°æ®åŒ…çš„ç±»å‹ï¼Œç„¶åæ ¹æ®æ•°æ®åŒ…çš„ç±»å‹ï¼Œè°ƒç”¨è”åˆä½“é‡Œé¢å¯¹åº”æ•°æ®åŒ…ç»“æ„é‡Œé¢è¯»å–æˆ–è€…å†™å…¥å‡½æ•°ã€‚</span><span style="font-family:&quot;inherit&quot;,&quot;serif&quot;;color:#212121">  </span><span><br></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿï¼Œå…è®¸ä½¿ç”¨ä¸åŒçš„å­—èŠ‚é¡ºåºçš„æœºå™¨å¯ä»¥è¿›è¡Œé€šä¿¡ï¼Œå¹¶æ”¯æŒå¯å˜é•¿åº¦çš„ç¼–ç ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œç°åœ¨å¯ä»¥å¯¹æ•°ç»„çš„é•¿åº¦è¿›è¡Œåºåˆ—åŒ–å¹¶ä¸”åªå¯¹å­˜åœ¨çš„æ•°æ®è¿›è¡Œéå†å’Œåºåˆ—åŒ–ï¼Œè€Œä¸ç”¨åƒä»¥å‰é‚£æ ·ï¼Œæ€»æ˜¯è¦æŒ‰ç…§æœ€åæƒ…å†µæ¥å‘é€æ•´ä¸ªé˜Ÿåˆ—ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br></p><h2 id="è¯»å–å’Œå†™å…¥å‡½æ•°å­˜åœ¨çš„é—®é¢˜">è¯»å–å’Œå†™å…¥å‡½æ•°å­˜åœ¨çš„é—®é¢˜</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æœ‰äº†è¯»å–å’Œå†™å…¥å‡½æ•°ï¼Œæ˜¯ç›¸æ¯”è¾ƒä¹‹å‰çš„<span>memcpy</span>æ–¹æ³•è¿›è¡Œæ•°æ®åŒ…çš„æ‰“åŒ…å’Œè§£åŒ…å‰è¿›äº†ä¸€å¤§æ­¥ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹å…·ä½“éƒ½æœ‰äº›ä»€ä¹ˆé—®é¢˜ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç¬¬ä¸€ä¸ªå­˜åœ¨çš„é—®é¢˜ï¼šå¦‚æœæœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯ã€<span>0</span>ï¼Œ<span>100</span>ã€‘ï¼Œé‚£ä¹ˆå®ƒåªéœ€è¦<span>10</span>ä¸ªæ¯”ç‰¹å°±èƒ½è¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬åªèƒ½åºåˆ—åŒ–ä¸€ä¸ªå­—èŠ‚çš„å€¼ã€<span>0</span>ï¼Œ<span>255</span>ã€‘ï¼Œä¸€ä¸ª<span>short</span>ç±»å‹çš„æ•´æ•°ã€<span>0,655325</span>ã€‘æˆ–è€…æ˜¯ä¸€ä¸ª<span>32</span>æ¯”ç‰¹çš„æ•´æ•°ã€<span>0</span>ï¼Œ<span>2^32-1</span>ã€‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å‡‘å¤Ÿ<span>16</span>ä½ã€‚è¿™æ ·çš„è¯å°±æµªè´¹äº†<span>6</span>ä½ï¼</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åŒæ ·çš„ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆåªæœ‰çœŸå’Œå‡ä¸¤ç§æƒ…å†µï¼‰åªéœ€è¦ä¸€ä½å°±èƒ½è¡¨ç¤ºï¼Œä½†æ˜¯å®ƒä»¬å¿…é¡»å–æ•´ä¸ºä¸€ä¸ªå­—èŠ‚ï¼Œè¿™å°±æµªè´¹äº†<span>7</span>ä½ï¼ç°åœ¨ä½ å¯ä»¥é€šè¿‡ç”¨<span>C++</span>ç»“æ„æ¥å®ç°ä½ çš„æ•°æ®åŒ…ä»¥åŠå¯¹<span>C++</span>çš„ä½åŸŸè¿›è¡Œåºåˆ—åŒ–å¹¶ä½¿ç”¨ä¸€äº›è”åˆæ–¹é¢çš„æŠ€å·§æ¥å¯¹è¿™ä¸ªå€¼è¿›è¡Œå–æ•´ï¼Œä½†æ˜¯ä½ çœŸçš„èƒ½ä¿è¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„<span>C ++</span>ç¼–è¯‘å™¨ç”¨å®Œå…¨ç›¸åŒçš„æ–¹å¼æ¥åœ¨å†…å­˜å¯¹ä½åŸŸè¿›è¡Œæ‰“åŒ…ï¼Ÿæ®æˆ‘æ‰€çŸ¥ï¼Œåº”è¯¥æ˜¯ä¸å¯èƒ½çš„ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç¬¬äºŒä¸ªå­˜åœ¨çš„é—®é¢˜ï¼šæ€€æœ‰æ¶æ„çš„äººä»ç„¶å¯ä»¥æ„é€ ä¸€ä¸ªæ¶æ„çš„æ•°æ®åŒ…ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œè®©æˆ‘ä»¬å‡è®¾<span>MaxElements</span>æ˜¯<span>32</span>ï¼Œæ‰€ä»¥æ•°æ®åŒ…<span>PacketB</span>çš„å…ƒç´ çš„æ•°ç›®è‚¯å®šæ˜¯åœ¨èŒƒå›´ã€<span>0</span>ï¼Œ<span>32</span>ã€‘ä¹‹é—´ã€‚ç”±äºæˆ‘ä»¬æ˜¯åœ¨å­—èŠ‚çº§åˆ«å¯¹æ•°æ®åŒ…è¿›è¡Œè¯»å–å’Œå¸å…¥ï¼Œæ‰€ä»¥å…ƒç´ çš„æ•°ç›®æ˜¯å­˜åœ¨ä¸€ä¸ªå­—èŠ‚é‡Œé¢ï¼Œå¯èƒ½çš„å–å€¼èŒƒå›´æ˜¯ã€<span>0</span>ï¼Œ<span>255</span>ã€‘ã€‚è¿™å¯¼è‡´å­—èŠ‚é‡Œé¢ã€<span>33,255</span>ã€‘è¿™ä¸ªèŒƒå›´çš„å€¼æ˜¯å®Œå…¨æ²¡æœ‰å®šä¹‰çš„ã€‚</span> </p><p class="MsoNormal" align="left"><span><br></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœæœ‰äººæ„é€ äº†ä¸€ä¸ª<span>elementCount = 255</span>çš„æ¶æ„çš„æ•°æ®åŒ…ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¼šå‘ç”Ÿå†…å­˜å´©æºƒï¼å½“ç„¶ä½ å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¯¹è¯»å…¥çš„æ•°æ®çš„å¤§å°è¿›è¡Œé™åˆ¶ï¼Œæˆ–è€…æ‰‹åŠ¨å¯¹å®ƒä»¬è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå‡ºç°é—®é¢˜å°±ä¸­æ­¢è¯»å–ï¼Œä½†æ˜¯ä½ çœŸæ­£æƒ³è¦çš„ä¸€ä¸ªçŸ¥é“æ¯ä¸ªè¦è¯»å–çš„åŸŸçš„æœ€å°<span>/</span>æœ€å¤§å€¼åˆ°åº•æ˜¯å¤šå°‘çš„ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ä»»ä½•æ•°æ®åŒ…ä¸­å¯¹åº”çš„å€¼å¦‚æœè¶…å‡ºé¢„æœŸçš„èŒƒå›´å°±ä¼šè‡ªåŠ¨ä¸­æ­¢è¯»å–ï¼Œè¿™æ ·åœ¨ä½ çš„ä»£ç çœ‹åˆ°è¿™äº›ä¸åˆæ³•çš„å€¼ä¹‹å‰ï¼Œè¿™äº›å€¼å°±å·²ç»è¢«ä¸¢å¼ƒäº†ã€‚<span><br></span>åœ¨æˆ‘çœ‹æ¥ï¼Œæœ€åä¸€ä¸ªå­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œç»´æŠ¤è¿™äº›å•ç‹¬çš„è¯»å–å’Œå†™å…¥å‡½æ•°çœŸçš„å¾ˆè®©äººè®¨åŒã€‚éšç€è¿™äº›å‡½æ•°å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå®ƒå¾ˆå®¹æ˜“å¯¹å…¶ä¸­ä¸€ä¸ªå‡½æ•°è¿›è¡Œæ”¹å˜è€Œå¿˜è®°ç›¸åº”çš„æ”¹å˜å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼ˆè¯»å–å’Œå†™å…¥å‡½æ•°æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå¦‚æœè¦æ”¹å˜ä¸€ä¸ªçš„è¯ï¼Œéœ€è¦åŒæ—¶æ”¹å˜å¦å¤–ä¸€ä¸ªï¼Œè¦ä¹ˆå°±ä¼šå‡ºç°é—®é¢˜ï¼Œå‘é€æ–¹å’Œå†™å…¥æ–¹æ ¹æœ¬å°±æ²¡æ³•æ­£ç¡®çš„å¾—åˆ°æ•°æ®åŒ…é‡Œé¢çš„ä¿¡æ¯ï¼‰ã€‚å¯¼è‡´ä¹‹é—´çš„è¯»å†™ä¸åŒæ­¥ã€‚è€Œè¿™äº›ä¸åŒæ­¥å¯èƒ½éå¸¸éš¾ä»¥è¿½æŸ¥ã€‚</span> </p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬è¦è§£å†³æ‰€æœ‰è¿™äº›é—®é¢˜ï¼Œä½†æ˜¯é¦–å…ˆæˆ‘ä»¬è¦é€šè¿‡å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨æ¥æœè¿™ä¸ªæ–¹å‘åŠªåŠ›ï¼Œè¿™æ ·æˆ‘ä»¬æ‰ä¸ä¼šç»§ç»­æµªè´¹ä½æ¥å­˜å‚¨ä¸€äº›æ²¡å¿…è¦çš„æ•°æ®ã€‚</span> </p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><br><h2 id="å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨">å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨</h2><br><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœæˆ‘ä»¬è¦åœ¨æ•°æ®åŒ…å†™å…¥ä¸€ä¸ªå¸ƒå°”å€¼çš„è¯ï¼Œå®ƒåº”è¯¥åªéœ€è¦åœ¨æ•°æ®åŒ…é‡Œé¢å æ®ä¸€ä¸ªä½çš„å¤§å°ã€‚å¦‚æœæˆ‘ä»¬è¦åœ¨æ•°æ®åŒ…å†™å…¥ä¸€ä¸ªå–å€¼èŒƒå›´åœ¨ã€<span>0</span>ï¼Œ<span>31</span>ã€‘çš„å€¼ï¼Œå®ƒåº”è¯¥åœ¨æ•°æ®åŒ…é‡Œé¢å æ®äº”ä¸ªä½çš„å¤§å°ï¼Œè€Œä¸æ˜¯å…«ä¸ªä½çš„å¤§å°ã€‚å¦‚æœæˆ‘ä»¬è¦åœ¨æ•°æ®åŒ…å†™å…¥ä¸€ä¸ªå–å€¼èŒƒå›´åœ¨ã€<span>0</span>ï¼Œ<span>100000</span>ã€‘çš„å€¼ï¼Œå®ƒåº”è¯¥åœ¨æ•°æ®åŒ…é‡Œé¢å æ®åä¸ƒä½çš„å¤§å°ï¼Œè€Œä¸æ˜¯äºŒåå››ä½çš„å¤§å°æˆ–è€…ä¸‰åäºŒä½çš„å¤§å°ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªä½æ‰“åŒ…å™¨ã€‚</span> </p><p style="margin: 6pt 0cm; line-height: 16.8pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¾ˆå¤šäººæ‰€å†™çš„ä½æ‰“åŒ…å™¨æ˜¯å·¥ä½œåœ¨å­—èŠ‚è¿™ä¸ªçº§åˆ«ä¸Šçš„ï¼Œä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜çš„è¯å°±æ˜¯ä»–ä»¬ä¼šæŠŠç”Ÿæˆçš„å­—èŠ‚åˆ·æ–°åˆ°æµé‡Œé¢ï¼Œä½†æ˜¯æˆ‘ä¸å–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå¦‚æœå®ƒä»¬æ˜¯å·¥ä½œåœ¨wordè¿™ä¸ªçº§åˆ«çš„è¯ä¼šå¿«çš„å¤šã€‚æˆ‘çš„ç›®æ ‡æ˜¯æ¯æ¬¡æ˜¯å†™ä¸‹å¾ˆå¤šwordçš„æ—¶å€™ï¼ˆ<span>32</span>ä½æˆ–è€…<span>64</span>ä½ï¼‰ï¼Œç„¶åæ¯æ¬¡è¯»å–<span>32</span>ä½æˆ–è€…<span>64</span>ä½ï¼Œå› ä¸ºç°ä»£æœºå™¨å¯¹è¿™ä¸ªé•¿åº¦è¿›è¡Œäº†ä¸“é—¨çš„ä¼˜åŒ–è€Œä¸åº”è¯¥åƒ<span>1985</span>å¹´é‚£æ ·åœ¨å­—èŠ‚çš„çº§åˆ«å¯¹ç¼“å†²åŒºè¿›è¡Œå¤„ç†ã€‚</span> </p><p style="margin: 6pt 0cm; line-height: 16.8pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘çš„ä½æ‰“åŒ…æŠ€æœ¯çš„åŸç†æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼šå¦‚æœä½ æƒ³åœ¨ä¸€æ¬¡åœ¨æ•°æ®åŒ…å†™å…¥<span>32</span>ä½çš„è¯ï¼Œä½ éœ€è¦ä¸€ä¸ªä¸¤å€å¤§å°çš„ä¸´æ—¶wordï¼Œæ¯”å¦‚è¯´<span>uint64_t</span>ã€‚å¦‚æœä½ æƒ³åœ¨ä¸€æ¬¡åœ¨æ•°æ®åŒ…å†™å…¥<span>64</span>ä½çš„è¯ï¼Œä½ éœ€è¦<span>128</span>ä½ã€‚è¿™æ ·åšçš„åŸå› æ˜¯ä½ éœ€è¦æ•´ä¸ªåŒºåŸŸçš„ä¸ŠåŠéƒ¨åˆ†è¿›è¡Œæº¢å‡ºï¼Œå› ä¸ºä½ å¯ä»¥åªå†™ä¸€ä¸ª<span>30</span>ä½å¤§å°çš„å€¼åˆ°ä¸´æ—¶ç¼“å†²åŒºï¼Œç„¶åéœ€è¦å†™å…¥ä¸€ä¸ª<span>10</span>ä½å¤§å°çš„å€¼åˆ°ä¸´æ—¶ç¼“å†²åŒºä¸­ã€‚å¦‚æœè¿™ä¸ªä¸´æ—¶å­—çš„ä¸ŠåŠéƒ¨åˆ†æ²¡æœ‰é¢å¤–çš„ç©ºé—´çš„è¯ï¼Œä½ éœ€è¦é¢å¤–çš„åˆ†æ”¯å’Œé€»è¾‘æ¥å¤„ç†æº¢å‡ºæƒ…å†µã€‚æ—¢ç„¶ä½ æƒ³åœ¨ä½æ‰“åŒ…é‡Œé¢çš„å¾ªç¯é‡Œé¢äº§ç”Ÿå°½å¯èƒ½å°‘çš„åˆ†æ”¯ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å°†æœ‰å¾ˆå¤§çš„æ„ä¹‰ã€‚</span> </p><br><h2 id="ä»¥ä½æ¥å†™å…¥æ•°æ®åŒ…">ä»¥ä½æ¥å†™å…¥æ•°æ®åŒ…</h2><br><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¯¹äºä½æ‰“åŒ…å™¨çš„æ•°æ®å¸å…¥ï¼Œä½ éœ€è¦ä¸€äº›ç¼“å†²åŒºä»¥åŠä¸€ä¸ªå˜é‡æ¥è®°å½•ç›®å‰åœ¨ç¼“å†²åŒºé‡Œé¢çš„ä½çš„æ•°ç›®ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¹‹ä¸­ï¼Œè®©æˆ‘ä»¬æŠŠå­—é•¿é€‰ä¸º<span>32</span>ä½ï¼Œè¿™æ ·ï¼Œä½æ‰“åŒ…å™¨çš„å˜é‡çœ‹ä¸Šå»å°±ä¼šåƒæ˜¯è¿™æ ·ï¼š</span> </p><div><div id="highlighter_884719" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">uint64_t scratch;</code></div><div class="line number2 index1 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">scratch_bits;</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">word_index;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">uint32_t  buffer;</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å½“ä½ å¼€å§‹å¯åŠ¨ä½ çš„ä½æ‰“åŒ…å™¨è¿›è¡Œå†™å…¥çš„æ—¶å€™ï¼Œæ‰€æœ‰è¿™äº›å˜é‡éƒ½å°†è¢«æ¸…é›¶ï¼Œç¼“å†²åŒºçš„æŒ‡é’ˆä¼šæŒ‡å‘ç¼“å†²åŒºçš„èµ·å§‹ä½ç½®ï¼Œè¿™ä¸ªæŒ‡é’ˆç”¨äºæ•°æ®åŒ…å®é™…å¼€å§‹å†™å…¥çš„ä½ç½®æŒ‡ç¤ºã€‚è¿™ä¸ªç¼“å†²åŒºçš„é•¿åº¦æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ï¼Œå¿…é¡»è¦æ˜¯<span>4</span>çš„æ•´æ•°å€ï¼Œå› ä¸ºæˆ‘ä»¬å·¥ä½œçš„å­—é•¿æ˜¯<span>32</span>ä½ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬è¦å†™å…¥<span>3</span>ä½æ•°æ®ï¼Œç„¶åæ˜¯<span>10</span>ä½æ•°æ®ï¼Œå†ç„¶åæ˜¯<span>24</span>ä½æ•°æ®ã€‚ä½ çš„ç›®æ ‡æ˜¯åœ¨ä¸´æ—¶ç¼“å†²åŒºå¯¹è¿™å—æ•°æ®ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒç´§å¯†çš„æ‰“åŒ…æ–¹å¼å¹¶æŠŠæ•´ç†å¥½çš„æ•°æ®åˆ·æ–°åˆ°å†…å­˜ä¸­å»ï¼Œä¸€æ¬¡æ˜¯<span>32</span>ä½ï¼ˆä¸€ä¸ªå­—é•¿ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯<span>3 + 10 + 24 = 37</span>ï¼Œè¿™æ˜¯æ•…æ„è®¾è®¡çš„ã€‚ä½ å¿…é¡»å¤„ç†è¿™ç§æƒ…å†µã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå‘ä¸´æ—¶ç¼“å†²åŒºå†™å…¥<span>3</span>ä½æ•°æ®å°±åƒä¸‹é¢è¿™æ ·ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">xxx</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸´æ—¶ç¼“å†²åŒºçš„é•¿åº¦ç°åœ¨å°±æ˜¯<span>3</span>ä½ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¥ä¸‹æ¥ï¼Œå‘ä¸´æ—¶ç¼“å†²åŒºå†™å…¥<span>10</span>ä½æ•°æ®å°±åƒä¸‹é¢è¿™æ ·ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">yyyyyyyyyyxxx</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸´æ—¶ç¼“å†²åŒºçš„é•¿åº¦ç°åœ¨å°±æ˜¯<span>13</span>ä½ï¼ˆ<span>10+3</span>ï¼‰ã€‚<span><br></span>ä¸ºä»€ä¹ˆè¦ä»¥è¿™ç§æ–¹å¼è¿›è¡Œæ‰“åŒ…è€Œä¸æ˜¯ä½¿ç”¨<span>xxxyyyyyyyyyy</span>è¿™ç§æ–¹å¼ï¼Ÿæˆ‘ç”¨è¿™ç§å­—èŠ‚é¡ºåºå†™å…¥çš„åŸå› æ˜¯å› ä¸ºæˆ‘ç”¨å°ç«¯å­—èŠ‚é¡ºåºæ¥å­˜å‚¨ç½‘ç»œæ•°æ®ã€‚å¦‚æœæˆ‘æ²¡æœ‰æŒ‰ç…§è¿™ä¸ªæ–¹å‘å¯¹ä½æ•°æ®è¿›è¡Œå­˜å‚¨çš„è¯ï¼Œé‚£ä¹ˆåœ¨å‘é€æ•°æ®åŒ…çš„æ—¶å€™æˆ‘å°†ä¸å¾—ä¸å°†æ•°æ®åŒ…çš„å¤§å°å¯¹é½åˆ°ä¸‹ä¸€ä¸ªåŒå­—çš„é•¿åº¦é‚£é‡Œï¼Œæˆ–è€…æˆ‘åªèƒ½å¯¹æˆ‘çš„æ•°æ®åŒ…çš„å°¾ç«¯è¿›è¡Œæˆªæ–­ã€‚å¦‚æœä½ æƒ³ä»¥å¤§ç«¯å­—èŠ‚é¡ºåºæ¥å‘é€åˆ·æ–°çš„æ•°æ®çš„è¯ï¼Œä½ åº”è¯¥æŒ‰ç…§å¦å¤–ä¸€ä¸ªæ–¹å‘å¯¹æ•°æ®åŒ…çš„æ•°æ®è¿›è¡Œæ‰“åŒ…ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¥ä¸‹æ¥ï¼Œå‘ä¸´æ—¶ç¼“å†²åŒºå†™å…¥<span>24</span>ä½æ•°æ®å°±åƒä¸‹é¢è¿™æ ·ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">zzzzzzzzzzzzzzzzzzzzzzzzyyyyyyyyyyxxx</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸´æ—¶ç¼“å†²åŒºçš„é•¿åº¦ç°åœ¨å°±æ˜¯<span>37</span>ä½ï¼ˆ<span>10+3+24</span>ï¼‰ã€‚æˆ‘ä»¬æ­£åœ¨è·¨è¶Š<span>32</span>ä½å­—çš„è¾¹ç•Œï¼Œå¹¶æœ‰<span>5</span>ä½ä¼šå†™å…¥åˆ°<span>uint64_t</span>ç»“æ„çš„ä¸ŠåŠ<span>32</span>ä½ä¸­ï¼ˆæ‰€ä»¥è¿™å®é™…æ˜¯ä¸€ä¸ªæº¢å‡ºï¼‰ã€‚ç°åœ¨<span>bit_index &gt;= 32</span>ï¼Œåˆ·æ–°ä½<span>32</span>ä½çš„æ•°æ®åˆ°å†…å­˜ä¸­å»ï¼Œå¹¶å¯¹<span>word_index</span>åŠ <span>1</span>ï¼Œç„¶åä»ä¸´æ—¶ç¼“å†²åŒºçš„é•¿åº¦å‡å»<span>32</span>å¹¶å‘å¯¹ä¸´æ—¶ç¼“å†²åŒºå‘å³åç§»<span>32</span>ä½ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä¸´æ—¶ç¼“å†²åŒºç°åœ¨çœ‹ä¸Šå»å°±åƒæ˜¯ä¸‹é¢è¿™æ ·ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">zzzzz</span> </p><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬å¯ä»¥ç»§ç»­ä¸‹å»ï¼Œä½†æ˜¯æˆ‘ä»¬å†³å®šåœ¨åœä¸‹æ¥å¯¹è¿™ä¸€ç‚¹è¿›è¡Œè§£é‡Šã€‚æˆ‘ä»¬å¿…é¡»åœ¨æ•´ä¸ªæ•°æ®åŒ…çš„æœ€åæ”¾ç½®çš„æ˜¯ä¸€ä¸ª<span>32</span>ä½çš„å­—ã€‚å¯¹å­—è¿™ä¸ªçº§åˆ«è¿›è¡Œå¤„ç†çš„ä½æ‰“åŒ…å™¨çš„ä¸€ä¸ªå¾®å¦™çš„ä¸€ç‚¹æ˜¯ä½ éœ€è¦åœ¨æ•´ä½“å†™å…¥çš„æœ€åè¿›è¡Œä¸€ä¸ªåˆ·æ–°å¤„ç†ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æœ€åçš„è¿™äº›ä½ä¼šå†™å…¥åˆ°å†…å­˜ä¸­å»ã€‚å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå­—åˆ·æ–°åˆ°å†…å­˜ä¸­å»çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ç¡®ä¿è¿™ä¸ªå­—ä¼šè¢«æ­£ç¡®çš„è½¬æ¢æˆå°ç«¯å­—èŠ‚é¡ºåºã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼šï¼¡ï¼¢ï¼£ï¼¤å½“è¢«å†™å…¥å†…å­˜ä¸­çš„æ—¶å€™éœ€è¦è¢«æœ‰æ•ˆçš„è½¬æ¢æˆï¼¤ï¼£ï¼¢ï¼¡è¿™ä¸ªé¡ºåºã€‚</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœè¦æƒ³æ˜ç™½ä¸ºä»€ä¹ˆè¿™ç§åšæ³•éå¸¸é‡è¦ï¼Œéœ€è¦è€ƒè™‘ä¸‹å¦‚æœæˆ‘ä»¬ç”¨å¤§ç«¯å­—èŠ‚é¡ºåºæ¥æŠŠå­—åˆ·æ–°åˆ°å†…å­˜ä¸­å»ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Ÿæœ€åä¸€ä¸ªå­—ä¼šæˆªæ–­ï¼Œå› ä¸ºè¿™ä¸ªå­—ä¼šä»¥åœ¨æ•´æ•°ç›¸åŒçš„å­—èŠ‚é¡ºåºå†™å…¥åˆ°å†…å­˜ä¸­å»ã€‚å› ä¸ºæˆ‘ä»¬ä¼šæŠŠå¼€å§‹çš„é‚£äº›ä½å†™åˆ°å­—çš„ä½çš„é‚£ä¸ªå­—èŠ‚ä¸­å»ï¼Œæˆ‘ä»¬çš„å†…å­˜ä¸­çš„é¡ºåºçœ‹ä¸Šå»æ˜¯è¿™æ ·çš„ï¼šå¯¹äºåˆšæ‰é‚£ä¸²æ¯”ç‰¹å€¼ï¼Œå†™å…¥å†…å­˜çš„æ—¶å€™ä¼šæ˜¯ï¼¡ï¼¢ï¼£ï¼¤ï¼¥è¿™ä¸ªé¡ºåºã€‚</span><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">DCBA000E</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•ä»¥ï¼•ä¸ªå­—èŠ‚çš„å¤§å°æ¥ç”¨ä¸€ä¸ªæ•°æ®åŒ…æ¥å‘é€ç¼“å†²åŒºï¼ˆæˆ‘ä»¬è¦å‘é€çš„æ•°æ®çš„å®é™…å¤§å°ï¼‰å®ƒæ•è·çš„æœ€åä¸€ä¸ªå­—èŠ‚ä¼šæ˜¯ï¼è€Œä¸æ˜¯ï¼¥ã€‚ï¼ˆä½œè€…åœ¨è¿™é‡Œæ‰“äº†ä¸€ä¸ªç¬‘è„¸ï¼‰ã€‚</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä»¥å°ç«¯è¿™ç§å­—èŠ‚é¡ºåºæŠŠä¸Šé¢çš„å†…å®¹å†™å…¥å†…å­˜çš„æ—¶å€™ï¼Œå­—èŠ‚åœ¨å†…å­˜ä¸­çš„å¸ƒå±€æ˜¯è¿™æ ·çš„ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ABCDE000</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬å¯ä»¥åªåœ¨ç½‘ç»œä¸Šå†™<span>5</span>ä¸ªå­—èŠ‚ï¼Œè¿™æ ·å°±èŠ‚çœäº†<span>3</span>ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”ä»ç„¶æ˜¯ä»¥ï¼¥æ¥ä½œä¸ºæ•°æ®åŒ…çš„ç»“å°¾ã€‚</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å®é™…ä¸Šï¼Œæˆ‘ä»¬æ‰€åšçš„æ˜¯å¼€å…³å­—å‘¨å›´çš„å­—èŠ‚ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡è¿™ç§æ–¹æ³•è¿›è¡Œæ„é€ æ¥é¿å…å°ç«¯å­—èŠ‚é¡ºåºçš„é‡æ–°æ’åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æ˜¯ä»¥å®ƒä»¬åœ¨å†…å­˜ä¸­çš„é¡ºåºç›´æ¥å†™å…¥åˆ°ç½‘ç»œçš„æ•°æ®åŒ…ä¸­ï¼Œå­—èŠ‚é¡ºåºæ˜¯å¾ˆéš¾å¤„ç†çš„ã€‚</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt 18pt 0cm;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br><br>å…¶ä»£ç ç±»ä¼¼äº ï¼š<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitWriter</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    BitWriter( <span class="keyword">void</span>* data, <span class="keyword">int</span> bytes ) </span><br><span class="line">        : m_data( (<span class="keyword">uint32_t</span>*)data ), m_numWords( bytes / <span class="number">4</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        assert( data );</span><br><span class="line">        assert( ( bytes % <span class="number">4</span> ) == <span class="number">0</span> );           <span class="comment">// buffer size must be a multiple of four</span></span><br><span class="line">        m_numBits = m_numWords * <span class="number">32</span>;</span><br><span class="line">        m_bitsWritten = <span class="number">0</span>;</span><br><span class="line">        m_wordIndex = <span class="number">0</span>;</span><br><span class="line">        m_scratch = <span class="number">0</span>;</span><br><span class="line">        m_scratchBits = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">WriteBits</span><span class="params">( <span class="keyword">uint32_t</span> value, <span class="keyword">int</span> bits )</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        assert( bits &gt; <span class="number">0</span> );</span><br><span class="line">        assert( bits &lt;= <span class="number">32</span> );</span><br><span class="line">        assert( m_bitsWritten + bits &lt;= m_numBits );</span><br><span class="line"></span><br><span class="line">        value &amp;= ( <span class="keyword">uint64_t</span>(<span class="number">1</span>) &lt;&lt; bits ) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        m_scratch |= <span class="keyword">uint64_t</span>( value ) &lt;&lt; m_scratchBits;</span><br><span class="line"></span><br><span class="line">        m_scratchBits += bits;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( m_scratchBits &gt;= <span class="number">32</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            assert( m_wordIndex &lt; m_numWords );</span><br><span class="line">            m_data[m_wordIndex] = host_to_network( <span class="keyword">uint32_t</span>( m_scratch &amp; <span class="number">0xFFFFFFFF</span> ) );</span><br><span class="line">            m_scratch &gt;&gt;= <span class="number">32</span>;</span><br><span class="line">            m_scratchBits -= <span class="number">32</span>;</span><br><span class="line">            m_wordIndex++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        m_bitsWritten += bits;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">WriteAlign</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> remainderBits = m_bitsWritten % <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">if</span> ( remainderBits != <span class="number">0</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">uint32_t</span> zero = <span class="number">0</span>;</span><br><span class="line">            WriteBits( zero, <span class="number">8</span> - remainderBits );</span><br><span class="line">            assert( ( m_bitsWritten % <span class="number">8</span> ) == <span class="number">0</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">WriteBytes</span><span class="params">( <span class="keyword">const</span> <span class="keyword">uint8_t</span>* data, <span class="keyword">int</span> bytes )</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        assert( GetAlignBits() == <span class="number">0</span> );</span><br><span class="line">        assert( m_bitsWritten + bytes * <span class="number">8</span> &lt;= m_numBits );</span><br><span class="line">        assert( ( m_bitsWritten % <span class="number">32</span> ) == <span class="number">0</span> || ( m_bitsWritten % <span class="number">32</span> ) == <span class="number">8</span> || ( m_bitsWritten % <span class="number">32</span> ) == <span class="number">16</span> || ( m_bitsWritten % <span class="number">32</span> ) == <span class="number">24</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> headBytes = ( <span class="number">4</span> - ( m_bitsWritten % <span class="number">32</span> ) / <span class="number">8</span> ) % <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span> ( headBytes &gt; bytes )</span><br><span class="line">            headBytes = bytes;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; headBytes; ++i )</span><br><span class="line">            WriteBits( data[i], <span class="number">8</span> );</span><br><span class="line">        <span class="keyword">if</span> ( headBytes == bytes )</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        FlushBits();</span><br><span class="line"></span><br><span class="line">        assert( GetAlignBits() == <span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> numWords = ( bytes - headBytes ) / <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span> ( numWords &gt; <span class="number">0</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            assert( ( m_bitsWritten % <span class="number">32</span> ) == <span class="number">0</span> );</span><br><span class="line">            <span class="built_in">memcpy</span>( &amp;m_data[m_wordIndex], data + headBytes, numWords * <span class="number">4</span> );</span><br><span class="line">            m_bitsWritten += numWords * <span class="number">32</span>;</span><br><span class="line">            m_wordIndex += numWords;</span><br><span class="line">            m_scratch = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        assert( GetAlignBits() == <span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> tailStart = headBytes + numWords * <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> tailBytes = bytes - tailStart;</span><br><span class="line">        assert( tailBytes &gt;= <span class="number">0</span> &amp;&amp; tailBytes &lt; <span class="number">4</span> );</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tailBytes; ++i )</span><br><span class="line">            WriteBits( data[tailStart+i], <span class="number">8</span> );</span><br><span class="line"></span><br><span class="line">        assert( GetAlignBits() == <span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">        assert( headBytes + numWords * <span class="number">4</span> + tailBytes == bytes );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">FlushBits</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( m_scratchBits != <span class="number">0</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            assert( m_wordIndex &lt; m_numWords );</span><br><span class="line">            m_data[m_wordIndex] = host_to_network( <span class="keyword">uint32_t</span>( m_scratch &amp; <span class="number">0xFFFFFFFF</span> ) );</span><br><span class="line">            m_scratch &gt;&gt;= <span class="number">32</span>;</span><br><span class="line">            m_scratchBits -= <span class="number">32</span>;</span><br><span class="line">            m_wordIndex++;                </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetAlignBits</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ( <span class="number">8</span> - ( m_bitsWritten % <span class="number">8</span> ) ) % <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetBitsWritten</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_bitsWritten;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetBitsAvailable</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_numBits - m_bitsWritten;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">const</span> uint8_t* <span class="title">GetData</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">uint8_t</span>*) m_data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetBytesWritten</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ( m_bitsWritten + <span class="number">7</span> ) / <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetTotalBytes</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_numWords * <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint32_t</span>* m_data;</span><br><span class="line">    <span class="keyword">uint64_t</span> m_scratch;</span><br><span class="line">    <span class="keyword">int</span> m_numBits;</span><br><span class="line">    <span class="keyword">int</span> m_numWords;</span><br><span class="line">    <span class="keyword">int</span> m_bitsWritten;</span><br><span class="line">    <span class="keyword">int</span> m_wordIndex;</span><br><span class="line">    <span class="keyword">int</span> m_scratchBits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><br></p><h2 id="ä»¥ä½æ¥è¯»å–æ•°æ®åŒ…">ä»¥ä½æ¥è¯»å–æ•°æ®åŒ…</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨ç½‘ç»œçš„å¦å¤–ä¸€ä¾§è¯»å–å·²ç»é€šè¿‡ä½æ‰“åŒ…å™¨æ‰“åŒ…å¥½çš„æ•°æ®ï¼Ÿ</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¦æˆ‘ä»¬ä»è¦åœ¨ç½‘ç»œä¸Šè¿›è¡Œå‘é€çš„ç¼“å†²åŒºå¼€å§‹ï¼Œå‡è®¾æˆ‘ä»¬åˆšåˆšä»<span>recvfrom.</span>å‡½æ•°è¿”å›ã€‚å®ƒé‡Œé¢çš„å†…å®¹æœ‰ï¼•ä½è¿™ä¹ˆé•¿ã€‚</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ABCDE</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰ç…§å­—è¿™ä¸ªç­‰çº§è¿›è¡Œè¯»å–ï¼Œæˆ‘ä»¬å¿…é¡»è¦æŠŠæ•°æ®çš„é•¿åº¦æˆªæ–­åˆ°åŒå­—è¿™ä¸ªé•¿åº¦ï¼Œæ¯”å¦‚è¯´ï¼˜ä¸ªå­—èŠ‚ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ABCDE000</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹å¾ˆå¾®å¦™çš„åœ°æ–¹ã€‚å½“æˆ‘åœ¨ç½‘ç»œä¸Šå‘é€ä¸€ä¸ªæ•°æ®åŒ…çš„æ—¶å€™ï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“å®ƒåˆ°åº•åŒ…å«äº†å¤šå°‘ä½çš„æ•°æ®ï¼ˆå¦åˆ™çš„è¯æˆ‘å°†ä¸å¾—ä¸å°†è¿™ä¸ªæ•°æ®åŒ…çš„å¤§å°ç›´æ¥è®°å½•åœ¨æ•°æ®åŒ…çš„åŒ…å¤´é‡Œé¢ï¼‰ï¼Œè€Œä¸”è¿™æ˜¯ä¸€ä¸ªå¸¦å®½çš„æµªè´¹ã€‚ä½†æ˜¯é€šè¿‡åœ¨ç½‘ç»œçš„å¦å¤–ä¸€ä¾§ä½¿ç”¨<span>recvfrom</span>å‡½æ•°æˆ‘ç¡®å®çŸ¥é“åˆ°åº•è¿™ä¸ªæ•°æ®åŒ…çš„å†…å®¹çš„é•¿åº¦æ˜¯å¤šå°‘ï¼Œå› æ­¤å½“ï¼•ä¸ªå­—èŠ‚å¤§å°çš„æ•°æ®åŒ…ä»ç½‘ç»œä¸Šåˆ°è¾¾çš„æ—¶å€™ï¼Œæˆ‘å¯ä»¥ç›´æ¥è®¤ä¸ºç¼“å†²åŒºä¸­çš„ä½çš„å¤§å°æ˜¯æ•°æ®åŒ…å­—èŠ‚å¤§å°ä¹˜ä»¥ï¼˜ã€‚å› æ­¤ï¼Œå®é™…ä¸Šï¼Œä½è¯»å–å™¨è®¤ä¸ºè¿™ä¸ªåˆ†ç»„ä¸­è¦è¢«è¯»å–çš„æ¯”ç‰¹æ•°ä¸º<span>5 <em> 8 = 40</em></span>ï¼Œè€Œä¸æ˜¯<span>37</span>ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½ çœŸçš„æƒ³åœ¨è¿™é‡Œåšçš„äº‹æƒ…æ˜¯ç¡®ä¿å¦‚æœä½è¯»å–å™¨è¯»å–çš„ä½ç½®å·²ç»è¶…è¿‡ç¼“å†²åŒºå®é™…ä½æ•°çš„ç»“å°¾ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯å‘é€çš„ï¼“ï¼—ä½æ•°æ®ï¼Œé‚£ä¹ˆå®ƒå°†è¯»å–çš„æ˜¯é›¶è€Œä¸æ˜¯æœªå®šä¹‰æ•°æ®ã€‚è¿™ä¼šè‡ªåŠ¨å‘ç”Ÿåœ¨æ•°æ®åŒ…æœ€åä¸€ä¸ªå­—èŠ‚çš„æœ€å<span>3</span>ä½ä¸Šï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”±ä½å†™å…¥å™¨å†™å…¥çš„é›¶ï¼Œä½†æ˜¯å¯¹äºåœ¨ç¼“å†²åŒºä¸­çš„æœ€å<span>3</span>ä¸ªæ¯”ç‰¹ä½ å¿…é¡»ç¡®ä¿å®ƒä»¬è¢«è¯»ä¸ºé›¶ï¼Œä»¥åŠæœªæ¥çš„ä»»ä½•å¯èƒ½ä½çš„è¯»å–ä¹Ÿæ˜¯è¿”å›é›¶ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å®‰å…¨æ­¥éª¤ä»¥é˜²æ­¢ä½ è¯»å–çš„æ—¶å€™è¶…è¿‡ç¼“å†²åŒºæˆ–è€…æ•°æ®æµçš„ç»“å°¾ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å§ã€‚ä½ å°†åœ¨ä½è¯»å–å™¨é‡Œé¢æœ‰å¦‚ä¸‹è¿™äº›å˜é‡ï¼š</span> </p><div><div id="highlighter_328289" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">uint64_t scratch;</code></div><div class="line number2 index1 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">scratch_bits;</code></div><div class="line number3 index2 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">total_bits;</code></div><div class="line number4 index3 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">num_bits_read;</code></div><div class="line number5 index4 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">word_index;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">uint32_t  buffer;</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><br></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™æ¯”ä½å†™å…¥å™¨è¦å¤æ‚ä¸€äº›ï¼Œå› ä¸ºä½ éœ€è¦åšæ›´å¤šçš„æ£€æµ‹ã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œæ°¸è¿œä¸è¦ç›¸ä¿¡æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¦å¼€å§‹è¿›è¡Œè¯»å–çš„æ—¶å€™ï¼Œå­—çš„åºå·æ˜¯ï¼ï¼Œä¸´æ—¶ç¼“å†²åŒºçš„å†…å®¹å’Œä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°éƒ½æ˜¯ï¼ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç„¶åç”¨æˆ·è¯·æ±‚ï¼“ä½çš„ç©ºé—´ã€‚å› ä¸ºä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°ç°åœ¨æ˜¯ï¼ï¼Œç°åœ¨æ˜¯æ—¶å€™æ¥è¯»å–ç¬¬ä¸€ä¸ªå­—äº†ã€‚è¯»å–ç¬¬ä¸€ä¸ªå­—ç„¶åæŠŠå®ƒæ”¾åˆ°ä¸´æ—¶ç¼“å†²åŒºï¼Œå¹¶å¯¹ä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°ï¼ˆç›®å‰æ˜¯<span>0</span>ï¼‰å‘å³è¿›è¡Œåç§»ã€‚æŠŠä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°æ·»åŠ <span>32</span>ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨é€šè¿‡æŠŠä¸´æ—¶ç¼“å†²åŒºçš„å†…å®¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªå˜é‡é‡Œé¢æ¥è¯»å–å‰é¢çš„<span>3</span>ä½å¹¶é€šè¿‡<span>&amp; ( (1&lt;&lt;3 ) â€“ 1 )</span>è¿›è¡Œé®ç½©å¤„ç†ï¼Œæ¥ç»™å‡ºæœ€åè¾“å‡ºçš„ç»“æœï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">xxx</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨å°†ä¸´æ—¶ç¼“å†²åŒºçš„å†…å®¹å‘å³åç§»<span>3</span>ä½ï¼Œå¹¶ä»ä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°ä¸­å‡å»<span>3</span>ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">zzzzzzzzzzzzzzzzzzzyyyyyyyyyy</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨ç”¨å®Œå…¨ç›¸åŒçš„åŠæ³•è¯»å–åé¢çš„<span>10</span>ä½ã€‚ä¸´æ—¶ç¼“å†²åŒºçœ‹ä¸Šå»å°±æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">zzzzzzzzzzzzzzzzzzz</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ©ã€‚æ¥ä¸‹æ¥çš„è¯»å–è°ƒç”¨è¯·æ±‚<span>24</span>ä½æ•°æ®çš„å†…å®¹ï¼Œä½†æ˜¯ä¸´æ—¶ç¼“å†²åŒºçš„ä½æ•°åªæœ‰<span>19</span>äº†ï¼ˆ<span>19 = 32-10-3 </span>ï¼‰ã€‚ã€‚ã€‚ç°åœ¨æ˜¯æ—¶å€™æ¥è¯»å–ä¸‹ä¸€ä¸ªå­—äº†ã€‚è¿™ä¸ªå­—å¤šåŠæ˜¯é›¶å› ä¸ºæˆ‘ä»¬å·²ç»å¯¹å®ƒä»¬è¿›è¡Œäº†æ¸…é™¤ï¼Œä½†æ˜¯å®ƒè¿˜æœ‰å¤šä½™çš„<span>5</span>ä½æˆ‘ä»¬éœ€è¦åœ¨æ¥ä¸‹æ¥è¿›è¡Œè¯»å–ã€‚ç°åœ¨æˆ‘ä»¬å‡†å¤‡è¯»å–ä¸´æ—¶ç¼“å†²åŒºé‡Œé¢æœ‰å…³<span>z</span>çš„æ¯”ç‰¹ä½äº†ï¼š</span> </p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">zzzzzzzzzzzzzzzzzzzzzzzz</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¥ä¸‹æ¥è¯»å–<span>24</span>ä½å¹¶å‘å³ä½ç§»<span>24</span>ä½ã€‚ä¸´æ—¶ç¼“å†²åŒºç°åœ¨å…¨éƒ¨éƒ½æ˜¯<span>0</span>äº†ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç†è®ºä¸Šä½è¯»å–å™¨è®¤ä¸ºè¿˜æœ‰<span>27</span>ä½æ•°æ®ç•™åœ¨ç¼“å†²åŒºæ²¡æœ‰è¿›è¡Œè¯»å–ï¼Œå¦‚æœæˆ‘ä»¬ç»§ç»­è¿›è¡Œè¯»å–çš„è¯ï¼Œè¿™äº›ä½ä¼šè¢«ä½œä¸ºé›¶å¼¹å‡ºæ¥ï¼Œå› ä¸ºæœ€åä¸€ä¸ªå­—èŠ‚çš„å‰<span>3</span>ä½æ˜¯é›¶ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠä¸´æ—¶ç¼“å†²åŒºçš„æœ€å<span>3</span>ä¸ªå­—èŠ‚å…¨éƒ¨æ¸…ä½<span>0</span>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºäº†æŒ‰ç…§å­—è¿›è¡Œå¯¹é½ã€‚ï¼ˆä¸ºäº†å¯¹é½ï¼Œæ‰€ä»¥å¡«å……äº†<span>3</span>ä¸ªå…¨éƒ¨æ˜¯<span>0</span>çš„å­—èŠ‚ã€‚æ‰€ä»¥ä½è¯»å–å™¨è¿™æ—¶å€™çœ‹çš„è¯è¿˜æœ‰<span>3</span>ä¸ªå®Œæ•´çš„å­—èŠ‚æ²¡æœ‰è¯»ã€‚ï¼‰</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯è®©æˆ‘ä»¬å‡è®¾ï¼Œç”±äºæŸç§åŸå› ï¼Œè¶Šè¿‡äº†è¿™ä¸ªç‚¹ä»¥åç”¨æˆ·è¿˜æ˜¯ä¸€ç›´å°è¯•è¿›è¡Œè¯»å–ã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œæ£€æŸ¥ç¼“å†²åŒºä¸­ä½ éœ€è¦è¯»å–çš„å­—çš„æ•°ç›®ï¼Œä»¥åŠæ¯æ¬¡ä½ éœ€è¦ä»ç¼“å†²åŒºå®é™…è¯»å–çš„å­—çš„æƒ…å†µã€‚å¦‚æœä½ å·²ç»è¯»å®Œäº†è¦è¯»çš„å­—ä»¥åï¼Œä¸è¦ç»§ç»­å¢åŠ <span>word_index</span>å¹¶ç»§ç»­è¯»å–æ•°æ®è¿™ä¼šè®©ä½ çš„å†…å­˜å´©æºƒçš„ï¼Œç»™ä½ çš„ç¼“å†²åŒºå¡«å……<span>0</span>æ¥å¯¹é½å¹¶åœ¨ç¼“å†²åŒºçš„ä½æ•°æ·»åŠ <span>32</span>åœ¨æ¯æ¬¡ç»™ç¼“å†²åŒºçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å­—çš„æƒ…å†µä¸‹ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œåœ¨è¯»å–ä½æ•°çš„æ¯æ¬¡å†…éƒ¨å¾ªç¯è°ƒç”¨çš„æ—¶å€™èƒ½ç¡®ä¿åˆ†æ”¯æœ€åæ€»æ˜¯è¿”å›é›¶ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨ä½ æ¯æ¬¡éœ€è¦è¯»å–ä¸€ä¸ªæ–°å­—çš„åœ°æ–¹ï¼Œä½†æ˜¯ä½ è¯»å–çš„ä½ç½®å·²ç»è¶…è¿‡äº†ç¼“å†²åŒºç»“å°¾çš„åœ°æ–¹ä½ ä»ç„¶æ˜¯å®‰å…¨çš„å¹¶ä¸”è¿”å›<span>0</span>ä¸ªæ¯”ç‰¹ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™ä¼¼ä¹æœ‰ç‚¹è¿‡äºè°¨æ…äº†ï¼Œä½†æ˜¯åœ¨å¯¹ç½‘ç»œæ•°æ®è¿›è¡Œè¯»å–çš„æ—¶å€™è¿™ç§è°¨æ…æ˜¯ç‰¹åˆ«é‡è¦çš„ã€‚è¿™æ˜¯é€šè¿‡ç½‘ç»œä¼ è¾“è¿‡æ¥çš„æ•°æ®ã€‚ä¸è¦ç›¸ä¿¡å®ƒä»¬ï¼å¦‚æœä½ çš„è¯»å–å’Œå†™å…¥æ˜¯ä¸åŒæ­¥çš„ï¼Œæˆ–è€…æœ‰äººç»™ä½ å‘é€äº†ä¸€ä¸ªæ¶æ„çš„ç¼“å†²åŒºæ•°æ®ï¼Œä½ å¯èƒ½ä¼šè¢«å›°åœ¨ä¸€ä¸ªå¾ªç¯é‡Œé¢å¹¶ä¸æ–­å°è¯•è¯»å–æ•°æ®ã€‚ç¡®ä¿å†…éƒ¨å¾ªç¯é‡Œé¢æ‰€æœ‰çš„éå†é‡Œé¢çš„è¯»å–éƒ½ä¼šæ£€æµ‹ç¼“å†²åŒºæ˜¯å¦æº¢å‡ºæˆ–è€…æœ‰æŸåï¼Œå¦‚æœç”¨æˆ·è¯»å–çš„ä½ç½®å·²ç»è¶…å‡ºäº†ç¼“å†²åŒºçš„ç»“å°¾è¿™ç§ç­–ç•¥æ€»æ˜¯è¿”å›å®šä¹‰çš„å€¼ï¼ˆ<span>0</span>ï¼‰ï¼Œé€šè¿‡è¿™ç§è¡Œä¸ºä½ å¯ä»¥ç¡®ä¿å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 22.5pt;"><br>å…¶ä»£ç ç±»ä¼¼äºï¼š<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitReader</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint32_t</span> ReadBits( <span class="keyword">int</span> bits )</span><br><span class="line">    &#123;</span><br><span class="line">        assert( bits &gt; <span class="number">0</span> );</span><br><span class="line">        assert( bits &lt;= <span class="number">32</span> );</span><br><span class="line">        assert( m_bitsRead + bits &lt;= m_numBits );</span><br><span class="line"></span><br><span class="line">        m_bitsRead += bits;</span><br><span class="line"></span><br><span class="line">        assert( m_scratchBits &gt;= <span class="number">0</span> &amp;&amp; m_scratchBits &lt;= <span class="number">64</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( m_scratchBits &lt; bits )</span><br><span class="line">        &#123;</span><br><span class="line">            assert( m_wordIndex &lt; m_numWords );</span><br><span class="line">            m_scratch |= <span class="keyword">uint64_t</span>( network_to_host( m_data[m_wordIndex] ) ) &lt;&lt; m_scratchBits;</span><br><span class="line">            m_scratchBits += <span class="number">32</span>;</span><br><span class="line">            m_wordIndex++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        assert( m_scratchBits &gt;= bits );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">uint32_t</span> output = m_scratch &amp; ( (<span class="keyword">uint64_t</span>(<span class="number">1</span>)&lt;&lt;bits) - <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">        m_scratch &gt;&gt;= bits;</span><br><span class="line">        m_scratchBits -= bits;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></p><h2 id="å¦‚ä½•ä½¿ä½æ‰“åŒ…å™¨æ›´æ£’">å¦‚ä½•ä½¿ä½æ‰“åŒ…å™¨æ›´æ£’</h2><br><p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½æ‰“åŒ…å™¨è¿™ç§æ–¹æ³•éå¸¸çš„æ£’ï¼Œä½†æ˜¯ç›´æ¥ç”¨äºè¯»å–å’Œå†™å…¥æ•°æ®åŒ…æ—¶ï¼Œè¿™å¹¶ä¸æ˜¯æœ€æœ‰ç”¨çš„æ–¹æ³•ã€‚æˆ‘è§è¿‡æœ‰å›¢é˜Ÿç›´æ¥ä½¿ç”¨ä½æ‰“åŒ…å™¨è¿›è¡Œè¯»å–å’Œå†™å…¥æ•°æ®åŒ…ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€ä½³çš„æ–¹æ³•ã€‚ä½ ä¼šæ‹¥æœ‰å¾ˆå¤šå¤æ‚çš„ä»£ç ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“å‡ºé”™ã€‚</span> </p><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹è¿™ä¸ªä¾‹å­ï¼š</span> <div><div id="highlighter_384924" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">MaxElements = 32;</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketB</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">numElements;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">elements[MaxElements];</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( BitWriter &amp; writer )</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">        </code><code class="cpp plain">WriteBits( writer, numElements, 6 );</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">            </code><code class="cpp plain">WriteBits( writer, elements[i] );</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( BitReader &amp; reader )</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadBits( reader, numElements, 6 );</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">            </code><code class="cpp plain">ReadBits( reader, elements[i] );</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number21 index20 alt2"><code class="cpp plain">};</code></div><div class="line number21 index20 alt2"><code class="cpp plain"><br></code></div></div></td></tr></table></div></div><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç¬¬ä¸€ç§æ–¹æ³•å¾ˆå®¹æ˜“å‡ºé”™ï¼Œè®©æˆ‘ä»¬å‡è®¾åœ¨ä¸€æ®µæ—¶é—´ä»¥åï¼Œä½ æŠŠ<span>MaxElements</span>çš„å€¼ä»<span>32</span>æé«˜åˆ°<span>100</span>ï¼Œä½†æ˜¯ä½ æ²¡æœ‰ä¿®æ”¹éœ€è¦åºåˆ—åŒ–çš„æ¯”ç‰¹çš„æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åºåˆ—åŒ–çš„æ¯”ç‰¹çš„æ•°ç›®è¿˜æ˜¯<span>6</span>ï¼ˆæ³¨æ„çœ‹<code>WriteBits( writer, numElements, 6 )çš„6ï¼Œ ç°åœ¨éœ€è¦7äº†</code>ï¼‰ã€‚å“å‘¦ã€‚å› ä¸ºä½ å¿˜è®°äº†åœ¨è¯»å–å’Œå†™å…¥å‡½æ•°é‡Œé¢æ›´æ–°æ¯”ç‰¹çš„æ•°ç›®ï¼Œé‚£ä¹ˆç°åœ¨å½“ä½ åœ¨å‘é€æ•°æ®çš„æ—¶å€™ä½ ä¼šæŠŠé«˜ä½è¿›è¡Œæˆªæ–­ã€‚äº‹åè¿½æŸ¥è¿™æ ·çš„äº‹æƒ…æ˜¯ç›¸å½“å›°éš¾çš„ã€‚</span></span><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">è®©æˆ‘ä»¬é€šè¿‡å¢åŠ ä¸€äº›ç¼–è¯‘æ—¶å€™çš„æ£€æµ‹æ¥è®¡ç®—å‡ºæ‰€éœ€è¦çš„æ¯”ç‰¹çš„ä½æ•°ï¼š</span> </span><div><div id="highlighter_404628" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><br><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">uint32_t</span> x&gt; <span class="class"><span class="keyword">struct</span> <span class="title">PopCount</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">enum</span> &#123; a = x - ( ( x &gt;&gt; <span class="number">1</span> ) &amp; <span class="number">0x55555555</span> ),</span><br><span class="line">           b = ( ( ( a &gt;&gt; <span class="number">2</span> ) &amp; <span class="number">0x33333333</span> ) + ( a &amp; <span class="number">0x33333333</span> ) ),</span><br><span class="line">           c = ( ( ( b &gt;&gt; <span class="number">4</span> ) + b ) &amp; <span class="number">0x0f0f0f0f</span> ),</span><br><span class="line">           d = c + ( c &gt;&gt; <span class="number">8</span> ),</span><br><span class="line">           e = d + ( d &gt;&gt; <span class="number">16</span> ),</span><br><span class="line">    result = e &amp; <span class="number">0x0000003f</span> &#125;; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">uint32_t</span> x&gt; <span class="class"><span class="keyword">struct</span> <span class="title">Log2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">enum</span> &#123; a = x | ( x &gt;&gt; <span class="number">1</span> ),</span><br><span class="line">           b = a | ( a &gt;&gt; <span class="number">2</span> ),</span><br><span class="line">           c = b | ( b &gt;&gt; <span class="number">4</span> ),</span><br><span class="line">           d = c | ( c &gt;&gt; <span class="number">8</span> ),</span><br><span class="line">           e = d | ( d &gt;&gt; <span class="number">16</span> ),</span><br><span class="line">           f = e &gt;&gt; <span class="number">1</span>,</span><br><span class="line">    result = PopCount&lt;f&gt;::result &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">int64_t</span> min, <span class="keyword">int64_t</span> max&gt; <span class="class"><span class="keyword">struct</span> <span class="title">BitsRequired</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">uint32_t</span> result = </span><br><span class="line">        ( min == max ) ? <span class="number">0</span> : ( Log2&lt;<span class="keyword">uint32_t</span>(max-min)&gt;::result + <span class="number">1</span> );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BITS_REQUIRED( min, max ) BitsRequired<span class="meta-string">&lt;min,max&gt;::result</span></span></span><br></pre></td></tr></table></figure><br><br></tr></table></div></div><br><p style="margin: 6pt 0cm; line-height: 16.8pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span><br></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å“¦ï¼Œå¤ªå¥½äº†ã€‚æ¨¡æ¿å…ƒç¼–ç¨‹å’Œå®ã€‚æ„Ÿè°¢æ ¼ä¼¦ï¼</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯è¿™ä¹ˆåšçœŸçš„çœŸæ£’ï¼Œç›¸ä¿¡æˆ‘ï¼å› ä¸ºä½ ç°åœ¨æ²¡æœ‰åŠæ³•å¼„ä¹±éœ€è¦çš„æ¯”ç‰¹çš„æ•°ç›®äº†ï¼š</span> </p><div><div id="highlighter_849247" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">MaxElements = 32;</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">MaxElementBits = BITS_REQUIRED( 0, MaxElements ); </code></div><div class="line number3 index2 alt2"> </div><div class="line number4 index3 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketB</code></div><div class="line number5 index4 alt2"><code class="cpp plain">{</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">numElements;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">elements[MaxElements]; </code></div><div class="line number9 index8 alt2"> </div><div class="line number10 index9 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( BitWriter &amp; writer )</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number12 index11 alt1"> </div><div class="line number13 index12 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteBits( writer, numElements, MaxElementBits );</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">            </code><code class="cpp plain">WriteBits( writer, elements[i], 32 );</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number17 index16 alt2"> </div><div class="line number18 index17 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( BitReader &amp; reader )</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadBits( reader, numElements, MaxElementBits );</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">            </code><code class="cpp plain">ReadBits( buffer, elements[i], 32 );</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number25 index24 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å½“ç„¶ç°åœ¨ä¹Ÿæœ‰æœºä¼šçŠ¯é”™ã€‚<span>MaxElements</span>çš„å€¼æ˜¯<span>32</span>æ‰€ä»¥<span>BITS_REQUIRED(0,32) </span>è¿”å›çš„æ˜¯<span>6</span>ï¼Œå› ä¸º<span>5</span>æ¯”ç‰¹æ‰€èƒ½å¾—åˆ°çš„å–å€¼èŒƒå›´åªæœ‰ã€<span>0</span>ï¼Œ<span>31</span>ã€‘ã€‚è¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æœ‰æ¦‚ç‡æŠŠæœªå®šä¹‰çš„å€¼è¿›è¡Œæ’å…¥ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¶æ„å‘é€è€…å‘é€äº†ä¸€ä¸ªå–å€¼èŒƒå›´åœ¨ã€<span>33,63</span>ã€‘ä¹‹é—´çš„å€¼çš„è¯ã€‚å½“ä½ åœ¨é•¿åº¦ä¸º<span>32</span>çš„æ•°ç»„é‡Œé¢è¯»å…¥<span>63</span>ä¸ªæ•´æ•°çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å½“ç„¶ï¼Œä½ å¯ä»¥å¯¹å–å€¼èŒƒå›´è¿›è¡Œé™åˆ¶æ¥ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä»”ç»†æƒ³æƒ³ã€‚ã€‚ã€‚å¦‚æœä½ ä»ä½è¯»å–å™¨å¾—åˆ°äº†ä¸€ä¸ªå€¼ä½†æ˜¯å®ƒè¶…å‡ºäº†å–å€¼èŒƒå›´ï¼Œä½ è¦ä¹ˆå°±æ˜¯è®©è¯»å–å’Œå†™å…¥æ“ä½œå®Œå…¨ä¸åŒæ­¥ï¼ˆè¿™æ˜¾ç„¶æ˜¯ä½ è‡ªå·±çš„é”™è¯¯ï¼‰æˆ–è€…æœ‰äººè¯•å›¾å‘ä½ ã€‚æ‰€ä»¥ï¼Œä¸è¦å¯¹å–å€¼èŒƒå›´è¿›è¡Œé™åˆ¶ã€‚å¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œç›´æ¥åœæ­¢å¯¹æ•°æ®åŒ…çš„è¯»å–å¹¶ä¸”ä¸¢å¼ƒè¿™ä¸ªæ•°æ®åŒ…ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æˆ‘è¿˜æƒ³åœ¨è¿™é‡Œæåˆ°ä¸€ä¸ªé™·é˜±ï¼Œå› ä¸ºè¿™ä¸ªé™·é˜±çœ‹ä¸Šå»å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å…¶å®å®ƒä¼šè®©ä»£ç è¿è¡Œçš„å¾ˆæ…¢ã€‚æˆ‘æœ‰ä¸€æ¬¡ä½¿ç”¨å¼‚å¸¸å®ç°äº†æ•°æ®åŒ…çš„è¯»å–ä¸­æ–­ã€‚å®ƒçœ‹ä¸Šå»å¾ˆæ£’ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªé€’å½’çš„ä½æ‰“åŒ…å™¨è¯»å–å‡½æ•°é‡Œé¢ä½ å¯èƒ½ä¼šæœ‰<span>28</span>å±‚è°ƒç”¨å †æ ˆï¼Œè€Œä½ æƒ³è¦åšçš„ä¸è¿‡æ˜¯å±•å¼€å †æ ˆç„¶åå›åˆ°æ•°æ®åŒ…è¯»å–å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ï¼Œä½†æ˜¯å¼‚å¸¸çœŸçš„å¤ªæ…¢å¤ªæ…¢äº†ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä¸ºäº†å–ä»£å¼‚å¸¸ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è¿è¡Œçš„å¿«å¾—å¤šï¼š<span>1)</span>åœ¨ä½è¯»å–å™¨é‚£é‡Œè®¾ç½®ä¸€ä¸ªå€¼è¡¨æ˜è¿™ä¸ªæ•°æ®åŒ…åº”è¯¥è¢«ä¸¢å¼ƒï¼Œ<span>2</span>ï¼‰å‡çº§æ•°æ®åŒ…çš„è¯»å–å‡½æ•°è®©å®ƒåœ¨è¯»å–å¤±è´¥çš„æ—¶å€™è¿”å›<span>false</span>ã€‚ä½†æ˜¯ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™é‡Œé¢çš„ä»»æ„ä¸€ç§æ–¹æ³•ï¼Œä¸ºäº†å®ç°è¯»å–æ—¶å€™çš„å®‰å…¨æ€§ï¼Œä½ éœ€è¦æ£€æµ‹ä¸Šé¢è¯´çš„æ ‡è®°æˆ–è€…åœ¨æ¯ä¸€æ¬¡è¯»å–çš„æ—¶å€™è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦åˆ™å¦‚æœé‡åˆ°è¯»å–å¤±è´¥çš„æƒ…å†µï¼Œä½ è¿˜æ˜¯ä¼šä¸€ç›´ç»§ç»­è¯»å–ç›´åˆ°æŠŠå†…å­˜å…¨éƒ¨è€—å…‰ã€‚</span></span><div><div id="highlighter_168864" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">MaxElements = 32;</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">MaxElementBits = BITS_REQUIRED( 0, MaxElements );</code></div><div class="line number3 index2 alt2"> </div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PacketB</code></div><div class="line number6 index5 alt1"><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">numElements;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">elements[MaxElements];</code></div><div class="line number9 index8 alt2"><code class="cpp spaces"> </code> </div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Write( BitWriter &amp; writer )</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">        </code><code class="cpp plain">WriteBits( writer, numElements, MaxElementBits );</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">            </code><code class="cpp plain">WriteBits( writer, elements[i], 32 );</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number17 index16 alt2"> </div><div class="line number18 index17 alt1"> </div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Read( BitReader &amp; reader )</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">    </code><code class="cpp plain">{</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">        </code><code class="cpp plain">ReadBits( reader, numElements, MaxElementBits );</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">if</code> <code class="cpp plain">( numElements &gt; MaxElements )</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">        </code><code class="cpp plain">{</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">            </code><code class="cpp plain">reader.Abort();</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">            </code><code class="cpp keyword bold">return</code><code class="cpp plain">;</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">        </code><code class="cpp plain">}</code></div><div class="line number27 index26 alt2"> </div><div class="line number28 index27 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">for</code> <code class="cpp plain">( </code><code class="cpp color1 bold">int</code> <code class="cpp plain">i = 0; i &lt; numElements; ++i )</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">        </code><code class="cpp plain">{</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">            </code><code class="cpp keyword bold">if</code> <code class="cpp plain">( reader.IsOverflow() )</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">                </code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number32 index31 alt1"> </div><div class="line number33 index32 alt2"><code class="cpp spaces">            </code><code class="cpp plain">ReadBits( buffer, elements[i], 32 );</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">        </code><code class="cpp plain">}</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">    </code><code class="cpp plain">}</code></div><div class="line number36 index35 alt1"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½†æ˜¯è¿™ä¹ˆåšäº†ä»¥åï¼Œæ•´ä¸ªè¯»å–å‡½æ•°å°±å¼€å§‹å˜å¾—éå¸¸çš„å¤æ‚ï¼Œè€Œä¸”å¦‚æœæœ‰ä»€ä¹ˆåœ°æ–¹ä½ æ¼è¿‡äº†è¿™äº›æ£€æŸ¥çš„è¯ï¼Œä½ å°±æŠŠè‡ªå·±ç½®äºç¼“å†²åŒºæº¢å‡ºå’Œæ— çº¿å¾ªç¯è¿™ç§å±é™©çš„å¢ƒåœ°ã€‚ä½ ä¸ä¼šå¸Œæœ›åœ¨å†™æ•°æ®åŒ…è¯»å–å‡½æ•°çš„æ—¶å€™å…¨éƒ¨å˜æˆä¸€ä¸ªæ‰‹åŠ¨çš„è¿‡ç¨‹ï¼Œä½ è‚¯å®šæ˜¯å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹æ˜¯è‡ªåŠ¨åŒ–çš„ã€‚å› ä¸ºè¿™ç»™äº†ç¨‹åºå‘˜å¤ªå¤šçŠ¯é”™è¯¯çš„æœºä¼šã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¯·ç»§ç»­å…³æ³¨ä¸‹ä¸€ç¯‡æ–‡ï¼Œåœ¨é‚£ç¯‡æ–‡ç« é‡Œé¢æˆ‘å°†å‘ä½ å±•ç°å¦‚ä½•ä½¿ç”¨<span>C++</span>æ¥ç”¨éå¸¸ç®€æ´çš„æ–¹å¼å®ç°ã€‚</span> </p><b><span style="font-size:12.0pt;line-height:240%;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222;font-weight:normal">è¿™ä¸ªç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« æ˜¯ã€Šåºåˆ—åŒ–ç­–ç•¥ã€‹ã€‚</span> </b><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨è¿™ä¸ªç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•å°†è¯»å–å’Œå†™å…¥å‡½æ•°ç»Ÿä¸€åˆ°ä¸€ä¸ªå•ç‹¬çš„åºåˆ—åŒ–å‡½æ•°é‡Œé¢ï¼Œå®ƒå¯ä»¥åœ¨ä¸å¢åŠ ä»»ä½•è¿è¡Œæ—¶æŸè€—çš„æƒ…å†µåŒæ—¶å¤„ç†è¯»å–å’Œå†™å…¥ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ä»·å€¼çš„è¯ï¼Œè¯·åœ¨<span>patreon</span>ä¸Šæ”¯æŒæˆ‘çš„å†™ä½œï¼Œè¿™æ ·æˆ‘ä¼šå†™çš„æ›´å¿«ã€‚ä½ å¯ä»¥åœ¨<span>BSD 3.0</span>è®¸å¯ä¸‹è®¿é—®åˆ°è¿™ç¯‡æ–‡ç« é‡Œé¢çš„ä»£ç ã€‚éå¸¸æ„Ÿè°¢ä½ çš„æ”¯æŒï¼</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"> </span> </p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ç‰ˆæƒå£°æ˜ã€‘</span> </p><p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åŸæ–‡ä½œè€…æœªåšæƒåˆ©å£°æ˜ï¼Œè§†ä¸ºå…±äº«çŸ¥è¯†äº§æƒè¿›å…¥å…¬å…±é¢†åŸŸï¼Œè‡ªåŠ¨è·å¾—æˆæƒã€‚</span> </p><p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"> </span> </p></div>                    <br>                


      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘/" rel="next" title="kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    kbeä¹‹ubuntuä¸‹çš„ç¼–è¯‘
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/serialization_strategies/" rel="prev" title="æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥">
                <p class="post-nav-pre-next-title">
                    æ„å»ºæ¸¸æˆç½‘ç»œåè®®äºŒä¹‹åºåˆ—åŒ–ç­–ç•¥
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">298</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->

        </div>

        
        

        
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#è‡ªæˆ‘æ€»ç»“"><span class="nav-text">è‡ªæˆ‘æ€»ç»“</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸæ–‡"><span class="nav-text">åŸæ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#background"><span class="nav-text">Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#the-inefficiencies-of-text"><span class="nav-text">The Inefficiencies of Text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#switching-to-a-binary-format"><span class="nav-text">Switching to a Binary Format</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getting-started-with-a-binary-format"><span class="nav-text">Getting Started with a Binary Format</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#read-and-write-functions"><span class="nav-text">Read and Write Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bitpacking"><span class="nav-text">Bitpacking</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#writing-bits"><span class="nav-text">Writing Bits</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reading-bits"><span class="nav-text">Reading Bits</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#beyond-bitpacking"><span class="nav-text">Beyond Bitpacking</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è¯‘æ–‡"><span class="nav-text">è¯‘æ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å¯¼è®º"><span class="nav-text">å¯¼è®º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¯¹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥"><span class="nav-text">å¯¹æ•°æ®åŒ…çš„è¯»å–å’Œå†™å…¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ–‡æœ¬æ ¼å¼å­˜åœ¨çš„é—®é¢˜"><span class="nav-text">æ–‡æœ¬æ ¼å¼å­˜åœ¨çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ‡æ¢æˆäºŒè¿›åˆ¶æ ¼å¼"><span class="nav-text">åˆ‡æ¢æˆäºŒè¿›åˆ¶æ ¼å¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•å¼€å§‹ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼"><span class="nav-text">å¦‚ä½•å¼€å§‹ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¯»å–å’Œå†™å…¥å‡½æ•°"><span class="nav-text">è¯»å–å’Œå†™å…¥å‡½æ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¯»å–å’Œå†™å…¥å‡½æ•°å­˜åœ¨çš„é—®é¢˜"><span class="nav-text">è¯»å–å’Œå†™å…¥å‡½æ•°å­˜åœ¨çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨"><span class="nav-text">å®ç°ä¸€ä¸ªä½æ‰“åŒ…å™¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»¥ä½æ¥å†™å…¥æ•°æ®åŒ…"><span class="nav-text">ä»¥ä½æ¥å†™å…¥æ•°æ®åŒ…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»¥ä½æ¥è¯»å–æ•°æ®åŒ…"><span class="nav-text">ä»¥ä½æ¥è¯»å–æ•°æ®åŒ…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•ä½¿ä½æ‰“åŒ…å™¨æ›´æ£’"><span class="nav-text">å¦‚ä½•ä½¿ä½æ‰“åŒ…å™¨æ›´æ£’</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
