<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if('mmp'){
            let localStoragePasswdKey = 'System Design syllabus' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== 'mmp') {
                    if (password != null) {
                        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤è€Œä¸”å¯†ç é”™è¯¯çš„æ—¶å€™, å› ä¸ºå½“password == nullçš„æ—¶å€™è¯´æ˜ç”¨æˆ·ç‚¹äº†å–æ¶ˆ
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== 'mmp') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="noodle,NA,Syllabus,SystemDesign,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content=". . .">
<meta name="keywords" content="noodle,NA,Syllabus,SystemDesign">
<meta property="og:type" content="article">
<meta property="og:title" content="System Design syllabus">
<meta property="og:url" content="https://hulinhong.com/na_sd_syllabus/index.html">
<meta property="og:site_name" content="ğŸš™">
<meta property="og:description" content=". . .">
<meta property="og:locale" content="en">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">
<meta property="og:updated_time" content="2025-12-17T18:31:29.663Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="System Design syllabus">
<meta name="twitter:description" content=". . .">
<meta name="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>System Design syllabus | ğŸš™</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸš™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ğŸ’¨ ğŸ’¨ ğŸ’¨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">Ã—</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/na_sd_syllabus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">System Design syllabus</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-02T04:19:08+00:00">
                03-02-2019
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Noodle/" itemprop="url" rel="index">
                    <span itemprop="name">Noodle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
              
                <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
              
                <a href="/tags/Syllabus/" rel="tag"><i class="fa fa-tag"></i> Syllabus</a>
              
                <a href="/tags/SystemDesign/" rel="tag"><i class="fa fa-tag"></i> SystemDesign</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/na_js_frontend_syllabus/" rel="next" title="JS frontend syllabus">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  JS frontend syllabus
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/na_frontend_q_top100/" rel="prev" title="JS frontend Q top 100">
              <p class="post-nav-pre-next-title">
                  JS frontend Q top 100
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <p><strong>. . .</strong><a id="more"></a></p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a href="/na_sd_top100/" title="System Design Top 100">System Design Top 100</a></li>
<li>Hello interview:<ul>
<li>youtube: <a href="https://www.youtube.com/@hello_interview/featured" target="_blank" rel="noopener">https://www.youtube.com/@hello_interview/featured</a></li>
<li><a href="https://www.hellointerview.com/" target="_blank" rel="noopener">https://www.hellointerview.com/</a></li>
</ul>
</li>
</ul>
<p>Java-fullstack SD: </p>
<ul>
<li>ç¾å›½ Java å…¨æ ˆå¼€å‘çš„ç³»ç»Ÿè®¾è®¡ï¼ˆSystem Designï¼‰é¢è¯•ä¸­ï¼Œå¸¸è§çš„é¢˜ç›®èšç„¦åœ¨é«˜å¹¶å‘ã€å¯æ‰©å±•æ€§ã€æ•°æ®ä¸€è‡´æ€§ã€å¾®æœåŠ¡æ¶æ„ç­‰æ ¸å¿ƒé—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æœ€å¸¸è€ƒçš„ç³»ç»Ÿè®¾è®¡é¢˜ï¼ˆå°¤å…¶æ˜¯ä¸­é«˜çº§èŒä½æˆ–å…¨æ ˆå²—ä½ï¼‰ï¼š</li>
<li>Java å…¨æ ˆå²—ä½é¢å¤–å¯èƒ½è€ƒå¯Ÿçš„ç³»ç»Ÿè®¾è®¡å†…å®¹:<ul>
<li>å‰åç«¯è§£è€¦è®¾è®¡ï¼ˆAPI è®¾è®¡è§„èŒƒã€æ¥å£ç‰ˆæœ¬ç®¡ç†ï¼‰</li>
<li>å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼ˆSpring Cloud, Netflix OSS, gRPCï¼‰</li>
<li>å‰ç«¯ SSR vs CSR çš„é€‰æ‹©ï¼ˆReact æœåŠ¡ç«¯æ¸²æŸ“ï¼‰</li>
<li>CI/CD ä¸ DevOps é›†æˆï¼ˆJenkins, Docker, Kubernetesï¼‰</li>
<li>æ•°æ®ä¸€è‡´æ€§ä¸ CAP ç†è§£ï¼ˆå°¤å…¶æ˜¯ eventual consistencyï¼‰</li>
</ul>
</li>
</ul>
<p>Backend SD çœŸé¢˜å‚è€ƒ: </p>
<ol>
<li><strong>notification system</strong></li>
<li>twitter</li>
<li>youtube</li>
<li><a href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/uber#1-how-do-we-handle-frequent-driver-location-updates-and-efficient-proximity-searches-on-location-data" target="_blank" rel="noopener">uber</a></li>
<li>comment system</li>
<li>distributed MQ</li>
<li>distributed counter</li>
<li>Data platform</li>
</ol>
<p>Frontend SD:</p>
<ul>
<li>å†™ä¸€ä¸ªæµæ°´ç¯ï¼Œæ”¯æŒè‡ªåŠ¨500ms åˆ‡æ¢å’Œæ‰‹åŠ¨åˆ‡æ¢ä¸¤ç§. Î§</li>
<li>æ‰¾ä¸€ä¸ªcsvæ ¼å¼çš„api table. è·å–å¤„ç†æ•°æ®renderæˆè¡¨å•ï¼Œæ”¯æŒåˆ†é¡µï¼Œæœç´¢</li>
<li>Reactå®ç°èŠ‚æµå’Œé˜²æŠ–</li>
<li>å¦‚ä½•æœ‰å…³ä¸€ä¸ªæ¸²æŸ“å¾ˆæ…¢çš„åˆ—è¡¨ï¼Œæå‡ºä¸¤ç§ä»¥ä¸Šè§£å†³æ–¹æ¡ˆ</li>
<li>å®ç°ä¸€ä¸ªmodalå¼¹çª—ç»„ä»¶ï¼Œæ”¯æŒåµŒå¥—</li>
<li>è®¾è®¡ä¸€ä¸ªå€’è®¡æ—¶å™¨ï¼Œè®¾è®¡ä¸€ä¸ªæ•°å­—è¾“å…¥æ¡†ï¼Œç‚¹å‡»ç¡®å®šæ˜¯å¼€å§‹å€’è®¡æ—¶ï¼Œæ”¯æŒåœæ­¢ï¼Œç»§ç»­ï¼ŒresetåŠŸèƒ½</li>
<li>æ¨¡æ‹Ÿç”µè§†é¥æ§å™¨è¾“å…¥ï¼Œç”»ä¸€ä¸ªå«æœ‰1-9ï¼Œa-zçš„é”®ç›˜ï¼Œé€šè¿‡é”®ç›˜ä¸Šä¸‹å·¦å³æ§åˆ¶æ–¹å‘ï¼Œæ¯å½“æŒ‰ä¸‹enterå½•å…¥å­—ç¬¦ï¼Œå°†ç‚¹å‡»å­—ç¬¦æ˜¾ç¤ºå‡ºæ¥å¹¶ä¸”backspaceæ§åˆ¶åˆ é™¤å­—ç¬¦ã€‚æ³¨æ„åˆ°è¾¾é”®ç›˜è¾¹ç•Œç‰¹æ®Šæƒ…å†µ</li>
<li>ç™»å½•è¡¨å•ï¼ˆè¾“å…¥é‚®ç®±å’Œå¯†ç ï¼Œç®€å•éªŒè¯ï¼‰</li>
<li>ä»APIåŠ è½½ç”¨æˆ·åˆ—è¡¨.</li>
<li>å¤§åˆ—è¡¨æ‡’åŠ è½½</li>
<li>å¤šæ­¥è¡¨å•ï¼ˆWizardï¼‰ï¼ˆæ¯”å¦‚æ³¨å†Œåˆ†æ­¥éª¤ï¼‰</li>
</ul>
<h1 id="Scaling-prerequisite-knowledge"><a href="#Scaling-prerequisite-knowledge" class="headerlink" title="Scaling - prerequisite knowledge"></a>Scaling - prerequisite knowledge</h1><h2 id="Single-server-setup"><a href="#Single-server-setup" class="headerlink" title="Single server setup"></a>Single server setup</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-1.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<h2 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-2.png" alt="alt text"></p>
<p><strong>Non-relational</strong> databases might be the right choice if:</p>
<ul>
<li>â€¢ Your application requires super-low <strong>latency</strong>.</li>
<li>â€¢ Your data are <strong>unstructured</strong>, or you do not have any relational data.</li>
<li>â€¢ You only need to <strong>serialize</strong> and <strong>deserialize</strong> data (JSON, XML, YAML, etc.).</li>
<li>â€¢ You need to store a <strong>massive</strong> amount of data.</li>
</ul>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<h2 id="Vertical-scaling-vs-horizontal-scaling"><a href="#Vertical-scaling-vs-horizontal-scaling" class="headerlink" title="Vertical scaling vs horizontal scaling"></a>Vertical scaling vs horizontal scaling</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-19.png" alt="alt text"></p>
<ul>
<li><strong>Vertical scaling</strong>, referred to as â€œ<strong>scale up</strong>â€<ul>
<li>means the process of adding more power (CPU, RAM, etc.) to your servers.</li>
<li>it comes with serious limitations:<ul>
<li>â€¢ Vertical scaling has a hard limit. It is impossible to add unlimited CPU and memory to a single server.</li>
<li>â€¢ Vertical scaling does not have failover and redundancy. If one server goes down, the website/app goes down with it completely.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Horizontal scaling</strong>, referred to as â€œ<strong>scale out</strong>â€<ul>
<li>allows you to scale by adding more servers into your pool of resources.</li>
<li>Horizontal scaling is more desirable for large scale applications due to the limitations of vertical scaling</li>
</ul>
</li>
</ul>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<h2 id="Load-balancer"><a href="#Load-balancer" class="headerlink" title="Load balancer"></a>Load balancer</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-3.png" alt="alt text"></p>
<p>after a load balancer and a second web server are added, we successfully<br>solved no failover issue and improved the availability of the web tier. Details are explained<br>below:</p>
<ul>
<li>â€¢ If <code>server 1</code> goes offline, all the traffic will be routed to <code>server 2</code>. This prevents the website from going offline. We will also add a new healthy web server to the server pool to balance the load.</li>
<li>â€¢ If the website traffic grows rapidly, and two servers are not enough to handle the traffic, the load balancer can handle this problem gracefully. You only need to <strong>add more servers</strong> to the web server pool, and the load balancer automatically starts to send requests to them.</li>
</ul>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<h2 id="Database-replication"><a href="#Database-replication" class="headerlink" title="Database replication"></a>Database replication</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-4.png" alt="alt text"></p>
<p><strong>Advantages</strong> of database replication:</p>
<ul>
<li>Reliability</li>
<li>Better performance:</li>
<li>High availability: </li>
</ul>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-5.png" alt="alt text"></p>
<h2 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-6.png" alt="alt text"></p>
<p>Considerations for using cache: </p>
<ul>
<li>â€¢ Decide when to use cache. Consider using cache when data is read frequently but modified infrequently. </li>
<li>â€¢ Expiration policy. It is a good practice to implement an expiration policy. Once cached data is expired, it is removed from the cache. </li>
<li>â€¢ Consistency: This involves keeping the data store and the cache in sync. Inconsistency can happen because data-modifying operations on the data store and cache are not in a single transaction.<ul>
<li>When scaling across <strong>multiple regions</strong>, maintaining consistency between the data store and cache is <strong>challenging</strong>. For further details, refer to the paper titled â€œScaling Memcache at Facebookâ€ published by Facebook [7].</li>
</ul>
</li>
<li>â€¢ Mitigating failures: A single cache server represents a potential single point of failure (<strong>SPOF</strong>), defined in Wikipedia as follows: â€œA single point of failure (<strong>SPOF</strong>) is a part of a system that, if it fails, will stop the entire system from workingâ€ [8]. <ul>
<li>As a result, <strong>multiple cache servers</strong> across different data centers are recommended to avoid <strong>SPOF</strong>.</li>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-7.png" alt="alt text"></li>
</ul>
</li>
<li>â€¢ Eviction Policy: Once the cache is full, any requests to add items to the cache might cause existing items to be removed. This is called cache eviction. Least-recently-used (<strong>LRU</strong>) is the most popular cache eviction policy.</li>
</ul>
<h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>A CDN is a network of geographically dispersed servers used to deliver static content. CDN<br>servers cache static content like images, videos, CSS, JavaScript files, etc.</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-8.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-9.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-10.png" alt="alt text"></p>
<h2 id="Stateless-web-tier"><a href="#Stateless-web-tier" class="headerlink" title="Stateless web tier"></a>Stateless web tier</h2><p>Stateful architecture:</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-11.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p>Stateless architecture:</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-12.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-13.png" alt="alt text"></p>
<p>we move the session data out of the web tier and store them in the persistent data store. The shared data store could be a relational database, or Memcached/Redis, NoSQL, etc. </p>
<p>However, The <strong>NoSQL data store is chosen</strong> as it is easy to scale. </p>
<h2 id="Data-center"><a href="#Data-center" class="headerlink" title="Data center"></a>Data center</h2><p>In normal operation, users are geoDNS-routed, also known as geo-routed, to the <strong>closest</strong> data center,</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-14.png" alt="alt text"></p>
<p>â†“ â†“ â†“ â†“ â†“ â†“ â†“ â†“</p>
<p>In the event of any significant data center outage, we direct all traffic to a healthy data center.</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-15.png" alt="alt text"></p>
<h2 id="Message-queue"><a href="#Message-queue" class="headerlink" title="Message queue"></a>Message queue</h2><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-16.png" alt="alt text"></p>
<p>To further scale our system, we need to decouple different components of the system so they<br>can be scaled independently. Messaging queue is a key strategy employed by many real-<br>world distributed systems to solve this problem.</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-17.png" alt="alt text"></p>
<h2 id="Logging-metrics-automation"><a href="#Logging-metrics-automation" class="headerlink" title="Logging, metrics, automation"></a>Logging, metrics, automation</h2><ul>
<li><strong>Logging</strong>: Monitoring error logs is important because it helps to identify errors and problems<br>in the system. </li>
<li><strong>Metrics</strong>: Collecting different types of metrics help us to gain business insights and understand<br>the health status of the system. Some of the following metrics are useful:<ul>
<li>â€¢ Host level metrics: CPU, Memory, disk I/O, etc.</li>
<li>â€¢ Aggregated level metrics: for example, the performance of the entire database tier, cache tier, etc.</li>
<li>â€¢ Key business metrics: daily active users, retention, revenue, etc.</li>
</ul>
</li>
<li><strong>Automation</strong>: CI/CD, When a system gets big and complex, we need to build or leverage automation<br>tools to improve productivity.</li>
</ul>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-18.png" alt="alt text"></p>
<h2 id="Database-scaling-Sharding"><a href="#Database-scaling-Sharding" class="headerlink" title="Database scaling - Sharding"></a>Database scaling - Sharding</h2><p>sharding:</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-20.png" alt="alt text"></p>
<p>It introduces complexities and new <strong>challenges</strong> to the system:</p>
<ul>
<li><strong>Resharding data</strong>: Resharding data is needed when <ul>
<li>1) a single shard could no longer hold more data due to rapid growth.</li>
<li>2) Certain shards might experience shard exhaustion faster than others due to uneven data distribution. </li>
<li><strong>Consistent hashing</strong>, is a commonly used technique to solve this problem.</li>
</ul>
</li>
<li><strong>Celebrity problem</strong>: This is also called a <code>hotspot</code> key problem. Excessive access to a specific shard could cause server overload.<ul>
<li>Imagine data for Katy Perry, Justin Bieber, and Lady Gaga all end up on the same shard. For social applications, that shard will be overwhelmed with read operations. </li>
<li>To solve this problem, we may need to <strong>allocate a shard for each celebrity</strong>. Each shard might even require further partition.</li>
</ul>
</li>
<li><strong>Join and de-normalization</strong>: Once a database has been sharded across multiple servers, it is <strong>hard to perform join operations</strong> across database shards. <ul>
<li>A common workaround is to <code>de-normalize</code>ï¼ˆåè§„èŒƒåŒ–ï¼‰ the database so that queries can be performed in a single table.</li>
</ul>
</li>
</ul>
<h3 id="Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰"><a href="#Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰" class="headerlink" title="Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰"></a>Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰</h3><p><strong>Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰</strong>çš„æ“ä½œï¼Œæ˜¯æŒ‡<strong>åœ¨è®¾è®¡æ•°æ®åº“æ—¶æœ‰æ„å¼•å…¥å†—ä½™</strong>ï¼Œä»¥æå‡è¯»å–æ€§èƒ½ã€å‡å°‘è·¨è¡¨æŸ¥è¯¢ï¼ˆç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼‰ã€‚å¸¸è§çš„å…·ä½“æ“ä½œåŒ…æ‹¬ï¼š</p>
<p><strong>å¤åˆ¶å­—æ®µï¼ˆField Duplicationï¼‰</strong><br>å°†æŸäº›å­—æ®µä»å…³è”è¡¨å¤åˆ¶åˆ°å½“å‰è¡¨ä¸­ï¼Œé¿å… <code>JOIN</code>ã€‚<br>ä¾‹ï¼šå°†ç”¨æˆ·å§“åä» <code>users</code> è¡¨å¤åˆ¶åˆ° <code>orders</code> è¡¨ï¼Œé¿å…æŸ¥è¯¢è®¢å•æ—¶è¿˜è¦ <code>JOIN users</code>ã€‚</p>
<p><strong>åˆå¹¶è¡¨ï¼ˆTable Mergingï¼‰</strong><br>å°†å¤šä¸ªé«˜åº¦å…³è”çš„è¡¨åˆå¹¶æˆä¸€ä¸ªå®½è¡¨ï¼ˆwide tableï¼‰ã€‚<br>ä¾‹ï¼šå°† <code>users</code> å’Œ <code>user_profiles</code> åˆå¹¶æˆä¸€ä¸ª <code>user_full_info</code> è¡¨ã€‚</p>
<p><strong>æ·»åŠ å†—ä½™æ•°æ®ï¼ˆRedundant Dataï¼‰</strong><br>å­˜å‚¨ä¸€äº›è®¡ç®—åçš„å­—æ®µæˆ–èšåˆæ•°æ®ã€‚<br>ä¾‹ï¼šåœ¨å•†å“è¡¨ä¸­ç›´æ¥ä¿å­˜è¯„è®ºæ•°é‡æˆ–å¹³å‡è¯„åˆ†ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å»è¯„è®ºè¡¨è®¡ç®—ã€‚</p>
<p><strong>åµŒå¥—ç»“æ„ï¼ˆå¸¸ç”¨äºNoSQLï¼‰</strong><br>åœ¨æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆå¦‚ MongoDBï¼‰ä¸­ï¼Œç›´æ¥æŠŠå…³è”æ•°æ®åµŒå¥—åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚<br>ä¾‹ï¼šä¸€ä¸ªç”¨æˆ·æ–‡æ¡£ä¸­åµŒå¥—å…¶æ‰€æœ‰è®¢å•æ•°æ®ã€‚</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-21.png" alt="alt text"></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>To conclude this chapter, we provide a summary of how we scale our system to support millions of users:</p>
<ul>
<li>â€¢ Keep web tier <strong>stateless</strong></li>
<li>â€¢ Build <strong>redundancy</strong> at every tier</li>
<li>â€¢ <strong>Cache</strong> data as much as you can</li>
<li>â€¢ Support <strong>multiple</strong> data centers</li>
<li>â€¢ Host static assets in <strong>CDN</strong></li>
<li>â€¢ Scale your data tier by <strong>sharding</strong></li>
<li>â€¢ <strong>Split</strong> tiers into individual services</li>
<li>â€¢ <strong>Monitor</strong> your system and use <strong>automation</strong> tools</li>
</ul>
<h1 id="Back-of-the-envelope-Estimation"><a href="#Back-of-the-envelope-Estimation" class="headerlink" title="Back-of-the-envelope Estimation"></a>Back-of-the-envelope Estimation</h1><p>Back-of-the-envelope estimationï¼ˆç²—ç•¥ä¼°ç®—ï¼‰æ˜¯æŒ‡ç”¨éå¸¸ç®€å•ã€å¿«é€Ÿçš„æ–¹æ³•è¿›è¡Œå¤§è‡´è®¡ç®—ï¼Œä¸è¿½æ±‚ç²¾ç¡®ï¼Œåªä¸ºè¯„ä¼°ä¸€ä¸ªæ•°é‡çº§æˆ–åˆ¤æ–­æŸä¸ªæ–¹æ¡ˆæ˜¯å¦å¯è¡Œã€‚</p>
<p>è¿™ä¸ªæœ¯è¯­æ¥è‡ªå­—é¢æ„æ€ï¼šâ€œåœ¨ä¿¡å°èƒŒé¢éšæ‰‹å†™ä¸‹çš„è®¡ç®—â€ï¼Œå¸¸è§äºç³»ç»Ÿè®¾è®¡ã€å•†ä¸šåˆ†æã€å·¥ç¨‹ç­‰åœºæ™¯</p>
<p>é¢è¯•ä¸­å¸¸è§ï¼š</p>
<blockquote>
<p>â€œä½ è®¾è®¡ä¸€ä¸ªè§†é¢‘ä¸Šä¼ æœåŠ¡ï¼Œé¢„ä¼°æ¯å¤©æœ‰å¤šå°‘æ•°æ®å†™å…¥ï¼Ÿâ€</p>
</blockquote>
<p>ä½ å¯ä»¥ï¼š</p>
<ul>
<li>å‡è®¾æ¯å¤© 1 äº¿ä¸ªç”¨æˆ·ä¸­æœ‰ 1% ä¸Šä¼ è§†é¢‘</li>
<li>æ¯ä¸ªè§†é¢‘å¹³å‡ 100MB</li>
<li>é‚£å°±æ˜¯ï¼š<code>1,000,000 Ã— 100MB</code> = çº¦ 100TB/å¤©</li>
</ul>
<p>è¿™å°±æ˜¯å…¸å‹çš„ back-of-the-envelope ä¼°ç®—ã€‚</p>
<p><strong>Example</strong>: Estimate Twitter <strong>QPS</strong> and <strong>storage</strong> requirements</p>
<p>Please note the following numbers are for this exercise only as they are not real numbers from Twitter:</p>
<p>Assumptions:</p>
<ul>
<li>300 million monthly active users.</li>
<li>50% of users use Twitter daily.</li>
<li>Users post 2 tweets per day on average.</li>
<li>10% of tweets contain media.</li>
<li>Data is stored for 5 years.</li>
</ul>
<p><strong>Answer Estimations</strong>:</p>
<ul>
<li>Query per second (<strong>QPS</strong>) estimate:<ul>
<li>Daily active users (DAU) = <code>300 million * 50%</code> = 150 million</li>
<li>Tweets QPS = <code>150 million * 2 tweets / 24 hour / 3600 seconds</code> =~ <code>3500</code></li>
<li>Peek QPS = <code>2 * QPS</code> = ~7000</li>
</ul>
</li>
<li>We will only estimate media <strong>storage</strong> here.<ul>
<li>Average tweet size:</li>
<li>tweet_id 64 bytes</li>
<li>text 140 bytes</li>
<li>media 1 MB</li>
<li>Media storage: <code>150 million * 2 * 10% * 1 MB</code> = <code>30 TB</code> per day<ul>
<li><code>15M * 2 * 1MB</code>= <code>30M * 1MB</code> = <code>30, 000, 000 MB</code> = <code>30 TB</code></li>
</ul>
</li>
<li>5 - year media storage: <code>30 TB * 365 * 5</code> =~ <code>30 TB * 1500</code> =~ <code>55, 000 TB</code> =~<code>55 PB</code> </li>
</ul>
</li>
</ul>
<h1 id="Framework-for-SD-interview"><a href="#Framework-for-SD-interview" class="headerlink" title="Framework for SD interview"></a>Framework for SD interview</h1><p>If you are asked to <strong>design a news feed</strong> system:</p>
<h2 id="step1-Understand-the-problem-and-establish-design-scope"><a href="#step1-Understand-the-problem-and-establish-design-scope" class="headerlink" title="step1-Understand the problem and establish design scope"></a>step1-Understand the problem and establish design scope</h2><p><strong>â€œDesign scopeâ€</strong> æŒ‡çš„æ˜¯ä½ åœ¨åšç³»ç»Ÿè®¾è®¡æ—¶ï¼Œè¿™ä¸ªè®¾è®¡è¦è§£å†³çš„è¾¹ç•Œã€èŒƒå›´å’Œç›®æ ‡ã€‚<br>æ›´å…·ä½“åœ°è¯´ï¼š <strong>Design scope</strong> = ä½ è¦è®¾è®¡ä»€ä¹ˆã€ä¸è®¾è®¡ä»€ä¹ˆã€è§£å†³å“ªäº›é—®é¢˜ã€è€ƒè™‘åˆ°å“ªäº›åœºæ™¯ã€‚</p>
<p>One of the most important skills as an engineer is to ask the right questions, make the proper assumptions, and gather all the information needed to build a system. </p>
<p>So, do not be afraid to ask questions:</p>
<ul>
<li>Is this a mobile app? Or a web app? Or both?</li>
<li>What are the most important features for the product?</li>
<li>How many friends can a user have?</li>
<li>What is the traffic volume?</li>
</ul>
<h2 id="step2-Propose-high-level-design-and-get-buy-in"><a href="#step2-Propose-high-level-design-and-get-buy-in" class="headerlink" title="step2-Propose high-level design and get buy-in"></a>step2-Propose high-level design and get buy-in</h2><p><strong>â€œbuy-inâ€</strong> æ˜¯ä¸€ä¸ªå•†ä¸šå’Œäº§å“å¼€å‘ä¸­çš„æœ¯è¯­ï¼Œæ„æ€æ˜¯ï¼šå…³é”®ç›¸å…³äººï¼ˆå¦‚å›¢é˜Ÿæˆå‘˜ã€ç®¡ç†å±‚ã€å®¢æˆ·ï¼‰å¯¹æŸä¸ªæè®®æˆ–è®¾è®¡çš„è®¤å¯ã€æ”¯æŒä¸æ‰¿è¯ºã€‚å¯¹æ–¹è®¤å¯å¹¶å†³å®šæŒ‰ç…§è¿™ä¸ªè®¾è®¡æ¨è¿›å¼€å‘ï¼Œè¿™å°±å«ä»–ä»¬ <strong>give buy-in</strong></p>
<p>we aim to develop a high-level design and reach an agreement with the interviewer on the design:</p>
<ul>
<li>Come up with an <strong>initial blueprint</strong> for the design. Ask for feedback. Treat your interviewer as a <strong>teammate</strong> and work together. Many good interviewers love to talk and get involved.</li>
<li><strong>Draw</strong> box diagrams with key components on the <strong>whiteboard</strong> or paper. This might include clients (mobile/web), APIs, web servers, data stores, cache, CDN, message queue, etc.</li>
<li>Do <strong>back-of-the-envelope calculations to evaluate</strong> if your blueprint fits the scale constraints. Think out loud. Communicate with your interviewer if back-of-the-envelope is necessary before diving into it.</li>
</ul>
<p>feed publishing:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-22.png" alt="alt text"></p>
<p>news feed building:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-23.png" alt="alt text"></p>
<h2 id="step3-Design-deep-dive"><a href="#step3-Design-deep-dive" class="headerlink" title="step3-Design deep dive"></a>step3-Design deep dive</h2><p>Sometimes, for a senior candidate interview, the discussion could be on the system performance characteristics, likely focusing<br>on the bottlenecks and resource estimations. In most cases, the interviewer may want you to<br><strong>dig into details</strong> of some system components.</p>
<ul>
<li>For URL shortener, it is interesting to dive into the hash function design that converts a long URL to a short one.</li>
<li>For a chat system, how to reduce latency and how to support online/offline status are two interesting topics.</li>
</ul>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-24.png" alt="alt text"></p>
<h2 id="step4-Wrap-up"><a href="#step4-Wrap-up" class="headerlink" title="step4-Wrap up"></a>step4-Wrap up</h2><p>In this final step, the interviewer might ask you a few <strong>follow-up</strong> questions or give you the freedom to discuss other additional points. Here are a few directions to follow:</p>
<ul>
<li>The interviewer might want you to identify the system <strong>bottlenecks</strong> and discuss potential <strong>improvements</strong></li>
<li><strong>Error cases</strong> (server failure, network loss, etc.) are interesting to talk about.</li>
<li>Operation issues are worth mentioning. How do you <strong>monitor</strong> metrics and error logs? How to <strong>roll out</strong>(é€æ­¥éƒ¨ç½²å¹¶ä¸Šçº¿ç³»ç»Ÿæˆ–åŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥å¼€å§‹ä½¿ç”¨) the system?</li>
<li>How to handle the next <strong>scale curve</strong>(éšç€ç³»ç»Ÿè§„æ¨¡æ‰©å¤§ï¼ˆscaleï¼‰ï¼Œç³»ç»Ÿèµ„æºéœ€æ±‚ã€æ€§èƒ½ç“¶é¢ˆæˆ–æ¶æ„å¤æ‚åº¦ç­‰çš„å¢é•¿è¶‹åŠ¿æ›²çº¿) is also an interesting topic.<ul>
<li>For example, if your current design supports <strong>1 million</strong> users, what changes do you need to make to support <strong>10 million</strong> users?</li>
</ul>
</li>
</ul>
<h2 id="Time-allocation-on-each-step"><a href="#Time-allocation-on-each-step" class="headerlink" title="Time allocation on each step"></a>Time allocation on each step</h2><ul>
<li><strong>Step 1</strong> Understand the problem and establish design scope: <strong>3 - 10 minutes</strong></li>
<li><strong>Step 2</strong> Propose high-level design and get buy-in: <strong>10 - 15 minutes</strong></li>
<li><strong>Step 3</strong> Design deep dive: <strong>10 - 25 minutes</strong></li>
<li><strong>Step 4</strong> Wrap: <strong>3 - 5 minutes</strong></li>
</ul>
<hr>
<h1 id="Layer-4-vs-Layer-7-è´Ÿè½½å‡è¡¡"><a href="#Layer-4-vs-Layer-7-è´Ÿè½½å‡è¡¡" class="headerlink" title="Layer 4 vs Layer 7 è´Ÿè½½å‡è¡¡"></a>Layer 4 vs Layer 7 è´Ÿè½½å‡è¡¡</h1><p><a href="https://www.hellointerview.com/learn/system-design/core-concepts/networking-essentials#load-balancing" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<h2 id="Layer-4-ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡"><a href="#Layer-4-ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡" class="headerlink" title="Layer 4 (ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡)"></a>Layer 4 (ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡)</h2><ul>
<li><strong>å·¥ä½œå±‚çº§</strong>ï¼šTCP/UDP å±‚ï¼ˆIP åœ°å€ + ç«¯å£ï¼‰</li>
<li><strong>åŸç†</strong>ï¼šåªçœ‹ IPã€ç«¯å£ã€åè®®ï¼Œä¸çœ‹åº”ç”¨æ•°æ®ã€‚</li>
<li><strong>è½¬å‘æ–¹å¼</strong>ï¼šåƒè·¯ç”±å™¨ï¼Œæ”¶åˆ°åŒ… â†’ æŒ‰è§„åˆ™è½¬å‘ â†’ ä¸å…³å¿ƒé‡Œé¢æ˜¯ HTTPã€gRPC è¿˜æ˜¯ MySQLã€‚</li>
<li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è½¬å‘å¿«ï¼Œæ€§èƒ½é«˜ï¼ˆå¼€é”€å°ï¼‰</li>
<li>æ”¯æŒé HTTP åè®®ï¼ˆå¦‚ MySQLã€Redisã€gRPCã€WebSocketï¼‰</li>
</ul>
</li>
<li><p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>åªèƒ½åšåˆ°ç®€å•çš„å››å…ƒç»„ï¼ˆæº/ç›®æ ‡ IP+ç«¯å£ï¼‰è½¬å‘</li>
<li>ä¸èƒ½åŸºäº URLã€Cookieã€Header ç­‰åº”ç”¨å±‚ä¿¡æ¯åšè·¯ç”±</li>
</ul>
</li>
</ul>
<p>ğŸ‘‰ <strong>å¸¸è§ç”¨é€”</strong>ï¼šæ•°æ®åº“é›†ç¾¤ï¼ˆMySQLã€Redisï¼‰ã€gRPCã€ä»»æ„ TCP æœåŠ¡ã€VoIPã€æ¸¸æˆæœåŠ¡å™¨ã€‚</p>
<hr>
<h2 id="Layer-7-åº”ç”¨å±‚è´Ÿè½½å‡è¡¡"><a href="#Layer-7-åº”ç”¨å±‚è´Ÿè½½å‡è¡¡" class="headerlink" title="Layer 7 (åº”ç”¨å±‚è´Ÿè½½å‡è¡¡)"></a>Layer 7 (åº”ç”¨å±‚è´Ÿè½½å‡è¡¡)</h2><ul>
<li><strong>å·¥ä½œå±‚çº§</strong>ï¼šåº”ç”¨å±‚ï¼ˆHTTP/HTTPSã€gRPCã€SSE ç­‰ï¼‰</li>
<li><strong>åŸç†</strong>ï¼šèƒ½è§£æè¯·æ±‚å†…å®¹ï¼ˆURLã€Hostã€Cookieã€Headerã€Methodâ€¦ï¼‰ã€‚</li>
<li><strong>è½¬å‘æ–¹å¼</strong>ï¼šæ ¹æ®åº”ç”¨å±‚ä¿¡æ¯åšæ™ºèƒ½è·¯ç”±ã€‚</li>
<li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒåŸºäº URL/è·¯å¾„/åŸŸåçš„è·¯ç”±ï¼ˆå¦‚ <code>/api</code> åˆ° A æœåŠ¡ï¼Œ<code>/static</code> åˆ° B æœåŠ¡ï¼‰</li>
<li>å¯ä»¥åš SSL ç»ˆæ­¢ã€HTTP å‹ç¼©ã€ç¼“å­˜</li>
<li>æ”¯æŒ A/B æµ‹è¯•ã€é‡‘ä¸é›€å‘å¸ƒï¼ˆCanaryï¼‰ã€å¤šç‰ˆæœ¬è·¯ç”±</li>
</ul>
</li>
<li><p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>è¦è§£æ HTTPï¼Œæ€§èƒ½å¼€é”€æ¯” L4 å¤§</li>
<li>åªèƒ½å¤„ç† HTTP/HTTPSã€WebSocketã€gRPC è¿™ç±»åº”ç”¨å±‚åè®®</li>
</ul>
</li>
</ul>
<p>ğŸ‘‰ <strong>å¸¸è§ç”¨é€”</strong>ï¼šWeb åº”ç”¨ã€å¾®æœåŠ¡ç½‘å…³ã€API Gatewayã€CDN è¾¹ç¼˜è´Ÿè½½å‡è¡¡ã€‚</p>
<hr>
<h2 id="æ€»ç»“å¯¹æ¯”"><a href="#æ€»ç»“å¯¹æ¯”" class="headerlink" title="æ€»ç»“å¯¹æ¯”"></a>æ€»ç»“å¯¹æ¯”</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>L4 LB</th>
<th>L7 LB</th>
</tr>
</thead>
<tbody>
<tr>
<td>å±‚çº§</td>
<td>TCP/UDP</td>
<td>HTTP/HTTPS (åº”ç”¨å±‚)</td>
</tr>
<tr>
<td>æ€§èƒ½</td>
<td>é«˜</td>
<td>è¾ƒä½</td>
</tr>
<tr>
<td>åè®®æ”¯æŒ</td>
<td>ä»»æ„ TCP/UDP</td>
<td>ä¸»è¦ HTTP/HTTPS, gRPC, WebSocket</td>
</tr>
<tr>
<td>è·¯ç”±èƒ½åŠ›</td>
<td>åŸºäº IP/ç«¯å£</td>
<td>åŸºäº URL/Host/Header/Cookie</td>
</tr>
<tr>
<td>ç”¨é€”</td>
<td>æ•°æ®åº“ã€TCP æœåŠ¡ã€æ¸¸æˆã€VoIP</td>
<td>Web/API æœåŠ¡ï¼Œå¾®æœåŠ¡è·¯ç”±ï¼ŒCDNï¼Œé‡‘ä¸é›€å‘å¸ƒ</td>
</tr>
</tbody>
</table>
<p>ğŸ‘‰ æœ€ç›´ç™½çš„ä¸€å¥è¯ï¼š</p>
<ul>
<li><strong>L4 = å¿«é€Ÿåˆ†æµï¼ˆä¸æ‡‚å†…å®¹ï¼‰</strong></li>
<li><strong>L7 = æ™ºèƒ½åˆ†æµï¼ˆæ‡‚å†…å®¹ï¼‰</strong></li>
<li>å¦‚æœæ‚¨åœ¨é¢è¯•ä¸­ä½¿ç”¨ websocketsï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ L4 è´Ÿè½½å‡è¡¡å™¨ã€‚å¯¹äºå…¶ä»–æ‰€æœ‰æ–¹é¢ï¼Œç¬¬ 7 å±‚è´Ÿè½½å‡è¡¡å™¨å¯èƒ½æ›´é€‚åˆ</li>
<li>ç¬¬ 7 å±‚è´Ÿè½½å‡è¡¡å™¨éå¸¸é€‚åˆåŸºäº HTTP çš„æµé‡ï¼Œå®ƒå°†æ¶µç›–æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢è®¨è®ºè¿‡çš„æ‰€æœ‰åè®®ï¼Œä½† Websocket é™¤å¤–ã€‚</li>
</ul>
<hr>
<h1 id="Redisçš„ç‰¹æ®Šç”¨æ³•"><a href="#Redisçš„ç‰¹æ®Šç”¨æ³•" class="headerlink" title="Redisçš„ç‰¹æ®Šç”¨æ³•"></a>Redisçš„ç‰¹æ®Šç”¨æ³•</h1><h2 id="Redis-for-Proximity-Search"><a href="#Redis-for-Proximity-Search" class="headerlink" title="Redis for Proximity Search"></a>Redis for Proximity Search</h2><p><a href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/uber#1-how-do-we-handle-frequent-driver-location-updates-and-efficient-proximity-searches-on-location-data" target="_blank" rel="noopener">ç¤ºèŒƒå®ä¾‹ - Uber sd</a></p>
<p>Redis natively supports geospatial indexes with commands like GEOADD and GEOSEARCH. The basic commands are simple:<br>Redis åŸç”Ÿæ”¯æŒä½¿ç”¨ GEOADD å’Œ GEOSEARCH ç­‰å‘½ä»¤çš„åœ°ç†ç©ºé—´ç´¢å¼•ã€‚åŸºæœ¬å‘½ä»¤å¾ˆç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GEOADD key longitude latitude member # Adds &quot;member&quot; to the index at key &quot;key&quot;</span><br><span class="line">GEOSEARCH key FROMLONLAT longitude latitude BYRADIUS radius unit # Searches the index at key &quot;key&quot; at specified position and radius</span><br></pre></td></tr></table></figure>
<p>The search command, in this instance, runs in O(N+log(M)) time where N is the number of elements in the radius and M is the number of items inside the shape.<br>åœ¨æœ¬ä¾‹ä¸­ï¼Œæœç´¢å‘½ä»¤ä»¥ Oï¼ˆN+logï¼ˆMï¼‰ï¼‰ æ—¶é—´è¿è¡Œï¼Œå…¶ä¸­ N æ˜¯åŠå¾„ä¸­çš„å…ƒç´ æ•°ï¼ŒM æ˜¯å½¢çŠ¶å†…çš„é¡¹ç›®æ•°ã€‚</p>
<h2 id="Redis-for-Pub-Sub"><a href="#Redis-for-Pub-Sub" class="headerlink" title="Redis for Pub/Sub"></a>Redis for Pub/Sub</h2><p><a href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/fb-live-comments#2-how-will-the-system-scale-to-support-millions-of-concurrent-viewers" target="_blank" rel="noopener">ç¤ºèŒƒå®ä¾‹ - FB live comment sd</a></p>
<p>Redis natively supports a publish/subscribe (Pub/Sub) messaging pattern, allowing messages to be broadcast to multiple subscribers in real time. This is useful for building chat systems, real-time notifications, or any scenario where you want to decouple message producers from consumers (more discussion on this in our Realtime Updates pattern).<br>Redis åŸç”Ÿæ”¯æŒå‘å¸ƒ/è®¢é˜… ï¼ˆPub/Subï¼‰ æ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼Œå…è®¸å°†æ¶ˆæ¯å®æ—¶å¹¿æ’­ç»™å¤šä¸ªè®¢é˜…è€…ã€‚è¿™å¯¹äºæ„å»ºèŠå¤©ç³»ç»Ÿã€å®æ—¶é€šçŸ¥æˆ–ä»»ä½•æƒ³è¦å°†æ¶ˆæ¯ç”Ÿæˆè€…ä¸ä½¿ç”¨è€…åˆ†ç¦»çš„åœºæ™¯éå¸¸æœ‰ç”¨ï¼ˆåœ¨æˆ‘ä»¬çš„å®æ—¶æ›´æ–°æ¨¡å¼ä¸­å¯¹æ­¤è¿›è¡Œäº†æ›´å¤šè®¨è®ºï¼‰ã€‚</p>
<blockquote>
<p>People frequently call out limitations of Redis Pub/Sub that are no longer true, e.g. Redis pub/sub is now sharded which enables scalability which was not possible in previous versions!<br>äººä»¬ç»å¸¸æŒ‡å‡º Redis Pub/Sub çš„å±€é™æ€§ä¸å†æ­£ç¡®ï¼Œä¾‹å¦‚ Redis Pub/Sub ç°åœ¨æ˜¯åˆ†ç‰‡çš„ï¼Œè¿™å®ç°äº†ä»¥å‰ç‰ˆæœ¬ä¸­æ— æ³•å®ç°çš„å¯æ‰©å±•æ€§ï¼</p>
</blockquote>
<p>The basic commands are straightforward:<br>åŸºæœ¬å‘½ä»¤å¾ˆç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SPUBLISH channel message   # Sends a message to all subscribers of &apos;channel&apos; (the S prefix means &quot;sharded&quot;)</span><br><span class="line">SSUBSCRIBE channel        # Listens for messages on &apos;channel&apos;</span><br></pre></td></tr></table></figure>
<p>When a client subscribes to a channel, it will receive any messages published to that channel as long as the connection remains open. This makes Pub/Sub great for ephemeral, real-time communication, but itâ€™s important to note that messages are not persistedâ€”if a subscriber is offline when a message is published, it will miss that message entirely.<br>å½“å®¢æˆ·ç«¯è®¢é˜…é€šé“æ—¶ï¼Œåªè¦è¿æ¥ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå®ƒå°±ä¼šæ”¶åˆ°å‘å¸ƒåˆ°è¯¥é€šé“çš„ä»»ä½•æ¶ˆæ¯ã€‚è¿™ä½¿å¾— Pub/Sub éå¸¸é€‚åˆä¸´æ—¶çš„å®æ—¶é€šä¿¡ï¼Œä½†è¯·åŠ¡å¿…æ³¨æ„ï¼Œæ¶ˆæ¯ä¸ä¼šæŒä¹…åŒ–â€”â€”å¦‚æœè®¢é˜…è€…åœ¨å‘å¸ƒæ¶ˆæ¯æ—¶å¤„äºç¦»çº¿çŠ¶æ€ï¼Œå®ƒå°†å®Œå…¨é”™è¿‡è¯¥æ¶ˆæ¯ã€‚<br>Pub/Sub clients use a single connection to each node in the cluster (rather than a connection per channel). Generally speaking, this means that in most cases youâ€™ll use a number of connections equal to the number of nodes in your cluster. It also means that you donâ€™t need millions of connections even if you have millions of channels!<br>Pub/Sub å®¢æˆ·ç«¯ä½¿ç”¨ä¸é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å•ä¸ªè¿æ¥ï¼ˆè€Œä¸æ˜¯æ¯ä¸ªé€šé“çš„è¿æ¥ï¼‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ„å‘³ç€åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å°†ä½¿ç”¨ä¸é›†ç¾¤ä¸­èŠ‚ç‚¹æ•°ç›¸ç­‰çš„è¿æ¥æ•°ã€‚è¿™ä¹Ÿæ„å‘³ç€å³ä½¿æ‚¨æ‹¥æœ‰æ•°ç™¾ä¸‡ä¸ªé¢‘é“ï¼Œæ‚¨ä¹Ÿä¸éœ€è¦æ•°ç™¾ä¸‡ä¸ªè¿æ¥ï¼</p>
<blockquote>
<p>Redis Pub/Sub is simple and fast, but not durable. The delivery of messages is â€œat most onceâ€ which means that if a subscriber is offline when a message is published, it will miss that message entirely. If you need message persistence, delivery guarantees, or the ability to replay missed messages, consider using Redis Streams or a dedicated message broker like Kafka or RabbitMQ.<br>Redis Pub/Sub ç®€å•å¿«æ·ï¼Œä½†ä¸è€ç”¨ã€‚æ¶ˆæ¯çš„ä¼ é€’â€œæœ€å¤šä¸€æ¬¡â€ï¼Œè¿™æ„å‘³ç€å¦‚æœè®¢é˜…è€…åœ¨å‘å¸ƒæ¶ˆæ¯æ—¶å¤„äºç¦»çº¿çŠ¶æ€ï¼Œå®ƒå°†å®Œå…¨é”™è¿‡è¯¥æ¶ˆæ¯ã€‚å¦‚æœæ‚¨éœ€è¦æ¶ˆæ¯æŒä¹…æ€§ã€ä¼ é€’ä¿è¯æˆ–é‡æ”¾ä¸¢å¤±æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ Redis Streams æˆ–ä¸“ç”¨æ¶ˆæ¯ä»£ç†ï¼Œä¾‹å¦‚ Kafka æˆ– RabbitMQã€‚</p>
</blockquote>
<p>Pub/Sub is a great fit for interview scenarios where you need to demonstrate real-time communication patterns, but be ready to discuss its limitations and when you might need a more robust solution.<br>Pub/Sub éå¸¸é€‚åˆéœ€è¦æ¼”ç¤ºå®æ—¶é€šä¿¡æ¨¡å¼çš„é¢è¯•åœºæ™¯ï¼Œä½†è¦å‡†å¤‡å¥½è®¨è®ºå…¶å±€é™æ€§ä»¥åŠä½•æ—¶å¯èƒ½éœ€è¦æ›´å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h1 id="Special-Application-Layer-Protocols"><a href="#Special-Application-Layer-Protocols" class="headerlink" title="Special Application Layer Protocols"></a>Special Application Layer Protocols</h1><ul>
<li><a href="https://www.hellointerview.com/learn/system-design/core-concepts/networking-essentials#server-sent-events-sse-real-time-push-communication" target="_blank" rel="noopener">SSE</a><ul>
<li><a href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/fb-live-comments#1-how-can-we-ensure-comments-are-broadcasted-to-viewers-in-real-time" target="_blank" rel="noopener">å®é™…ä½¿ç”¨ç¤ºä¾‹</a></li>
</ul>
</li>
<li><a href="https://www.hellointerview.com/learn/system-design/core-concepts/networking-essentials#webrtc-peer-to-peer-communication" target="_blank" rel="noopener">WebRTC</a></li>
<li><a href="https://www.hellointerview.com/learn/system-design/core-concepts/networking-essentials#websockets-real-time-bidirectional-communication" target="_blank" rel="noopener">WebSocket</a></li>
</ul>
<table>
<thead>
<tr>
<th>æŠ€æœ¯</th>
<th>æ–¹å‘</th>
<th>åè®®</th>
<th>é€‚åˆåœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SSE</strong></td>
<td>å•å‘ (Server â†’ Client)</td>
<td>HTTP</td>
<td>ç®€å•çš„å®æ—¶æ¨é€ï¼ˆé€šçŸ¥ã€è‚¡ä»·ã€æ—¥å¿—ï¼‰</td>
</tr>
<tr>
<td><strong>WebSocket</strong></td>
<td>åŒå‘</td>
<td>TCP</td>
<td>èŠå¤©ã€æ¶ˆæ¯ç³»ç»Ÿã€åä½œåº”ç”¨</td>
</tr>
<tr>
<td><strong>WebRTC</strong></td>
<td>åŒå‘ï¼ˆç‚¹å¯¹ç‚¹ï¼‰</td>
<td>UDPï¼ˆSRTP, SCTPï¼‰</td>
<td>å®æ—¶éŸ³è§†é¢‘ã€P2P æ•°æ®ä¼ è¾“</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="Unique-IDs-generation"><a href="#Unique-IDs-generation" class="headerlink" title="Unique IDs generation"></a>Unique IDs generation</h1><p>Hereâ€™s a <strong>complete production-ready design for generating unique IDs</strong>, suitable for platforms like Twitter or Instagram, focused on <strong>global uniqueness, scalability, and reliability</strong> â€” no code, just design:</p>
<ul>
<li><strong>Globally unique IDs</strong></li>
<li><strong>High throughput, high concurrency</strong></li>
<li><strong>Horizontally scalable</strong></li>
<li><strong>Roughly time-ordered (ascending)</strong></li>
<li><strong>Resilient to clock issues</strong></li>
<li><strong>Sharding-friendly</strong></li>
</ul>
<h2 id="ID-Structure-Based-on-Twitter-Snowflake-64-bits"><a href="#ID-Structure-Based-on-Twitter-Snowflake-64-bits" class="headerlink" title="ID Structure (Based on Twitter Snowflake - 64 bits)"></a>ID Structure (Based on Twitter Snowflake - 64 bits)</h2><p><code>| 1 bit | 41 bits Timestamp | 5 bits Datacenter ID | 5 bits Machine ID | 12 bits Sequence |</code></p>
<p>Field Breakdown:</p>
<ul>
<li><strong>1 bit</strong>: Sign bit, always 0 (because <code>long</code> is signed)</li>
<li><strong>41 bits</strong>: Timestamp in milliseconds (can support ~69 years)</li>
<li><strong>5 bits</strong>: Datacenter ID (up to 32 data centers)</li>
<li><strong>5 bits</strong>: Machine ID (up to 32 machines per DC)</li>
<li><strong>12 bits</strong>: Sequence number (up to 4096 IDs per millisecond per machine)</li>
</ul>
<p>This ensures IDs are globally unique, roughly ordered, and can be generated independently without coordination.</p>
<p>Assigning Datacenter and Machine IDs:</p>
<ul>
<li>Use a configuration service (e.g. Nacos, Consul) or service registry (e.g. ZooKeeper) to assign and manage IDs for each machine.</li>
<li>Ensure no duplication across machines.</li>
</ul>
<h2 id="Handling-Clock-Skew-Time-Rollback"><a href="#Handling-Clock-Skew-Time-Rollback" class="headerlink" title="Handling Clock Skew / Time Rollback"></a>Handling Clock Skew / Time Rollback</h2><p>Primary Strategy:</p>
<ul>
<li>If current time &lt; last generated time:<ul>
<li>If small offset (&lt; 5ms): wait until time catches up</li>
<li>If large offset: log alert and fail the request</li>
</ul>
</li>
</ul>
<p>Preventative Measures:</p>
<ul>
<li>Disable automatic time sync (e.g., via BIOS/NTP)</li>
<li>Use â€œslewâ€ mode NTP to avoid sudden clock jumps</li>
<li>Deploy in HA mode with <strong>backup</strong> ID generators</li>
</ul>
<p>Alternative ID Schemes:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Characteristics</th>
<th>Suitable For</th>
</tr>
</thead>
<tbody>
<tr>
<td>Snowflake-style</td>
<td>Local generation, ordered, scalable</td>
<td>High-scale backend systems</td>
</tr>
<tr>
<td>UUID + DB check</td>
<td>Simple but less performant</td>
<td>Small-scale systems</td>
</tr>
<tr>
<td>Leaf (Meituan)</td>
<td>DB-segment-based allocation</td>
<td>DB-centric systems</td>
</tr>
<tr>
<td>MongoDB ObjectId</td>
<td>Built-in time/machine info</td>
<td>Document stores like MongoDB</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="How-to-choose-DB"><a href="#How-to-choose-DB" class="headerlink" title="How to choose DB"></a>How to choose DB</h1><p>Many candidates trip themselves up by trying to insert a comparison of relational and NoSQL databases into their answer. The reality is that these two technologies are highly overlapping and broad statements like â€œI need to use a relational database because I have relationships in my dataâ€ (NoSQL databases can work great for this) or â€œIâ€™ve gotta use NoSQL because I need scale and performanceâ€ (relational databases, used correctly, perform and scale incredibly well) are often yellow flags that reveal inexperience.<br>è®¸å¤šè€ƒç”Ÿè¯•å›¾åœ¨ä»–ä»¬çš„ç­”æ¡ˆä¸­æ’å…¥å…³ç³»æ•°æ®åº“å’Œ NoSQL æ•°æ®åº“çš„æ¯”è¾ƒï¼Œä»è€Œç»Šå€’äº†è‡ªå·±ã€‚ç°å®æƒ…å†µæ˜¯ï¼Œè¿™ä¸¤ç§æŠ€æœ¯æ˜¯é«˜åº¦é‡å çš„ï¼Œå¹¶ä¸”åƒâ€œæˆ‘éœ€è¦ä½¿ç”¨å…³ç³»æ•°æ®åº“ï¼Œå› ä¸ºæˆ‘çš„æ•°æ®ä¸­æœ‰å…³ç³»â€ï¼ˆNoSQL æ•°æ®åº“å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰æˆ–â€œæˆ‘å¿…é¡»ä½¿ç”¨ NoSQLï¼Œå› ä¸ºæˆ‘éœ€è¦æ‰©å±•å’Œæ€§èƒ½â€ï¼ˆå…³ç³»æ•°æ®åº“ï¼Œæ­£ç¡®ä½¿ç”¨ï¼Œæ€§èƒ½å’Œæ‰©å±•éå¸¸å¥½ï¼‰é€šå¸¸æ˜¯è¡¨æ˜ç¼ºä¹ç»éªŒçš„é»„ä¿¡å·ã€‚</p>
<p>Hereâ€™s the truth: most interviewers donâ€™t need an explicit comparison of SQL and NoSQL databases in your session and itâ€™s a pothole you should completely avoid. Instead, talk about what you know about the database youâ€™re using and how it will help you solve the problem at hand. If youâ€™re asked to compare, focus on the differences in the databases youâ€™re familiar with and how they would impact your design. So â€œIâ€™m using Postgres here because its ACID properties will allow me to maintain data integrityâ€ is a great opener.<br>äº‹å®æ˜¯è¿™æ ·çš„ï¼š å¤§å¤šæ•°é¢è¯•å®˜ä¸éœ€è¦åœ¨æ‚¨çš„ä¼šè¯ä¸­å¯¹ SQL å’Œ NoSQL æ•°æ®åº“è¿›è¡Œæ˜ç¡®æ¯”è¾ƒ ï¼Œè¿™æ˜¯ä¸€ä¸ªæ‚¨åº”è¯¥å®Œå…¨é¿å…çš„å‘æ´¼ã€‚ç›¸åï¼Œè¯·è°ˆè°ˆæ‚¨å¯¹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“çš„äº†è§£ä»¥åŠå®ƒå°†å¦‚ä½•å¸®åŠ©æ‚¨è§£å†³æ‰‹å¤´çš„é—®é¢˜ã€‚å¦‚æœè¦æ±‚æ‚¨è¿›è¡Œæ¯”è¾ƒï¼Œè¯·å…³æ³¨æ‚¨ç†Ÿæ‚‰çš„æ•°æ®åº“ä¸­çš„å·®å¼‚ä»¥åŠå®ƒä»¬å°†å¦‚ä½•å½±å“æ‚¨çš„è®¾è®¡ã€‚å› æ­¤ï¼Œâ€œæˆ‘åœ¨è¿™é‡Œä½¿ç”¨ Postgresï¼Œå› ä¸ºå®ƒçš„ ACID å±æ€§å°†ä½¿æˆ‘èƒ½å¤Ÿä¿æŒæ•°æ®å®Œæ•´æ€§â€æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€åœºç™½ã€‚</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><strong>MongoDB</strong></th>
<th><strong>Cassandra</strong></th>
<th><strong>DynamoDB</strong></th>
<th><strong>PostgreSQL</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åˆ†ç±»</strong></td>
<td>NoSQL â†’ æ–‡æ¡£å‹</td>
<td>NoSQL â†’ å®½åˆ—å­˜å‚¨</td>
<td>NoSQL â†’ Key-Value/æ–‡æ¡£å‹</td>
<td>å…³ç³»å‹æ•°æ®åº“ (RDBMS)</td>
</tr>
<tr>
<td><strong>æ•°æ®æ¨¡å‹</strong></td>
<td>JSON æ–‡æ¡£ï¼Œçµæ´» schema</td>
<td>Row â†’ åŠ¨æ€åˆ—ï¼ˆå®½åˆ—ï¼‰ï¼ŒBigtable æ¨¡å‹</td>
<td>Item (JSON-like)ï¼ŒPK+SK</td>
<td>å›ºå®šè¡¨ç»“æ„ï¼Œè¡Œ/åˆ—</td>
</tr>
<tr>
<td><strong>æ‰©å±•æ€§</strong></td>
<td>åˆ†ç‰‡æ”¯æŒï¼Œå¼ºå¤§ä½†è¿ç»´å¤æ‚</td>
<td>æ°´å¹³æ‰©å±•æå¼ºï¼Œå»ä¸­å¿ƒåŒ–æ— å•ç‚¹</td>
<td>æ‰˜ç®¡æœåŠ¡ï¼Œè‡ªåŠ¨æ‰©å±•</td>
<td>å‚ç›´æ‰©å±•ä¸ºä¸»ï¼ˆåˆ†è¡¨/åˆ†åº“æ‰æ°´å¹³æ‰©å±•ï¼‰</td>
</tr>
<tr>
<td><strong>å†™å…¥æ€§èƒ½</strong></td>
<td>é«˜ï¼ˆé€‚åˆæ–‡æ¡£æ‰¹é‡å†™å…¥ï¼‰</td>
<td>æé«˜ï¼ˆappend-onlyï¼Œå†™å…¥ä¸ºä¸»ï¼‰</td>
<td>é«˜ï¼ˆä½†è´¹ç”¨é«˜ï¼‰</td>
<td>ä¸­ç­‰ï¼ˆäº‹åŠ¡å¼ºï¼Œå†™æ”¾å¤§å¤§ï¼‰</td>
</tr>
<tr>
<td><strong>è¯»å–æ€§èƒ½</strong></td>
<td>çµæ´»æŸ¥è¯¢ï¼Œç´¢å¼•ä¸°å¯Œ</td>
<td>æŒ‰ä¸»é”®+clustering key å¿«ï¼ŒèŒƒå›´æŸ¥è¯¢å¼º</td>
<td>æŒ‰ PK+SK å¿«ï¼Œå¤æ‚æŸ¥è¯¢å—é™</td>
<td>å¼ºï¼ˆSQL çµæ´»ï¼Œç´¢å¼•ä¸°å¯Œï¼‰</td>
</tr>
<tr>
<td><strong>äº‹åŠ¡æ”¯æŒ</strong></td>
<td>å•æ–‡æ¡£å¼ºï¼Œå¤šæ–‡æ¡£å¼±</td>
<td>å¼±ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼Œè½»äº‹åŠ¡ï¼‰</td>
<td>å¼±ï¼ˆå•é¡¹äº‹åŠ¡ï¼Œæœ€ç»ˆä¸€è‡´æ€§ï¼‰</td>
<td>å¼ºï¼ˆACID å®Œæ•´æ”¯æŒï¼‰</td>
</tr>
<tr>
<td><strong>æŸ¥è¯¢èƒ½åŠ›</strong></td>
<td>çµæ´»ï¼ˆä¸°å¯Œçš„ query/filterï¼‰</td>
<td>å—é™ï¼ˆå¿…é¡»å›´ç»•æŸ¥è¯¢æ¨¡å¼å»ºè¡¨ï¼‰</td>
<td>å—é™ï¼ˆä¾èµ– PK+SKï¼ŒäºŒçº§ç´¢å¼•é¢å¤–æ”¶è´¹ï¼‰</td>
<td>æœ€å¼ºï¼ˆSQL + join + èšåˆï¼‰</td>
</tr>
<tr>
<td><strong>å…¸å‹åœºæ™¯</strong></td>
<td>CRUD å¯†é›†å‹åº”ç”¨ã€å®æ—¶åˆ†æã€JSON æ•°æ®</td>
<td>å¤§è§„æ¨¡å†™å¯†é›†åœºæ™¯ã€æ—¶åºã€æ¶ˆæ¯æµ(å¦‚twitter timeline/facebook feed)</td>
<td>ç”¨æˆ·ä¼šè¯è¡¨ï¼ŒKV å­˜å‚¨ï¼Œç®€å•é«˜å¹¶å‘æŸ¥è¯¢</td>
<td>æ ¸å¿ƒäº¤æ˜“ï¼Œåå°ç®¡ç†ï¼Œå¤æ‚åˆ†æ</td>
</tr>
<tr>
<td><strong>è¿ç»´</strong></td>
<td>è‡ªå»ºé›†ç¾¤éœ€è¦ç»éªŒ</td>
<td>è‡ªå»ºå¤æ‚ï¼Œéœ€ä¸“ä¸šè¿ç»´</td>
<td>AWS æ‰˜ç®¡ï¼Œæœ€çœå¿ƒ</td>
<td>ç®€å•ï¼Œç”Ÿæ€æˆç†Ÿ</td>
</tr>
<tr>
<td><strong>æˆæœ¬</strong></td>
<td>å¼€æºå…è´¹ï¼Œè‡ªæ‰˜ç®¡ç¡¬ä»¶æˆæœ¬</td>
<td>å¼€æºå…è´¹ï¼Œè‡ªæ‰˜ç®¡ç¡¬ä»¶æˆæœ¬</td>
<td>é«˜ï¼ˆè¯»å†™æŒ‰é‡è®¡è´¹ï¼Œæµé‡å¤§æè´µï¼‰</td>
<td>å¼€æºå…è´¹ï¼Œè‡ªæ‰˜ç®¡ä¾¿å®œ</td>
</tr>
</tbody>
</table>
<hr>
<p>ğŸ“Š ç”¨ä¸€å¥è¯æ€»ç»“</p>
<ul>
<li><strong>DynamoDB</strong> â†’ äº‘ç«¯æ‰˜ç®¡ KV/æ–‡æ¡£åº“ï¼Œé€‚åˆ <strong>ä¸­é«˜å¹¶å‘ã€æ¨¡å¼ç¨³å®š</strong> çš„ä¸šåŠ¡æ•°æ®ï¼Œä½† <strong>è´µ</strong>ã€‚<ul>
<li>å‚è€ƒæ–‡ç« : <a href="https://www.hellointerview.com/learn/system-design/deep-dives/dynamodb#fault-tolerance-and-availability" target="_blank" rel="noopener">https://www.hellointerview.com/learn/system-design/deep-dives/dynamodb#fault-tolerance-and-availability</a></li>
</ul>
</li>
<li><strong>MongoDB</strong> â†’ çµæ´»çš„ <strong>æ–‡æ¡£å‹æ•°æ®åº“</strong>ï¼Œé€‚åˆä¸­ç­‰è§„æ¨¡æ•°æ®ã€å˜åŒ–é¢‘ç¹çš„ schemaã€‚</li>
<li><strong>Cassandra</strong> â†’ æµ·é‡å†™å…¥ã€<strong>æ—¶é—´åºåˆ—/æ—¥å¿—å‹ç³»ç»Ÿ</strong>é¦–é€‰ï¼Œå¼ºæ°´å¹³æ‰©å±•ï¼Œä½†æŸ¥è¯¢æ¨¡å¼å—é™ã€‚</li>
<li><strong>PostgreSQL</strong> â†’ ç»å…¸ <strong>å…³ç³»å‹æ•°æ®åº“</strong>ï¼Œäº‹åŠ¡ã€SQL æŸ¥è¯¢ã€èšåˆåˆ†æèƒ½åŠ›æœ€å¼ºï¼Œä½†æ‰©å±•æ€§æœ‰é™ã€‚</li>
</ul>
<hr>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ MongoDB / DynamoDBï¼Ÿ</p>
<ul>
<li>æ•°æ®ç»“æ„çµæ´»ï¼Œå­—æ®µé¢‘ç¹å˜åŠ¨, éœ€è¦ <strong>NoSQL ç‰ˆçš„ MySQL</strong></li>
<li>æ¯”å¦‚æŸä¸ªè®¢å•å•æ—¥ä¸€äº¿æ¡, é‚£å°±é€‰ MongoDB, <strong>å› ä¸º DynamoDBå¾ˆè´µ</strong>; ä¸­å°å…¬å¸ä¸æƒ³è‡ªå·±ç»´æŠ¤ç®¡ç†DBçš„å•æ—¥åƒä¸‡çº§æ•°æ®é‡å¯ä»¥é€‰DynamoDB</li>
<li>éœ€è¦<strong>å¤æ‚æŸ¥è¯¢æˆ–èšåˆ</strong></li>
<li>æ•°æ®é‡ä¸æ˜¯è¶…å¤§è§„æ¨¡åˆ†å¸ƒå¼ï¼Œæˆ–ä½ èƒ½æ¥å—é€šè¿‡ Sharding æ‰©å®¹</li>
<li>éœ€è¦äº‹åŠ¡æˆ–å¼ºä¸€è‡´æ€§</li>
</ul>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ Cassandraï¼Ÿ</p>
<ul>
<li>é«˜å¹¶å‘ã€å¤§åå<strong>å†™å…¥</strong>, ä½†æ˜¯è¯»ä¸å¤ªè¡Œ</li>
<li><strong>é€‚åˆç©¶æå¤§é‡çš„æ—¥å¿—ç±»ç³»ç»Ÿ</strong>, æˆ–è€…æ¶ˆæ¯æµ(å¦‚twitter timeline/facebook feed)</li>
<li>å®¹å¿æœ€ç»ˆä¸€è‡´æ€§ï¼ˆå¦‚æ—¥å¿—ã€ä¼ æ„Ÿå™¨æ•°æ®ï¼‰</li>
<li>éœ€è¦é«˜å¯ç”¨ã€é«˜æ‰©å±•æ€§ï¼ˆè·¨æ•°æ®ä¸­å¿ƒï¼‰</li>
<li>æƒ³é¿å…å•ç‚¹æ•…éšœ</li>
</ul>
<p>ç®€æ˜æ€»ç»“ï¼š</p>
<ul>
<li><strong>MongoDB / DynamoDB æ›´åƒ NoSQL ç‰ˆçš„ MySQL</strong>ï¼Œå¼€å‘å‹å¥½ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œé€‚åˆæ•°æ®é©±åŠ¨å‹åº”ç”¨ã€‚</li>
<li><strong>Cassandra æ˜¯å†™å…¥ååæ€ªå…½</strong>ï¼Œé€‚åˆåˆ†å¸ƒå¼ã€æµ·é‡æ•°æ®å†™å…¥ä½†æŸ¥è¯¢ç®€å•çš„åœºæ™¯ã€‚</li>
</ul>
<p>é€‰è°ï¼šè¦çœ‹ä½ çš„ä¸šåŠ¡<strong>å†™å¤š</strong>è¿˜æ˜¯<strong>è¯»å¤š</strong>ï¼Œæ•°æ®ç»“æ„æ˜¯å¦å›ºå®šï¼Œæ˜¯å¦è¿½æ±‚å¼ºä¸€è‡´æˆ–é«˜å¯ç”¨</p>
<h2 id="ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«"><a href="#ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«"></a>ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«</h2><p>æ¯”å¦‚è®°å½•ç”¨æˆ·çš„ç™»å½•æ—¥å¿—: </p>
<p>ğŸ“Š Cassandraï¼ˆå®½åˆ—æ¨¡å‹ï¼‰</p>
<ul>
<li><strong>ä¸€è¡Œ = ä¸€ä¸ªç”¨æˆ·</strong></li>
<li><strong>åˆ— = æ¯æ¬¡ç™»å½•</strong>ï¼ˆclustering key = login_timeï¼‰ï¼Œéƒ½æŒ‚åœ¨åŒä¸€è¡Œä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Row(user_id=123):</span><br><span class="line">   2025-08-16T10:00 â†’ &#123;ip: &quot;1.1.1.1&quot;, device: &quot;iPhone&quot;&#125;</span><br><span class="line">   2025-08-16T15:00 â†’ &#123;ip: &quot;2.2.2.2&quot;, device: &quot;Mac&quot;&#125;</span><br><span class="line">   2025-08-17T09:00 â†’ &#123;ip: &quot;3.3.3.3&quot;, device: &quot;Windows&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>ğŸ‘‰ æŸ¥è¯¢æœ€è¿‘ N æ¬¡ï¼šå¤©ç„¶é¡ºåºå­˜å‚¨ï¼Œç›´æ¥ slice å¾ˆå¿«ã€‚<br>ğŸ‘‰ å­˜å‚¨ç¨€ç–ã€å†™å…¥ append-onlyï¼Œéå¸¸é«˜æ•ˆã€‚<br>ğŸ‘‰ ç¼ºç‚¹ï¼šæ•°æ®å»ºæ¨¡å¿…é¡»å›´ç»•æŸ¥è¯¢æ¨¡å¼æ¥è®¾è®¡ï¼ˆä¸èƒ½éšä¾¿ joinï¼‰ï¼Œå¦åˆ™æŸ¥èµ·æ¥å¾ˆç—›è‹¦ã€‚</p>
<hr>
<p>ğŸ“Š PostgreSQL</p>
<ul>
<li><strong>ä¸€è¡Œ = ä¸€æ¬¡ç™»å½•</strong></li>
<li>è¡¨ç»“æ„å›ºå®šï¼š</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">user_id | login_time         | ip       | device</span><br><span class="line"><span class="comment">--------+-------------------+----------+---------</span></span><br><span class="line">123     | 2025-08-16 10:00  | 1.1.1.1  | iPhone</span><br><span class="line">123     | 2025-08-16 15:00  | 2.2.2.2  | Mac</span><br></pre></td></tr></table></figure>
<p>ğŸ‘‰ ä¼˜ç‚¹ï¼šSQL é€šç”¨ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢ã€‚<br>ğŸ‘‰ ç¼ºç‚¹ï¼šå†™å¤šæ—¶è¡¨ä¼šæ— é™è†¨èƒ€ï¼Œéœ€è¦åˆ†è¡¨åˆ†åŒºã€‚</p>
<hr>
<p>ğŸ“Š DynamoDB</p>
<ul>
<li><strong>ä¸€è¡Œ = ä¸€æ¬¡ç™»å½•</strong>ï¼ˆå’Œ PostgreSQL ä¸€æ ·ï¼‰</li>
<li>ä½†å­˜å‚¨æ˜¯ JSON-like itemï¼Œæ¯ä¸ª item ç‹¬ç«‹ï¼š</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"user_id"</span>: <span class="string">"123"</span>,</span><br><span class="line">  <span class="attr">"login_time"</span>: <span class="string">"2025-08-16T10:00"</span>,</span><br><span class="line">  <span class="attr">"ip"</span>: <span class="string">"1.1.1.1"</span>,</span><br><span class="line">  <span class="attr">"device"</span>: <span class="string">"iPhone"</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"user_id"</span>: <span class="string">"123"</span>,</span><br><span class="line">  <span class="attr">"login_time"</span>: <span class="string">"2025-08-16T15:00"</span>,</span><br><span class="line">  <span class="attr">"ip"</span>: <span class="string">"2.2.2.2"</span>,</span><br><span class="line">  <span class="attr">"device"</span>: <span class="string">"Mac"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ğŸ‘‰ ä¼˜ç‚¹ï¼šæŒ‰ <code>user_id + login_time</code> æŸ¥è¯¢å¿«ï¼Œæ°´å¹³æ‰©å±•ç®€å•ã€‚<br>ğŸ‘‰ ç¼ºç‚¹ï¼šæ¯æ¬¡å†™å°±æ˜¯ä¸€æ¬¡ item æ’å…¥ï¼Œè¯»å†™è´¹ç”¨ç›´æ¥æŒ‰æ¬¡æ•°ç®—ï¼Œæˆæœ¬é«˜ã€‚</p>
<hr>
<p>ğŸ“Š æ€»ç»“å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>PostgreSQL</th>
<th>DynamoDB</th>
<th>Cassandra</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å­˜å‚¨æ¨¡å‹</strong></td>
<td>ä¸€è¡Œ = ä¸€æ¬¡ç™»å½•</td>
<td>ä¸€è¡Œ = ä¸€æ¬¡ç™»å½•</td>
<td>ä¸€è¡Œ = ä¸€ä¸ªç”¨æˆ·ï¼Œåˆ— = ç™»å½•è®°å½•</td>
</tr>
<tr>
<td><strong>æ‰©å±•æ€§</strong></td>
<td>å·®ï¼Œéœ€è¦åˆ†è¡¨åˆ†åº“</td>
<td>AWS æ‰˜ç®¡ï¼Œè‡ªåŠ¨æ‰©å±•</td>
<td>æ°´å¹³æ‰©å±•å¼ºï¼Œè‡ªæ‰˜ç®¡</td>
</tr>
<tr>
<td><strong>æŸ¥è¯¢æ¨¡å¼</strong></td>
<td>SQL çµæ´»</td>
<td>å—é™äº PK+SK è®¾è®¡</td>
<td>åŸºäº Partition Key + Clustering Key</td>
</tr>
<tr>
<td><strong>å†™å…¥æˆæœ¬</strong></td>
<td>å­˜å‚¨ä¾¿å®œ</td>
<td>æ¯å†™ä¸€æ¬¡éƒ½è®¡è´¹ï¼Œè´µ</td>
<td>Append å†™ï¼Œé«˜æ•ˆä¾¿å®œ</td>
</tr>
<tr>
<td><strong>å…¸å‹é€‚ç”¨</strong></td>
<td>ä¸­å°è§„æ¨¡ï¼Œçµæ´»æŸ¥è¯¢</td>
<td>ä¸­ç­‰è§„æ¨¡ï¼Œç®€å•é«˜å¹¶å‘æŸ¥è¯¢</td>
<td>å¤§è§„æ¨¡å†™å…¥ï¼Œæ—¶é—´åºåˆ—/æ—¥å¿—æµ</td>
</tr>
</tbody>
</table>
<hr>
<p>âœ… æ‰€ä»¥ï¼š</p>
<ul>
<li><strong>PostgreSQL / DynamoDB</strong> â†’ æ¯æ¬¡ç™»å½•å°±æ˜¯æ’å…¥ä¸€è¡Œã€‚</li>
<li><strong>Cassandra</strong> â†’ æŠŠä¸€ä¸ªç”¨æˆ·çš„ä¸€ç”Ÿç™»å½•éƒ½æ”¾åœ¨åŒä¸€è¡Œé‡Œï¼ˆåªæ˜¯è¡Œå¯ä»¥æ— é™å®½ï¼Œåˆ—æ˜¯åŠ¨æ€è¿½åŠ çš„ï¼‰ã€‚</li>
</ul>
<hr>
<h1 id="Algorithms-to-fetch-nearby-stuff"><a href="#Algorithms-to-fetch-nearby-stuff" class="headerlink" title="Algorithms to fetch nearby stuff"></a>Algorithms to fetch nearby stuff</h1><p>this kind of algo is the key to design a efficient <code>LBS</code>(location-based service), which is to find nearby businesses for a given radius and locations.</p>
<h2 id="Geohash"><a href="#Geohash" class="headerlink" title="Geohash"></a>Geohash</h2><p><strong>Geohash</strong> æ˜¯ä¸€ç§å°†<strong>ç»çº¬åº¦åæ ‡ç¼–ç ä¸ºå­—ç¬¦ä¸²</strong>çš„ç©ºé—´ç´¢å¼•æ–¹æ³•ï¼Œé€‚ç”¨äºåœ°ç†ä½ç½®çš„å¿«é€ŸæŸ¥è¯¢ã€æ’åºå’Œåˆ†ç‰‡ï¼Œå¹¿æ³›ç”¨äºåœ°å›¾æœåŠ¡ã€LBSã€æ•°æ®åº“åœ°ç†ç´¢å¼•ç­‰åœºæ™¯ã€‚</p>
<p>æ³¨: <strong>Redis çš„ GEOADD å’ŒGEOSEARCH å‘½ä»¤å°±æ˜¯ç”¨çš„è¿™ä¸ªç®—æ³•.</strong></p>
<p><strong>I</strong>t works by reducing the two-dimensional longitude and <strong>latitude</strong> data into a one-dimensional string of letters and digits. Geohash algorithms work by recursively dividing the world into smaller and smaller grids with each additional bit.</p>
<p>å®ƒé€šè¿‡å°†äºŒç»´çš„ç»åº¦å’Œçº¬åº¦æ•°æ®ç®€åŒ–ä¸ºä¸€ä¸ªç”±å­—æ¯å’Œæ•°å­—ç»„æˆçš„ä¸€ç»´å­—ç¬¦ä¸²æ¥å®ç°ã€‚åœ°ç†å“ˆå¸Œç®—æ³•é€šè¿‡éšç€æ¯å¢åŠ ä¸€ä½è€Œé€’å½’åœ°å°†ä¸–ç•Œåˆ’åˆ†ä¸ºè¶Šæ¥è¶Šå°çš„ç½‘æ ¼æ¥èµ·ä½œç”¨ã€‚ </p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-43.png" alt="alt text"></p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-44.png" alt="alt text"></p>
<p>Geohash é€šè¿‡é€’å½’äºŒåˆ†æ³•å¯¹<strong>ç»åº¦ã€çº¬åº¦äº¤é”™ç¼–ç </strong>ï¼Œç„¶åæ˜ å°„ä¸º Base32 å­—ç¬¦ä¸²ï¼š</p>
<ul>
<li>ç»åº¦èŒƒå›´ï¼š<code>[-180, 180]</code>ï¼Œçº¬åº¦èŒƒå›´ï¼š<code>[-90, 90]</code></li>
<li>æ¯æ¬¡å°†ç»åº¦å’Œçº¬åº¦å„äºŒåˆ†ä¸€åŠï¼Œåˆ¤æ–­ç›®æ ‡åæ ‡è½åœ¨å“ªä¸ªåŠåŒºï¼Œè½¬ä¸º 0 æˆ– 1</li>
<li>æŒ‰ç…§â€œç»åº¦ä¸€ä½ã€çº¬åº¦ä¸€ä½â€äº¤é”™æ’åˆ—æˆä¸€ä¸ªäºŒè¿›åˆ¶ä¸²</li>
<li>æ¯ 5 ä½è½¬ä¸ºä¸€ä¸ª Base32 å­—ç¬¦</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åæ ‡ï¼š(39.92324, 116.3906)</span><br><span class="line">Geohashï¼šwx4g0ec1</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>ç»“æ„ç‰¹æ€§</strong>1: <strong>è¶Šé•¿çš„ Geohashï¼Œè¡¨ç¤ºçš„åŒºåŸŸè¶Šå°ï¼Œç²¾åº¦è¶Šé«˜</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>é•¿åº¦</th>
<th>ç²¾åº¦èŒƒå›´ï¼ˆçº¦ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>5</td>
<td>~4.9km Ã— 4.9km</td>
</tr>
<tr>
<td>7</td>
<td>~153m Ã— 153m</td>
</tr>
<tr>
<td>9</td>
<td>~5m Ã— 5m</td>
</tr>
</tbody>
</table>
<p><strong>ç»“æ„ç‰¹æ€§</strong>2: <strong>åŒä¸€å‰ç¼€ä»£è¡¨ç›¸è¿‘åŒºåŸŸ</strong>ï¼ˆå‰ç¼€åŒ¹é…ï¼‰ï¼š</p>
<ul>
<li><code>wx4g0ec1</code> å’Œ <code>wx4g0ec2</code> è¡¨ç¤ºä¸¤ä¸ªç›¸é‚»çš„ 5 ç±³å°åŒºåŸŸ</li>
<li>å¯ä»¥ç”¨å­—ç¬¦ä¸²å‰ç¼€è¿‡æ»¤â€œé™„è¿‘â€ç‚¹</li>
</ul>
<hr>
<p>ä¼˜ç‚¹:</p>
<ul>
<li><strong>å¯ç´¢å¼•ã€å¯æ’åº</strong>ï¼šå­—ç¬¦ä¸²å¯ç”¨äºæ•°æ®åº“ä¸­çš„ B+ æ ‘ç´¢å¼•</li>
<li><strong>æ˜“äºåˆ†ç‰‡ä¸èšåˆ</strong>ï¼šå¯æŒ‰å‰ç¼€èšåˆæˆ–åˆ†ç‰‡ï¼ˆå¦‚ Redisã€Elasticsearchã€HBaseï¼‰</li>
<li><strong>æ”¯æŒæ¨¡ç³ŠåŒ¹é…</strong>ï¼šæŸ¥æ‰¾å‰ç¼€ä¸º <code>wx4g0</code> çš„æ‰€æœ‰ä½ç½®å³å¯è·å–æŸåŒºåŸŸå†…æ‰€æœ‰ç‚¹</li>
</ul>
<p>ç¼ºç‚¹:</p>
<ul>
<li><strong>è¾¹ç•Œé—®é¢˜</strong>ï¼šé‚»è¿‘ä¸¤ä¸ªä½ç½®å¯èƒ½ Geohash ä¸è¿ç»­ï¼ˆå¦‚æ­£å¥½åœ¨ä¸¤ä¸ªæ ¼å­è¾¹ç•Œï¼‰<ul>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-45.png" alt="alt text"></li>
</ul>
</li>
<li>two positions can have a long shared prefix, but they belong to different geohashes <ul>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-46.png" alt="alt text"></li>
</ul>
</li>
<li><strong>å½¢çŠ¶é—®é¢˜</strong>ï¼šç¼–ç åŒºåŸŸæ˜¯çŸ©å½¢ï¼Œä¸åœ†å½¢èŒƒå›´æŸ¥è¯¢ä¸å®Œå…¨é‡åˆ</li>
<li><strong>èµ¤é“å’Œæåœ°ç²¾åº¦ä¸ä¸€è‡´</strong>ï¼šå› ä¸ºç»åº¦åˆ’åˆ†é—´éš”åœ¨çº¬åº¦å˜åŒ–æ—¶å˜å½¢</li>
</ul>
<p><strong>ç¼ºç‚¹è§£å†³æ–¹æ¡ˆ</strong>: æ‰©å±•é‚»å±…æ ¼å­ï¼Œè”åˆæŸ¥è¯¢</p>
<p>æ¯ä¸ª Geohash åŒºå—æœ€å¤šæœ‰ 8 ä¸ªé‚»å±…ï¼ˆä¸Šä¸‹å·¦å³ + å¯¹è§’çº¿ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[NW] [ N ] [NE]</span><br><span class="line">[ W] [ä¸­å¿ƒ] [E ]</span><br><span class="line">[SW] [ S ] [SE]</span><br></pre></td></tr></table></figure>
<p>æ­¥éª¤:</p>
<ul>
<li>æŸ¥è¯¢æ—¶ï¼Œå…ˆæ‰¾åˆ°ç›®æ ‡åæ ‡çš„ Geohash ç¼–ç ï¼ˆå¦‚ <code>wx4g0ec1</code>ï¼‰</li>
<li>å†æŸ¥è¯¢å®ƒçš„ 8 ä¸ªç›¸é‚»æ ¼å­ï¼ˆå¦‚ <code>wx4g0ec0</code>, <code>wx4g0ec2</code>, <code>wx4g0ebz</code> ç­‰ï¼‰</li>
<li>å°†è¿™äº›æ ¼å­å†…çš„ç‚¹ä¸€å¹¶æŸ¥å‡º</li>
<li>æœ€åä½¿ç”¨<strong>ç²¾ç¡®è·ç¦»è®¡ç®—</strong>ï¼ˆå¦‚ Haversineï¼‰è¿‡æ»¤çœŸå®çš„â€œé™„è¿‘â€ç»“æœ</li>
</ul>
<hr>
<p>åº”ç”¨åœºæ™¯:</p>
<ul>
<li><strong>é™„è¿‘æœç´¢</strong>ï¼ˆå¦‚â€œ3km å†…æ‰¾å¸æœºâ€ï¼‰é…åˆé‚»è¿‘ Geohash å— + ç²¾ç¡®è·ç¦»è¿‡æ»¤</li>
<li><strong>æ•°æ®åˆ†ç‰‡</strong>ï¼šæ ¹æ® Geohash å‰ç¼€åˆ† Redis keyã€æ•°æ®åº“è¡¨</li>
<li><strong>ç©ºé—´èšåˆ</strong>ï¼šæŒ‰ Geohash åˆ†ç»„èšåˆä½ç½®çƒ­åŠ›æ•°æ®</li>
<li><strong>è½¨è¿¹å‹ç¼©</strong>ï¼šæŠŠè½¨è¿¹åæ ‡ç‚¹å‹ç¼©æˆ Geohash åºåˆ—ï¼ŒèŠ‚çœå­˜å‚¨</li>
</ul>
<hr>
<h2 id="Quadtree"><a href="#Quadtree" class="headerlink" title="Quadtree"></a>Quadtree</h2><p>å››å‰æ ‘ï¼ˆ<strong>Quadtree</strong>ï¼‰æ˜¯ä¸€ç§é’ˆå¯¹<strong>äºŒç»´ç©ºé—´çš„é€’å½’åˆ’åˆ†æ ‘ç»“æ„</strong>ï¼Œå¹¿æ³›ç”¨äºåœ°ç†ä¿¡æ¯ç³»ç»Ÿï¼ˆGISï¼‰ã€æ¸¸æˆåœ°å›¾ã€å›¾åƒå‹ç¼©å’Œç©ºé—´ç´¢å¼•ç­‰åœºæ™¯ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯<strong>å°†æ¯ä¸ªåŒºåŸŸåˆ†æˆå››ä¸ªå­åŒºåŸŸ</strong>ï¼Œå®ç°<strong>é«˜æ•ˆå®šä½ä¸ç©ºé—´æŸ¥è¯¢</strong>ã€‚</p>
<p>Another popular solution is <strong>a</strong> quadtree. A quadtree is a data structure that is commonly used to partition a two <strong>-</strong> dimensional space by recursively subdividing it into four <strong>quadrants</strong> (grids) until the contents of the grids meet <strong>certain</strong> criteria. </p>
<p>Note that <strong>quadtree</strong> is an in-memory data structure and it is not a database solution. <strong>It</strong> runs on each LBS server, and the data structure is built at server <strong>startup</strong> time.</p>
<p>å¦ä¸€ä¸ªæµè¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯<strong>ä¸€ä¸ª</strong>å››å‰æ ‘ã€‚ä¸€ä¸ªå››å‰æ ‘[18]æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨äºé€šè¿‡é€’å½’åœ°å°†äºŒç»´ç©ºé—´ç»†åˆ†ä¸ºå››ä¸ª<strong>è±¡é™</strong>ï¼ˆç½‘æ ¼ï¼‰ï¼Œç›´åˆ°ç½‘æ ¼ä¸­çš„å†…å®¹æ»¡è¶³<strong>ç‰¹å®š</strong>æ ‡å‡†ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œ<strong>å››å‰æ ‘</strong>æ˜¯ä¸€ç§å†…å­˜æ•°æ®ç»“æ„ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚<strong>å®ƒ</strong>åœ¨æ¯ä¸ªåŸºäºä½ç½®çš„æœåŠ¡ï¼ˆLBSï¼‰æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸”æ•°æ®ç»“æ„æ˜¯åœ¨æœåŠ¡å™¨<strong>å¯åŠ¨</strong>æ—¶æ„å»ºçš„ã€‚ </p>
<p>æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªçŸ©å½¢åŒºåŸŸï¼ŒåŒ…å«æœ€å¤š 4 ä¸ªå­èŠ‚ç‚¹,<br>æ¯ä¸ªå­åŒºåŸŸç»§ç»­ç»†åˆ†ä¸º NWã€NEã€SWã€SE å››éƒ¨åˆ†ï¼Œç›´åˆ°æ»¡è¶³æŸç§ç»ˆæ­¢æ¡ä»¶ï¼ˆå¦‚ç‚¹æ•°å°‘äºé˜ˆå€¼æˆ–åŒºåŸŸæœ€å°å°ºå¯¸ï¼‰.<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-47.png" alt="alt text"></p>
<p><strong>T</strong>he Figure below explains the <strong>quadtree</strong> building process in more detail. The root node represents the whole world map. The root node is recursively broken down into 4 <strong>quadrants</strong> until no nodes are left with more than 100 businesses.â€</p>
<p>ä¸‹é¢çš„å›¾æ›´è¯¦ç»†åœ°è§£é‡Šäº†å››å‰æ ‘çš„æ„å»ºè¿‡ç¨‹ã€‚æ ¹èŠ‚ç‚¹ä»£è¡¨æ•´ä¸ªä¸–ç•Œåœ°å›¾ã€‚æ ¹èŠ‚ç‚¹è¢«é€’å½’åœ°åˆ†è§£ä¸ºå››ä¸ªè±¡é™ï¼Œç›´åˆ°ä¸å­˜åœ¨åŒ…å«è¶…è¿‡100å®¶ä¼ä¸šçš„èŠ‚ç‚¹ä¸ºæ­¢ã€‚ </p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-48.png" alt="alt text"></p>
<p>How to get businesses with quadtree?</p>
<ul>
<li>Build the quadtree in memory.</li>
<li>After the quadtree is built, start searching from the root and traverse the tree, until we find the leaf node where the search origin is. If that leaf node has 100 businesses, return the node. Otherwise, add businesses from its neighbors until enough businesses are returned.</li>
</ul>
<p>Real-world quadtree example:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-49.png" alt="alt text"></p>
<hr>
<p>ä¸ºä½•æŸ¥æ‰¾å¿«ï¼ˆåŸç†ï¼‰? ç©ºé—´æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾æŸç‚¹é™„è¿‘çš„ç‚¹ï¼‰æ—¶ï¼Œåªè®¿é—®<strong>ä¸æŸ¥è¯¢åŒºåŸŸç›¸äº¤çš„èŠ‚ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸éœ€è¦éå†æ‰€æœ‰æ•°æ®ç‚¹ï¼ˆä¸åƒçº¿æ€§æœç´¢ï¼‰</li>
<li>æ¯å±‚ç¼©å° 1/2 ç©ºé—´ï¼Œå¹³å‡æŸ¥è¯¢å¤æ‚åº¦æ¥è¿‘ <strong>O(log N)</strong></li>
<li>ç±»ä¼¼äºâ€œäºŒåˆ†æŸ¥æ‰¾ + ç©ºé—´å®šä½â€çš„ç»“åˆä½“</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä½ è¦æ‰¾ 1km å†…çš„å¸æœºï¼Œåªéœ€è¦éå†ä¸è¯¥èŒƒå›´ç›¸äº¤çš„å‡ ä¸ªå­èŠ‚ç‚¹</li>
<li>å¤§éƒ¨åˆ†ä¸è¯¥åŒºåŸŸæ— äº¤é›†çš„èŠ‚ç‚¹ä¼šè¢«â€œå‰ªæâ€ï¼Œä¸ä¼šéå†</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼ˆå°¤å…¶é€‚åˆ Uber/LBSï¼‰:</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>é™„è¿‘èµ„æºæŸ¥æ‰¾</td>
<td>æŸ¥æ‰¾é™„è¿‘è½¦è¾†ã€å……ç”µæ¡©ã€è®¢å•ç­‰ï¼Œæ•ˆç‡è¿œé«˜äºå…¨è¡¨æ‰«æ</td>
</tr>
<tr>
<td>ç©ºé—´ç´¢å¼•</td>
<td>æ„å»ºå†…å­˜ä¸­ä½ç½®ç´¢å¼•æ ‘ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°å’Œå¿«é€ŸåŒ¹é…</td>
</tr>
<tr>
<td>ç©ºé—´è´Ÿè½½åˆ†ç‰‡</td>
<td>ç”¨äºæŒ‰åœ°ç†ä½ç½®å°†æ•°æ®åˆ†å¸ƒåˆ°ä¸åŒæœåŠ¡å™¨æˆ–æœåŠ¡èŠ‚ç‚¹</td>
</tr>
<tr>
<td>çƒ­åŒºè¯†åˆ«ä¸èšåˆ</td>
<td>é«˜å¯†åº¦åŒºåŸŸå¯è‡ªåŠ¨åŠ æ·±å±‚çº§ï¼Œä¾¿äºç²¾ç»†åŒ–æ§åˆ¶ä¸è°ƒåº¦</td>
</tr>
</tbody>
</table>
<h2 id="Geohashå¯¹æ¯”Quadtree"><a href="#Geohashå¯¹æ¯”Quadtree" class="headerlink" title="Geohashå¯¹æ¯”Quadtree"></a>Geohashå¯¹æ¯”Quadtree</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Geohash</th>
<th>Quadtree</th>
</tr>
</thead>
<tbody>
<tr>
<td>é¢è¯•è®²è§£éš¾åº¦</td>
<td>ç®€å•, æ¨è</td>
<td>è¾ƒéš¾</td>
</tr>
<tr>
<td>å­˜å‚¨å½¢å¼</td>
<td>ç¼–ç ä¸ºå­—ç¬¦ä¸²</td>
<td>æ ‘çŠ¶ç»“æ„ï¼ˆæ¯èŠ‚ç‚¹å››ä¸ªå­åŒºï¼‰</td>
</tr>
<tr>
<td>æŸ¥è¯¢é€Ÿåº¦</td>
<td>å¿«ï¼Œé€‚åˆèŒƒå›´æ¨¡ç³ŠåŒ¹é…,è¾¹ç•Œéœ€æ‰‹åŠ¨æ‰©å±•</td>
<td>æ›´å¿«ï¼Œé€‚åˆç²¾ç¡®ç©ºé—´æœç´¢</td>
</tr>
<tr>
<td>æ’å…¥/åˆ é™¤</td>
<td>ç›´æ¥æ›´æ–°ç¼–ç ï¼Œå®¹æ˜“ä½†ä¸ç»“æ„åŒ–</td>
<td>å¿«é€Ÿå±€éƒ¨æ›´æ–°</td>
</tr>
<tr>
<td>ç©ºé—´ç»“æ„</td>
<td>å›ºå®šç½‘æ ¼ï¼ˆBase32 åˆ†æ®µï¼‰</td>
<td>åŠ¨æ€åˆ’åˆ†ï¼Œä¸å‡åŒ€é€‚åº”å¯†åº¦</td>
</tr>
<tr>
<td>æ˜“éƒ¨ç½²æ€§</td>
<td>ç®€å•ï¼Œå­—ç¬¦ä¸²æ˜“åˆ†å¸ƒå¼éƒ¨ç½²</td>
<td>å¤æ‚ï¼Œé€‚åˆ<strong>å†…å­˜</strong>ç´¢å¼•</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="Blob-Storage-workflow"><a href="#Blob-Storage-workflow" class="headerlink" title="Blob Storage workflow"></a>Blob Storage workflow</h1><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-67.png" alt="alt text"></p>
<p>To upload:  </p>
<ul>
<li>When clients want to upload a file, they request a presigned URL from the server.</li>
<li>The server returns a presigned URL to the client, recording it in the database.</li>
<li>The client uploads the file to the presigned URL.</li>
<li>The blob storage triggers a notification to the server that the upload is complete and the status is updated.</li>
</ul>
<p>To download:  </p>
<ul>
<li>The client requests a specific file from the server and are returned a presigned URL.</li>
<li>The client uses the presigned URL to download the file via the CDN, which proxies the request to the underlying blob storage.</li>
</ul>
<p>Features:</p>
<ul>
<li>Upload and Download Directly from the Client: <ul>
<li>Blob storage services allow you to upload and download blobs directly from the client. This is useful for applications that need to store and retrieve large blobs of data, like images or videos. Familiarize yourself with presigned URLs and how they can be used to grant temporary access to a blob â€“ either for upload or download.</li>
</ul>
</li>
<li>Chunking: <ul>
<li>When uploading large files, itâ€™s common to use chunking to upload the file in smaller pieces. This allows you to resume an upload if it fails partway through, and it also allows you to upload the file in parallel. This is especially useful for large files, where uploading the entire file at once might take a long time. Modern blob storage services like S3 support chunking out of the box via the multipart upload API.</li>
</ul>
</li>
</ul>
<p>Examples of blob storage services: </p>
<ul>
<li>The most popular blob storage services are <strong>Amazon S3, Google Cloud Storage, and Azure Blob</strong>. All of these services are designed to be fast, durable, and cost effective. They also have a range of features like versioning, lifecycle policies, and access control. They are used by companies like Netflix, Airbnb, and Spotify to store large blobs of data like images, videos, and files.</li>
<li>If you donâ€™t have experience with them, opt for S3 as itâ€™s the most popular and widely understood by interviewers - even non-S3 platforms often have an S3-compatible API.</li>
</ul>
<h1 id="Video-transcoding"><a href="#Video-transcoding" class="headerlink" title="Video transcoding"></a>Video transcoding</h1><h2 id="Directed-acyclic-graph-DAG-model"><a href="#Directed-acyclic-graph-DAG-model" class="headerlink" title="Directed acyclic graph(DAG) model"></a>Directed acyclic graph(DAG) model</h2><p>To support different video processing <strong>pipelines</strong> and maintain high <strong>parallelism</strong>, it is important to add some level of abstraction and let client programmers define what tasks to execute. </p>
<p>For example, Facebookâ€™s streaming video engine uses a <strong>directed acyclic graph</strong> (<code>DAG</code>) programming model, which defines tasks in <strong>stages</strong> so they can be executed sequentially or parallelly [8].</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-50.png" alt="alt text"></p>
<p>video encodings:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-51.png" alt="alt text"></p>
<p>Video transcoding architecture:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-52.png" alt="alt text"></p>
<p>The DAG scheduler: splits a DAG graph into stages of tasks and puts them in the task queue in the resource manager.<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-53.png" alt="alt text"></p>
<p>resource manager:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-54.png" alt="alt text"></p>
<hr>
<h2 id="optimizations"><a href="#optimizations" class="headerlink" title="optimizations"></a>optimizations</h2><ul>
<li>parallelize video uploading:<ul>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-56.png" alt="alt text"></li>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-57.png" alt="alt text"></li>
</ul>
</li>
<li>place upload centers close to users:<ul>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-58.png" alt="alt text"></li>
</ul>
</li>
<li>After the message queue is introduced, the encoding module does not need to <strong>wait</strong> for the output of the download module anymore. lf there are events in the message queue, the encoding module can execute those jobs in parallel:<ul>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-59.png" alt="alt text"></li>
</ul>
</li>
<li><code>pre-signed</code> upload URL: <ul>
<li>The client makes a HTTP request to APl servers to fetch the pre-signed URL, which gives the access permission to the object identified in the URl. The term pre-signed URL is used by uploading files to Amazon s3.</li>
<li>Once the client gets the response, it uploads the vid using the <code>pre-signed URL</code></li>
<li><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-60.png" alt="alt text"></li>
</ul>
</li>
</ul>
<hr>
<h1 id="Payment-flow"><a href="#Payment-flow" class="headerlink" title="Payment flow"></a>Payment flow</h1><p><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-62.png" alt="alt text"></p>
<p>Pay-in flow:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-55.png" alt="alt text"></p>
<p>Payment Service Provider(PSP), PSP integration:<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-61.png" alt="alt text"></p>
<p>Reconciliation(å¯¹è´¦):<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-63.png" alt="alt text"></p>
<p>what if a customer clicks the â€œpayâ€ button quickly twice?<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-64.png" alt="alt text"></p>
<hr>
<h1 id="Distributed-transaction-Saga"><a href="#Distributed-transaction-Saga" class="headerlink" title="Distributed transaction - Saga"></a>Distributed transaction - Saga</h1><p>question: <strong>There is no guarantee that both updates would succeed.</strong></p>
<p>If, for example, the wallet service node <strong>crashes</strong> after the first update has gone through but before the second update is done, it would result in an incomplete transfer, The two updates need to be in a single <strong>atomic</strong> transaction.<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-66.png" alt="alt text"></p>
<p>Solution: Saga<br><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="../img/na_sd_js_java/image-65.png" alt="alt text"></p>
<p>It is easier to understand this by using an example. the figure above shows the Saga workflow to transfer $1 from accountA to account C :</p>
<ul>
<li>The top <strong>horizontal</strong> line shows the normal order of execution. </li>
<li>The two <strong>vertical</strong> lines show what the system should do when there is an error. </li>
<li>When it <strong>encounters an error</strong>, the transfer operations are rolled back and the client receives an error message. </li>
</ul>
<p>How do we coordinate the operations? There are two ways to do it:</p>
<ol>
<li>Choreography(<code>/ËŒkÉ”ËriËˆÉ‘ËÉ¡rÉ™fi/</code>, n. ç¼–èˆï¼›èˆè¹ˆè‰ºæœ¯ï¼›èˆè‰º). in a microservice architecture, all the services involved in the Saga distributed transaction do their jobs by subscribing to other servicesâ€™ events. So it is fully decentralized coordination.<ul>
<li>It can become <strong>hard to manage</strong> when there are many services</li>
</ul>
</li>
<li><strong>Orchestration(prefer)</strong>. A single coordinator instructs all services to do their jobs in the correct order. the <strong>coordinator</strong> is indeed a potential <strong>single point of failure (SPOF)</strong>, so how to solve it?<ul>
<li><strong>a. Make the Coordinator Stateless + Persistent Log</strong>: Store all Saga state transitions in a <strong>durable log</strong> (e.g., relational DB, Kafka, or a durable event store). If the coordinator crashes, a new instance can pick up from the log and resume. This makes the system <strong>crash-recoverable</strong>, even with a single coordinator.</li>
<li><strong>b. Leader Election + Replication</strong>: <em> Run <strong>multiple instances</strong> of the coordinator. Use <em>*leader election</em></em> (e.g., via <code>ZooKeeper</code>, <code>etcd</code>) to ensure only one acts at a time. Replicate Saga state to followers to enable fast failover.</li>
</ul>
</li>
</ol>

      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
            
              <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
            
              <a href="/tags/Syllabus/" rel="tag"><i class="fa fa-tag"></i> Syllabus</a>
            
              <a href="/tags/SystemDesign/" rel="tag"><i class="fa fa-tag"></i> SystemDesign</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/na_js_frontend_syllabus/" rel="next" title="JS frontend syllabus">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    JS frontend syllabus
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/na_frontend_q_top100/" rel="prev" title="JS frontend Q top 100">
                <p class="post-nav-pre-next-title">
                    JS frontend Q top 100
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">298</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->

        </div>

        
        

        
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-text">References</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Scaling-prerequisite-knowledge"><span class="nav-text">Scaling - prerequisite knowledge</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Single-server-setup"><span class="nav-text">Single server setup</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Database"><span class="nav-text">Database</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vertical-scaling-vs-horizontal-scaling"><span class="nav-text">Vertical scaling vs horizontal scaling</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Load-balancer"><span class="nav-text">Load balancer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Database-replication"><span class="nav-text">Database replication</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cache"><span class="nav-text">Cache</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CDN"><span class="nav-text">CDN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stateless-web-tier"><span class="nav-text">Stateless web tier</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data-center"><span class="nav-text">Data center</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Message-queue"><span class="nav-text">Message queue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logging-metrics-automation"><span class="nav-text">Logging, metrics, automation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Database-scaling-Sharding"><span class="nav-text">Database scaling - Sharding</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰"><span class="nav-text">Denormalizationï¼ˆåè§„èŒƒåŒ–ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-text">Conclusion</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Back-of-the-envelope-Estimation"><span class="nav-text">Back-of-the-envelope Estimation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Framework-for-SD-interview"><span class="nav-text">Framework for SD interview</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#step1-Understand-the-problem-and-establish-design-scope"><span class="nav-text">step1-Understand the problem and establish design scope</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step2-Propose-high-level-design-and-get-buy-in"><span class="nav-text">step2-Propose high-level design and get buy-in</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step3-Design-deep-dive"><span class="nav-text">step3-Design deep dive</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step4-Wrap-up"><span class="nav-text">step4-Wrap up</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Time-allocation-on-each-step"><span class="nav-text">Time allocation on each step</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Layer-4-vs-Layer-7-è´Ÿè½½å‡è¡¡"><span class="nav-text">Layer 4 vs Layer 7 è´Ÿè½½å‡è¡¡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Layer-4-ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡"><span class="nav-text">Layer 4 (ä¼ è¾“å±‚è´Ÿè½½å‡è¡¡)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Layer-7-åº”ç”¨å±‚è´Ÿè½½å‡è¡¡"><span class="nav-text">Layer 7 (åº”ç”¨å±‚è´Ÿè½½å‡è¡¡)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ€»ç»“å¯¹æ¯”"><span class="nav-text">æ€»ç»“å¯¹æ¯”</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redisçš„ç‰¹æ®Šç”¨æ³•"><span class="nav-text">Redisçš„ç‰¹æ®Šç”¨æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis-for-Proximity-Search"><span class="nav-text">Redis for Proximity Search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis-for-Pub-Sub"><span class="nav-text">Redis for Pub/Sub</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Special-Application-Layer-Protocols"><span class="nav-text">Special Application Layer Protocols</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Unique-IDs-generation"><span class="nav-text">Unique IDs generation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ID-Structure-Based-on-Twitter-Snowflake-64-bits"><span class="nav-text">ID Structure (Based on Twitter Snowflake - 64 bits)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handling-Clock-Skew-Time-Rollback"><span class="nav-text">Handling Clock Skew / Time Rollback</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-choose-DB"><span class="nav-text">How to choose DB</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«"><span class="nav-text">ä¸¾ä¾‹è¯´æ˜Cassandraå’ŒDynamoDBå’ŒPostgreSQLæœ€å¤§çš„å»ºæ¨¡å·®åˆ«</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Algorithms-to-fetch-nearby-stuff"><span class="nav-text">Algorithms to fetch nearby stuff</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Geohash"><span class="nav-text">Geohash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Quadtree"><span class="nav-text">Quadtree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Geohashå¯¹æ¯”Quadtree"><span class="nav-text">Geohashå¯¹æ¯”Quadtree</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Blob-Storage-workflow"><span class="nav-text">Blob Storage workflow</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Video-transcoding"><span class="nav-text">Video transcoding</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Directed-acyclic-graph-DAG-model"><span class="nav-text">Directed acyclic graph(DAG) model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#optimizations"><span class="nav-text">optimizations</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Payment-flow"><span class="nav-text">Payment flow</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Distributed-transaction-Saga"><span class="nav-text">Distributed transaction - Saga</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
