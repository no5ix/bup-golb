<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if(''){
            let localStoragePasswdKey = '' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== '') {
                    if (password != null) {
                        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤è€Œä¸”å¯†ç é”™è¯¯çš„æ—¶å€™, å› ä¸ºå½“password == nullçš„æ—¶å€™è¯´æ˜ç”¨æˆ·ç‚¹äº†å–æ¶ˆ
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== '') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content="ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, &quot;hexo-theme-neo&quot;, click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari,">
<meta property="og:type" content="website">
<meta property="og:title" content="ğŸš™">
<meta property="og:url" content="https://hulinhong.com/page/24/index.html">
<meta property="og:site_name" content="ğŸš™">
<meta property="og:description" content="ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, &quot;hexo-theme-neo&quot;, click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari,">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ğŸš™">
<meta name="twitter:description" content="ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, &quot;hexo-theme-neo&quot;, click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari,">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>ğŸš™ - ğŸ’¨ ğŸ’¨ ğŸ’¨</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸš™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ğŸ’¨ ğŸ’¨ ğŸ’¨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">Ã—</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/virtual_connection_over_udp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/virtual_connection_over_udp/" itemprop="url">æ¸¸æˆç½‘ç»œå¼€å‘ä¸‰ä¹‹åŸºäºUDPçš„è™šæ‹Ÿè¿æ¥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-16T22:20:34+00:00">
                11-16-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><p><a href="https://gafferongames.com/post/virtual_connection_over_udp/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p></p><h2 id="introduction">Introduction</h2><p></p>
<p>Hi, I&rsquo;m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <a href="https://gafferongames.com/categories/game-networking/" target="_blank" rel="noopener"><strong>Networking for Game Programmers</strong></a>.</p><br><p>In the <a href="https://gafferongames.com/post/sending_and_receiving_packets" target="_blank" rel="noopener">previous article</a> we sent and received packets over UDP. Since UDP is connectionless, one UDP socket can be used to exchange packets with any number of different computers. In multiplayer games however, we usually only want to exchange packets between a small set of connected computers.</p><br><p>As the first step towards a general connection system, we&rsquo;ll start with the simplest case possible: creating a virtual connection between two computers on top of UDP.</p><br><p>But first, we&rsquo;re going to dig in a bit deeper about how the Internet really works!</p><br><h2 id="the-internet-u-not-u-a-series-of-tubes">The Internet <u>NOT</u> a series of tubes</h2><br><p>In 2006, Senator Ted Stevens made internet history with his <a href="https://en.wikipedia.org/wiki/Series_of_tubes" target="_blank" rel="noopener">famous speech</a> on the net neutrality act:</p><br><blockquote>â€œThe internet is not something that you just dump something on. Itâ€™s not a big truck. Itâ€™s a series of tubesâ€</blockquote><br><p>When I first started using the Internet, I was just like Ted. Sitting in the computer lab in University of Sydney in 1995, I was &ldquo;surfing the web&rdquo; with this new thing called Netscape Navigator, and I had absolutely no idea what was going on.</p><br><p>You see, I thought each time you connected to a website there was some actual connection going on, like a telephone line. I wondered, how much does it cost each time I connect to a new website? 30 cents? A dollar? Was somebody from the university going to tap me on the shoulder and ask me to pay the long distance charges? :)</p><br><p>Of course, this all seems silly now.</p><br><p>There is no switchboard somewhere that directly connects you via a physical phone line to the other computer you want to talk to, let alone a series of pneumatic tubes like Sen. Stevens would have you believe.</p><br><h2 id="no-direct-connections">No Direct Connections</h2><br><p>Instead your data is sent over Internet Protocol (IP) via packets that hop from computer to computer.</p><br><p>A packet may pass through several computers before it reaches its destination. You cannot know the exact set of computers in advance, as it changes dynamically depending on how the network decides to route packets. You could even send two packets A and B to the same address, and they may take different routes.</p><br><p>On unix-like systems can inspect the route that packets take by calling &ldquo;traceroute&rdquo; and passing in a destination hostname or IP address.</p><br><p>On windows, replace &ldquo;traceroute&rdquo; with &ldquo;tracert&rdquo; to get it to work.</p><br><p>Try it with a few websites like this:</p><br><pre>    traceroute slashdot.org<br>    traceroute amazon.com<br>    traceroute google.com<br>    traceroute bbc.co.uk<br>    traceroute news.com.au<br></pre><br><p>Take a look and you should be able to convince yourself pretty quickly that there is no direct connection.</p><br><h2 id="how-packets-get-delivered">How Packets Get Delivered</h2><br><p>In the <a href="https://gafferongames.com/post/udp_vs_tcp/" target="_blank" rel="noopener">first article</a>, I presented a simple analogy for packet delivery, describing it as somewhat like a note being passed from person to person across a crowded room.</p><br><p>While this analogy gets the basic idea across, it is much too simple. The Internet is <u>not</u> a flat network of computers, it is a network of networks. And of course, we don&rsquo;t just need to pass letters around a small room, we need to be able to send them anywhere in the world.</p><br><p>It should be pretty clear then that the best analogy is the postal service!</p><br><p>When you want to send a letter to somebody you put your letter in the mailbox and you trust that it will be delivered correctly. It&rsquo;s not really relevant to you <i>how</i> it gets there, as long as it does. Somebody has to physically deliver your letter to its destination of course, so how is this done?</p><br><p>Well first off, the postman sure as hell doesn&rsquo;t take your letter and deliver it personally! It seems that the postal service is not a series of tubes either. Instead, the postman takes your letter to the local post office for processing.</p><br><p>If the letter is addressed locally then the post office just sends it back out, and another postman delivers it directly. But, if the address is is non-local then it gets interesting! The local post office is not able to deliver the letter directly, so it passes it &ldquo;up&rdquo; to the next level of hierarchy, perhaps to a regional post office which services cities nearby, or maybe to a mail center at an airport, if the address is far away. Ideally, the actual transport of the letter would be done using a <u>big truck</u>.</p><br><p>Lets be complicated and assume the letter is sent from Los Angeles to Sydney, Australia. The local post office receives the letter and given that it is addressed internationally, sends it directly to a mail center at LAX. The letter is processed again according to address, and gets routed on the next flight to Sydney.</p><br><p>The plane lands at Sydney airport where an <i>entirely different postal system</i> takes over. Now the whole process starts operating in reverse. The letter travels &ldquo;down&rdquo; the hierarchy, from the general, to the specific. From the mail hub at Sydney Airport it gets sent out to a regional center, the regional center delivers it to the local post office, and eventually the letter is hand delivered by a mailman with a funny accent. Crikey! :)</p><br><p>Just like post offices determine how to deliver letters via their address, networks deliver packets according to their IP address. The low-level details of this delivery and the actual routing of packets from network to network is actually quite complex, but the basic idea is that each router is just another computer, with a routing table describing where packets matching sets of addresses should go, as well as a default gateway address describing where to pass packets for which there is no matching entry in the table. It is routing tables, and the physical connections they represent that define the network of networks that is the Internet.</p><br><p>The job of configuring these routing tables is up to network administrators, not programmers like us. But if you want to read more about it, then this article from <a href="https://arstechnica.com/guides/other/peering-and-transit.ars" target="_blank" rel="noopener">ars technica</a> provides some fascinating insight into how networks exchange packets between each other via peering and transit relationships. You can also read more details about <a href="http://www.faqs.org/docs/linux_network/x-087-2-issues.routing.html" target="_blank" rel="noopener">routing tables</a> in this linux faq, and about the <a href="https://en.wikipedia.org/wiki/Border_Gateway_Protocol" target="_blank" rel="noopener">border gateway protocol</a> on wikipedia, which automatically discovers how to route packets between networks, making the internet a truly distributed system capable of dynamically routing around broken connectivity.</p><br><h2 id="virtual-connections">Virtual Connections</h2><br><p>Now back to connections.</p><br><p>If you have used TCP sockets then you know that they sure <i>look</i> like a connection, but since TCP is implemented on top of IP, and IP is just packets hopping from computer to computer, it follows that TCP&rsquo;s concept of connection must be a <i>virtual connection.</i></p><br><p>If TCP can create a virtual connection over IP, it follows that we can do the same over UDP.</p><br><p>Lets define our virtual connection as two computers exchanging UDP packets at some fixed rate like 10 packets per-second. As long as the packets are flowing, we consider the two computers to be virtually connected.</p><br><p>Our connection has two sides:</p><br><ul><br><li>One computer sits there and <i>listens</i> for another computer to connect to it. Weâ€™ll call this computer the <u>server</u>.</li><br><li>Another computer <i>connects</i> to a server by specifying an IP address and port. Weâ€™ll call this computer the <u>client</u>.</li><br></ul><br><p>In our case, we only allow one client to connect to the server at any time. We&rsquo;ll generalize our connection system to support multiple simultaneous connections in a later article. Also, we assume that the IP address of the server is on a fixed IP address that the client may directly connect to.</p><br><h2 id="protocol-id">Protocol ID</h2><br><p>Since UDP is connectionless our UDP socket can receive packets sent from any computer.</p><br><p>We&rsquo;d like to narrow this down so that the server only receives packets sent from the client, and the client only receives packets sent from the server. We can&rsquo;t just filter out packets by address, because the server doesn&rsquo;t know the address of the client in advance. So instead, we prefix each UDP packet with small header containing a 32 bit protocol id as follows:</p><br><pre>    [uint protocol id]<br>    <i>(packet dataâ€¦)</i><br></pre><br><p>The protocol id is just some unique number representing our game protocol. Any packet that arrives from our UDP socket first has its first four bytes inspected. If they don&rsquo;t match our protocol id, then the packet is ignored. If the protocol id does match, we strip out the first four bytes of the packet and deliver the rest as payload.</p><br><p>You just choose some number that is reasonably unique, perhaps a hash of the name of your game and the protocol version number. But really you can use anything. The whole point is that from the point of view of our connection based protocol, packets with different protocol ids are ignored.</p><br><h2 id="detecting-connection">Detecting Connection</h2><br><p>Now we need a way to detect connection.</p><br><p>Sure we could do some complex handshaking involving multiple UDP packets sent back and forth. Perhaps a client &ldquo;request connection&rdquo; packet is sent to the server, to which the server responds with a &ldquo;connection accepted&rdquo; sent back to the client, or maybe an &ldquo;i&rsquo;m busy&rdquo; packet if a client tries to connect to server which already has a connected client.</p><br><p>Or&hellip; we could just setup our server to take the first packet it receives with the correct protocol id, and consider a connection to be established.</p><br><p>The client just starts sending packets to the server assuming connection, when the server receives the first packet from the client, it takes note of the IP address and port of the client, and starts sending packets back.</p><br><p>The client already knows the address and port of the server, since it was specified on connect. So when the client receives packets, it filters out any that don&rsquo;t come from the server address. Similarly, once the server receives the first packet from the client, it gets the address and port of the client from &ldquo;recvfrom&rdquo;, so it is able to ignore any packets that don&rsquo;t come from the client address.</p><br><p>We can get away with this shortcut because we only have two computers involved in the connection. In later articles, we&rsquo;ll extend our connection system to support more than two computers in a client/server or peer-to-peer topology, and at this point we&rsquo;ll upgrade our connection negotiation to something more robust.</p><br><p>But for now, why make things more complicated than they need to be?</p><br><h2 id="detecting-disconnection">Detecting Disconnection</h2><br><p>How do we detect disconnection?</p><br><p>Well if a connection is defined as receiving packets, we can define disconnection as <i>not</i> receiving packets.</p><br><p>To detect when we are not receiving packets, we keep track of the number of seconds since we last received a packet from the other side of the connection. We do this on both sides.</p><br><p>Each time we receive a packet from the other side, we reset our accumulator to 0.0, each update we increase the accumulator by the amount of time that has passed.</p><br><p>If this accumulator exceeds some value like 10 seconds, the connection &ldquo;times out&rdquo; and we disconnect.</p><br><p>This also gracefully handles the case of a second client trying to connect to a server that has already made a connection with another client. Since the server is already connected it ignores packets coming from any address other than the connected client, so the second client receives no packets in response to the packets it sends, so the second client times out and disconnects.</p><br><h2 id="conclusion">Conclusion</h2><br><p>And that&rsquo;s all it takes to setup a virtual connection: some way to establish connection, filtering for packets not involved in the connection, and timeouts to detect disconnection.</p><br><p>Our connection is as real as any TCP connection, and the steady stream of UDP packets it provides is a suitable starting point for a multiplayer action game.</p><br><p>Now that you have your virtual connection over UDP, you can easily setup a client/server relationship for a two player multiplayer game without TCP.</p>

<h1 id="è¯‘æ–‡"><a href="#è¯‘æ–‡" class="headerlink" title="è¯‘æ–‡"></a>è¯‘æ–‡</h1><p><a href="http://gad.qq.com/program/translateview/7161829" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a></p>
<div class="WordSection1"><p class="MsoNormal"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¯‘è€…ï¼šå¼ åæ ‹<span>(wcby) </span>å®¡æ ¡ï¼šå´”å›½å†›ï¼ˆé£æ‰¬<span>971</span>ï¼‰</span> </span></p><p class="MsoNormal" align="left" style="line-height: 20.25pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘; color: rgb(51, 51, 51); font-size: 12pt;"> </span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><span style="font-size:large;"><br><h2 id="åºè¨€">åºè¨€</h2><br></span></span> </span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<span>Glenn Fiedler</span>ï¼Œæ¬¢è¿é˜…è¯»ã€Š<a rel="noopener" href="http://gafferongames.com/networking-for-game-programmers/" target="_blank">é’ˆå¯¹æ¸¸æˆç¨‹åºå‘˜çš„ç½‘ç»œçŸ¥è¯†</a>ã€‹ç³»åˆ—æ•™ç¨‹çš„ç¬¬ä¸‰ç¯‡æ–‡ç« ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘å‘ä½ å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<span>UDP</span>åè®®æ¥å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç”±äº<span>UDP</span>åè®®æ˜¯æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¸€ä¸ª<span>UDP</span>å¥—æ¥å­—å¯ä»¥ç”¨æ¥ä¸ä»»æ„æ•°ç›®çš„ä¸åŒç”µè„‘è¿›è¡Œæ•°æ®åŒ…äº¤æ¢ã€‚ä½†æ˜¯åœ¨å¤šäººåœ¨çº¿ç½‘ç»œæ¸¸æˆä¸­ï¼Œæˆ‘ä»¬é€šå¸¸åªéœ€è¦åœ¨ä¸€å°éƒ¨åˆ†äº’ç›¸è¿æ¥çš„è®¡ç®—æœºä¹‹é—´äº¤æ¢æ•°æ®åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span><br></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½œä¸ºå®ç°é€šç”¨è¿æ¥ç³»ç»Ÿçš„ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä»æœ€ç®€å•çš„å¯èƒ½æƒ…å†µå¼€å§‹ï¼šåˆ›å»ºä¸¤å°ç”µè„‘ä¹‹é—´æ„å»ºäº<span>UDP</span>åè®®ä¹‹ä¸Šçš„è™šæ‹Ÿè¿æ¥ã€‚</span><span style="color: rgb(34, 34, 34);"> </span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½†æ˜¯é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¯¹äº’è”ç½‘åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„è¿›è¡Œä¸€ç‚¹æ·±åº¦æŒ–æ˜ï¼</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;"><br></span></span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><br><h2 id="äº’è”ç½‘ä¸æ˜¯ä¸€è¿ä¸²çš„ç®¡å­">äº’è”ç½‘ä¸æ˜¯ä¸€è¿ä¸²çš„ç®¡å­</h2><br></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨<span>2006</span>å¹´ï¼Œå‚è®®é™¢ç‰¹å¾·<span>Â·</span>å²è’‚æ–‡æ–¯<span>(Ted Stevens) </span>ç”¨ä»–å…³äºäº’è”ç½‘ä¸­ç«‹ï¼ˆ<span>netneutrality</span>ï¼‰æ³•æ¡ˆçš„è‘—åæ¼”è®²åˆ›é€ äº†äº’è”ç½‘çš„å†å²ï¼š</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">â€</span><span style="font-size: 12pt; color: rgb(34, 34, 34);">äº’è”ç½‘ä¸æ˜¯é‚£ç§ä½ éšä¾¿ä¸¢ç‚¹ä»€ä¹ˆä¸œè¥¿è¿›å»å°±èƒ½è¿è¡Œçš„ä¸œè¥¿ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªå¤§å¡è½¦ã€‚å®ƒæ˜¯ä¸€è¿ä¸²çš„ç®¡å­<span>â€œ</span></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹ä½¿ç”¨äº’è”ç½‘çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿåƒ<span>Ted</span>ä¸€æ ·æ— çŸ¥ã€‚é‚£æ˜¯<span>1995</span>å¹´ï¼Œæˆ‘ååœ¨æ‚‰å°¼å¤§å­¦çš„è®¡ç®—æœºå®éªŒå®¤é‡Œï¼Œåœ¨ç”¨ä¸€ç§å«åš<span>Netscape</span>çš„ç½‘ç»œæµè§ˆå™¨ï¼ˆæœ€æ—©æœ€çƒ­é—¨çš„ç½‘é¡µæµè§ˆå·¥å…·ï¼‰â€œåœ¨ç½‘ä¸Šå†²æµªï¼ˆ<span>surfing the web</span>ï¼‰â€œï¼Œé‚£ä¸ªæ—¶å€™æˆ‘å¯¹å‘ç”Ÿäº†ä»€ä¹ˆæ ¹æœ¬ä¸€æ— æ‰€çŸ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);"> </span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;">ä½ çœ‹é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘è§‰å¾—æ¯æ¬¡è¿åˆ°ä¸€ä¸ªç½‘ç«™ä¸Šå°±ä¸€å®šæœ‰æŸä¸ªçœŸå®å­˜åœ¨çš„è¿æ¥åœ¨å¸®æˆ‘ä»¬ä¼ é€’ä¿¡æ¯ï¼Œå°±åƒç”µè¯çº¿ä¸€æ ·ã€‚é‚£æ—¶å€™æˆ‘åœ¨æƒ³ï¼Œå½“æˆ‘æ¯æ¬¡è¿åˆ°ä¸€ä¸ªæ–°çš„ç½‘ç«™ä¸Šéœ€è¦èŠ±è´¹å¤šå°‘é’±<span>? 30</span>ç¾åˆ†å—<span>?</span>ä¸€ç¾å…ƒå—<span>? </span>ä¼šæœ‰å¤§å­¦é‡Œçš„æŸä¸ªäººè¿‡æ¥æ‹æ‹æˆ‘çš„è‚©è†€è®©æˆ‘ä»˜é•¿é€”é€šä¿¡çš„è´¹ç”¨ä¹ˆï¼Ÿ</span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“ç„¶ï¼Œç°åœ¨å›å¤´çœ‹é‚£æ—¶å€™ä¸€åˆ‡çš„æƒ³æ³•éƒ½éå¸¸çš„æ„šè ¢ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¹¶æ²¡æœ‰åœ¨æŸä¸ªåœ°æ–¹å­˜åœ¨ä¸€ä¸ªç‰©ç†äº¤æ¢æœºç”¨ç‰©ç†ç”µè¯çº¿å°†ä½ å’Œä½ å¸Œæœ›é€šè¯çš„æŸä¸ªç”µè„‘ç›´æ¥è¿èµ·æ¥ã€‚æ›´ä¸ç”¨è¯´åƒå‚è®®é™¢å²è’‚æ–‡æ–¯æƒ³è®©ä½ ç›¸ä¿¡çš„é‚£æ ·å­˜åœ¨ä¸€ä¸²æ°”å‹è¾“é€ç®¡ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span class="Char1"><br><h2 id="æ²¡æœ‰ç›´æ¥çš„è¿æ¥">æ²¡æœ‰ç›´æ¥çš„è¿æ¥</h2><br></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç›¸åä½ çš„æ•°æ®æ˜¯åŸºäº<span>IP</span>åè®®<span>(</span></span><span style="color: rgb(34, 34, 34);">InternetProtocol</span><span style="font-size: 12pt; color: rgb(34, 34, 34);">)</span><span style="font-size: 12pt; color: rgb(34, 34, 34);">é€šè¿‡åœ¨ç”µè„‘åˆ°ç”µè„‘ä¹‹é—´å‘é€æ•°æ®åŒ…æ¥ä¼ é€’ä¿¡æ¯çš„</span><b><span style="font-size: 13.5pt; color: rgb(43, 43, 43); background: rgb(248, 248, 248);">ã€‚</span></b> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä¸€ä¸ªæ•°æ®åŒ…å¯èƒ½åœ¨åˆ°è¾¾å®ƒçš„ç›®çš„åœ°ä¹‹å‰è¦ç»è¿‡å‡ ä¸ªç”µè„‘ã€‚ä½ æ²¡æœ‰åŠæ³•æå‰çŸ¥é“æ•°æ®åŒ…ä¼šç»è¿‡å…·ä½“å“ªäº›ç”µè„‘ï¼Œå› ä¸ºå®ƒä¼šä¾èµ–å½“å‰ç½‘ç»œçš„æƒ…å†µå¯¹æ•°æ®åŒ…è¿›è¡Œè·¯ç”±æ¥åŠ¨æ€çš„æ”¹å˜è·¯å¾„ã€‚ç”šè‡³æœ‰å¯èƒ½ç»™åŒä¸€ä¸ªåœ°å€å‘é€<span>A</span>å’Œ<span>B</span>ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œè¿™ä¸¤ä¸ªæ•°æ®åŒ…éƒ½é‡‡ç”¨ä¸åŒçš„è·¯ç”±ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<span>UDP</span>åè®®ä¸èƒ½ä¿è¯æ•°æ®åŒ…çš„åˆ°è¾¾é¡ºåºã€‚ï¼ˆå…¶å®è¿™ä¹ˆè¯´ç¨å¾®å®¹æ˜“æœ‰ç‚¹å¼•èµ·è¯¯è§£ï¼Œ<span>TCP</span>åè®®æ˜¯èƒ½ä¿è¯æ•°æ®åŒ…çš„åˆ°è¾¾é¡ºåºçš„ï¼Œä½†æ˜¯ä»–ä¹Ÿæ˜¯åŸºäº<span>IP</span>åè®®è¿›è¡Œæ•°æ®åŒ…çš„å‘é€ï¼Œå¹¶ä¸”å¾€åŒä¸€ä¸ªåœ°å€å‘é€çš„ä¸¤ä¸ªæ•°æ®åŒ…ä¹Ÿæœ‰å¯èƒ½é‡‡ç”¨å®Œå…¨ä¸åŒçš„è·¯ç”±ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸º<span>TCP</span>åœ¨è‡ªå·±è¿™ä¸€å±‚åšäº†ä¸€äº›æ§åˆ¶è€Œ<span>UDP</span>æ²¡æœ‰ï¼Œæ‰€ä»¥å¯¼è‡´<span>TCP</span>åè®®å¯ä»¥ä¿è¯æ•°æ®åŒ…çš„æœ‰åºæ€§ï¼Œè€Œ<span>UDP</span>åè®®ä¸èƒ½ï¼Œå½“ç„¶è¿™ç§ä¿è¯éœ€è¦ä»˜å‡ºæ€§èƒ½æ–¹é¢çš„ä»£ä»·ï¼‰ã€‚</span><span style="color: rgb(34, 34, 34);"><br></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨ç±»<span>unix</span>çš„ç³»ç»Ÿä¸­å¯ä»¥é€šè¿‡è°ƒç”¨<span>â€œtracerouteâ€</span>å‡½æ•°å¹¶ä¼ é€’ä¸€ä¸ªç›®çš„åœ°ä¸»æœºåæˆ–<span>IP</span>åœ°å€æ¥æ£€æŸ¥æ•°æ®åŒ…çš„è·¯ç”±ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨<span>Windows</span>ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ç”¨<span>â€œtracertâ€</span>ä»£æ›¿<span>â€œtracerouteâ€</span>ï¼Œå…¶ä»–ä¸å˜ï¼Œå°±èƒ½æ£€æŸ¥æ•°æ®åŒ…çš„è·¯ç”±äº†ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åƒä¸‹é¢è¿™æ ·ç”¨ä¸€äº›ç½‘å€æ¥å°è¯•ä¸‹è¿™ç§æ–¹æ³•ï¼š</span> </span></p><div style="border:solid #F0F0F0 1.0pt;border-left:solid #E0E0E0 2.25pt;padding:0cm 0cm 0cm 0cm;background:whitesmoke"><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   traceroute slashdot.org</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   traceroute amazon.com</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   traceroute google.com</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   traceroute bbc.co.uk</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   traceroute news.com.au</span> </span></p></div><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¿è¡Œä¸‹çœ‹ä¸‹è¾“å‡ºç»“æœï¼Œä½ åº”è¯¥å¾ˆå¿«å°±èƒ½è¯´æœä½ è‡ªå·±ç¡®å®è¿æ¥åˆ°äº†ç½‘ç«™ä¸Šï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸€ä¸ªç›´æ¥çš„è¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><br><h2 id="æ•°æ®åŒ…æ˜¯å¦‚ä½•ä¼ é€’åˆ°ç›®çš„åœ°çš„ï¼Ÿ">æ•°æ®åŒ…æ˜¯å¦‚ä½•ä¼ é€’åˆ°ç›®çš„åœ°çš„ï¼Ÿ</h2><br></span><span style="color: rgb(34, 34, 34);"><br></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨<a rel="noopener" href="http://gafferongames.com/networking-for-game-programmers/udp-vs-tcp/" target="_blank">ç¬¬ä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘å¯¹æ•°æ®åŒ…ä¼ é€’åˆ°ç›®çš„åœ°è¿™ä¸ªäº‹æƒ…åšäº†ä¸€ä¸ªç®€å•çš„ç±»æ¯”ï¼ŒæŠŠè¿™ä¸ªè¿‡ç¨‹æè¿°çš„æœ‰ç‚¹åƒåœ¨ä¸€ä¸ªæ‹¥æŒ¤çš„æˆ¿é—´å†…ä¸€ä¸ªäººæ¥ç€ä¸€ä¸ªäººçš„æŠŠä¾¿æ¡ä¼ é€’ä¸‹å»ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è™½ç„¶è¿™ä¸ªç±»æ¯”çš„åŸºæœ¬æ€æƒ³è¿˜æ˜¯è¡¨è¾¾å‡ºæ¥äº†ï¼Œä½†æ˜¯å®ƒæœ‰ç‚¹è¿‡äºç®€å•äº†ã€‚äº’è”ç½‘å¹¶ä¸æ˜¯ç”µè„‘ç»„æˆçš„ä¸€ä¸ªå¹³é¢çš„ç½‘ç»œï¼Œå®é™…ä¸Šå®ƒæ˜¯ç½‘ç»œçš„ç½‘ç»œã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸åªæ˜¯è¦åœ¨ä¸€ä¸ªå°æˆ¿é—´é‡Œé¢ä¼ é€’ä¿¡ä»¶ï¼Œæˆ‘ä»¬è¦åšçš„äº‹èƒ½å¤ŸæŠŠä¿¡æ¯ä¼ é€’åˆ°å…¨ä¸–ç•Œã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);"><br></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¿™å°±åº”è¯¥å¾ˆæ¸…æ¥šäº†ï¼Œæ•°æ®åŒ…ä¼ é€’åˆ°ç›®çš„åœ°çš„æœ€å¥½çš„ç±»æ¯”æ˜¯é‚®æ”¿æœåŠ¡<span>!</span></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“ä½ æƒ³ç»™æŸäººå†™ä¿¡çš„æ—¶å€™ï¼Œä½ ä¼šæŠŠä½ çš„ä¿¡ä»¶æ”¾åˆ°é‚®ç®±é‡Œå¹¶ä¸”ä½ ç›¸ä¿¡å®ƒå°†æ­£ç¡®çš„ä¼ é€’åˆ°ç›®çš„åœ°ã€‚è¿™å°ä¿¡ä»¶å…·ä½“æ˜¯æ€ä¹ˆåˆ°è¾¾ç›®çš„åœ°çš„å’Œä½ å¹¶ä¸æ˜¯ååˆ†ç›¸å…³ï¼Œå°½ç®¡å®ƒæ˜¯å¦æ­£ç¡®åˆ°è¾¾ä¼šå¯¹ä½ æœ‰å½±å“ã€‚å½“ç„¶ä¼šæœ‰æŸä¸ªäººåœ¨ç‰©ç†ä¸Šå¸®ä½ æŠŠä¿¡ä»¶ä¼ é€’åˆ°ç›®çš„åœ°ï¼Œæ‰€ä»¥è¿™æ˜¯æ€ä¹ˆåšçš„å‘¢<span>?</span></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">é¦–å…ˆï¼Œé‚®é€’å‘˜è‚¯å®šä¸éœ€è¦è‡ªå·±å»æŠŠä½ çš„ä¿¡ä»¶é€åˆ°ç›®çš„åœ°ï¼çœ‹èµ·æ¥é‚®æ”¿æœåŠ¡ä¹Ÿä¸æ˜¯ä¸€ä¸²ç®¡å­ã€‚ç›¸åï¼Œé‚®é€’å‘˜æ˜¯æŠŠä½ çš„ä¿¡ä»¶å¸¦åˆ°å½“åœ°çš„é‚®æ”¿éƒ¨é—¨è¿›è¡Œå¤„ç†ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¦‚æœè¿™å°ä¿¡ä»¶æ˜¯å‘é€ç»™æœ¬åœ°çš„ï¼Œé‚£ä¹ˆé‚®æ”¿éƒ¨é—¨å°±ä¼šæŠŠè¿™å°ä¿¡ä»¶å‘é€å›æ¥ï¼Œå¦å¤–ä¸€ä¸ªé‚®é€’å‘˜ä¼šç›´æ¥æŠ•é€’è¿™å°ä¿¡ä»¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™å°ä¿¡ä»¶ä¸æ˜¯å‘é€ç»™æœ¬åœ°çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤„ç†è¿‡ç¨‹å°±æœ‰æ„æ€äº†ï¼å½“åœ°çš„é‚®æ”¿éƒ¨é—¨ä¸èƒ½ç›´æ¥æŠ•é€’è¿™å°ä¿¡ä»¶ï¼Œæ‰€ä»¥è¿™å°ä¿¡ä»¶ä¼šè¢«å‘ä¸Šä¼ é€’åˆ°å±‚æ¬¡ç»“æ„çš„ä¸Šä¸€å±‚ï¼Œè¿™ä¸ªä¸Šä¸€å±‚ä¹Ÿè®¸æ˜¯åœ°åŒºçº§çš„é‚®æ”¿éƒ¨é—¨å®ƒä¼šè´Ÿè´£æœåŠ¡é™„è¿‘çš„å‡ ä¸ªåŸå¸‚ï¼Œå¦‚æœè¦æŠ•é€’çš„åœ°å€éå¸¸è¿œçš„è¯ï¼Œè¿™ä¸ªä¸Šä¸€å±‚ä¹Ÿè®¸æ˜¯ä½äºæœºåœºçš„ä¸€ä¸ªé‚®ä»¶ä¸­å¿ƒã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¿¡ä»¶çš„å®é™…è¿è¾“å°†é€šè¿‡ä¸€ä¸ªå¤§å¡è½¦æ¥å®Œæˆã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æŠŠä¸Šé¢è¯´çš„è¿‡ç¨‹å…·ä½“çš„èµ°ä¸€éï¼Œå‡è®¾æœ‰ä¸€å°ä¿¡ä»¶è¦ä»æ´›æ‰çŸ¶å‘é€åˆ°æ¾³å¤§åˆ©äºšçš„æ‚‰å°¼ã€‚å½“åœ°çš„é‚®æ”¿éƒ¨é—¨æ”¶åˆ°ä¿¡ä»¶ä»¥åè€ƒè™‘åˆ°è¿™å°ä¿¡ä»¶æ˜¯ä¸€å°è·¨å›½æŠ•é€’çš„ä¿¡ä»¶ï¼Œæ‰€ä»¥ä¼šç›´æ¥æŠŠå®ƒå‘é€åˆ°ä½äºæ´›æ‰çŸ¶æœºåœºçš„é‚®ä»¶ä¸­å¿ƒã€‚åœ¨é‚£é‡Œï¼Œè¿™å°ä¿¡ä»¶ä¼šå†æ¬¡æ ¹æ®å®ƒçš„åœ°å€è¿›è¡Œå¤„ç†ï¼Œå¹¶è¢«å®‰æ’é€šè¿‡ä¸‹ä¸€ä¸ªåˆ°æ‚‰å°¼çš„èˆªç­æŠ•é€’åˆ°æ‚‰å°¼å»ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“é£æœºé™è½åˆ°æ‚‰å°¼æœºåœºä»¥åï¼Œä¸€ä¸ªå®Œå…¨ä¸åŒçš„é‚®æ”¿ç³»ç»Ÿä¼šè´Ÿè´£æ¥ç®¡è¿™å°ä¿¡ä»¶ã€‚ç°åœ¨æ•´ä¸ªè¿‡ç¨‹å¼€å§‹é€†å‘æ“ä½œã€‚è¿™å°ä¿¡ä»¶ä¼šæ²¿ç€å±‚æ¬¡ç»“æ„å‘ä¸‹ä¼ é€’ï¼Œä»å¤§çš„ç®¡ç†éƒ¨é—¨åˆ°å…·ä½“çš„æŠ•é€’åŒºåŸŸã€‚è¿™å°ä¿¡ä»¶ä¼šä»æ‚‰å°¼æœºåœºçš„é‚®ä»¶ä¸­å¿ƒè¢«é€å¾€ä¸€ä¸ªåœ°åŒºçº§çš„ä¸­å¿ƒï¼Œç„¶ååœ°åŒºçº§çš„ä¸­å¿ƒä¼šæŠŠè¿™å°ä¿¡ä»¶æŠ•é€’åˆ°å½“åœ°çš„é‚®æ”¿éƒ¨é—¨ï¼Œæœ€ç»ˆè¿™å°ä¿¡ä»¶ä¼šæ˜¯ç”±ä¸€ä¸ªæ“ç€æœ‰è¶£çš„æœ¬åœ°å£éŸ³çš„é‚®æ”¿äººå‘˜ç”¨æ‰‹æŠ•é€’åˆ°çœŸæ­£çš„ç›®çš„åœ°çš„ã€‚å“å‘€<span>! !</span></span><span style="color: rgb(34, 34, 34);"> </span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);"> </span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å°±åƒé‚®å±€æ˜¯é€šè¿‡ä¿¡ä»¶çš„åœ°å€æ¥å†³å®šè¿™äº›ä¿¡ä»¶æ˜¯è¯¥å¦‚ä½•æŠ•é€’çš„ä¸€æ ·ï¼Œç½‘ç»œä¹Ÿæ˜¯æ ¹æ®è¿™äº›æ•°æ®åŒ…çš„<span>IP</span>åœ°å€æ¥å†³å®šå®ƒä»¬æ˜¯è¯¥å¦‚ä½•ä¼ é€’çš„ã€‚æŠ•é€’æœºåˆ¶çš„åº•å±‚ç»†èŠ‚ä»¥åŠæ•°æ®åŒ…ä»ç½‘ç»œåˆ°ç½‘ç»œçš„å®é™…è·¯ç”±å…¶å®éƒ½æ˜¯ç›¸å½“å¤æ‚çš„ï¼Œä½†æ˜¯åŸºæœ¬çš„æƒ³æ³•éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æ¯ä¸ªè·¯ç”±å™¨éƒ½åªæ˜¯å¦å¤–ä¸€å°è®¡ç®—æœºï¼Œå®ƒä¼šæºå¸¦ä¸€å¼ è·¯ç”±è¡¨ç”¨æ¥æè¿°å¦‚æœæ•°æ®åŒ…çš„<span>IP</span>åœ°å€åŒ¹é…äº†è¿™å¼ è¡¨ä¸Šçš„æŸä¸ªåœ°å€é›†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®åŒ…è¯¥å¦‚ä½•ä¼ é€’ï¼Œè¿™å¼ è¡¨è¿˜ä¼šè®°è½½ç€é»˜è®¤çš„ç½‘å…³åœ°å€ï¼Œå¦‚æœæ•°æ®åŒ…çš„<span>IP</span>åœ°å€å’Œè¿™å¼ è·¯ç”±è¡¨ä¸Šçš„ä¸€ä¸ªåœ°å€éƒ½åŒ¹é…ä¸ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®åŒ…è¯¥ä¼ é€’åˆ°é»˜è®¤çš„ç½‘å…³åœ°å€é‚£é‡Œã€‚å…¶å®æ˜¯è·¯ç”±è¡¨ä»¥åŠå®ƒä»¬ä»£è¡¨çš„ç‰©ç†è¿æ¥å®šä¹‰äº†ç½‘ç»œçš„ç½‘ç»œï¼Œä¹Ÿå°±æ˜¯äº’è”ç½‘ï¼ˆäº’è”ç½‘ä¹Ÿè¢«ç§°ä¸ºä¸‡ç»´ç½‘ï¼‰ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span><a rel="nofollow" href="http://baike.baidu.com/view/1706.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>å› ç‰¹ç½‘</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">äº<span>1969</span>å¹´è¯ç”Ÿäº</span><span><a rel="nofollow" href="http://baike.baidu.com/view/2398.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>ç¾å›½</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ã€‚æœ€åˆåä¸º<span>â€œ</span></span><span><a rel="nofollow" href="http://baike.baidu.com/view/108095.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>é˜¿å¸•ç½‘</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">â€</span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼ˆ<span>ARPAnet</span>ï¼‰æ˜¯ä¸€ä¸ªå†›ç”¨ç ”ç©¶ç³»ç»Ÿï¼Œåæ¥åˆæˆä¸ºè¿æ¥å¤§å­¦åŠé«˜ç­‰é™¢æ ¡è®¡ç®—æœºçš„å­¦æœ¯ç³»ç»Ÿï¼Œåˆ™å·²</span><span><a rel="nofollow" href="http://baike.baidu.com/view/141536.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>å‘å±•</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆä¸ºä¸€ä¸ªè¦†ç›–äº”å¤§æ´²<span>150</span>å¤šä¸ªå›½å®¶çš„å¼€æ”¾å‹å…¨çƒ</span><span><a rel="nofollow" href="http://baike.baidu.com/view/541460.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è®¡ç®—æœºç½‘ç»œç³»ç»Ÿ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼Œæ‹¥æœ‰è®¸å¤šæœåŠ¡å•†ã€‚æ™®é€šç”µè„‘ç”¨æˆ·åªéœ€è¦ä¸€å°ä¸ªäººè®¡ç®—æœºç”¨ç”µè¯çº¿é€šè¿‡</span><span><a rel="nofollow" href="http://baike.baidu.com/view/1074.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è°ƒåˆ¶è§£è°ƒå™¨</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">å’Œ</span><span><a rel="nofollow" href="http://baike.baidu.com/view/1706.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>å› ç‰¹ç½‘</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">æœåŠ¡å•†è¿æ¥ï¼Œä¾¿å¯è¿›å…¥å› ç‰¹ç½‘ã€‚ä½†</span><span><a rel="nofollow" href="http://baike.baidu.com/view/1706.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>å› ç‰¹ç½‘</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¹¶ä¸æ˜¯å…¨çƒå”¯ä¸€çš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/380232.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>äº’è”ç½‘ç»œ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ã€‚ä¾‹å¦‚åœ¨</span><span><a rel="nofollow" href="http://baike.baidu.com/view/3622.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>æ¬§æ´²</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼Œè·¨å›½çš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/380232.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>äº’è”ç½‘ç»œ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">å°±æœ‰<span>â€œ</span>æ¬§ç›Ÿç½‘<span>â€</span>ï¼ˆ<span>Euronet</span>ï¼‰ï¼Œ<span>â€œ</span>æ¬§æ´²å­¦æœ¯ä¸ç ”ç©¶ç½‘<span>â€</span>ï¼ˆ<span>EARN</span>ï¼‰ï¼Œ<span>â€œ</span>æ¬§æ´²ä¿¡æ¯ç½‘<span>â€</span>ï¼ˆ<span>EIN</span>ï¼‰ï¼Œåœ¨ç¾å›½è¿˜æœ‰<span>â€œ</span>å›½é™…å­¦æœ¯ç½‘<span>â€</span>ï¼ˆ</span><span><a rel="nofollow" href="http://baike.baidu.com/view/370280.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;">BITNET</span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼‰ï¼Œä¸–ç•ŒèŒƒå›´çš„è¿˜æœ‰<span>â€œ</span>é£å¤šç½‘<span>â€</span>ï¼ˆå…¨çƒæ€§çš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/66.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;">BBS</span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç³»ç»Ÿï¼‰ç­‰ã€‚ä½†è¿™äº›ç½‘ç»œå…¶å®æ ¹æœ¬å°±ä¸éœ€è¦çŸ¥é“ï¼Œæ„Ÿè°¢<span>IP</span>åè®®çš„å¸®åŠ©ï¼Œåªè¦çŸ¥é“ä»–ä»¬æ˜¯å¯ä»¥äº’è”äº’é€šçš„å°±å¯ä»¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¿™äº›è·¯ç”±è¡¨çš„é…ç½®å·¥ä½œæ˜¯ç”±ç½‘ç»œç®¡ç†å‘˜å®Œæˆçš„ï¼Œè€Œä¸æ˜¯ç”±åƒæˆ‘ä»¬è¿™æ ·çš„ç¨‹åºå‘˜æ¥åšã€‚ä½†æ˜¯å¦‚æœä½ æƒ³è¦äº†è§£è¿™æ–¹é¢çš„æ›´å¤šå†…å®¹ï¼Œ</span><span style="color: rgb(34, 34, 34);"> </span><span style="color: rgb(34, 34, 34);">é‚£ä¹ˆæ¥è‡ª</span><span><a rel="noopener" href="http://arstechnica.com/guides/other/peering-and-transit.ars" target="_blank"><span style="color: rgb(221, 51, 51);">ars technica</span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">çš„è¿™ç¯‡æ–‡ç« å°†æä¾›ç½‘ç»œæ˜¯å¦‚ä½•åœ¨ç«¯ä¸ç«¯ä¹‹é—´äº’è”æ¥äº¤æ¢æ•°æ®åŒ…ä»¥åŠä¼ è¾“å…³ç³»æ–¹é¢ä¸€äº›éå¸¸æœ‰è¶£çš„è§è§£ã€‚ä½ è¿˜å¯ä»¥é€šè¿‡<span>linux</span>å¸¸è§é—®é¢˜ä¸­è·¯ç”±è¡¨ï¼ˆ</span><span><a rel="noopener" href="http://www.faqs.org/docs/linux_network/x-087-2-issues.routing.html" target="_blank"><span style="color: rgb(221, 51, 51);">routing tables</span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼‰æ–¹é¢çš„æ–‡ç« ä»¥åŠç»´åŸºç™¾ç§‘ä¸Šé¢çš„è¾¹ç•Œç½‘å…³åè®®ï¼ˆ</span><span><a rel="noopener" href="http://en.wikipedia.org/wiki/Border_Gateway_Protocol" target="_blank"><span style="color: rgb(221, 51, 51);">border gateway protocol</span></a></span><span style="color: rgb(34, 34, 34);"> </span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼‰çš„è§£é‡Šæ¥è·å¾—æ›´å¤šçš„ç»†èŠ‚ã€‚è¾¹ç•Œç½‘å…³åè®®æ˜¯ç”¨æ¥è‡ªåŠ¨å‘ç°å¦‚ä½•åœ¨ç½‘ç»œä¹‹é—´è·¯ç”±æ•°æ®åŒ…çš„åè®®ï¼Œæœ‰äº†å®ƒæ‰çœŸæ­£çš„è®©äº’è”ç½‘æˆä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œèƒ½å¤Ÿåœ¨ä¸ç¨³å®šçš„è¿æ¥é‡Œé¢è¿›è¡ŒåŠ¨æ€çš„è·¯ç”±ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¾¹ç•Œç½‘å…³åè®®ï¼ˆ<span>BGP</span>ï¼‰æ˜¯è¿è¡Œäº<span> TCP </span>ä¸Šçš„ä¸€ç§</span><span><a rel="nofollow" href="http://baike.baidu.com/view/2663.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è‡ªæ²»ç³»ç»Ÿ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">çš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/7031.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è·¯ç”±åè®®</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ã€‚<span> BGP </span>æ˜¯å”¯ä¸€ä¸€ä¸ªç”¨æ¥å¤„ç†åƒå› ç‰¹ç½‘å¤§å°çš„ç½‘ç»œçš„åè®®ï¼Œä¹Ÿæ˜¯å”¯ä¸€èƒ½å¤Ÿå¦¥å–„å¤„ç†å¥½ä¸ç›¸å…³</span><span><a rel="nofollow" href="http://baike.baidu.com/view/4303246.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è·¯ç”±åŸŸ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">é—´çš„å¤šè·¯è¿æ¥çš„åè®®ã€‚<span> BGP </span>æ„å»ºåœ¨<span> EGP </span>çš„ç»éªŒä¹‹ä¸Šã€‚<span> BGP </span>ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ˜¯å’Œå…¶ä»–çš„<span> BGP </span>ç³»ç»Ÿäº¤æ¢ç½‘ç»œå¯è¾¾ä¿¡æ¯ã€‚ç½‘ç»œå¯è¾¾ä¿¡æ¯åŒ…æ‹¬åˆ—å‡ºçš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/2663.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è‡ªæ²»ç³»ç»Ÿ</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼ˆ<span>AS</span>ï¼‰çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æœ‰æ•ˆåœ°æ„é€ äº†<span> AS </span>äº’è”çš„æ‹“æœ´å›¾å¹¶ç”±æ­¤æ¸…é™¤äº†</span><span><a rel="nofollow" href="http://baike.baidu.com/view/2098835.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>è·¯ç”±ç¯è·¯</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼ŒåŒæ—¶åœ¨<span> AS </span>çº§åˆ«ä¸Šå¯å®æ–½ç­–ç•¥å†³ç­–ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><br><h2 id="è™šæ‹Ÿçš„è¿æ¥">è™šæ‹Ÿçš„è¿æ¥</h2><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç°åœ¨è®©æˆ‘ä»¬å›åˆ°è¿æ¥æœ¬èº«ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡<span>TCP</span>å¥—æ¥å­—ï¼Œé‚£ä¹ˆä½ ä¼šçŸ¥é“å®ƒä»¬çœ‹èµ·æ¥çœŸçš„åƒæ˜¯ä¸€ä¸ªè¿æ¥ï¼Œä½†æ˜¯ç”±äº<span>TCP</span>åè®®æ˜¯åœ¨<span>IP</span>åè®®ä¹‹ä¸Šå®ç°çš„ï¼Œè€Œ<span>IP</span>åè®®æ˜¯é€šè¿‡åœ¨è®¡ç®—æœºä¹‹é—´è¿›è¡Œè·³è½¬æ¥ä¼ é€’æ•°æ®åŒ…çš„ï¼Œæ‰€ä»¥<span>TCP</span>çš„è¿æ¥ä»ç„¶æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¦‚æœ<span>TCP</span>åè®®å¯ä»¥åŸºäº<span>IP</span>åè®®å»ºç«‹è™šæ‹Ÿè¿æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨<span>UDP</span>åè®®ä¸Šæ‰€åšçš„ä¸€åˆ‡éƒ½å¯ä»¥åº”ç”¨äº<span>TCP</span>åè®®ä¸Šã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è®©æˆ‘ä»¬ç»™è™šæ‹Ÿè¿æ¥ä¸‹ä¸ªå®šä¹‰ï¼šä¸¤ä¸ªè®¡ç®—æœºä¹‹é—´ä»¥æŸä¸ªå›ºå®šé¢‘ç‡æ¯”å¦‚è¯´æ¯ç§’<span>10</span>ä¸ªæ•°æ®åŒ…æ¥äº¤æ¢<span>UDP</span>çš„æ•°æ®åŒ…ã€‚åªè¦æ•°æ®åŒ…ä»ç„¶åœ¨ä¼ è¾“ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤å°è®¡ç®—æœºä¹‹é—´å­˜åœ¨ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬çš„è¿æ¥æœ‰ä¸¤ä¾§ï¼š</span> </span></p><ul type="disc"><li class="MsoNormal" style="color:#222222;text-align:left;vertical-align:baseline"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt;">ä¸€ä¸ªè®¡ç®—æœºååœ¨é‚£å„¿ä¾¦å¬æ˜¯å¦æœ‰å¦ä¸€å°è®¡ç®—æœºè¿æ¥åˆ°å®ƒã€‚æˆ‘ä»¬ç§°è´Ÿè´£ç›‘å¬çš„è¿™å°è®¡ç®—æœºä¸ºæœåŠ¡å™¨ï¼ˆ<span>server</span>ï¼‰ã€‚</span> </span></li><li class="MsoNormal" style="color:#222222;text-align:left;vertical-align:baseline"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt;">å¦ä¸€å°è®¡ç®—æœºä¼šé€šè¿‡ä¸€ä¸ªæŒ‡å®šçš„<span>IP</span>åœ°å€å’Œç«¯å£è¿æ¥åˆ°ä¸€ä¸ªæœåŠ¡å™¨ã€‚æˆ‘ä»¬ç§°ä¸»åŠ¨è¿æ¥çš„è¿™å°ç”µè„‘ä¸ºå®¢æˆ·ç«¯ï¼ˆ<span>client</span>ï¼‰ã€‚</span> </span></li></ul><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åœ¨æˆ‘ä»¬çš„åœºæ™¯é‡Œï¼Œæˆ‘ä»¬åªå…è®¸ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨ä»»æ„çš„æ—¶å€™è¿æ¥åˆ°æœåŠ¡å™¨ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« é‡Œé¢æ‹“å±•æˆ‘ä»¬çš„è¿æ¥ç³»ç»Ÿä»¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯çš„åŒæ—¶è¿æ¥ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‡å®šæœåŠ¡å™¨çš„<span>IP</span>åœ°å€æ˜¯ä¸€ä¸ªå›ºå®šçš„<span>IP</span>åœ°å€ï¼Œå®¢æˆ·ç«¯å¯ä»¥éšæ—¶ç›´æ¥è¿æ¥ä¸Šæ¥ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„æ–‡ç« é‡Œé¢ä»‹ç»åŒ¹é…ï¼ˆ<span>matchmaking</span>ï¼‰å’Œ<span>NAT</span>æ‰“ç©¿ï¼ˆ<span>NATpunch-through</span>ï¼‰ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><br><h2 id="åè®®ID">åè®®ID</h2><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç”±äº<span>UDP</span>åè®®æ˜¯æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„<span>UDP</span>å¥—æ¥å­—å¯ä»¥æ¥å—æ¥è‡ªä»»ä½•ç”µè„‘çš„æ•°æ®åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬æƒ³è¦ç¼©å°æ¥æ”¶æ•°æ®åŒ…çš„èŒƒå›´ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„æœåŠ¡å™¨åªæ¥æ”¶é‚£äº›ä»æˆ‘ä»¬çš„å®¢æˆ·ç«¯å‘é€å‡ºæ¥çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„å®¢æˆ·ç«¯åªæ¥æ”¶é‚£äº›ä»æˆ‘ä»¬çš„æœåŠ¡ç«¯å‘é€å‡ºæ¥çš„æ•°æ®åŒ…ã€‚æˆ‘ä»¬ä¸èƒ½åªé€šè¿‡åœ°å€æ¥è¿‡æ»¤æˆ‘ä»¬çš„æ•°æ®åŒ…ï¼Œå› ä¸ºæœåŠ¡å™¨æ²¡æœ‰åŠæ³•æå‰çŸ¥é“å®¢æˆ·ç«¯çš„åœ°å€ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¯ä¸€ä¸ª<span>UDP</span>æ•°æ®åŒ…å‰é¢åŠ ä¸Šä¸€ä¸ªåŒ…å«<span>32</span>ä½åè®®<span>id</span>çš„å¤´<span>,</span>å¦‚ä¸‹æ‰€ç¤º<span>:</span></span> </span></p><div style="border:solid #F0F0F0 1.0pt;border-left:solid #E0E0E0 2.25pt;padding:0cm 0cm 0cm 0cm;background:whitesmoke"><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   [uint protocol id]</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">    <i><span style="border:none windowtext 1.0pt;padding:0cm">(packet dataâ€¦)</span></i></span> </span></p></div><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åè®®<span>ID</span>åªæ˜¯ä¸€äº›ç‹¬ç‰¹çš„ä»£è¡¨æˆ‘ä»¬çš„æ¸¸æˆåè®®çš„æ•°å­—ã€‚æˆ‘ä»¬çš„<span>UDP</span>å¥—æ¥å­—æ”¶åˆ°çš„ä»»æ„æ•°æ®åŒ…é¦–å…ˆéƒ½è¦æ£€æŸ¥æ•°æ®åŒ…çš„é¦–å››ä½ã€‚å¦‚æœå®ƒä»¬å’Œæˆ‘ä»¬çš„åè®®<span>ID</span>ä¸åŒ¹é…çš„è¯ï¼Œè¿™ä¸ªæ•°æ®åŒ…å°±ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœå®ƒä»¬å’Œæˆ‘ä»¬çš„åè®®<span>ID</span>åŒ¹é…çš„è¯ï¼Œæˆ‘ä»¬ä¼šå‰”é™¤æ•°æ®åŒ…çš„ç¬¬ä¸€ä¸ªå››ä¸ªå­—èŠ‚å¹¶æŠŠå‰©ä¸‹çš„éƒ¨åˆ†å‘ç»™æˆ‘ä»¬çš„ç³»ç»Ÿè¿›è¡Œå¤„ç†ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½ åªè¦é€‰æ‹©ä¸€äº›éå¸¸ç‹¬ç‰¹çš„æ•°å­—å°±å¯ä»¥äº†ï¼Œè¿™äº›æ•°å­—å¯ä»¥æ˜¯ä½ çš„æ¸¸æˆåå­—å’Œåè®®ç‰ˆæœ¬å·çš„æ•£åˆ—å€¼ã€‚ä¸è¿‡è¯´çœŸçš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸œè¥¿ã€‚è¿™ç§åšæ³•çš„é‡ç‚¹æ˜¯æŠŠæˆ‘ä»¬çš„è¿æ¥è§†ä¸ºåŸºäºåè®®è¿›è¡Œé€šä¿¡çš„è¿æ¥ï¼Œå¦‚æœåè®®<span>ID</span>ä¸åŒï¼Œé‚£ä¹ˆè¿™æ ·çš„æ•°æ®åŒ…å°†è¢«ä¸¢å¼ƒæ‰ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><br><h2 id="æ£€æµ‹è¿æ¥">æ£€æµ‹è¿æ¥</h2><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥æ£€æµ‹è¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“ç„¶æˆ‘ä»¬å¯ä»¥å®ç°ä¸€äº›å¤æ‚çš„æ¡æ‰‹åè®®ï¼Œç‰µæ‰¯åˆ°å¤šä¸ª<span>UDP</span>æ•°æ®åŒ…æ¥å›ä¼ é€’ã€‚æ¯”å¦‚è¯´å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª<span>â€</span>è¯·æ±‚è¿æ¥ï¼ˆ<span>request connection</span>ï¼‰<span>â€œ</span>çš„æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…çš„æ—¶å€™ä¼šå›åº”ä¸€ä¸ª<span>â€</span>è¿æ¥æ¥å—ï¼ˆ<span>connection accepted</span>ï¼‰<span>â€œ</span>çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œæˆ–è€…å¦‚æœè¿™ä¸ªæœåŠ¡å™¨å·²ç»æœ‰è¶…è¿‡ä¸€ä¸ªè¿æ¥çš„å®¢æˆ·ç«¯ä»¥åï¼Œä¼šå›å¤ä¸€ä¸ªâ€œæˆ‘å¾ˆå¿™ï¼ˆ<span>iâ€™m busy</span>ï¼‰<span>â€</span>çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);"> </span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ–è€…ã€‚ã€‚æˆ‘ä»¬å¯ä»¥è®¾ç½®æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œè®©å®ƒä»¥å®ƒæ”¶åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„åè®®<span>ID</span>ä½œä¸ºæ­£ç¡®çš„åè®®<span>ID</span>ï¼Œå¹¶åœ¨æ”¶åˆ°ç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„æ—¶å€™å°±è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹èµ·æ¥äº†ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å®¢æˆ·ç«¯åªæ˜¯å¼€å§‹ç»™æœåŠ¡å™¨å‘é€æ•°æ®åŒ…ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘è¿‡æ¥çš„ç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„æ—¶å€™ï¼Œå®ƒä¼šè®°å½•ä¸‹å®¢æˆ·ç«¯çš„<span>IP</span>åœ°å€å’Œç«¯å£å·ï¼Œç„¶åå¼€å§‹ç»™å®¢æˆ·ç«¯å›åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å®¢æˆ·ç«¯å·²ç»çŸ¥é“äº†æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯æ˜¯åœ¨è¿æ¥çš„æ—¶å€™æŒ‡å®šçš„ã€‚æ‰€ä»¥å½“å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åŒ…çš„æ—¶å€™ï¼Œå®ƒä¼šè¿‡æ»¤æ‰ä»»ä½•ä¸æ˜¯æ¥è‡ªäºæœåŠ¡å™¨åœ°å€çš„æ•°æ®åŒ…ã€‚åŒæ ·çš„ï¼Œä¸€æ—¦æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå®ƒå°±ä¼šä»<span>â€œrecvfromâ€</span>å‡½æ•°é‡Œé¢å¾—åˆ°å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£å·ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥å¿½ç•¥ä»»ä½•ä¸æ˜¯å‘è‡ªå®¢æˆ·ç«¯åœ°å€çš„æ•°æ®åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ·å¾„æ¥é¿å¼€è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿåªæœ‰ä¸¤å°è®¡ç®—æœºä¼šå»ºç«‹è¿æ¥ã€‚åœ¨åé¢çš„æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å°†æ‹“å±•æˆ‘ä»¬çš„è¿æ¥ç³»ç»Ÿæ¥æ”¯æŒè¶…è¿‡ä¸¤å°è®¡ç®—æœºå‚ä¸å®¢æˆ·ç«¯<span>/</span>æœåŠ¡å™¨æˆ–è€…ç«¯å¯¹ç«¯ï¼ˆ<span>peer-to-peer</span>ï¼Œ<span>p2p</span>ï¼‰ç½‘ç»œæ¨¡å‹ï¼Œå¹¶ä¸”åœ¨é‚£ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šå‡çº§æˆ‘ä»¬çš„è¿æ¥åè®®æ–¹å¼æ¥è®©å®ƒå˜å¾—æ›´åŠ å¥å£®ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½†æ˜¯ç°åœ¨ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è®©äº‹æƒ…å˜å¾—è¶…å‡ºéœ€æ±‚çš„å¤æ‚åº¦å‘¢ï¼Ÿï¼ˆä½œè€…çš„æ„æ€æ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨ä¸éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„åœºæ™¯æ˜¯é¢å¯¹åªæœ‰ä¸¤å°è®¡ç®—æœºçš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆæ”¾è¿‡è¿™ä¸ªé—®é¢˜ã€‚ï¼‰</span> </span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><br></span></span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><br></span></span></p><p class="MsoTitle" align="left"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="border: 1pt none windowtext; padding: 0cm;"><br><h2 id="æ£€æµ‹æ–­çº¿çš„æƒ…å†µ">æ£€æµ‹æ–­çº¿çš„æƒ…å†µ</h2><br></span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬è¯¥å¦‚ä½•æ£€æµ‹æ–­çº¿ï¼ˆ<span>disconnection</span>ï¼‰çš„æƒ…å†µï¼Ÿ</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">é‚£ä¹ˆï¼Œå¦‚æœä¸€ä¸ªè¿æ¥è¢«å®šä¹‰ä¸ºæ¥æ”¶æ•°æ®åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰æ–­çº¿ä¸ºæ”¶ä¸åˆ°æ•°æ®åŒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä¸ºäº†æ£€æµ‹ä»€ä¹ˆæ—¶å€™å¼€å§‹æˆ‘ä»¬æ”¶ä¸åˆ°æ•°æ®åŒ…ï¼Œæˆ‘ä»¬è¦è®°å½•ä¸Šä¸€æ¬¡æˆ‘ä»¬ä»è¿æ¥çš„å¦å¤–ä¸€ä¾§æ”¶åˆ°æ•°æ®åŒ…åˆ°ç°åœ¨è¿‡å»äº†å¤šå°‘ç§’ï¼Œæˆ‘ä»¬åœ¨è¿æ¥çš„ä¸¤ä¾§éƒ½åšäº†è¿™ä¸ªäº‹æƒ…ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æ¯æ¬¡æˆ‘ä»¬ä»è¿æ¥çš„å¦å¤–ä¸€ç«¯æ”¶åˆ°æ•°æ®åŒ…çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡ç½®æˆ‘ä»¬çš„è®¡æ•°å™¨ä¸º<span>0.0</span>ï¼Œæ¯ä¸€æ¬¡æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šæŠŠè¿™æ¬¡æ›´æ–°åˆ°ä¸Šä¸€æ¬¡æ›´æ–°é€å»çš„æ—¶é—´é‡åŠ åˆ°è®¡æ•°å™¨ä¸Šã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¦‚æœè®¡æ•°å™¨çš„å€¼è¶…è¿‡æŸä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚è¯´<span>10</span>ç§’ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤å®šè¿™ä¸ªè¿æ¥â€œè¶…æ—¶<span>â€</span>äº†å¹¶ä¸”æˆ‘ä»¬ä¼šæ–­å¼€è¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¿™ä¹Ÿå¯ä»¥å¾ˆä¼˜é›…çš„å¤„ç†å½“æœåŠ¡å™¨å·²ç»ä¸ä¸€ä¸ªå®¢æˆ·ç«¯å»ºç«‹è¿æ¥ä»¥åï¼Œæœ‰ç¬¬äºŒä¸ªå®¢æˆ·ç«¯è¯•å›¾ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„æƒ…å†µã€‚å› ä¸ºæœåŠ¡å™¨å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œå®ƒä¼šå¿½ç•¥æ‰ä¸æ˜¯æ¥è‡ªè¿æ¥çš„å®¢æˆ·ç«¯åœ°å€å‘å‡ºæ¥çš„æ•°æ®åŒ…ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªå®¢æˆ·ç«¯åœ¨å‘å‡ºäº†æ•°æ®åŒ…ä»¥åå¾—ä¸åˆ°ä»»ä½•å›åº”ï¼Œè¿™æ ·å®ƒå°±ä¼šåˆ¤æ–­è¿æ¥è¶…æ—¶å¹¶æ–­å¼€è¿æ¥ã€‚</span> </span></p><br><h2 id="æ€»ç»“">æ€»ç»“</h2><br><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è€Œè¿™ä¸€åˆ‡éƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ï¼šç”¨æŸç§æ–¹æ³•å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œè¿‡æ»¤æ‰é‚£äº›ä¸æ˜¯æ¥è‡ªè¿™ä¸ªè¿æ¥çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”å¦‚æœå‘ç°è¿æ¥è¶…æ—¶å°±æ–­å¼€è¿æ¥ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬çš„è¿æ¥å°±è·Ÿä»»ä½•<span>TCP</span>è¿æ¥ä¸€æ ·çœŸå®ï¼Œå¹¶ä¸”<span>UDP</span>æ•°æ®åŒ…æ„æˆçš„ç¨³å®šæ•°æ®æµä¸ºå¤šäººåœ¨çº¿åŠ¨ä½œç½‘ç»œæ¸¸æˆæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">æˆ‘ä»¬è¿˜è·å¾—äº†ä¸€äº›äº’è”ç½‘æ˜¯å¦‚ä½•è·¯ç”±æ•°æ®åŒ…çš„è§è§£ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬ç°åœ¨çŸ¥é“<span>UDP</span>æ•°æ®åŒ…æœ‰æ—¶å€™ä¼šåœ¨åˆ°è¾¾çš„æ—¶å€™æ˜¯ä¹±åºçš„åŸå› æ˜¯å› ä¸ºå®ƒä»¬åœ¨<span>IP</span>å±‚ä¼ è¾“çš„æ—¶å€™é‡‡ç”¨ä¸åŒçš„è·¯ç”±ï¼çœ‹ä¸‹äº’è”ç½‘çš„åœ°å›¾ï¼Œä½ ä¼šä¸ä¼šå¯¹ä½ çš„æ•°æ®åŒ…èƒ½å¤Ÿåˆ°è¾¾æ­£ç¡®çš„ç›®çš„ç‚¹æ„Ÿåˆ°éå¸¸çš„ç¥å¥‡ï¼Ÿå¦‚æœä½ æƒ³å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œæ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œç»´åŸºç™¾ç§‘ä¸Šçš„è¿™ç¯‡æ–‡ç« <span>(<a rel="noopener" href="https://en.wikipedia.org/wiki/Internet_backbone" target="_blank">Internet backbone</a>)</span>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç°åœ¨ï¼Œæ—¢ç„¶ä½ å·²ç»æœ‰äº†ä¸€ä¸ªåŸºäº<span>UDP</span>åè®®çš„è™šæ‹Ÿè¿æ¥ï¼Œä½ å¯ä»¥è½»æ¾çš„åœ¨ä¸¤ä¸ªç©å®¶çš„å¤šäººåœ¨çº¿æ¸¸æˆé‡Œé¢è®¾ç½®ä¸€ä¸ªå®¢æˆ·ç«¯<span>/</span>æœåŠ¡å™¨å…³ç³»è€Œä¸éœ€è¦ä½¿ç”¨<span>TCP</span>åè®®ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½ å¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« çš„ç¤ºä¾‹æºä»£ç ï¼ˆ</span><span><a rel="noopener" href="http://netgame.googlecode.com/files/VirtualConnectionOverUDP.zip" target="_blank"><span style="color: rgb(221, 51, 51);">examplesource code</span></a></span><span class="apple-converted-space"><span style="color: rgb(34, 34, 34);"> </span></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ï¼‰æ‰¾åˆ°ä¸€ä¸ªå…·ä½“å®ç°ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å®¢æˆ·ç«¯<span>/</span>æœåŠ¡å™¨ç¨‹åºï¼Œæ¯ç§’äº¤æ¢<span>30</span>ä¸ªæ•°æ®åŒ…ã€‚ä½ å¯ä»¥åœ¨ä»»æ„ä½ å–œæ¬¢çš„æœºå™¨ä¸Šè¿è¡Œè¿™ä¸ªæœåŠ¡å™¨ï¼Œåªè¦ç»™å®ƒæä¾›ä¸€ä¸ªå…¬å…±çš„<span>IP</span>åœ°å€å°±å¯ä»¥äº†ï¼Œéœ€è¦å…¬å…±<span>IP</span>åœ°å€çš„åŸå› æ˜¯æˆ‘ä»¬ç›®å‰è¿˜ä¸æ”¯æŒ<span>NAT</span>æ‰“ç©¿</span><span style="color: rgb(34, 34, 34);">ï¼ˆ</span><span><a rel="noopener" href="http://www.jenkinssoftware.com/raknet/manual/natpunchthrough.html" target="_blank"><span style="color: rgb(221, 51, 51);">NAT punch-through</span></a></span><span style="color: rgb(34, 34, 34);"> </span><span style="color: rgb(34, 34, 34);">ï¼‰ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">NAT</span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ç©¿è¶Šï¼ˆ<span>NATtraversal</span>ï¼‰æ¶‰åŠ<span>TCP/IP</span>ç½‘ç»œä¸­çš„ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œå³åœ¨å¤„äºä½¿ç”¨äº†<span>NAT</span>è®¾å¤‡çš„ç§æœ‰<span>TCP/IP</span>ç½‘ç»œä¸­çš„</span><span><a rel="nofollow" href="http://baike.baidu.com/view/23880.htm" target="_blank"><span style="font-size: 12pt; color: rgb(34, 34, 34); text-decoration: none;"><span>ä¸»æœº</span></span></a></span><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä¹‹é—´å»ºç«‹è¿æ¥çš„é—®é¢˜ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åƒè¿™æ ·æ¥è¿è¡Œå®¢æˆ·ç«¯ï¼š</span> </span></p><div style="border:solid #F0F0F0 1.0pt;border-left:solid #E0E0E0 2.25pt;padding:0cm 0cm 0cm 0cm;background:whitesmoke"><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline; border: none; padding: 0cm; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="color: rgb(34, 34, 34);">   ./Client 205.10.40.50</span> </span></p></div><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å®ƒä¼šå°è¯•è¿æ¥åˆ°ä½ åœ¨å‘½ä»¤è¡Œè¾“å…¥çš„åœ°å€ã€‚å¦‚æœä½ ä¸è¾“å…¥åœ°å€çš„è¯ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šè¿æ¥åˆ°<span>127.0.0.1</span>ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å½“ä¸€ä¸ªå®¢æˆ·ç«¯å·²ç»ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œä½ å¯ä»¥å°è¯•ç”¨å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¿æ¥è¿™ä¸ªæœåŠ¡å™¨ï¼Œä½ ä¼šæ³¨æ„åˆ°è¿™æ¬¡è¿æ¥çš„å°è¯•å¤±è´¥äº†ã€‚è¿™ä¹ˆè®¾è®¡æ˜¯æ•…æ„çš„ã€‚å› ä¸ºåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€æ¬¡åªå…è®¸ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ä¸ŠæœåŠ¡å™¨ã€‚ </span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ä½ ä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿æ¥çš„çŠ¶æ€ä¸‹å°è¯•åœæ­¢å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ï¼Œä½ ä¼šæ³¨æ„åˆ°<span>10</span>ç§’ä»¥åè¿æ¥çš„å¦å¤–ä¸€ä¾§ä¼šåˆ¤æ–­è¿æ¥è¶…æ—¶å¹¶æ–­å¼€è¿æ¥ã€‚å½“å®¢æˆ·ç«¯è¶…æ—¶çš„æ—¶å€™å®ƒä¼šé€€åˆ°<span>shell</span>çª—å£ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¼šé€€åˆ°ç›‘å¬çŠ¶æ€ä¸ºä¸‹ä¸€æ¬¡çš„è¿æ¥åšå¥½å‡†å¤‡ã€‚</span> </span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">é¢„å‘Šä¸‹æ¥ä¸‹æ¥çš„ä¸€ç¯‡æ–‡ç« çš„é¢˜ç›®<span>:</span>ã€ŠåŸºäº<span>UDP</span>çš„å¯é ã€æœ‰åºå’Œæ‹¥å¡é¿å…çš„ä¼ è¾“ã€‹ï¼Œæ¬¢è¿ç»§ç»­é˜…è¯»ã€‚</span> </span></p><p class="MsoNormal"><span style="font-family:å¾®è½¯é›…é»‘;"><b><u><span style="color: rgb(34, 34, 34); border: 1pt none windowtext; padding: 0cm;"><span style="text-decoration: none"> </span></span></u></b> </span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„è¯ï¼Œè¯·è€ƒè™‘å¯¹æˆ‘åšä¸€ä¸ªå°å°çš„æèµ ã€‚ææ¬¾ä¼šé¼“åŠ±æˆ‘å†™æ›´å¤šçš„æ–‡ç« <span>!</span>ï¼ˆåŸæ–‡ä½œè€…åœ¨åŸæ–‡çš„åœ°å€ä¸Šæä¾›äº†ä¸€ä¸ªæèµ ç½‘å€ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥åœ¨æ–‡ç« å¼€å§‹çš„åœ°æ–¹æ‰¾åˆ°åŸæ–‡åœ°å€è¿›è¡Œæèµ ï¼‰</span> </span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);"><br></span></span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">ã€ç‰ˆæƒå£°æ˜ã€‘</span> </span></p><p class="MsoNormal"><span style="font-family:å¾®è½¯é›…é»‘;"><span style="font-size: 12pt; color: rgb(34, 34, 34);">åŸæ–‡ä½œè€…æœªåšæƒåˆ©å£°æ˜ï¼Œè§†ä¸ºå…±äº«çŸ¥è¯†äº§æƒè¿›å…¥å…¬å…±é¢†åŸŸï¼Œè‡ªåŠ¨è·å¾—æˆæƒã€‚</span></span><span style="font-size:9.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333"> </span></p><p class="MsoNormal" align="left" style="text-indent: 24pt;"><span style="font-family:&quot;Lucida Sans Unicode&quot;,&quot;sans-serif&quot;;color:#222222"> </span></p></div>                    <br>                



<h1 id="æºç ä¸‹è½½"><a href="#æºç ä¸‹è½½" class="headerlink" title="æºç ä¸‹è½½"></a>æºç ä¸‹è½½</h1><p>å›  Gaffer On Games çš„æºç åŸä¸‹è½½åœ°å€å¤±æ•ˆ, æ‰€ä»¥ç‰¹åœ°è¡¥ä¸Š.</p>
<p><a href="https://github.com/no5ix/ReliableUDP" target="_blank" rel="noopener">è¯·ç‚¹å‡»</a></p>

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/æ¸¸æˆç½‘ç»œå¼€å‘äºŒä¹‹æ•°æ®çš„å‘é€ä¸æ¥æ”¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/æ¸¸æˆç½‘ç»œå¼€å‘äºŒä¹‹æ•°æ®çš„å‘é€ä¸æ¥æ”¶/" itemprop="url">æ¸¸æˆç½‘ç»œå¼€å‘äºŒä¹‹æ•°æ®çš„å‘é€ä¸æ¥æ”¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-15T22:20:34+00:00">
                11-15-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><p><a href="https://gafferongames.com/post/sending_and_receiving_packets/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p></p><h2 id="introduction">Introduction</h2><p></p>
<p>Hi, I&rsquo;m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <a href="https://gafferongames.com/categories/game-networking/" target="_blank" rel="noopener"><strong>Networking for Game Programmers</strong></a>.</p><br><p>In the <a href="https://gafferongames.com/post/udp_vs_tcp/" target="_blank" rel="noopener">previous article</a> we discussed options for sending data between computers and decided to use UDP instead of TCP for time critical data.</p><br><p>In this article I am going to show you how to send and receive UDP packets.</p><br><h2 id="bsd-sockets">BSD sockets</h2><br><p>For most modern platforms you have some sort of basic socket layer available based on BSD sockets.</p><br><p>BSD sockets are manipulated using simple functions like &ldquo;socket&rdquo;, &ldquo;bind&rdquo;, &ldquo;sendto&rdquo; and &ldquo;recvfrom&rdquo;. You can of course work directly with these functions if you wish, but it becomes difficult to keep your code platform independent because each platform is slightly different.</p><br><p>So although I will first show you BSD socket example code to demonstrate basic socket usage, we won&rsquo;t be using BSD sockets directly for long. Once we&rsquo;ve covered all basic socket functionality we&rsquo;ll abstract everything away into a set of classes, making it easy to you to write platform independent socket code.</p><br><h2 id="platform-specifics">Platform specifics</h2><br><p>First let&rsquo;s setup a define so we can detect what our current platform is and handle the slight differences in sockets from one platform to another:</p><br><pre><code>    // platform detection<br><br>    #define PLATFORM_WINDOWS  1<br>    #define PLATFORM_MAC      2<br>    #define PLATFORM_UNIX     3<br><br>    #if defined(_WIN32)<br>    #define PLATFORM PLATFORM_WINDOWS<br>    #elif defined(<strong>APPLE</strong>)<br>    #define PLATFORM PLATFORM_MAC<br>    #else<br>    #define PLATFORM PLATFORM_UNIX<br>    #endif<br></code></pre><br><p>Now let&rsquo;s include the appropriate headers for sockets. Since the header files are platform specific, we&rsquo;ll use the platform #define to include different sets of files depending on the platform:</p><br><pre><code>    #if PLATFORM == PLATFORM_WINDOWS<br><br>        #include &lt;winsock2.h&gt;<br><br>    #elif PLATFORM == PLATFORM_MAC ||<br>          PLATFORM == PLATFORM_UNIX<br><br>        #include &lt;sys/socket.h&gt;<br>        #include &lt;netinet/in.h&gt;<br>        #include &lt;fcntl.h&gt;<br><br>    #endif<br></code></pre><br><p>Sockets are built in to the standard system libraries on unix-based platforms so we don&rsquo;t have to link to any additonal libraries. However, on Windows we need to link to the winsock library to get socket functionality.</p><br><p>Here is a simple trick to do this without having to change your project or makefile:</p><br><pre><code>    #if PLATFORM == PLATFORM_WINDOWS<br>    #pragma comment( lib, &quot;wsock32.lib&quot; )<br>    #endif<br></code></pre><br><p>I like this trick because I&rsquo;m super lazy. You can always link from your project or makefile if you wish.</p><br><h2 id="initializing-the-socket-layer">Initializing the socket layer</h2><br><p>Most unix-like platforms (including macosx) don&rsquo;t require any specific steps to initialize the sockets layer, however Windows requires that you jump through some hoops to get your socket code working.</p><br><p>You must call &ldquo;WSAStartup&rdquo; to initialize the sockets layer before you call any socket functions, and &ldquo;WSACleanup&rdquo; to shutdown when you are done.</p><br><p>Let&rsquo;s add two new functions:</p><br><pre><code>    bool InitializeSockets()<br>    {<br>        #if PLATFORM == PLATFORM_WINDOWS<br>        WSADATA WsaData;<br>        return WSAStartup( MAKEWORD(2,2),<br>                           &amp;WsaData )<br>            == NO_ERROR;<br>        #else<br>        return true;<br>        #endif<br>    }<br><br>    void ShutdownSockets()<br>    {<br>        #if PLATFORM == PLATFORM_WINDOWS<br>        WSACleanup();<br>        #endif<br>    }<br></code></pre><br><p>Now we have a platform independent way to initialize the socket layer.</p><br><h2 id="creating-a-socket">Creating a socket</h2><br><p>It&rsquo;s time to create a UDP socket, here&rsquo;s how to do it:</p><br><pre><code>    int handle = socket( AF_INET,<br>                         SOCK_DGRAM,<br>                         IPPROTO_UDP );<br><br>    if ( handle &lt;= 0 )<br>    {<br>        printf( &quot;failed to create socket\n&quot; );<br>        return false;<br>    }<br></code></pre><br><p>Next we bind the UDP socket to a port number (eg. 30000). Each socket must be bound to a unique port, because when a packet arrives the port number determines which socket to deliver to. Don&rsquo;t use ports lower than 1024 because they are reserved for the system. Also try to avoid using ports above 50000 because they used when dynamically assigning ports.</p><br><p>Special case: if you don&rsquo;t care what port your socket gets bound to just pass in &ldquo;0&rdquo; as your port, and the system will select a free port for you.</p><br><pre><code>    sockaddr_in address;<br>    address.sin_family = AF_INET;<br>    address.sin_addr.s_addr = INADDR_ANY;<br>    address.sin_port =<br>        htons( (unsigned short) port );<br><br>    if ( bind( handle,<br>               (const sockaddr<em>) &amp;address,<br>               sizeof(sockaddr_in) ) &lt; 0 )<br>    {<br>        printf( &quot;failed to bind socket\n&quot; );<br>        return false;<br>    }<br></em></code></pre><br><p>Now the socket is ready to send and receive packets.</p><br><p>But what is this mysterious call to &ldquo;htons&rdquo; in the code above? This is just a helper function that converts a 16 bit integer value from host byte order (little or big-endian) to network byte order (big-endian). This is required whenever you directly set integer members in socket structures.</p><br><p>You&rsquo;ll see &ldquo;htons&rdquo; (host to network short) and its 32 bit integer sized cousin &ldquo;htonl&rdquo; (host to network long) used several times throughout this article, so keep an eye out, and you&rsquo;ll know what is going on.</p><br><h2 id="setting-the-socket-as-non-blocking">Setting the socket as non-blocking</h2><br><p>By default sockets are set in what is called &ldquo;blocking mode&rdquo;.</p><br><p>This means that if you try to read a packet using &ldquo;recvfrom&rdquo;, the function will not return until a packet is available to read. This is not at all suitable for our purposes. Video games are realtime programs that simulate at 30 or 60 frames per second, they can&rsquo;t just sit there waiting for a packet to arrive!</p><br><p>The solution is to flip your sockets into &ldquo;non-blocking mode&rdquo; after you create them. Once this is done, the &ldquo;recvfrom&rdquo; function returns immediately when no packets are available to read, with a return value indicating that you should try to read packets again later.</p><br><p>Here&rsquo;s how put a socket in non-blocking mode:</p><br><pre><code>    #if PLATFORM == PLATFORM_MAC ||<br>        PLATFORM == PLATFORM_UNIX<br><br>        int nonBlocking = 1;<br>        if ( fcntl( handle,<br>                    F_SETFL,<br>                    O_NONBLOCK,<br>                    nonBlocking ) == -1 )<br>        {<br>            printf( &quot;failed to set non-blocking\n&quot; );<br>            return false;<br>        }<br><br>    #elif PLATFORM == PLATFORM_WINDOWS<br><br>        DWORD nonBlocking = 1;<br>        if ( ioctlsocket( handle,<br>                          FIONBIO,<br>                          &amp;nonBlocking ) != 0 )<br>        {<br>            printf( &quot;failed to set non-blocking\n&quot; );<br>            return false;<br>        }<br><br>    #endif<br></code></pre><br><p>Windows does not provide the &ldquo;fcntl&rdquo; function, so we use the &ldquo;ioctlsocket&rdquo; function instead.</p><br><h2 id="sending-packets">Sending packets</h2><br><p>UDP is a connectionless protocol, so each time you send a packet you must specify the destination address. This means you can use one UDP socket to send packets to any number of different IP addresses, there&rsquo;s no single computer at the other end of your UDP socket that you are connected to.</p><br><p>Here&rsquo;s how to send a packet to a specific address:</p><br><pre><code>    int sent_bytes =<br>        sendto( handle,<br>                (const char)packet_data,<br>                packet_size,<br>                0,<br>                (sockaddr<em>)&amp;address,<br>                sizeof(sockaddr_in) );<br><br>    if ( sent_bytes != packet_size )<br>    {<br>        printf( &quot;failed to send packet\n&quot; );<br>        return false;<br>    }<br></em></code></pre><br><p>Important! The return value from &ldquo;sendto&rdquo; only indicates if the packet was successfully sent from the local computer. It does <em>not</em> tell you whether or not the packet was received by the destination computer. UDP has no way of knowing whether or not the the packet arrived at its destination!</p><br><p>In the code above we pass a &ldquo;sockaddr_in&rdquo; structure as the destination address. How do we setup one of these structures?</p><br><p>Let&rsquo;s say we want to send to the address 207.45.186.98:30000</p><br><p>Starting with our address in this form:</p><br><pre><code>    unsigned int a = 207;<br>    unsigned int b = 45;<br>    unsigned int c = 186;<br>    unsigned int d = 98;<br>    unsigned short port = 30000;<br></code></pre><br><p>We have a bit of work to do to get it in the form required by &ldquo;sendto&rdquo;:</p><br><pre><code>    unsigned int address = ( a &lt;&lt; 24 ) |<br>                           ( b &lt;&lt; 16 ) |<br>                           ( c &lt;&lt; 8  ) |<br>                             d;<br><br>    sockaddr_in addr;<br>    addr.sin_family = AF_INET;<br>    addr.sin_addr.s_addr = htonl( address );<br>    addr.sin_port = htons( port );<br></code></pre><br><p>As you can see, we first combine the a,b,c,d values in range [0,255] into a single unsigned integer, with each byte of the integer now corresponding to the input values. We then initialize a &ldquo;sockaddr_in&rdquo; structure with the integer address and port, making sure to convert our integer address and port values from host byte order to network byte order using &ldquo;htonl&rdquo; and &ldquo;htons&rdquo;.</p><br><p>Special case: if you want to send a packet to yourself, there&rsquo;s no need to query the IP address of your own machine, just pass in the loopback address 127.0.0.1 and the packet will be sent to your local machine.</p><br><h2 id="receiving-packets">Receiving packets</h2><br><p>Once you have a UDP socket bound to a port, any UDP packets sent to your sockets IP address and port are placed in a queue. To receive packets just loop and call &ldquo;recvfrom&rdquo; until it fails with EWOULDBLOCK indicating there are no more packets to receive.</p><br><p>Since UDP is connectionless, packets may arrive from any number of different computers. Each time you receive a packet &ldquo;recvfrom&rdquo; gives you the IP address and port of the sender, so you know where the packet came from.</p><br><p>Here&rsquo;s how to loop and receive all incoming packets:</p><br><pre><code>    while ( true )<br>    {<br>        unsigned char packet_data[256];<br><br>        unsigned int max_packet_size =<br>            sizeof( packet_data );<br><br>        #if PLATFORM == PLATFORM_WINDOWS<br>        typedef int socklen_t;<br>        #endif<br><br>        sockaddr_in from;<br>        socklen_t fromLength = sizeof( from );<br><br>        int bytes = recvfrom( socket,<br>                              (char)packet_data,<br>                              max_packet_size,<br>                              0,<br>                              (sockaddr<em>)&amp;from,<br>                              &amp;fromLength );<br><br>        if ( bytes &lt;= 0 )<br>            break;<br><br>        unsigned int from_address =<br>            ntohl( from.sin_addr.s_addr );<br><br>        unsigned int from_port =<br>            ntohs( from.sin_port );<br><br>        // process received packet<br>    }<br></em></code></pre><br><p>Any packets in the queue larger than your receive buffer will be silently discarded. So if you have a 256 byte buffer to receive packets like the code above, and somebody sends you a 300 byte packet, the 300 byte packet will be dropped. You <em>will not</em> receive just the first 256 bytes of the 300 byte packet.</p><br><p>Since you are writing your own game network protocol, this is no problem at all in practice, just make sure your receive buffer is big enough to receive the largest packet your code could possibly send.</p><br><h2 id="destroying-a-socket">Destroying a socket</h2><br><p>On most unix-like platforms, sockets are file handles so you use the standard file &ldquo;close&rdquo; function to clean up sockets once you are finished with them. However, Windows likes to be a little bit different, so we have to use &ldquo;closesocket&rdquo; instead:</p><br><pre>#if PLATFORM == PLATFORM_MAC ||<br>    PLATFORM == PLATFORM_UNIX<br>close( socket );<br>#elif PLATFORM == PLATFORM_WINDOWS<br>closesocket( socket );<br>#endif</pre><br><p>Hooray windows.</p><br><h2 id="socket-class">Socket class</h2><br><p>So we&rsquo;ve covered all the basic operations: creating a socket, binding it to a port, setting it to non-blocking, sending and receiving packets, and destroying the socket.</p><br><p>But you&rsquo;ll notice most of these operations are slightly platform dependent, and it&rsquo;s pretty annoying to have to remember to #ifdef and do platform specifics each time you want to perform socket operations.</p><br><p>We&rsquo;re going to solve this by wrapping all our socket functionality up into a &ldquo;Socket&rdquo; class. While we&rsquo;re at it, we&rsquo;ll add an &ldquo;Address&rdquo; class to make it easier to specify internet addresses. This avoids having to manually encode or decode a &ldquo;sockaddr_in&rdquo; structure each time we send or receive packets.</p><br><p>So let&rsquo;s add a socket class:</p><br><pre><code>    class Socket<br>    {<br>    public:<br><br>        Socket();<br><br>        ~Socket();<br><br>        bool Open( unsigned short port );<br><br>        void Close();<br><br>        bool IsOpen() const;<br><br>        bool Send( const Address &amp; destination,<br>                   const void  data,<br>                   int size );<br><br>        int Receive( Address &amp; sender,<br>                     void * data,<br>                     int size );<br><br>    private:<br><br>        int handle;<br>    };<br></code></pre><br><p>and an address class:</p><br><pre><code>    class Address<br>    {<br>    public:<br><br>        Address();<br><br>        Address( unsigned char a,<br>                 unsigned char b,<br>                 unsigned char c,<br>                 unsigned char d,<br>                 unsigned short port );<br><br>        Address( unsigned int address,<br>                 unsigned short port );<br><br>        unsigned int GetAddress() const;<br><br>        unsigned char GetA() const;<br>        unsigned char GetB() const;<br>        unsigned char GetC() const;<br>        unsigned char GetD() const;<br><br>        unsigned short GetPort() const;<br><br>    private:<br><br>        unsigned int address;<br>        unsigned short port;<br>    };<br></code></pre><br><p>Here&rsquo;s how to to send and receive packets with these classes:</p><br><pre><code>    // create socket<br><br>    const int port = 30000;<br><br>    Socket socket;<br><br>    if ( !socket.Open( port ) )<br>    {<br>        printf( &quot;failed to create socket!\n&quot; );<br>        return false;<br>    }<br><br>    // send a packet<br><br>    const char data[] = &quot;hello world!&quot;;<br><br>    socket.Send( Address(127,0,0,1,port), data, sizeof( data ) );<br><br>    // receive packets<br><br>    while ( true )<br>    {<br>        Address sender;<br>        unsigned char buffer[256];<br>        int bytes_read =<br>            socket.Receive( sender,<br>                            buffer,<br>                            sizeof( buffer ) );<br>        if ( !bytes_read )<br>            break;<br><br>        // process packet<br>    }<br></code></pre><br><p>As you can see it&rsquo;s much simpler than using BSD sockets directly.</p><br><p>As an added bonus the code is the same on all platforms because everything platform specific is handled inside the socket and address classes.</p><br><h2 id="conclusion">Conclusion</h2><br><p>You now have a platform independent way to send and receive packets. <em>Enjoy</em> :)</p>

<h1 id="è¯‘æ–‡"><a href="#è¯‘æ–‡" class="headerlink" title="è¯‘æ–‡"></a>è¯‘æ–‡</h1><p><a href="http://gad.qq.com/program/translateview/7165089" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a></p>
<div style="display:none"><br><br><!--     æŠŠä¸‹æ–‡ä¸­çš„ $hhd$ æ”¹ä¸º <h å°±å¯ä»¥æ¢å¤åŸçŠ¶, å½“æ—¶æŠŠ <h æ”¹ä¸º $hhd$ æ˜¯ä¸ºäº†é˜²æ­¢ç”Ÿæˆtoc      --><br><br>å› è¯‘æ–‡å¾ˆå¤šåœ°æ–¹å‡æœ‰ç–æ¼, æœ¬æ–‡å·²ç»å¯¹éƒ¨åˆ†ç–æ¼åšäº†ä¿®æ­£.<br><br><div class="WordSection1"><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç¿»è¯‘ï¼šæ¨å˜‰é‘«ï¼ˆçŸ«æƒ…åˆ°æ­»çš„ä»“é¼ å›ï¼Œ</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼‰å®¡æ ¡ï¼šèµµèèï¼ˆè½©è¯­è½©ç¼˜ï¼‰</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åºè¨€</span><span style="font-size:9.0pt;line-height:240%"> </span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯</span><span>Glenn Fiedler</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼Œæ¬¢è¿é˜…è¯»ã€Š</span><span><a rel="noopener" href="http://gafferongames.com/networking-for-game-programmers/" title="é’ˆå¯¹æ¸¸æˆç¨‹åºå‘˜çš„ç½‘ç»œçŸ¥è¯†" target="_blank"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#383838;text-decoration:none"><span>é’ˆå¯¹æ¸¸æˆç¨‹åºå‘˜çš„ç½‘ç»œçŸ¥è¯†</span></span></a></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ã€‹ç³»åˆ—æ•™ç¨‹çš„ç¬¬äºŒç¯‡æ–‡ç« ã€‚</span><span style="color: rgb(51, 51, 51);"> </span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åœ¨å‰é¢çš„æ–‡ç« ä¸­æˆ‘ä»¬è®¨è®ºäº†åœ¨ä¸åŒè®¡ç®—æœºä¹‹é—´å‘é€æ•°æ®çš„æ–¹æ³•ï¼Œå¹¶å†³å®šä½¿ç”¨</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è€Œé</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ä¼ è¾“æ§åˆ¶åè®®ï¼ˆ</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333">TCP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼Œæ˜¯å› ä¸ºå®ƒèƒ½å¤Ÿä½¿æ•°æ®åœ¨ä¸ç­‰å¾…é‡å‘åŒ…è€Œé€ æˆæ•°æ®èšé›†çš„æƒ…å†µä¸‹æŒ‰æ—¶è¢«é€è¾¾ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç°åœ¨æˆ‘å°†è¦å‘Šè¯‰å„ä½å¦‚ä½•ä½¿ç”¨</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä¼¯å…‹åˆ©å¥—æ¥å­—</span><span style="font-size:9.0pt;line-height:240%"> </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼ˆ</span><span>BSD socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼‰</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¯¹äºå¤§å¤šæ•°ç°ä»£çš„å¹³å°æ¥è¯´ä½ éƒ½å¯ä»¥æ‰¾åˆ°å»ºç«‹åœ¨ä¼¯å…‹åˆ©å¥—æ¥å­—ä¸Šçš„</span><span>sockets</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ã€‚ä¼¯å…‹åˆ©å¥—æ¥å­—ä¸»è¦é€šè¿‡</span><span style="font-family:&quot;Lucida Sans Unicode&quot;,&quot;sans-serif&quot;;color:#222222">â€œsocketâ€,â€œbindâ€, â€œsendtoâ€ and â€œrecvfr</span><span>omâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å‡ ä¸ªç®€å•å‡½æ•°è¿›è¡Œæ§åˆ¶ã€‚å¦‚æœä½ æ„¿æ„çš„è¯ä½ å½“ç„¶å¯ä»¥ç›´æ¥å¯¹è¿™å‡ ä¸ªå‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä½†æ˜¯ç”±äºæ¯ä¸ªå¹³å°ä¹‹é—´æœ‰ç»†å¾®å·®åˆ«ï¼Œä¿æŒä»£ç å¹³å°çš„ç‹¬ç«‹æ€§å°†ä¼šå˜å¾—æœ‰äº›å›°éš¾ã€‚å› æ­¤ï¼Œå°½ç®¡æˆ‘å°†å…ˆç»™å„ä½ä»‹ç»ä¼¯å…‹åˆ©å¥—æ¥å­—çš„ç¤ºä¾‹ä»£ç ç”¨ä»¥è¯´æ˜å®ƒçš„åŸºæœ¬ä½¿ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šå¤§é‡çš„ç›´æ¥ä½¿ç”¨ä¼¯å…‹åˆ©å¥—æ¥å­—ã€‚æ‰€ä»¥å½“æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰åŸºç¡€</span><span>socket </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åŠŸèƒ½åï¼Œæˆ‘ä»¬å°†ä¼šæŠŠæ‰€æœ‰å†…å®¹æ±‡æ€»åˆ°ä¸€ä¸ªç³»åˆ—çš„è¯¾ä¸­ï¼Œä»¥ä¾¿ä½ å¯ä»¥è½»æ¾åœ°ç¼–å†™ä»£ç ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¹³å°çš„ç‰¹æ®Šæ€§</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">é¦–å…ˆ</span> <span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æˆ‘ä»¬å…ˆå»ºç«‹<span style="border:none windowtext 1.0pt;padding:0cm">ä¸€ä¸ªâ€œ</span></span><span style="border:none windowtext 1.0pt;padding:0cm">define</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€ç¨‹åºç”¨</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥æµ‹è¯•æˆ‘ä»¬ç°æœ‰çš„å¹³å°æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘ç°ä¸åŒå¹³å°é—´é—´å„ä¸ª</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">é‡Œçš„ç»†å¾®å·®åˆ«ã€‚</span></span></p><div><div id="highlighter_477809" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// platform detection</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#define PLATFORM_WINDOWS  1</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define PLATFORM_MAC      2</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define PLATFORM_UNIX     3</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#if defined(_WIN32)</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#define PLATFORM PLATFORM_WINDOWS</code></div><div class="line number12 index11 alt1"> </div><div class="line number13 index12 alt2"><code class="cpp preprocessor">#elif defined(<strong>APPLE</strong>)</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="cpp preprocessor">#define PLATFORM PLATFORM_MAC</code></div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"><code class="cpp preprocessor">#else</code></div><div class="line number18 index17 alt1"> </div><div class="line number19 index18 alt2"><code class="cpp preprocessor">#define PLATFORM PLATFORM_UNIX</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="cpp preprocessor">#endif</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥ä¸‹æ¥æˆ‘ä»¬ä¸º</span><span>sockets</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å†™å…¥é€‚å½“çš„æ ‡å¤´ï¼Œç”±äºå¤´æ–‡ä»¶å…·æœ‰å¹³å°çš„ç‰¹æ®Šæ€§æ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨â€œ</span><span>#define</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">â€æ¥æ ¹æ®ä¸åŒçš„å¹³å°å¼•ç”¨ä¸åŒçš„æ–‡ä»¶ã€‚</span></span></p><div><div id="highlighter_806491" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#if PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#include &lt;winsock2.h&gt;</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#elif PLATFORM == PLATFORM_MAC ||</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp spaces">      </code><code class="cpp plain">PLATFORM == PLATFORM_UNIX</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#include &lt;sys socket.h=â€â€&gt;</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#include &lt;netinet in.h=â€â€&gt;</code></div><div class="line number12 index11 alt1"> </div><div class="line number13 index12 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#include &lt;fcntl.h&gt;</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="cpp preprocessor">#endif&lt;/fcntl.h&gt;&lt;/netinet&gt;&lt;/sys&gt;&lt;/winsock2.h&gt;</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¦‚æœ</span><span>sockets</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯å»ºç«‹åœ¨</span><span>unix</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¹³å°ä¸Šï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä»»ä½•å…¶ä»–å¤šä½™çš„è¿æ¥ï¼Œè‹¥å®ƒæ˜¯å»ºç«‹åœ¨</span><span>windows</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç³»ç»Ÿé‡Œï¼Œä¸ºäº†ç¡®ä¿</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ­£å¸¸ä½¿ç”¨æˆ‘ä»¬å°±éœ€è¦è¿æ¥åˆ°â€œ</span><span>winsock</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">â€åº“å†…ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><span style="font-size:medium;">ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æŠ€å·§ï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜å·²æœ‰é¡¹ç›®æˆ–ç”Ÿæˆæ–‡ä»¶çš„å‰æä¸‹å®Œæˆä¸Šè¿°å·¥ä½œã€‚</span></span></p><div><div id="highlighter_251577" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#if PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#pragma comment( lib, â€œwsock32.libâ€ )</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#endif</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><br></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æˆ‘ä¹‹æ‰€ä»¥éå¸¸å–œæ¬¢è¿™ä¸ªå°æŠ€å·§æ˜¯å› ä¸ºæˆ‘å¤ªæ‡’äº†</span><span>~</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å½“ç„¶å•¦ï¼Œå¦‚æœä½ æ„¿æ„æ¯æ¬¡éƒ½è¿›è¡Œé¡¹ç›®é“¾æ¥æˆ–ç”Ÿæˆæ–‡ä»¶ä¹Ÿæœªå°ä¸å¯ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></p>$hhd$1&gt;<span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å±‚çš„åˆå§‹åŒ–</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¤§å¤šæ•°â€œ</span><span>unix-like</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">â€çš„å¹³å°</span><span> (</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åŒ…æ‹¬</span><span>macosx) </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„æ­¥éª¤å»åˆå§‹åŒ–</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å±‚çš„ã€‚ä½†æ˜¯</span><span>Windows</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">éœ€è¦è¿›è¡Œä¸€äº›ç‰¹æ®Šè®¾ç½®æ¥ç¡®ä¿ä½ çš„</span><span>sockets</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä»£ç æ­£å¸¸å·¥ä½œã€‚åœ¨ä½ ä½¿ç”¨å…¶ä»–ä»»ä½•</span><span>sockets</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åŠŸèƒ½å‰ä½ å¿…é¡»å…ˆè°ƒç”¨</span><span> â€œWSAStartupâ€ </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥åˆå§‹åŒ–å®ƒä»¬ï¼Œåœ¨ä½ çš„ç¨‹åºæ®µç»“æŸæ—¶ä½ ä¹Ÿå¿…é¡»ä½¿ç”¨</span><span> â€œWSACleanupâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥ç»“æŸã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><span style="font-size:medium;">ä¸‹é¢è®©æˆ‘ä»¬æ¥æ·»åŠ ä»¥ä¸Šä¸¤ä¸ªæ–°åŠŸèƒ½ï¼š</span></span></p><div><div id="highlighter_446190" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">bool</code> <code class="cpp plain">InitializeSockets()</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#if PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp plain">WSADATA WsaData;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp plain">WSAStartup( MAKEWORD(2,2), &amp;WsaData ) == NO_ERROR;</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp preprocessor">#else</code></div><div class="line number9 index8 alt2"> </div><div class="line number10 index9 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">true</code><code class="cpp plain">;</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="cpp spaces">    </code><code class="cpp preprocessor">#endif</code></div><div class="line number13 index12 alt2"><code class="cpp plain">}</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"> </div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">ShutdownSockets()</code></div><div class="line number18 index17 alt1"><code class="cpp plain">{</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#if PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="cpp spaces">    </code><code class="cpp plain">WSACleanup();</code></div><div class="line number22 index21 alt1"> </div><div class="line number23 index22 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#endif</code></div><div class="line number24 index23 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><br></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªåˆå§‹åŒ–</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å±‚çš„æ–¹æ³•ã€‚å¯¹äºé‚£äº›ä¸éœ€è¦</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åˆå§‹åŒ–çš„å¹³å°æ¥è¯´è¿™äº›åŠŸèƒ½å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å»ºç«‹ä¸€ä¸ª</span><span>socket</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç°åœ¨æ˜¯æ—¶å€™æ¥å»ºç«‹ä¸€ä¸ªåŸºäº</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼‰çš„</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">äº†ï¼Œä¸‹é¢æ˜¯å®æ–½çš„æ–¹æ³•ï¼š</span></span></p><div><div id="highlighter_572686" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">handle = socket( AF_INET, SOCK_DGRAM,IPPROTO_UDP );</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( handle &lt;= 0 )</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to create socket\nâ€</code> <code class="cpp plain">);</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼‰çš„</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¯¹åº”åˆ°ä¸€ä¸ªç«¯å£ä¸Šï¼ˆæ¯”å¦‚</span><span>30000</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è¿™ä¸ªç«¯å£ï¼‰ã€‚æ¯ä¸€ä¸ª</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">éƒ½å¿…é¡»å¯¹åº”åˆ°ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç«¯å£ä¸Šã€‚è¿™ä¹ˆåšçš„åŸå› æ˜¯ç«¯å£å·å†³å®šäº†æ¯ä¸ªæ•°æ®åŒ…å‘é€åˆ°çš„ä½ç½®ã€‚ä¸è¦ä½¿ç”¨</span><span>1024</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä»¥ä¸‹çš„ç«¯å£ï¼Œå› ä¸ºè¿™æ˜¯ä¸ºç³»ç»Ÿè°ƒç”¨æ‰€é¢„ç•™çš„ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333;display:none">æœä½ ä¸åœ¨ä¹</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333;display:none">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333;display:none">æŒ‡å®šåˆ°å“ªä¸ªç«¯å£ä¸Šï¼Œä½ å°±</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¯ä»¥è¾“å…¥â€œ</span><span>0</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">â€ï¼Œè¿™æ ·ç³»ç»Ÿå°†ä¼šè‡ªåŠ¨ä¸ºä½ é€‰æ‹©ä¸€ä¸ªé—²ç½®çš„ç«¯å£ã€‚</span></span></p><div><div id="highlighter_845519" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">sockaddr_in address;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">address.sin_family = AF_INET;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">address.sin_addr.s_addr = INADDR_ANY;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">address.sin_port = htons( (unsigned </code><code class="cpp color1 bold">short</code><code class="cpp plain">) port );</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( bind( handle, (</code><code class="cpp keyword bold">const</code> <code class="cpp plain">sockaddr<em>) &amp;address, </em></code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(sockaddr_in) ) &lt; 0 )</code></div><div class="line number8 index7 alt1"><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to bind socket\nâ€</code> <code class="cpp plain">);</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è¿™æ ·æˆ‘ä»¬çš„</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å·²ç»å‡†å¤‡å°±ç»ªå¹¶å¯ä»¥å‘é€å’Œæ¥æ”¶åŒ…äº†ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">é‚£ä¹ˆä¸Šé¢æåˆ°çš„</span><span>â€œhtonsâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯èµ·ä»€ä¹ˆä½œç”¨</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333;display:none">å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªè¾…åŠ©åŠŸèƒ½ï¼Œå®ƒå°†ä¸€ä¸ª</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333;display:none">16</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333;display:none">ä½æ•´æ•°çš„å€¼ç”±ä¸»æœºå­—èŠ‚åºåˆ—ï¼ˆå°ç«¯æˆ–å¤§ç«¯ï¼‰è½¬æ¢æˆç½‘ç»œå­—èŠ‚åºåˆ—ï¼ˆå¤§ç«¯ï¼‰ã€‚</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è¿™å°±è¦æ±‚ä½ åœ¨ä»»ä½•æ—¶å€™éƒ½ç›´æ¥åœ¨</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç»“æ„é‡Œè®¾ç½®æ•´æ•°æ•°å­—ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ä½ ä¼šçœ‹åˆ°</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333">â€œhtonsâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼ˆä¸»æœºåˆ°ç½‘ç»œçŸ­å­—èŠ‚ï¼‰åŠå…¶</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333">32</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ä½æ•´æ•°å¤§å°çš„è¡¨å…„å¦¹â€htonlâ€</span><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#333333"></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼ˆä¸»æœºåˆ°ç½‘ç»œé•¿å­—èŠ‚ï¼‰è¿™åœ¨è¿™ç¯‡æ–‡ç« ä¸­è¢«å¤šæ¬¡ä½¿ç”¨ï¼Œä½ ç•™æ„äº†ä»¥åä½ åœ¨ä¸‹æ–‡ä¸­å†æ¬¡é‡åˆ°å°±ä¼šæ˜ç™½ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333"><br></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å°†</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è®¾ç½®ä¸ºéé˜»å¡å½¢å¼</span><span>            </span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span> </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">é»˜è®¤æƒ…å†µä¸‹ï¼Œ</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯è¢«è®¾ç½®åœ¨</span><span> â€œ</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">é˜»å¡æ¨¡å¼</span><span>â€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">çš„çŠ¶æ€ä¸‹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨</span><span>â€œrecvfromâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åŠŸèƒ½è¯»ä¸€ä¸ªåŒ…ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åŒ…è¢«è¯»å–å‰è¯¥å‡½æ•°å€¼å°†ä¸èƒ½è¢«è¿”å›ã€‚è¿™ä¸æˆ‘ä»¬çš„ç›®æ ‡å®Œå…¨ä¸ç¬¦ã€‚è§†é¢‘æ¸¸æˆæ˜¯æ‹Ÿæ€åœ¨</span><span>30</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æˆ–</span><span>60</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å¸§æ¯ç§’å®æ—¶çš„ç¨‹åºï¼Œä»–ä»¬ä¸èƒ½åªæ˜¯ååœ¨é‚£é‡Œç­‰å¾…æ•°æ®åŒ…çš„åˆ°è¾¾ï¼</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è§£å†³æ–¹æ¡ˆæ˜¯ä½ å°†</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è½¬æ¢æˆä»¥</span><span>â€œ</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">éé˜»å¡æ¨¡å¼</span><span>â€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åå†åˆ›å»ºä»–ä»¬ã€‚ä¸€æ—¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå½“æ²¡æœ‰åŒ…å¯ä¾›é˜…è¯»æ—¶ï¼Œ</span><span>â€œrecvfromâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å‡½æ•°å°±å¯ä»¥ç«‹<span style="border:none windowtext 1.0pt;padding:0cm">å³è¿”å›ï¼Œè¿”å›å€¼æ˜¾ç¤ºä½ åº”è¯¥ç¨åå†å°è¯•è¯»å–åŒ…ã€‚</span></span><span style="border:none windowtext 1.0pt;padding:0cm"> </span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä¸‹é¢æ˜¯å¦‚ä½•å°†</span><span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼çš„æ–¹æ³•ï¼š</span></span></p><div><div id="highlighter_979158" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#if PLATFORM == PLATFORM_MAC || PLATFORM == PLATFORM_UNIX</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">nonBlocking = 1;</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( fcntl( handle, F_SETFL, O_NONBLOCK, nonBlocking ) == -1 )</code></div><div class="line number5 index4 alt2"><code class="cpp plain">{</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to set non-blocking\nâ€</code> <code class="cpp plain">);</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">}</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#elif PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number12 index11 alt1"><code class="cpp color1 bold">DWORD</code> <code class="cpp plain">nonBlocking = 1;</code></div><div class="line number13 index12 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( ioctlsocket( handle, FIONBIO, &amp;nonBlocking ) != 0 )</code></div><div class="line number14 index13 alt1"><code class="cpp plain">{</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to set non-blocking\nâ€</code> <code class="cpp plain">);</code></div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="cpp preprocessor">#endif</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä»ä¸Šé¢çš„ç¨‹åºæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ</span><span>Windows</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æœ¬èº«å¹¶ä¸æä¾›</span><span>â€œ</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¡†æ¶</span><span>â€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨</span><span>â€œioctlsocketâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åŠŸèƒ½æ¥å®ç°ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å‘é€æ•°æ®åŒ…</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯ä¸€ç§æ— è¿æ¥åè®®ï¼Œæ‰€ä»¥æ¯æ¬¡ä½ å‘é€ä¸€ä¸ªæ•°æ®åŒ…å‰éƒ½è¦æŒ‡å®šä¸€ä¸ªç›®çš„åœ°å€ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å‘é€æ•°æ®åŒ…åˆ°ä»»æ„æ•°é‡çš„ä¸åŒçš„</span><span>IP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åœ°å€ï¼Œè€Œåœ¨ä½ </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ï¼‰</span> <span>socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">çš„å¦ä¸€ç«¯å¹¶æ²¡æœ‰è¿æ¥æŸä¸€å°è®¡ç®—æœºã€‚</span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸‹é¢æ˜¯å¦‚ä½•å‘é€ä¸€ä¸ªæ•°æ®åŒ…åˆ°ä¸€ä¸ªç‰¹å®šçš„åœ°å€æ–¹æ³•ï¼š</span></p><div><div id="highlighter_169965" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">sent_bytes = </code><code class="cpp plain">sendto( handle,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">            </code><code class="cpp plain">(</code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">char</code><code class="cpp plain">)packet_data,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">            </code><code class="cpp plain">packet_size,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">            </code><code class="cpp plain">0,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">            </code><code class="cpp plain">(sockaddr<em>)&amp;address,</em></code></div><div class="line number7 index6 alt2"><code class="cpp spaces">            </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(sockaddr_in) );</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( sent_bytes != packet_size )</code></div><div class="line number10 index9 alt1"><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to send packet\nâ€</code> <code class="cpp plain">);</code></div><div class="line number12 index11 alt1"> </div><div class="line number13 index12 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼â€œ</span><span style="border:none windowtext 1.0pt;padding:0cm">sendtoâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">çš„è¿”å›å€¼åªæ˜¯è¡¨æ˜æ•°æ®åŒ…æ˜¯å¦è¢«æˆåŠŸåœ°ä»æœ¬åœ°è®¡ç®—æœºå‘é€ï¼Œå®ƒå¹¶ä¸èƒ½è¡¨æ˜ç›®æ ‡è®¡ç®—æœºæ˜¯å¦æˆåŠŸæ¥æ”¶åˆ°ä½ çš„æ•°æ®åŒ…ï¼ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span style="border:none windowtext 1.0pt;padding:0cm">UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ï¼‰æ²¡æœ‰åŠæ³•çŸ¥é“æ•°æ®åŒ…æ˜¯å¦èƒ½åˆ°è¾¾ç›®çš„åœ°ã€‚</span><span style="border:none windowtext 1.0pt;padding:0cm">             </span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€š<span style="border:none windowtext 1.0pt;padding:0cm">è¿‡</span></span><span style="border:none windowtext 1.0pt;padding:0cm">â€œsockaddr_inâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç»“æ„ä¸ºç›®çš„åœ°å€ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;">é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®¾ç½®è¿™äº›ç»“æ„å‘¢ï¼Ÿ</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç°åœ¨è®©æˆ‘ä»¬ä»¥å‘é€åˆ°</span><span style="border:none windowtext 1.0pt;padding:0cm">207.45.186.98:30000 </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">è¿™ä¸ªåœ°å€ä¸ºä¾‹</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;">æˆ‘ä»¬ä»ä»¥ä¸‹è¿™ä¸ªç¨‹åºå¼€å§‹ï¼š</span></span></p><div><div id="highlighter_656029" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">a = 207;</code></div><div class="line number2 index1 alt1"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">b = 45;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">c = 186;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">d = 98;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">port = 30000;</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp plain">æˆ‘ä»¬è¿˜è¦åœ¨å½¢å¼ä¸Šè¿›è¡Œè®¾ç½®ä»è€Œç¬¦åˆâ€œsendtoâ€çš„è¦æ±‚ï¼š</code></div><div class="line number8 index7 alt1"><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">address = ( a &lt;&lt; 24 ) |</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">                       </code><code class="cpp plain">( b &lt;&lt; 16 ) |</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">                       </code><code class="cpp plain">( c &lt;&lt; 8  ) | d;</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"> </div><div class="line number13 index12 alt2"><code class="cpp plain">sockaddr_in addr;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">addr.sin_family = AF_INET;</code></div><div class="line number15 index14 alt2"><code class="cpp plain">addr.sin_addr.s_addr = htonl( address );</code></div><div class="line number16 index15 alt1"><code class="cpp plain">addr.sin_port = htons( port );</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬é¦–å…ˆå°†</span><span style="border:none windowtext 1.0pt;padding:0cm">A</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ã€</span><span style="border:none windowtext 1.0pt;padding:0cm">B</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ã€</span><span style="border:none windowtext 1.0pt;padding:0cm">C</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ã€</span><span style="border:none windowtext 1.0pt;padding:0cm">D</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å€¼åœ¨èŒƒå›´[ 0, 255 ]å†…çš„å€¼</span><span style="border:none windowtext 1.0pt;padding:0cm"></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">è½¬åŒ–ä¸ºä¸€ä¸ªå•ä¸€çš„æ— ç¬¦å·æ•´æ•°ï¼Œä»è€Œä½¿è¿™ä¸ªæ•´æ•°çš„æ¯ä¸ªå­—èŠ‚å¯¹åº”è¾“å…¥å€¼ã€‚ç„¶åä»¥æ•´æ•°åœ°å€å’Œç«¯å£æ¥åˆå§‹åŒ–ä¸€ä¸ª</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œsockaddr_inâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç»“æ„ï¼Œè¿™æ ·å°±ç¡®ä¿ä½¿ç”¨â€œ</span><span style="border:none windowtext 1.0pt;padding:0cm">htonlâ€ </span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å’Œ</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œhtons</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€æ¥å°†æ•´å‹åœ°å€å’Œç«¯å£å€¼ä»ä¸»æœºå­—èŠ‚åºåˆ—è½¬æ¢ä¸ºä¸ºç½‘ç»œå­—èŠ‚åºåˆ—ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœä½ æƒ³ç»™è‡ªå·±å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä¸éœ€è¦æŸ¥è¯¢è‡ªå·±æœºå™¨çš„</span><span style="border:none windowtext 1.0pt;padding:0cm">IP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åœ°å€ï¼Œåœ¨å›é€åœ°å€</span><span style="border:none windowtext 1.0pt;padding:0cm">127.0.0.1</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸­æ•°æ®åŒ…å°±å°†è¢«å‘é€åˆ°ä½ çš„æœ¬åœ°æœºå™¨ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ¥æ”¶æ•°æ®åŒ…</span> <p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸€æ—¦ä½ å°†ä¸€ä¸ª</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å¥—æ¥å­—ç»‘å®šåˆ°ä¸€ä¸ªç«¯å£ï¼Œä»»ä½•å‘é€åˆ°æ‚¨</span><span style="border:none windowtext 1.0pt;padding:0cm">scoket IP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åœ°å€å’Œç«¯å£çš„</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">æ•°æ®åŒ…éƒ½å°†æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œã€‚æ¥æ”¶æ•°æ®åŒ…çš„è¯, åªéœ€è¦å¾ªç¯è°ƒç”¨</span><span style="border:none windowtext 1.0pt;padding:0cm"> <span>â€œrecvfromâ€</span></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å‡½æ•°ç›´åˆ°ä»–å¤±è´¥å¹¶è¿”å›â€EWOULDBLOCKâ€ï¼Œè¿™å°±æ„å‘³ç€é˜Ÿåˆ—é‡Œæœ‰æ²¡æœ‰ç•™ä¸‹å…¶ä»–çš„æ•°æ®åŒ…äº†ã€‚ç”±äº</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">æ˜¯æ— è¿æ¥æ€§çš„ï¼Œæ•°æ®åŒ…å¯ä»¥åˆ°è¾¾è®¸å¤šä¸åŒçš„è®¡ç®—æœºã€‚æ¯å½“ä½ æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œ</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œrecvfromâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">éƒ½ä¼šç»™ä½ å‘é€è€…çš„</span><span style="border:none windowtext 1.0pt;padding:0cm">IP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åœ°å€å’Œç«¯å£ä»¥ä¾¿ä½ çŸ¥é“è¿™æ˜¯æ¥è‡ªå“ªé‡Œçš„æ•°æ®åŒ…ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;">ä¸‹é¢æ˜¯å¦‚ä½•è¿›è¡Œå¾ªç¯æ¥æ”¶ä¼ å…¥çš„æ•°æ®åŒ…çš„æ–¹æ³•ï¼š</span></span></p><div><div id="highlighter_421199" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">while</code> <code class="cpp plain">( </code><code class="cpp keyword bold">true</code> <code class="cpp plain">)</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">packet_data[256];</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">max_packet_size = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( packet_data );</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#if PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">typedef</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">socklen_t;</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp preprocessor">#endif</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp plain">sockaddr_in from;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">    </code><code class="cpp plain">socklen_t fromLength = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( from );</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">bytes = recvfrom( socket,</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">        </code><code class="cpp plain">(</code><code class="cpp color1 bold">char</code><code class="cpp plain">)packet_data,</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">        </code><code class="cpp plain">max_packet_size,</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">         </code><code class="cpp plain">0,</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">        </code><code class="cpp plain">(sockaddr<em>)&amp;from,</em></code></div><div class="line number18 index17 alt1"><code class="cpp spaces">        </code><code class="cpp plain">&amp;fromLength );</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">if</code> <code class="cpp plain">( bytes &lt;= 0 )</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">        </code><code class="cpp keyword bold">break</code><code class="cpp plain">; </code></div><div class="line number22 index21 alt1"> </div><div class="line number23 index22 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">from_address = ntohl( from.sin_addr.s_addr );</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">from_port = ntohs( from.sin_port );</code></div><div class="line number25 index24 alt2"> </div><div class="line number26 index25 alt1"><code class="cpp spaces">    </code><code class="cpp comments">// process received packet</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">    </code> </div><div class="line number28 index27 alt1"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åœ¨é˜Ÿåˆ—ä¸­ï¼Œæ•°æ®åŒ…ä¸€æ—¦å¤§äºä½ æ¥æ”¶ç¼“å†²åŒºçš„èŒƒå›´ï¼Œä»–ä»¬éƒ½ä¼šè¢«ç³»ç»Ÿæ‚„æ‚„èˆå¼ƒã€‚å› æ­¤ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ª</span><span style="border:none windowtext 1.0pt;padding:0cm">256</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å­—èŠ‚çš„ç¼“å†²åŒºç”¨æ¥æ¥æ”¶æ•°æ®åŒ…ï¼Œæœ‰äººç»™ä½ ä¸€ä¸ªå‘é€</span><span style="border:none windowtext 1.0pt;padding:0cm">300</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å­—èŠ‚çš„æ•°æ®åŒ…ï¼Œ</span><span style="border:none windowtext 1.0pt;padding:0cm">300</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å­—èŠ‚çš„æ•°æ®åŒ…éƒ½å°†è¢«åˆ é™¤ã€‚æ‚¨å°†ä¸ä¼šæ¥æ”¶åˆ°</span><span style="border:none windowtext 1.0pt;padding:0cm">300</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å­—èŠ‚æ•°æ®åŒ…çš„å‰</span><span style="border:none windowtext 1.0pt;padding:0cm">256</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸ªå­—èŠ‚ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;">å› ä¸ºæ‚¨æ­£åœ¨ç¼–å†™è‡ªå·±çš„æ¸¸æˆç½‘ç»œåè®®ï¼Œä»¥ä¸Šè¿™äº›æ“ä½œè¿™æ˜¯æ²¡æœ‰ä»€ä¹ˆå½±å“çš„ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;">åœ¨å®è·µä¸­æ‚¨å°±è¦ç¡®ä¿æ‚¨çš„æ¥æ”¶ç¼“å†²åŒºè¶³å¤Ÿå¤§ï¼Œä»¥æ¥æ”¶æœ€å¤§çš„æ•°æ®åŒ…ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm"><span style="font-size:medium;"><br></span></span></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">å…³é—­ä¸€ä¸ª</span><span>socket</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åœ¨å¤§å¤šæ•°</span><span style="border:none windowtext 1.0pt;padding:0cm">Unix</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å¹³å°ï¼Œä¸€æ—¦ä½ å®Œæˆäº†è‡ªå·±æ‰€éœ€çš„ç¨‹åºåï¼Œåœ¨</span><span style="border:none windowtext 1.0pt;padding:0cm">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">æ–‡ä»¶ä¸­åªè¦ä½¿ç”¨æ ‡å‡†çš„æ–‡ä»¶</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œcloseâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å‡½æ•°æ¥æ¸…ç†å³å¯ã€‚ç„¶è€Œï¼Œåœ¨</span><span style="border:none windowtext 1.0pt;padding:0cm">Windows</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç³»ç»Ÿä¸­ä»¥ä¸Šæƒ…å½¢ä¼šæœ‰ç‚¹ä¸åŒï¼Œæˆ‘ä»¬è¦ç”¨</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œclosesocketâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å‡½æ•°æ¥æ“ä½œï¼š</span></span></p><div><div id="highlighter_757088" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#if PLATFORM == PLATFORM_MAC ||  PLATFORM == PLATFORM_UNIX</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="cpp plain">close( socket );</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#elif PLATFORM == PLATFORM_WINDOWS</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp plain">closesocket( socket );</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#endif</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="border:none windowtext 1.0pt;padding:0cm"> </span></p>$hhd$1&gt;<span>Socket class</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰çš„åŸºæœ¬æ“ä½œï¼šåˆ›å»ºä¸€ä¸ª</span><span style="border:none windowtext 1.0pt;padding:0cm">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ï¼Œå°†ä»–ç»‘å®šåˆ°ä¸€ä¸ªç«¯å£å¹¶è®¾ç½®ä¸ºéé˜»å¡ï¼Œå‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ï¼Œæ¸…é™¤</span><span style="border:none windowtext 1.0pt;padding:0cm">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä½†æ˜¯ä½ ä¼šå‘ç°ä»¥ä¸Šè¿™äº›æ“ä½œä¸­å¤šå¤šå°‘å°‘éƒ½æ˜¯ä¾èµ–äºå¹³å°çš„ï¼Œåœ¨æ¯ä¸€æ¬¡ä½ æƒ³æ‰§è¡Œ</span><span style="border:none windowtext 1.0pt;padding:0cm">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">æ“ä½œæ—¶ï¼Œä½ ä¸å¾—ä¸è®°ä½â€œ</span><span style="border:none windowtext 1.0pt;padding:0cm"># ifdef</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€æŒ‡ä»¤å’Œé’ˆå¯¹ä¸åŒå¹³å°çš„å„ç§ç»†èŠ‚ï¼Œè¿™äº›ç¹ççš„æ“ä½œæ˜¯å¾ˆä»¤äººæŠ“ç‹‚çš„ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„</span><span style="border:none windowtext 1.0pt;padding:0cm">socket</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">åŠŸèƒ½å°è£…æˆä¸€ä¸ªâ€œ</span><span style="border:none windowtext 1.0pt;padding:0cm">socket class</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€˜â€™ã€‚å½“æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª</span><span style="border:none windowtext 1.0pt;padding:0cm">â€œAddress class</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€˜â€™ï¼Œè¿™æ ·ä½¿å®ƒæ›´å®¹æ˜“æŒ‡å®šäº’è”ç½‘åœ°å€ã€‚è¿™é¿å…äº†æˆ‘ä»¬æ¯æ¬¡å‘é€æˆ–æ¥æ”¶æ•°æ®åŒ…æ—¶è¿›è¡Œæ‰‹åŠ¨ç¼–ç æˆ–è§£ç </span><span style="border:none windowtext 1.0pt;padding:0cm">â€œsockaddr_inâ€</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ç»“æ„ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸‹é¢æ˜¯â€œ</span><span style="border:none windowtext 1.0pt;padding:0cm">socket class</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€˜â€™çš„ç¨‹åºï¼š</span></span></p><div><div id="highlighter_13343" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">class</code> <code class="cpp plain">Socket</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">public</code><code class="cpp plain">:</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp plain">Socket();</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp plain">~Socket();</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">Open( unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">port );</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">void</code> <code class="cpp plain">Close();</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">IsOpen() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">Send( </code><code class="cpp keyword bold">const</code> <code class="cpp plain">Address &amp; destination,</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">               </code><code class="cpp keyword bold">const</code> <code class="cpp keyword bold">void</code> <code class="cpp plain"> data,</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">               </code><code class="cpp color1 bold">int</code> <code class="cpp plain">size );</code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">Receive( Address &amp; sender,</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">                 </code><code class="cpp keyword bold">void</code> <code class="cpp plain">* data,</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">                 </code><code class="cpp color1 bold">int</code> <code class="cpp plain">size );</code></div><div class="line number17 index16 alt2"> </div><div class="line number18 index17 alt1"><code class="cpp keyword bold">private</code><code class="cpp plain">:</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">handle;</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><br></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸‹é¢æ˜¯â€œ</span><span style="font-family:&quot;Lucida Sans Unicode&quot;,&quot;sans-serif&quot;;color:#222222">address class</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">â€çš„ç¨‹åºï¼š</span></span></p><div><div id="highlighter_501052" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">class</code> <code class="cpp plain">Address</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">public</code><code class="cpp plain">:</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">    </code><code class="cpp plain">Address();</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">    </code><code class="cpp plain">Address( unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">a,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">             </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">b,</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">             </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">c,</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">             </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">d,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">             </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">port );</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp spaces">    </code><code class="cpp plain">Address( unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">address,</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">             </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">port );</code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">GetAddress() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">GetA() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">GetB() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">GetC() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">GetD() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">GetPort() </code><code class="cpp keyword bold">const</code><code class="cpp plain">;</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="cpp keyword bold">private</code><code class="cpp plain">:</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">address;</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">short</code> <code class="cpp plain">port;</code></div><div class="line number24 index23 alt1"> </div><div class="line number25 index24 alt2"><code class="cpp plain">};</code></div></div></td></tr></table></div></div><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">ä¸‹é¢æ˜¯è¿™äº›</span><span style="border:none windowtext 1.0pt;padding:0cm">class</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;border:none windowtext 1.0pt;padding:0cm">å¦‚ä½•æ¥æ”¶å’Œå‘é€æ•°æ®åŒ…çš„ç¨‹åºï¼š</span></p><div><div id="highlighter_565095" class="syntaxhighlighter  cpp"><div class="toolbar"><a class="toolbar_item command_help help">?</a></div><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// create socket</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">int</code> <code class="cpp plain">port = 30000;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">Socket socket;</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( !socket.Open( port ) )</code></div><div class="line number5 index4 alt2"><code class="cpp plain">{</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">    </code><code class="cpp functions bold">printf</code><code class="cpp plain">( </code><code class="cpp string">â€œfailed to create socket!\nâ€</code> <code class="cpp plain">);</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="cpp spaces">    </code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">}</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="cpp comments">// send a packet</code></div><div class="line number12 index11 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">char</code> <code class="cpp plain">data[] = </code><code class="cpp string">â€œhello world!â€</code><code class="cpp plain">;</code></div><div class="line number13 index12 alt2"><code class="cpp plain">socket.Send( Address(127,0,0,1,port), data, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( data ) );</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"> </div><div class="line number16 index15 alt1"><code class="cpp comments">// receive packets</code></div><div class="line number17 index16 alt2"><code class="cpp keyword bold">while</code> <code class="cpp plain">( </code><code class="cpp keyword bold">true</code> <code class="cpp plain">)</code></div><div class="line number18 index17 alt1"><code class="cpp plain">{</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">    </code><code class="cpp plain">Address sender;</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">    </code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">char</code> <code class="cpp plain">buffer[256];</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">    </code><code class="cpp color1 bold">int</code> <code class="cpp plain">bytes_read =</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">        </code><code class="cpp plain">socket.Receive( sender,</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">                        </code><code class="cpp plain">buffer,</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">                        </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( buffer ) );</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">    </code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !bytes_read )</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">        </code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number27 index26 alt2"> </div><div class="line number28 index27 alt1"> </div><div class="line number29 index28 alt2"><code class="cpp spaces">    </code><code class="cpp comments">// process packet</code></div><div class="line number30 index29 alt1"> </div><div class="line number31 index30 alt2"><code class="cpp plain">}</code></div></div></td></tr></table></div></div><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><br></p>$hhd$1&gt;<span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç»“è®º</span><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ç§ä¸é™å¹³å°çš„æ–¹æ³•æ¥å‘é€å’Œæ¥æ”¶</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰çš„</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ•°æ®åŒ…ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆ</span><span>UDP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ï¼‰</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æ˜¯æ— è¿æ¥æ€§çš„ï¼Œå› æ­¤æˆ‘ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ç¨‹åºï¼Œå®ƒå¯ä»¥ä»æ–‡æœ¬æ–‡ä»¶ä¸­è¯»å–</span><span>IP</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">åœ°å€ï¼Œå¹¶èƒ½å¤Ÿæ¯ç§’å‘è¿™äº›åœ°å€å‘é€ä¸€ä¸ªæ•°æ®åŒ…ã€‚æ¯å½“è¿™ä¸ªç¨‹åºæ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…æ—¶ï¼Œå®ƒå°±ä¼šå‘Šè¯‰ä½ å®ƒä»¬æ¥è‡ªå“ªä¸ªæœºå™¨ï¼Œä»¥åŠæ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„å¤§å°ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><span style="font-size:medium;">æ‚¨å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¾ç½®å®ƒï¼Œç„¶åä½ å°±æ‹¥æœ‰äº†ä¸€ç³»åˆ—åœ¨æœ¬åœ°æœºå™¨ä¸Šäº’ç›¸å‘é€æ•°æ®åŒ…çš„èŠ‚ç‚¹ã€‚è¿™æ ·ä½ å°±å¯ä»¥åˆ©ç”¨ä»¥ä¸‹ç¨‹åºé€šè¿‡ä¸åŒçš„ç«¯å£ï¼Œè¿›å…¥ä¸åŒçš„åº”ç”¨ç¨‹åºï¼š</span></span></p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><em><span style="border:none"><span style="border:none"><span style="font-size:medium;">   &gt; Node30000</span></span></span></em></p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><em><span style="border:none"><span style="border:none"><span style="font-size:medium;">   &gt; Node 30001</span></span></span></em></p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><em><span style="border:none"><span style="border:none"><span style="font-size:medium;">   &gt; Node 30002</span></span></span></em></p><p class="MsoNormal" align="left" style="margin: 18pt 18.05pt; text-indent: 24pt;"><em><span style="border:none"><span style="border:none"><span style="font-size:medium;">   etcâ€¦</span></span></span></em></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç„¶åæ¯ä¸ªèŠ‚ç‚¹éƒ½å°†å°è¯•å‘é€æ•°æ®åŒ…åˆ°æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹ï¼Œå®ƒçš„å·¥ä½œåŸç†å°±åƒä¸€ä¸ªå°å‹çš„â€œ</span><span>peer-to-peer</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">â€è®¾ç½®ã€‚</span></span></p><p class="MsoNormal" style="text-indent:24.0pt"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">æˆ‘æ˜¯åœ¨</span><span>MacOSX</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç³»ç»Ÿä¸­å¼€å‘çš„è¿™ä¸ªç¨‹åºï¼Œä½†æˆ‘æƒ³ä½ åº”è¯¥èƒ½å¤Ÿè½»æ¾åœ°åœ¨ä»»ä½•</span><span>Unix</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ç³»ç»Ÿæˆ–</span><span>Windows</span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">ä¸Šå¯¹ä»–è¿›è¡Œç¼–è¯‘ã€‚å¦‚æœä½ æœ‰ä»»ä½•åº”ç”¨åœ¨å…¶ä»–ä¸åŒæœºå™¨ä¸Šçš„å…¼å®¹æ€§è¡¥ä¸ï¼Œä¹Ÿéå¸¸æ¬¢è¿æ‚¨ä¸æˆ‘å–å¾—è”ç³»ã€‚</span></span></p><p class="MsoNormal" align="left" style="text-indent: 24pt;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><span style="font-size:medium;"><br></span></span></p><p class="MsoNormal" align="left" style="text-indent: 0cm; line-height: 18pt;"><span style="font-size:medium;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ç‰ˆæƒå£°æ˜ã€‘</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif; color: rgb(51, 51, 51);"> </span></span></p><p class="MsoNormal" align="left" style="text-indent: 0cm;"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><span style="font-size:medium;">åŸæ–‡ä½œè€…æœªåšæƒåˆ©å£°æ˜ï¼Œè§†ä¸ºå…±äº«çŸ¥è¯†äº§æƒè¿›å…¥å…¬å…±é¢†åŸŸï¼Œè‡ªåŠ¨è·å¾—æˆæƒã€‚</span></span><span style="font-size:9.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333"> </span></p><p class="MsoNormal" align="left" style="text-indent: 24pt;"><span style="font-family:&quot;Lucida Sans Unicode&quot;,&quot;sans-serif&quot;;color:#222222"> </span></p></div>                    </div><br>                

<h1 id="æºç ä¸‹è½½"><a href="#æºç ä¸‹è½½" class="headerlink" title="æºç ä¸‹è½½"></a>æºç ä¸‹è½½</h1><p>å›  Gaffer On Games çš„æºç åŸä¸‹è½½åœ°å€å¤±æ•ˆ, æ‰€ä»¥ç‰¹åœ°è¡¥ä¸Š.</p>
<p><a href="https://github.com/no5ix/ReliableUDP" target="_blank" rel="noopener">è¯·ç‚¹å‡»</a></p>

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/æ¸¸æˆç½‘ç»œå¼€å‘ä¸€ä¹‹TCPvsUDP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/æ¸¸æˆç½‘ç»œå¼€å‘ä¸€ä¹‹TCPvsUDP/" itemprop="url">æ¸¸æˆç½‘ç»œå¼€å‘ä¸€ä¹‹TCPvsUDP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-14T22:20:34+00:00">
                11-14-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><p><a href="https://gafferongames.com/post/udp_vs_tcp/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p></p><h2 id="introduction">Introduction</h2><p></p>
<p>Hi, I&rsquo;m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <a href="https://gafferongames.com/categories/game-networking/" target="_blank" rel="noopener"><strong>Networking for Game Programmers</strong></a>.</p><br><p>In this article we start with the most basic aspect of network programming: sending and receiving data over the network. This is perhaps the simplest and most basic part of what network programmers do, but still it is quite intricate and non-obvious as to what the best course of action is.</p><br><p>You have most likely heard of sockets, and are probably aware that there are two main types: TCP and UDP. When writing a network game, we first need to choose what type of socket to use. Do we use TCP sockets, UDP sockets or a mixture of both? Take care because if you get this wrong it will have terrible effects on your multiplayer game!</p><br><p>The choice you make depends entirely on what sort of game you want to network. So from this point on and for the rest of this article series, I assume you want to network an action game. You know, games like Halo, Battlefield 1942, Quake, Unreal, CounterStrike and Team Fortress.</p><br><p>In light of the fact that we want to network an action game, we&rsquo;ll take a very close look at the properties of each protocol, and dig a bit into how the internet actually works. Once we have all this information, the correct choice is clear.</p><br><h2 id="tcp-ip">TCP/IP</h2><br><p>TCP stands for &ldquo;transmission control protocol&rdquo;. IP stands for &ldquo;internet protocol&rdquo;. Together they form the backbone for almost everything you do online, from web browsing to IRC to email, it&rsquo;s all built on top of TCP/IP.</p><br><p>If you have ever used a TCP socket, then you know it&rsquo;s a reliable connection based protocol. This means you create a connection between two machines, then you exchange data much like you&rsquo;re writing to a file on one side, and reading from a file on the other.</p><br><p>TCP connections are reliable and ordered. All data you send is guaranteed to arrive at the other side and in the order you wrote it. It&rsquo;s also a stream protocol, so TCP automatically splits your data into packets and sends them over the network for you.</p><br><h2 id="ip">IP</h2><br><p>The simplicity of TCP is in stark contrast to what actually goes on underneath TCP at the IP or &ldquo;internet protocol&rdquo; level.</p><br><p>Here there is no concept of connection, packets are simply passed from one computer to the next. You can visualize this process being somewhat like a hand-written note passed from one person to the next across a crowded room, eventually, reaching the person it&rsquo;s addressed to, but only after passing through many hands.</p><br><p>There is also no guarantee that this note will actually reach the person it is intended for. The sender just passes the note along and hopes for the best, never knowing whether or not the note was received, unless the other person decides to write back!</p><br><p>Of course IP is in reality a little more complicated than this, since no one computer knows the exact sequence of computers to pass the packet along to so that it reaches its destination quickly. Sometimes IP passes along multiple copies of the same packet and these packets make their way to the destination via different paths, causing packets to arrive out of order and in duplicate.</p><br><p>This is because the internet is designed to be self-organizing and self-repairing, able to route around connectivity problems rather than relying on direct connections between computers. It&rsquo;s actually quite cool if you think about what&rsquo;s <em>really</em> going on at the low level. You can read all about this in the classic book <a href="http://www.cs.newpaltz.edu/~pletcha/NET_PY/the-protocols-tcp-ip-illustrated-volume-1.9780201633467.24290.pdf" target="_blank" rel="noopener">TCP/IP Illustrated</a>.</p><br><h2 id="udp">UDP</h2><br><p>Instead of treating communications between computers like writing to files, what if we want to send and receive packets directly?</p><br><p>We can do this using UDP.</p><br><p>UDP stands for &ldquo;user datagram protocol&rdquo; and it&rsquo;s another protocol built on top of IP, but unlike TCP, instead of adding lots of features and complexity, UDP is a very thin layer over IP.</p><br><p>With UDP we can send a packet to a destination IP address (eg. 112.140.20.10) and port (say 52423), and it gets passed from computer to computer until it arrives at the destination or is lost along the way.</p><br><p>On the receiver side, we just sit there listening on a specific port (eg. 52423) and when a packet arrives from <em>any</em> computer (remember there are no connections!), we get notified of the address and port of the computer that sent the packet, the size of the packet, and can read the packet data.</p><br><p>Like IP, UDP is an unreliable protocol. In practice however, most packets that are sent <em>will</em> get through, but you&rsquo;ll usually have around 1-5% packet loss, and occasionally you&rsquo;ll get periods where no packets get through at all (remember there are lots of computers between you and your destination where things can go wrong&hellip;)</p><br><p>There is also no guarantee of ordering of packets with UDP. You could send 5 packets in order 1,2,3,4,5 and they could arrive completely out of order like 3,1,2,5,4. In practice, packets tend to arrive in order <em>most</em> of the time, but you cannot rely on this!</p><br><p>UDP also provides a 16 bit checksum, which in theory is meant to protect you from receiving invalid or truncated data, but you can&rsquo;t even trust this, since 16 bits is just not enough protection when you are sending UDP packets rapidly over a long period of time. Statistically, you can&rsquo;t even rely on this checksum and must add your own.</p><br><p>So in short, when you use UDP you&rsquo;re pretty much on your own!</p><br><h2 id="tcp-vs-udp">TCP vs. UDP</h2><br><p>We have a decision to make here, do we use TCP sockets or UDP sockets?</p><br><p>Lets look at the properties of each:</p><br><p>TCP:</p><br><ul><br><li>Connection based</li><br><li>Guaranteed reliable and ordered</li><br><li>Automatically breaks up your data into packets for you</li><br><li>Makes sure it doesnâ€™t send data too fast for the internet connection to handle (flow control)</li><br><li>Easy to use, you just read and write data like its a file</li><br></ul><br><p>UDP:</p><br><ul><br><li>No concept of connection, you have to code this yourself</li><br><li>No guarantee of reliability or ordering of packets, they may arrive out of order, be duplicated, or not arrive at all!</li><br><li>You have to manually break your data up into packets and send them</li><br><li>You have to make sure you donâ€™t send data too fast for your internet connection to handle</li><br><li>If a packet is lost, you need to devise some way to detect this, and resend that data if necessary</li><br><li>You canâ€™t even rely on the UDP checksum so you must add your own</li><br></ul><br><p>The decision seems pretty clear then, TCP does everything we want and its super easy to use, while UDP is a huge pain in the ass and we have to code everything ourselves from scratch.</p><br><p>So obviously we just use TCP right?</p><br><p>Wrong!</p><br><p>Using TCP is the worst possible mistake you can make when developing a multiplayer game! To understand why, you need to see what TCP is actually doing above IP to make everything look so simple.</p><br><h2 id="how-tcp-really-works">How TCP really works</h2><br><p>TCP and UDP are both built on top of IP, but they are radically different. UDP behaves very much like the IP protocol underneath it, while TCP abstracts everything so it looks like you are reading and writing to a file, hiding all complexities of packets and unreliability from you.</p><br><p>So how does it do this?</p><br><p>Firstly, TCP is a stream protocol, so you just write bytes to a stream, and TCP makes sure that they get across to the other side. Since IP is built on packets, and TCP is built on top of IP, TCP must therefore break your stream of data up into packets. So, some internal TCP code queues up the data you send, then when enough data is pending the queue, it sends a packet to the other machine.</p><br><p>This can be a problem for multiplayer games if you are sending very small packets. What can happen here is that TCP may decide it&rsquo;s not going to send data until you have buffered up enough data to make a reasonably sized packet to send over the network.</p><br><p>This is a problem because you want your client player input to get to the server <em>as quickly as possible</em>, if it is delayed or &ldquo;clumped up&rdquo; like TCP can do with small packets, the client&rsquo;s user experience of the multiplayer game will be very poor. Game network updates will arrive late and infrequently, instead of on-time and frequently like we want.</p><br><p>TCP has an option to fix this behavior called <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" target="_blank" rel="noopener">TCP_NODELAY</a>. This option instructs TCP not to wait around until enough data is queued up, but to flush any data you write to it immediately. This is referred to as disabling Nagle&rsquo;s algorithm.</p><br><p>Unfortunately, even if you set this option TCP still has serious problems for multiplayer games and it all stems from how TCP handles lost and out of order packets to present you with the &ldquo;illusion&rdquo; of a reliable, ordered stream of data.</p><br><h2 id="how-tcp-implements-reliability">How TCP implements reliability</h2><br><p>Fundamentally TCP breaks down a stream of data into packets, sends these packets over unreliable IP, then takes the packets received on the other side and reconstructs the stream.</p><br><p>But what happens when a packet is lost?</p><br><p>What happens when packets arrive out of order or are duplicated?</p><br><p>Without going too much into the details of how TCP works because its super-complicated (please refer to <a href="http://www.cs.newpaltz.edu/~pletcha/NET_PY/the-protocols-tcp-ip-illustrated-volume-1.9780201633467.24290.pdf" target="_blank" rel="noopener">TCP/IP Illustrated</a>) in essence TCP sends out a packet, waits a while until it detects that packet was lost because it didn&rsquo;t receive an ack (or acknowledgement), then resends the lost packet to the other machine. Duplicate packets are discarded on the receiver side, and out of order packets are resequenced so everything is reliable and in order.</p><br><p>The problem is that if we were to send our time critical game data over TCP, whenever a packet is dropped it has to stop and wait for that data to be resent. Yes, even if more recent data arrives, that new data gets put in a queue, and you cannot access it until that lost packet has been retransmitted. How long does it take to resend the packet?</p><br><p>Well, it&rsquo;s going to take <em>at least</em> round trip latency for TCP to work out that data needs to be resent, but commonly it takes 2*RTT, and another one way trip from the sender to the receiver for the resent packet to get there. So if you have a 125ms ping, you&rsquo;ll be waiting roughly 1/5th of a second for the packet data to be resent <em>at best</em>, and in worst case conditions you could be waiting up to half a second or more (consider what happens if the attempt to resend the packet fails to get through?). What happens if TCP decides the packet loss indicates network congestion and it backs off? Yes it actually does this. Fun times!</p><br><h2 id="never-use-tcp-for-time-critical-data">Never use TCP for time critical data</h2><br><p>The problem with using TCP for realtime games like FPS is that unlike web browsers, or email or most other applications, these multiplayer games have a <em>real time requirement</em> on packet delivery.</p><br><p>What this means is that for many parts of a game, for example player input and character positions, it really doesn&rsquo;t matter what happened a second ago, the game only cares about the most recent data.</p><br><p>TCP was simply not designed with this in mind.</p><br><p>Consider a very simple example of a multiplayer game, some sort of action game like a shooter. You want to network this in a very simple way. Every frame you send the input from the client to the server (eg. keypresses, mouse input controller input), and each frame the server processes the input from each player, updates the simulation, then sends the current position of game objects back to the client for rendering.</p><br><p>So in our simple multiplayer game, whenever a packet is lost, everything has to <em>stop and wait</em> for that packet to be resent. On the client game objects stop receiving updates so they appear to be standing still, and on the server input stops getting through from the client, so the players cannot move or shoot. When the resent packet finally arrives, you receive this stale, out of date information that you don&rsquo;t even care about! Plus, there are packets backed up in queue waiting for the resend which arrive at same time, so you have to process all of these packets in one frame. Everything is clumped up!</p><br><p>Unfortunately, there is nothing you can do to fix this behavior, it&rsquo;s just the fundamental nature of TCP. This is just what it takes to make the unreliable, packet-based internet look like a reliable-ordered stream.</p><br><p>Thing is we don&rsquo;t want a reliable ordered stream.</p><br><p>We want our data to get as quickly as possible from client to server without having to wait for lost data to be resent.</p><br><p>This is why you should <strong>never</strong> use TCP when networking time-critical data!</p><br><h2 id="wait-why-can-t-i-use-both-udp-and-tcp">Wait? Why can&rsquo;t I use <em>both</em> UDP and TCP?</h2><br><p>For realtime game data like player input and state, only the most recent data is relevant, but for other types of data, say perhaps a sequence of commands sent from one machine to another, reliability and ordering can be very important.</p><br><p>The temptation then is to use UDP for player input and state, and TCP for the reliable ordered data. If you&rsquo;re sharp you&rsquo;ve probably even worked out that you may have multiple &ldquo;streams&rdquo; of reliable ordered commands, maybe one about level loading, and another about AI. Perhaps you think to yourself, &ldquo;Well, I&rsquo;d really not want AI commands to stall out if a packet is lost containing a level loading command - they are completely unrelated!&rdquo;. You are right, so you may be tempted to create one TCP socket for each stream of commands.</p><br><p>On the surface, this seems like a great idea. The problem is that since TCP and UDP are both built on top of IP, the underlying packets sent by each protocol will affect each other. Exactly how they affect each other is quite complicated and relates to how TCP performs reliability and flow control, but fundamentally you should remember that TCP tends to <em>induce</em> packet loss in UDP packets. For more information, read <a href="http://www.isoc.org/INET97/proceedings/F3/F3_1.HTM" target="_blank" rel="noopener">this paper</a> on the subject.</p><br><p>Also, it&rsquo;s pretty complicated to mix UDP and TCP. If you mix UDP and TCP you lose a certain amount of control. Maybe you can implement reliability in a more efficient way that TCP does, better suited to your needs? Even if you need reliable-ordered data, it&rsquo;s possible, provided that data is small relative to the available bandwidth to get that data across faster and more reliably that it would if you sent it over TCP. Plus, if you have to do NAT to enable home internet connections to talk to each other, having to do this NAT once for UDP and once for TCP (not even sure if this is possible&hellip;) is kind of painful.</p><br><h2 id="conclusion">Conclusion</h2><br><p>My recommendation is not only that you use UDP, but that you <em>only</em> use UDP for your game protocol. Don&rsquo;t mix TCP and UDP! Instead, learn how to implement the specific features of TCP that you need <em>inside</em> your own custom UDP based protocol.</p><br><p>Of course, it is no problem to use HTTP to talk to some RESTful services while your game is running. I&rsquo;m not saying you can&rsquo;t do that. A few TCP connections running while your game is running isn&rsquo;t going to bring everything down. The point is, don&rsquo;t split your <em>game protocol</em> across UDP and TCP. Keep your game protocol running over UDP so you are fully in control of the data you send and receive and how reliability, ordering and congestion avoidance are implemented.</p><br><p>The rest of this article series show you how to do this, from creating your own virtual connection on top of UDP, to creating your own reliability, flow control and congestion avoidance.</p>


<h1 id="è¯‘æ–‡"><a href="#è¯‘æ–‡" class="headerlink" title="è¯‘æ–‡"></a>è¯‘æ–‡</h1><p><a href="http://gad.qq.com/program/translateview/7167380" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a></p>
<div style="display:none"><br><br><!--     æŠŠä¸‹æ–‡ä¸­çš„ $hhd$ æ”¹ä¸º <h å°±å¯ä»¥æ¢å¤åŸçŠ¶, å½“æ—¶æŠŠ <h æ”¹ä¸º $hhd$ æ˜¯ä¸ºäº†é˜²æ­¢ç”Ÿæˆtoc      --><br><br><div><div class="WordSection1">$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-weight: normal;font-size:medium;font-family:å¾®è½¯é›…é»‘;">ç¿»è¯‘ï¼š<a rel="noopener" href="http://www.cnblogs.com/xueweihan/p/5452873.html" target="_blank">å‰Šå¾®å¯’</a>     å®¡æ ¡ï¼š<a rel="noopener" href="http://www.cnblogs.com/xueweihan/p/5452873.html" target="_blank">å‰Šå¾®å¯’</a></span><div><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"><br></span></div>$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä»‹ç»</span><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½ ä¸€å®šå¬è¯´è¿‡<span>sokcet(</span></span><span><a rel="noopener" href="http://www.cnblogs.com/xueweihan/p/5445483.html" target="_blank"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>åˆæ¢socket</span></span></a></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">)</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ï¼Œå®ƒåˆ†ä¸ºä¸¤ç§å¸¸ç”¨ç±»å‹ï¼š<span>TCP</span>å’Œ<span>UDP</span>ã€‚å½“è¦å†™ä¸€ä¸ªç½‘ç»œæ¸¸æˆï¼Œæˆ‘ä»¬é¦–å…ˆè¦é€‰æ‹©ä½¿ç”¨å“ªç§ç±»å‹çš„<span>socket</span>ã€‚æ˜¯ç”¨<span>TCP</span>ã€<span>UDP</span>è¿˜æ˜¯ä¸¤è€…éƒ½ç”¨ï¼Ÿ</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é€‰æ‹©å“ªç§ç±»å‹ï¼Œå®Œå…¨å–å†³äºä½ è¦å†™çš„æ¸¸æˆçš„ç±»å‹ã€‚åé¢çš„æ–‡ç« ï¼Œæˆ‘éƒ½å°†å‡è®¾ä½ è¦å†™ä¸€ä¸ª<span>â€˜</span>åŠ¨ä½œ<span>â€™</span>ç½‘æ¸¸ã€‚å°±åƒï¼šå…‰ç¯ç³»åˆ—ï¼Œæˆ˜åœ°<span>1942</span>ï¼Œé›·ç¥ä¹‹é”¤ï¼Œè¿™äº›æ¸¸æˆã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘ä»¬å°†éå¸¸ä»”ç»†çš„åˆ†æè¿™ä¸¤ç§<span>socket</span>ç±»å‹çš„ä¼˜åŠ£ï¼Œå¹¶ä¸”æ·±å…¥åˆ°åº•å±‚ï¼Œå¼„æ¸…æ¥šäº’è”ç½‘æ˜¯å¦‚ä½•å·¥ä½œçš„ä»€ä¹ˆã€‚å½“æˆ‘ä»¬å¼„æ¸…æ¥šè¿™äº›ä¿¡æ¯åï¼Œå°±å¾ˆå®¹æ˜“åšå‡ºæ­£ç¡®çš„é€‰æ‹©äº†ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP/IP</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä»£è¡¨<span>â€œ</span>ä¼ è¾“æ§åˆ¶åè®®<span>â€</span>ï¼Œ<span>IP</span>ä»£è¡¨ï¼š<span>â€œ</span>äº’è”ç½‘åè®®<span>â€</span>ï¼Œä½ åœ¨äº’è”ç½‘ä¸Šåšä»»ä½•äº‹æƒ…ï¼Œéƒ½æ˜¯å»ºç«‹åœ¨è¿™ä¸¤è€…çš„åŸºç¡€ä¸Šï¼Œæ¯”å¦‚ï¼šæµè§ˆç½‘é¡µã€æ”¶å‘é‚®ä»¶ç­‰ç­‰ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">TCP</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¦‚æœä½ æ›¾ç»ç”¨è¿‡<span>TCP socket</span>ï¼Œä½ è‚¯å®šçŸ¥é“å®ƒæ˜¯å¯é è¿æ¥çš„åè®®ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“åè®®ã€‚ç®€å•çš„è¯´ï¼šä¸¤å°æœºå™¨å…ˆå»ºç«‹èµ·è¿æ¥ï¼Œç„¶åä¸¤å°æœºå™¨ç›¸äº’å‘é€æ•°æ®ï¼Œå°±åƒä½ åœ¨ä¸€å°è®¡ç®—æœºä¸Šå†™æ–‡ä»¶ï¼Œåœ¨å¦å¤–ä¸€ä¸ªå°è¯»æ–‡ä»¶ä¸€æ ·ã€‚ï¼ˆæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼š<span>TCP socket</span>å°±åƒå»ºç«‹èµ·è¿æ¥çš„è®¡ç®—æœºï¼Œä¹‹é—´å…±äº«çš„ä¸€ä¸ª<span>â€˜</span>æ–‡ä»¶<span>â€˜</span>å¯¹è±¡ï¼Œä¸¤è€…é€šè¿‡è¯»å†™è¿™ä¸ª<span>â€˜</span>æ–‡ä»¶<span>â€˜</span>å®ç°æ•°æ®çš„ä¼ è¾“ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™ä¸ªè¿æ¥æ˜¯å¯é çš„ã€æœ‰åºçš„ï¼Œä»£è¡¨ç€ï¼šå‘é€çš„æ‰€æœ‰çš„æ•°æ®ï¼Œä¿è¯åˆ°è¾¾ä¼ è¾“çš„å¦ä¸€ç«¯çš„æ—¶å€™ã€‚å¦ä¸€ç«¯å¾—åˆ°çš„æ•°æ®ï¼Œå’Œå‘é€æ•°æ®ä¸€æ‘¸ä¸€æ ·ï¼ˆå¯é ï¼Œæœ‰åºã€‚ä¾‹å¦‚ï¼š<span>A</span>å‘é€æ•°æ®<span>â€˜abcâ€™</span>ï¼Œé€šè¿‡<span>TCPsocket</span>ä¼ è¾“æ•°æ®åˆ°<span>B</span>ï¼Œ<span>B</span>å¾—åˆ°æ•°æ®ä¸€å®šæ˜¯ï¼š<span>â€˜abcâ€™</span>ã€‚è€Œä¸æ˜¯<span>â€˜bcaâ€™</span>æˆ–è€…<span>â€˜xueweihanâ€™</span>ä¹‹ç±»çš„é¬¼ï¼ï¼‰ã€‚ä¼ è¾“çš„æ•°æ®æ˜¯<span>â€˜</span>æ•°æ®æµ<span>â€™</span>çš„å½¢å¼<span>(</span>æ•°æ®æµï¼šç”¨äºæ“ä½œæ•°æ®é›†åˆçš„æœ€å°çš„æœ‰åºå•ä½ï¼Œä¸æ“ä½œæœ¬åœ°æ–‡ä»¶ä¸­çš„<span>stream</span>ä¸€æ ·ã€‚æ‰€ä»¥<span>TCP socket</span>å’Œæ–‡ä»¶å¯¹è±¡å¾ˆåƒ<span>)</span>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š<span>TCP</span>æŠŠä½ çš„æ•°æ®æ‹†åˆ†åï¼ŒåŒ…è£…æˆæ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡ç½‘ç»œå‘é€å‡ºå»ã€‚</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><strong><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ³¨æ„</span></strong><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ï¼šå°±åƒè¯»å†™æ–‡ä»¶é‚£æ ·ï¼Œè¿™æ ·æ¯”è¾ƒå¥½ç†è§£ã€‚</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">IP</span><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">â€œIPâ€</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åè®®æ˜¯åœ¨<span>TCP</span>åè®®çš„ä¸‹é¢ï¼ˆè¿™ä¸ªç‰µæ‰¯åˆ°ä¸ƒå±‚äº’è”ç½‘åè®®æ ˆï¼Œæˆ‘å°±ç®€å•çš„è´´ä¸ªå›¾ä¸åšè¯¦ç»†çš„ä»‹ç»ï¼‰<span><br><img width="713" height="442" id="å›¾ç‰‡ 8" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="http://gameweb-img.qq.com/gad/20160809/image001.1470706683.gif" alt="æ¸¸æˆç½‘ç»œå¼€å‘(ä¸€)ï¼šUDP vs. TCP"></span></span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">â€œIPâ€</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åè®®æ˜¯æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œå®ƒåšçš„åªæ˜¯æŠŠä¸Šä¸€å±‚<span>(</span>ä¼ è¾“å±‚<span>)</span>çš„æ•°æ®åŒ…ä»ä¸€ä¸ªè®¡ç®—ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªè®¡ç®—æœºã€‚ä½ å¯ä»¥ç†è§£æˆï¼šè¿™ä¸ªè¿‡ç¨‹å°±åƒä¸€å †äººæ‰‹é€’æ‰‹ä¼ é€’çº¸æ¡ä¸€æ ·ï¼Œä¼ é€’äº†å¾ˆå¤šæ¬¡ï¼Œæœ€ç»ˆåˆ°è¾¾çº¸æ¡ä¸Šæ ‡è®°çš„<span>xxx</span>æ‰‹é‡Œï¼ˆçº¸æ¡ä¸Šå†™ç€<span>â€˜xxx</span>äº²å¯ï¼Œå·çœ‹è€…<span>3cmâ€™</span>ï¼‰ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¿è¯è¿™ä¸ªçº¸æ¡<span>(</span>ä¿¡ä»¶<span>)</span>èƒ½èƒ½å¤Ÿå‡†ç¡®çš„é€åˆ°æ”¶ä¿¡äººçš„æ‰‹ä¸Šã€‚å‘ä¿¡äººå‘é€ä¿¡ä»¶ï¼Œä½†æ˜¯æ°¸è¿œä¸çŸ¥é“ä¿¡ä»¶æ˜¯å¦å¯ä»¥å‡†ç¡®åˆ°è¾¾æ”¶ä»¶äººçš„æ‰‹ä¸Šï¼Œé™¤éæ”¶ä»¶äººå›ä¿¡å‘Šè¯‰ä»–ï¼ˆå‘ä¿¡äººï¼‰ï¼š<span>â€œ</span>å…„å¼Ÿæˆ‘æ”¶åˆ°ä¿¡äº†ï¼<span>â€</span>ï¼ˆ<span>IP</span>å±‚åªæ˜¯ç”¨äºä¼ é€’ä¿¡æ¯ï¼Œå¹¶ä¸åšä¿¡æ¯çš„æ ¡éªŒç­‰å…¶å®ƒæ“ä½œï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å½“ç„¶ï¼Œä¼ é€’ä¿¡æ¯çš„è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯è¿˜æ˜¯å¾ˆå¤æ‚çš„ã€‚å› ä¸ºï¼Œä¸çŸ¥é“å…·ä½“çš„ä¼ é€’æ¬¡åºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå› ä¸ºä¸çŸ¥é“æœ€ä¼˜çš„ä¼ é€’è·¯çº¿ï¼ˆèƒ½å¤Ÿè®©æ•°æ®åŒ…å¿«é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°çš„æœ€ä¼˜è·¯å¾„ï¼‰æ‰€ä»¥ï¼Œæœ‰äº›æ—¶å€™<span>â€œIPâ€</span>åè®®å°±ä¼ é€’å¤šä»½ä¸€æ ·çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®é€šè¿‡ä¸åŒçš„è·¯çº¿åˆ°è¾¾ç›®çš„åœ°ï¼Œä»è€Œå‘ç°æœ€ä¼˜çš„ä¼ é€’è·¯çº¿ã€‚</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™å°±æ˜¯äº’è”ç½‘è®¾è®¡ä¸­çš„ï¼šè‡ªåŠ¨ä¼˜åŒ–å’Œè‡ªåŠ¨ä¿®å¤ï¼Œè§£å†³äº†è¿æ¥çš„é—®é¢˜ã€‚è¿™çœŸçš„æ˜¯ä¸€ä¸ªå¾ˆé…·çš„è®¾è®¡ï¼Œå¦‚æœä½ æƒ³çŸ¥é“æ›´å¤šçš„åº•å±‚å®ç°ï¼Œå¯ä»¥é˜…è¯»å…³äº<span>TCP/IP</span>çš„ä¹¦ã€‚ï¼ˆæ¨è</span><span><a rel="noopener" href="http://item.jd.com/11519010.html" target="_blank"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>ä¸Šé‡å®£çš„å›¾è§£ç³»åˆ—</span></span></a></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">)</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">UDP</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¦‚æœæˆ‘ä»¬æƒ³è¦ç›´æ¥å‘é€å’Œæ¥å—æ•°æ®åŒ…ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨å¦ä¸€ç§<span>socket</span>ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘ä»¬å«å®ƒ<span>UDP</span>ã€‚<span>UDP</span>ä»£è¡¨<span>â€œ</span>ç”¨æˆ·æ•°æ®åŒ…åè®®<span>â€</span>ï¼Œå®ƒæ˜¯å¦å¤–ä¸€ç§å»ºç«‹åœ¨<span>IP</span>åè®®ä¹‹ä¸Šçš„åè®®ï¼Œå°±åƒ<span>TCP</span>ä¸€æ ·ï¼Œä½†æ˜¯æ²¡æœ‰<span>TCP</span>é‚£ä¹ˆå¤šåŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šå»ºç«‹è¿æ¥ï¼Œä¿¡æ¯çš„æ ¡éªŒï¼Œæ•°æ®æµçš„æ‹†åˆ†åˆå¹¶ç­‰ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½¿ç”¨<span>UDP</span>æˆ‘ä»¬èƒ½å¤Ÿå‘ç›®æ ‡<span>IP</span>å’Œç«¯å£ï¼ˆä¾‹å¦‚<span>80</span>ï¼‰ï¼Œå‘é€æ•°æ®åŒ…ã€‚æ•°æ®åŒ…ä¼šè¾¾åˆ°ç›®æ ‡è®¡ç®—æœºæˆ–è€…ä¸¢å¤±ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ”¶ä»¶äººï¼ˆç›®æ ‡è®¡ç®—æœºï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç›‘å¬å…·ä½“çš„ç«¯å£ï¼ˆä¾‹å¦‚ï¼š<span>80</span>ï¼‰ï¼Œå½“ä»ä»»æ„ä¸€å°è®¡ç®—æœºï¼ˆæ³¨æ„ï¼š<span>UDP</span>æ˜¯ä¸å»ºç«‹è¿æ¥çš„ï¼‰æ¥å—åˆ°æ•°æ®åŒ…åï¼Œæˆ‘ä»¬ä¼šå¾—çŸ¥å‘é€æ•°æ®åŒ…çš„è®¡ç®—æœºåœ°å€ï¼ˆ<span>IP</span>åœ°å€ï¼‰å’Œç«¯å£ã€æ•°æ®åŒ…çš„å¤§å°ã€å†…å®¹ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">UDP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ˜¯ä¸å¯é åè®®ã€‚ç°å®ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå‘é€çš„å¤§å¤šæ•°çš„æ•°æ®åŒ…éƒ½ä¼šè¢«æ¥æ”¶åˆ°ï¼Œä½†æ˜¯é€šå¸¸ä¼šä¸¢å¤±<span>1-5%</span>ï¼Œå¶å°”ï¼Œæœ‰çš„æ—¶å€™è¿˜å¯èƒ½å•¥éƒ½æ¥æ”¶ä¸åˆ°ï¼ˆæ•°æ®åŒ…å…¨éƒ¨ä¸¢å¤±ä¸€ä¸ªéƒ½æ²¡æ¥æ”¶åˆ°ï¼Œä¼ é€’æ•°æ®çš„è®¡ç®—æœºä¹‹é—´çš„è®¡ç®—æœºçš„æ•°é‡è¶Šå¤šï¼Œå‡ºé”™çš„æ¦‚ç‡è¶Šå¤§ï¼‰ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">UDP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åè®®ä¸­çš„æ•°æ®åŒ…ä¹Ÿæ˜¯æ²¡æœ‰é¡ºåºçš„ã€‚æ¯”å¦‚ï¼šä½ å‘é€<span>5</span>ä¸ªåŒ…ï¼Œé¡ºåºæ˜¯<span>1</span>ï¼Œ<span>2</span>ï¼Œ<span>3</span>ï¼Œ<span>4</span>ï¼Œ<span>5</span>ã€‚ä½†æ˜¯ï¼Œå³æ¥æ”¶åˆ°çš„é¡ºåºå¯èƒ½æ˜¯<span>3</span>ï¼Œ<span>1</span>ï¼Œ<span>4</span>ï¼Œ<span>2</span>ï¼Œ<span>5</span>ã€‚ç°å®ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¤§å¤šæ—¶å€™ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®çš„é¡ºåºæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½æ˜¯è¿™æ ·ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æœ€åï¼Œå°½ç®¡<span>UDP</span>å¹¶æ²¡æœ‰æ¯”<span>â€œIPâ€</span>åè®®é«˜çº§å¤šå°‘ï¼Œè€Œä¸”ä¸å¯é ã€‚ä½†æ˜¯ä½ å‘é€çš„æ•°æ®ï¼Œè¦ä¹ˆå…¨éƒ¨åˆ°è¾¾ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸¢å¤±ã€‚æ¯”å¦‚ï¼šä½ å‘é€ä¸€ä¸ªå¤§å°ä¸º<span>256 byte</span>çš„æ•°æ®åŒ…ç»™å¦å¤–ä¸€å°è®¡ç®—æœºï¼Œè¿™å°è®¡ç®—æœºä¸ä¼šåªæ¥æ”¶åˆ°<span>100 byte</span>çš„æ•°æ®åŒ…ï¼Œå®ƒåªå¯èƒ½æ¥æ”¶åˆ°<span>256 byte</span>çš„æ•°æ®åŒ…ï¼Œæˆ–è€…ä»€ä¹ˆéƒ½æ²¡æ¥æ”¶åˆ°ã€‚è¿™æ˜¯<span>UDP</span>å”¯ä¸€å¯ä»¥ä¿è¯çš„äº‹æƒ…ï¼Œå…¶å®ƒæ‰€æœ‰çš„äº‹æƒ…éƒ½éœ€è¦ä½ æ¥å†³å®šï¼ˆæˆ‘çš„ç†è§£ï¼Œ<span>UDP</span>åè®®åªæ˜¯ä¸ªç®€å•çš„ä¼ è¾“åè®®ï¼Œåªä¿è¯æ•°æ®åŒ…çš„å®Œæ•´æ€§ï¼Œæ³¨æ„æ˜¯æ•°æ®åŒ…è€Œä¸æ˜¯ä¿¡æ¯ã€‚å…¶ä»–çš„äº‹æƒ…éœ€è¦è‡ªå·±å»åšï¼Œå®Œå–„è¿™ä¸ªåè®®ï¼Œè¾¾åˆ°è‡ªå·±ä½¿ç”¨çš„éœ€æ±‚ã€‚ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP vs. UDP</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘ä»¬å¦‚ä½•é€‰æ‹©æ˜¯ä½¿ç”¨<span>TCP socket</span>è¿˜æ˜¯<span>UDPsocket</span>å‘¢ï¼Ÿ</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸¤è€…çš„ç‰¹å¾å§ï¼š</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ï¼š</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é¢å‘è¿æ¥</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¯é ã€æœ‰åº</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è‡ªåŠ¨æŠŠæ•°æ®æ‹†åˆ†æˆæ•°æ®åŒ…</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ç¡®ä¿æ•°æ®çš„å‘é€ä¸€ç›´åœ¨æ§åˆ¶ä¸­ï¼ˆæµé‡æ§åˆ¶ï¼‰</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½¿ç”¨ç®€å•ï¼Œå°±åƒè¯»å†™æ–‡ä»¶ä¸€æ ·</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">UDP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ï¼š</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œä½ éœ€è¦è‡ªå·±é€šè¿‡ä»£ç å®ç°ï¼ˆè¿™ä¸ªæˆ‘ä¹Ÿæ²¡è‡ªå·±å®ç°è¿‡ï¼Œåº”è¯¥è¿˜ä¼šè®²ï¼‰</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä¸å¯é ï¼Œæ•°æ®åŒ…æ— åºï¼Œæ•°æ®åŒ…å¯èƒ½æ— åºï¼Œé‡å¤ï¼Œæˆ–è€…ä¸¢å¤±</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½ éœ€è¦æ‰‹åŠ¨åœ°æŠŠæ•°æ®æ‹†åˆ†æˆæ•°æ®åŒ…ï¼Œç„¶åå‘é€æ•°æ®åŒ…</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½ éœ€è¦è‡ªå·±åšæµé‡æ§åˆ¶</span></p><p style="margin: 7.5pt 0cm 7.5pt 22.5pt; t : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">      </span></span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¦‚æœæ•°æ®åŒ…å¤ªå¤šï¼Œä½ éœ€è¦è®¾è®¡é‡å‘å’Œç»Ÿè®¡æœºåˆ¶</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œä¸éš¾å‘ç°ï¼š<span>TCP</span>åšäº†æ‰€æœ‰æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ï¼Œè€Œä¸”ä½¿ç”¨ååˆ†ç®€å•ã€‚åè§‚<span>UDP</span>å°±ååˆ†éš¾ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–å†™è®¾è®¡ä¸€åˆ‡ã€‚å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬åªè¦ç”¨<span>TCP</span>å°±å¥½äº†ï¼</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä¸ï¼Œä½ æƒ³çš„ç®€å•äº†ï¼ˆåŸæ¥ï¼Œæ˜¯æˆ‘å¤ªå¹´è½»äº†ï¼ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å½“ä½ å¼€å‘ä¸€ä¸ªåƒä¸Šé¢è¯´è¿‡çš„<span>FPS</span>ï¼ˆåŠ¨ä½œç½‘æ¸¸ï¼‰çš„æ—¶å€™ä½¿ç”¨<span>TCP</span>åè®®ï¼Œä¼šæ˜¯ä¸€ä¸ªé”™è¯¯çš„å†³å®šï¼Œè¿™ä¸ª<span>TCP</span>åè®®å°±ä¸å¥½ç”¨äº†ï¼ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿé‚£ä¹ˆä½ å°±éœ€è¦çŸ¥é“<span>TCP</span>åˆ°åº•åšäº†ä»€ä¹ˆï¼Œä½¿å¾—ä¸€èµ·çœ‹èµ·æ¥ååˆ†ç®€å•ã€‚ï¼ˆè®©æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œè¿™æ˜¯æˆ‘æœ€å¥½å¥‡çš„åœ°æ–¹ï¼ï¼ï¼æœ‰æ²¡æœ‰å…´å¥‹èµ·æ¥ï¼Ÿï¼‰</span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">TCP</span><span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">å†…éƒ¨çš„å·¥ä½œåŸç†</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å’Œ<span>UDP</span>éƒ½æ˜¯å»ºç«‹åœ¨<span>â€œIPâ€</span>åè®®ä¸Šçš„ï¼Œä½†æ˜¯å®ƒä¿©å®Œå…¨ä¸åŒã€‚<span>UDP</span>å’Œ<span>â€œIPâ€</span>åè®®å¾ˆåƒï¼Œç„¶è€Œ<span>TCP</span>éšè—äº†æ•°æ®åŒ…çš„æ‰€æœ‰çš„å¤æ‚å’Œä¸å¯é çš„éƒ¨åˆ†ï¼ŒæŠ½è±¡æˆäº†ç±»ä¼¼æ–‡ä»¶çš„å¯¹è±¡ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é‚£ä¹ˆ<span>TCP</span>æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é¦–å…ˆï¼Œ<span>TCP</span>æ˜¯ä¸€ä¸ªæ•°æ®æµçš„åè®®ï¼Œæ‰€ä»¥ä½ åªéœ€è¦æŠŠè¾“å…¥çš„å†…å®¹å˜æˆæ•°æ®æµï¼Œç„¶å<span>TCP</span>åè®®å°±ä¼šç¡®ä¿æ•°æ®ä¼šåˆ°è¾¾å‘é€çš„ç›®çš„åœ°ã€‚å› ä¸º<span>â€œIPâ€</span>åè®®æ˜¯é€šè¿‡æ•°æ®åŒ…ä¼ é€’ä¿¡æ¯ï¼Œ<span>TCP</span>æ˜¯å»ºç«‹åœ¨<span>â€œIPâ€</span>åè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥<span>TCP</span>å¿…é¡»æŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®æµåˆ†æˆæ•°æ®åŒ…çš„å½¢å¼ã€‚<span>TCP</span>åè®®ä¼šå¯¹éœ€è¦å‘é€çš„æ•°æ®è¿›è¡Œæ’é˜Ÿï¼Œç„¶åå½“æœ‰è¶³å¤Ÿçš„æ’é™¤æ•°æ®çš„æ—¶å€™ï¼Œå°±å‘é€æ•°æ®åŒ…åˆ°ç›®æ ‡è®¡ç®—æœºã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å½“åœ¨å¤šäººåœ¨çº¿çš„ç½‘ç»œæ¸¸æˆä¸­å‘é€éå¸¸å°çš„æ•°æ®åŒ…çš„æ—¶å€™ï¼Œè¿™æ ·åšå°±æœ‰ä¸€ä¸ªé—®é¢˜ã€‚è¿™ä¸ªæ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæ•°æ®æ²¡æœ‰è¾¾åˆ°ç¼“å†²åŒºè®¾å®šçš„æ•°å€¼ï¼Œæ•°æ®åŒ…æ˜¯ä¸ä¼šå‘é€çš„ã€‚è¿™å°±ä¼šå‡ºç°ä¸ªé—®é¢˜ï¼šå› ä¸ºå®¢æˆ·ç«¯çš„ç”¨æˆ·è¾“å…¥è¯·æ±‚åï¼Œéœ€è¦å°½å¿«çš„ä»æœåŠ¡å™¨å¾—åˆ°å“åº”ï¼Œå¦‚æœåƒä¸Šé¢<span>TCP </span>ç­‰å¾…ç¼“å†²åŒºæ»¡åæ‰å‘é€çš„è¯ï¼Œå°±ä¼šå‡ºç°å»¶æ—¶ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯çš„ç”¨æˆ·ä½“éªŒå°±ä¼šéå¸¸å·®ï¼ç½‘ç»œæ¸¸æˆå‡ ä¹ä¸èƒ½å‡ºç°å»¶æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„æ˜¯<span>â€œ</span>å®æ—¶<span>â€</span>å’Œæµç•…ã€‚</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">TCP</span><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æœ‰ä¸€ä¸ªé€‰é¡¹å¯ä»¥ä¿®å¤ï¼Œä¸Šé¢è¯´çš„é‚£ç§ç­‰å¾…ç¼“å†²åŒºæ»¡æ‰å‘é€çš„æƒ…å†µï¼Œå°±æ˜¯<strong><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;">TCP_NODELAY</span></strong>ã€‚è¿™ä¸ªé€‰é¡¹ä½¿å¾—<span>TCP socket</span>ä¸éœ€è¦ç­‰å¾…ç¼“å†²åŒºæ»¡æ‰å‘é€ï¼Œè€Œæ˜¯è¾“å…¥æ•°æ®åå°±ç«‹å³å‘é€ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ç„¶è€Œï¼Œå³ä½¿ä½ å·²ç»è®¾ç½®äº†<span>TCP_NODELAY</span>é€‰é¡¹ï¼Œåœ¨å¤šäººç½‘æ¸¸ä¸­è¿˜æ˜¯ä¼šæœ‰ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™ä¸€åˆ‡çš„æºå¤´éƒ½ç”±äº<span>TCP</span>å¤„ç†ä¸¢åŒ…å’Œä¹±åºåŒ…çš„æ–¹å¼ã€‚ä½¿å¾—ä½ äº§ç”Ÿæœ‰åºå’Œå¯é çš„<span>â€œ</span>é”™è§‰<span>â€</span>ã€‚</span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">TCP</span><span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">å¦‚ä½•ä¿è¯æ•°æ®çš„å¯é æ€§</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æœ¬è´¨ä¸Š<span>TCP</span>åšçš„äº‹æƒ…ï¼Œåˆ†è§£æ•°æ®æµï¼Œæˆä¸ºæ•°æ®åŒ…ï¼Œä½¿ç”¨åœ¨ä¸å¯é çš„<span>â€œIPâ€</span>åè®®ï¼Œå‘é€è¿™äº›æ•°æ®åŒ…ã€‚ç„¶åä½¿å¾—æ•°æ®åŒ…åˆ°è¾¾ç›®æ ‡è®¡ç®—æœºï¼Œç„¶åé‡ç»„æˆæ•°æ®æµã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä½†æ˜¯ï¼Œå¦‚ä½•å¤„ç†å½“ä¸¢åŒ…ï¼Ÿå¦‚ä½•å¤„ç†é‡å¤çš„æ•°æ®åŒ…å’Œä¹±åºæ•°æ®åŒ…ï¼Ÿ</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™é‡Œä¸ä¼šä»‹ç»<span>TCP</span>å¤„ç†è¿™äº›äº‹æƒ…çš„ç»†èŠ‚ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯éå¸¸å¤æ‚çš„ï¼ˆæƒ³å¼„æ¸…æ¥šçš„åŒå­¦å¯ä»¥çœ‹æˆ‘ä¸Šé¢æ¨èçš„ä¹¦å•ï¼‰ï¼Œå¤§ä½“ä¸Šï¼š<span>TCP</span>å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æ£€æµ‹åˆ°æ•°æ®åŒ…ä¸¢å¤±äº†ï¼Œå› ä¸ºæ²¡æœ‰æ¥æ”¶åˆ°å®ƒçš„<span>ACK</span>ï¼ˆä¸€ç§ä¼ è¾“ç±»æ§åˆ¶ç¬¦å·ï¼Œç”¨äºç¡®è®¤æ¥æ”¶æ— è¯¯ï¼‰ï¼Œæ¥ä¸‹æ¥å°±é‡æ–°å‘é€ä¸¢å¤±çš„æ•°æ®åŒ…åˆ°ç›®æ ‡è®¡ç®—æœºã€‚é‡å¤çš„æ•°æ®åŒ…å°†è¢«ä¸¢å¼ƒåœ¨æ¥æ”¶ç«¯ï¼Œä¹±åºçš„æ•°æ®åŒ…å°†è¢«é‡æ–°æ’åºã€‚æ‰€ä»¥ä¿è¯äº†æ•°æ®åŒ…çš„å¯é æ€§å’Œæœ‰åºæ€§ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¦‚æœæˆ‘ä»¬ç”¨<span>TCP</span>å®ç°æ•°æ®çš„å®æ—¶ä¼ è¾“ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼š<span>TCP</span>æ— è®ºä»€ä¹ˆæƒ…å†µï¼Œåªè¦æ•°æ®åŒ…å‡ºé”™ï¼Œå°±å¿…é¡»ç­‰å¾…æ•°æ®åŒ…çš„é‡å‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿æœ€æ–°çš„æ•°æ®å·²ç»åˆ°è¾¾ï¼Œä½†è¿˜æ˜¯ä¸èƒ½è®¿é—®è¿™äº›æ•°æ®åŒ…ï¼Œæ–°åˆ°çš„æ•°æ®ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œéœ€è¦ç­‰å¾…ä¸¢å¤±çš„åŒ…é‡æ–°å‘è¿‡æ¥ä¹‹åï¼Œæ‰€æœ‰æ•°æ®æ²¡æœ‰ä¸¢å¤±æ‰å¯ä»¥è®¿é—®ã€‚éœ€è¦ç­‰å¾…å¤šé•¿æ—¶é—´æ‰èƒ½é‡æ–°å‘é€æ•°æ®åŒ…ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœçš„å»¶æ—¶æ˜¯<span>125ms</span>ï¼Œé‚£ä¹ˆéœ€è¦æœ€å¥½çš„æƒ…å†µä¸‹é‡å‘æ•°æ®åŒ…éœ€è¦<span>250ms</span>ï¼Œä½†æ˜¯å¦‚æœé‡åˆ°ç³Ÿç³•çš„æƒ…å†µï¼Œå°†ä¼šç­‰å¾…<span>500ms</span>ä»¥ä¸Šï¼Œæ¯”å¦‚ï¼šç½‘ç»œå µå¡ç­‰æƒ…å†µã€‚é‚£å°±æ²¡æ•‘äº†ã€‚ã€‚ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">ä¸ºä»€ä¹ˆ<span>TCP</span>ä¸åº”è¯¥ç”¨äºå¯¹ç½‘ç»œå»¶æ—¶è¦æ±‚æé«˜çš„æ¡ä»¶ä¸‹</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">å¦‚æœ<span>FPS</span>ï¼ˆç¬¬ä¸€äººç§°å°„å‡»ï¼‰è¿™ç±»çš„ç½‘ç»œæ¸¸æˆä½¿ç”¨<span>TCP</span>å°±å‡ºç°é—®é¢˜ï¼Œä½†æ˜¯<span>web</span>æµè§ˆå™¨ã€é‚®ç®±ã€å¤§å¤šæ•°åº”ç”¨å°±æ²¡é—®é¢˜ï¼Œå› ä¸ºå¤šäººç½‘ç»œæ¸¸æˆæœ‰å®æ—¶æ€§çš„è¦æ±‚ã€‚æ¯”å¦‚ï¼šç©å®¶è¾“å…¥è§’è‰²çš„ä½ç½®ï¼Œé‡è¦çš„ä¸æ˜¯å‰ä¸€ç§’å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€Œæ˜¯æœ€æ–°çš„æƒ…å†µï¼<span>TCP</span>å¹¶æ²¡æœ‰è€ƒè™‘è¿™ç±»éœ€æ±‚ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸ºè¿™ç§éœ€æ±‚è€Œè®¾è®¡çš„ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™é‡Œä¸¾ä¸€ä¸ªç®€å•çš„å¤šäººç½‘æ¸¸çš„ä¾‹å­ï¼Œæ¯”å¦‚å°„å‡»çš„æ¸¸æˆã€‚å¯¹ç½‘ç»œçš„è¦æ±‚å¾ˆç®€å•ã€‚ç©å®¶é€šè¿‡å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„æ¯ä¸ªåœºæ™¯ï¼ˆç”¨é¼ æ ‡å’Œé”®ç›˜è¾“å…¥çš„è¡Œèµ°çš„ä½ç½®ï¼‰ï¼ŒæœåŠ¡å™¨å¤„ç†æ¯ä¸ªç”¨æˆ·å‘é€è¿‡æ¥çš„æ‰€æœ‰åœºæ™¯ï¼Œå¤„ç†å®Œå†è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è§£æå“åº”ï¼Œæ¸²æŸ“æœ€æ–°çš„åœºæ™¯å±•ç¤ºç»™ç©å®¶ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åœ¨ä¸Šé¢è¯´çš„å“ªä¸ªå¤šäººæ¸¸æˆçš„ä¾‹å­ä¸­ï¼Œå¦‚æœå‡ºç°ä¸€ä¸ªæ•°æ®åŒ…ä¸¢å¤±ï¼Œæ‰€æœ‰äº‹æƒ…éƒ½éœ€è¦åœä¸‹æ¥ç­‰å¾…è¿™ä¸ªæ•°æ®åŒ…é‡å‘ã€‚å®¢æˆ·ç«¯ä¼šå‡ºç°ç­‰å¾…æ¥æ”¶æ•°æ®ï¼Œæ‰€ä»¥ç©å®¶æ“ä½œçš„ä»»åŠ¡å°±ä¼šå‡ºç°ç«™ç€ä¸åŠ¨çš„æƒ…å†µï¼ˆå¡ï¼å¡ï¼å¡ï¼ï¼‰ï¼Œä¸èƒ½å°„å‡»ä¹Ÿä¸èƒ½ç§»åŠ¨ã€‚å½“é‡å‘çš„æ•°æ®åŒ…åˆ°è¾¾åï¼Œä½ æ¥æ”¶åˆ°è¿™ä¸ªè¿‡æ—¶çš„æ•°æ®åŒ…ï¼Œç„¶è€Œç©å®¶å¹¶ä¸å…³å¿ƒè¿‡æœŸçš„æ•°æ®ï¼ˆæ¿€æˆ˜ä¸­ï¼Œå¡äº†<span>1</span>ç§’ï¼Œç­‰èƒ½åŠ¨äº†ï¼Œéƒ½å·²ç»æ­»äº†ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">ä¸å¹¸çš„æ˜¯ï¼Œæ²¡æœ‰åŠæ³•ä¿®å¤<span>TCP</span>çš„è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯å®ƒæœ¬è´¨çš„ä¸œè¥¿ï¼Œæ²¡åŠæ³•ä¿®å¤ã€‚è¿™å°±æ˜¯<span>TCP</span>å¦‚ä½•åšåˆ°è®©ä¸å¯é ï¼Œæ— åºçš„æ•°æ®åŒ…ï¼Œçœ‹èµ·æ¥åƒæœ‰åºï¼Œå¯é çš„æ•°æ®æµã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘å¹¶ä¸éœ€è¦å¯é ï¼Œæœ‰åºçš„æ•°æ®æµï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„å»¶æ—¶è¶Šä½è¶Šå¥½ï¼Œä¸éœ€è¦ç­‰å¾…é‡å‘ä¸¢å¤±çš„åŒ…ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ‰€ä»¥ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¯¹æ•°æ®çš„å®æ—¶æ€§è¦æ±‚çš„ä¸‹ï¼Œæˆ‘ä»¬ä¸ç”¨<span>TCP</span>ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$4 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#333333">é‚£ä¸ºä»€ä¹ˆä¸<span>UDP</span>å’Œ<span>TCP</span>ä¸€èµ·ç”¨å‘¢ï¼Ÿ</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">åƒç©å®¶è¾“å…¥å®æ—¶æ¸¸æˆæ•°æ®å’ŒçŠ¶æ€çš„å˜æ›´ï¼Œåªå’Œæœ€æ–°çš„æ•°æ®æœ‰å…³ï¼ˆè¿™äº›æ•°æ®å¼ºè°ƒå®æ—¶æ€§ï¼‰ã€‚ä½†æ˜¯å¦å¤–çš„ä¸€äº›æ•°æ®ï¼Œä¾‹å¦‚ï¼Œä»ä¸€å°è®¡ç®—æœºå‘é€ç»™å¦å¤–ä¸€ä¸ªå°è®¡ç®—æœºçš„ä¸€äº›åˆ—æŒ‡ä»¤ï¼ˆäº¤æ˜“è¯·æ±‚ï¼ŒèŠå¤©ï¼Ÿï¼‰ï¼Œå¯é ã€æœ‰åºçš„ä¼ è¾“è¿˜æ˜¯éå¸¸é‡è¦çš„ï¼</span></p><p style="margin: 0cm 0cm 0.0001pt; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">é‚£ä¹ˆï¼Œç”¨æˆ·è¾“å…¥å’ŒçŠ¶æ€ç”¨<span>UDP</span>ï¼Œ<span>TCP</span>ç”¨äºå¯é ã€æœ‰åºçš„æ•°æ®ä¼ è¾“ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„ç‚¹å­ã€‚ä½†æ˜¯ï¼Œé—®é¢˜åœ¨äº<span>TCP</span>å’Œ<span>UDP</span>éƒ½æ˜¯å»ºç«‹<span>â€œIPâ€</span>åè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥åè®®ä¹‹é—´éƒ½æ˜¯å‘é€æ•°æ®åŒ…ï¼Œä»è€Œç›¸äº’é€šä¿¡ã€‚åè®®ä¹‹é—´çš„äº’ç›¸å½±å“æ˜¯ç›¸å½“å¤æ‚çš„ï¼Œæ¶‰åŠåˆ°<span>TCP</span>æ€§èƒ½ã€å¯é æ€§å’Œæµé‡æ§åˆ¶ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<span>TCP</span>ä¼šå¯¼è‡´<span>UDP</span>ä¸¢åŒ…ï¼Œè¯·å‚è€ƒ</span><span><a rel="noopener" href="http://www.isoc.org/INET97/proceedings/F3/F3_1.HTM" target="_blank"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>è¿™ç¯‡è®ºæ–‡</span></span></a></span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æ­¤å¤–ï¼Œ<span>UDP</span>å’Œ<span>TCP</span>æ··åˆä½¿ç”¨æ˜¯éå¸¸å¤æ‚çš„ï¼Œè€Œä¸”å®ç°èµ·æ¥æ˜¯éå¸¸ç—›è‹¦çš„ã€‚ï¼ˆè¿™æ®µæˆ‘å°±ä¸ç¿»è¯‘äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼šä¸è¦æ··ç”¨<span>UDP</span>å’Œ<span>TCP</span>ï¼Œå®¹æ˜“å¤±å»å¯¹ä¼ è¾“æ•°æ®çš„æ§åˆ¶ï¼‰</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size: 24pt; font-family: å¾®è½¯é›…é»‘, sans-serif;">æ€»ç»“</span><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">æˆ‘çš„å»ºè®®å¹¶ä¸æ˜¯å°±ä¸€å®šè¦ä½¿ç”¨<span>UDP</span>ï¼Œä½†æ˜¯<span>UDP</span>åè®®åº”è¯¥ç”¨äºæ¸¸æˆã€‚è¯·ä¸è¦æ··åˆä½¿ç”¨<span>TCP</span>å’Œ<span>UDP</span>ï¼Œä½ åº”è¯¥å­¦ä¹ <span>TCP</span>ä¸­ä¸€äº›åœ°æ–¹æ˜¯å¦‚ä½•å®ç°çš„æŠ€å·§ï¼Œç„¶åå¯ä»¥æŠŠè¿™äº›æŠ€å·§ç”¨åœ¨<span>UDP</span>ä¸Šï¼Œä»è€Œå®ç°é€‚åˆä½ çš„éœ€æ±‚çš„åè®®ï¼ˆå€Ÿé‰´<span>TCP</span>ä¸­çš„å®ç°ï¼Œåœ¨<span>UDP</span>ä¸Šï¼Œå®Œå–„åŠŸèƒ½ï¼Œä»è€Œè¾¾åˆ°ä½ çš„éœ€æ±‚ï¼‰ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;">è¿™ä¸ªç³»åˆ—ï¼Œæ¥ä¸‹æ¥ä¼šè®²åˆ°ï¼šå¦‚ä½•åœ¨<span>UDP</span>ä¸Šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„è¿æ¥ï¼ˆå› ä¸º<span>UDP</span>æœ¬èº«ï¼Œæ˜¯æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µçš„ï¼‰ã€å¦‚ä½•ä½¿å¾—<span>UDP</span>å®ç°å¯é æ€§ï¼Œæµé‡æ§åˆ¶ï¼Œéé˜»å¡ã€‚</span></p><p style="margin: 7.5pt 0cm; line-height: 16.2pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-family: å¾®è½¯é›…é»‘, sans-serif;"> </span></p>$hhd$2 style=â€margin: 11.25pt 0cm 1.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;â€&gt;<span style="font-size: 24pt; font-family: å¾®è½¯é›…é»‘, sans-serif;">å‚è€ƒ</span><p class="MsoNormal" align="left" style="margin-l : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">         </span></span><span><a rel="noopener" href="http://wiki.mbalib.com/wiki/%C3%A6%E2%80%A2%C2%B0%C3%A6%C2%8D%C2%AE%C3%A6%C2%B5%C2%81" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black">MBA lib</span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>æ•°æ®æµ</span></span></a></span></p><p class="MsoNormal" align="left" style="margin-l : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">         </span></span><span><a rel="noopener" href="https://zh.wikipedia.org/wiki/TCP/IP%C3%A5%C2%8D%C2%8F%C3%A8%C2%AE%C2%AE%C3%A6%E2%80%94%C2%8F" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black">WiKi TCP/IP</span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>åè®®æ—</span></span></a></span></p><p class="MsoNormal" align="left" style="margin-l : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">         </span></span><span><a rel="noopener" href="http://www.w3school.com.cn/tcpip/tcpip_protocols.asp" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black">W3SchoolTCP/IP </span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>åè®®</span></span></a></span></p><p class="MsoNormal" align="left" style="margin-l : initial; background-repeat: initial;"><span style="font-size: 10pt; font-family: Symbol;">Â·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">         </span></span><span><a rel="noopener" href="http://liangjiabin.com/blog/2015/03/difference-between-tcp-vs-udp-protocol.html" target="_blank"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black">UDP</span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>å’ŒTCP</span></span><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:black"><span>çš„åŒº</span></span></a></span></p><p class="MsoNormal"><span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"> </span></p><p class="MsoNormal"><span style="font-size:16.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"><br></span></p></div></div>                    </div><br>                

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/å¿«é€Ÿç¼–è¯‘æŠ€å·§/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/å¿«é€Ÿç¼–è¯‘æŠ€å·§/" itemprop="url">å¿«é€Ÿç¼–è¯‘æŠ€å·§</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-01T22:57:29+00:00">
                11-01-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <blockquote>
<p>é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œæ¯æ¬¡éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸€ä»¶å¾ˆæµªè´¹æ—¶é—´çš„äº‹æƒ…ã€‚Researchäº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°ä»¥ä¸‹å¯ä»¥å¸®åŠ©æé«˜é€Ÿåº¦çš„æ–¹æ³•ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚</p>
</blockquote>
<h1 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a>tmpfs</h1><blockquote>
<p>æœ‰äººè¯´åœ¨Windowsä¸‹ç”¨äº†RAMDiskæŠŠä¸€ä¸ªé¡¹ç›®ç¼–è¯‘æ—¶é—´ä»4.</p>
</blockquote>
<p>5å°æ—¶å‡å°‘åˆ°äº†5åˆ†é’Ÿï¼Œä¹Ÿè®¸è¿™ä¸ªæ•°å­—æ˜¯æœ‰ç‚¹å¤¸å¼ äº†ï¼Œä¸è¿‡ç²—æƒ³æƒ³ï¼ŒæŠŠæ–‡ä»¶æ”¾åˆ°å†…å­˜ä¸Šåšç¼–è¯‘åº”è¯¥æ˜¯æ¯”åœ¨ç£ç›˜</p>
<p>ä¸Šå¿«å¤šäº†å§ï¼Œå°¤å…¶å¦‚æœç¼–è¯‘å™¨éœ€è¦ç”Ÿæˆå¾ˆå¤šä¸´æ—¶æ–‡ä»¶çš„è¯ã€‚</p>
<p>è¿™ä¸ªåšæ³•çš„å®ç°æˆæœ¬æœ€ä½ï¼Œåœ¨Linuxä¸­ï¼Œç›´æ¥mountä¸€ä¸ªtmpfså°±å¯ä»¥äº†ã€‚è€Œä¸”å¯¹æ‰€ç¼–è¯‘çš„å·¥ç¨‹æ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œä¹Ÿä¸ç”¨æ”¹åŠ¨ç¼–è¯‘ç¯å¢ƒã€‚</p>
<p>mount -t tmpfs tmpfs ~/build -o size=1G</p>
<p>ç”¨2.6.32.2çš„Linux Kernelæ¥æµ‹è¯•ä¸€ä¸‹ç¼–è¯‘é€Ÿåº¦ï¼š</p>
<ul>
<li><p>ç”¨ç‰©ç†ç£ç›˜ï¼š40åˆ†16ç§’</p>
</li>
<li><p>ç”¨tmpfsï¼š39åˆ†56ç§’</p>
</li>
</ul>
<p>å‘ƒâ€¦â€¦æ²¡ä»€ä¹ˆå˜åŒ–ã€‚çœ‹æ¥ç¼–è¯‘æ…¢å¾ˆå¤§ç¨‹åº¦ä¸Šç“¶é¢ˆå¹¶ä¸åœ¨IOä¸Šé¢ã€‚ä½†å¯¹äºä¸€ä¸ªå®é™…é¡¹ç›®æ¥è¯´ï¼Œ</p>
<p>ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½è¿˜ä¼šæœ‰æ‰“åŒ…ç­‰IOå¯†é›†çš„æ“ä½œï¼Œæ‰€ä»¥åªè¦å¯èƒ½ï¼Œç”¨tmpfsæ˜¯æœ‰</p>
<p>ç›Šæ— å®³çš„ã€‚</p>
<blockquote>
<p>å½“ç„¶å¯¹äºå¤§é¡¹ç›®æ¥è¯´ï¼Œä½ éœ€è¦æœ‰è¶³å¤Ÿçš„å†…å­˜æ‰èƒ½è´Ÿæ‹…å¾—èµ·è¿™ä¸ªtmpfsçš„å¼€é”€ã€‚</p>
</blockquote>
<h1 id="make-j"><a href="#make-j" class="headerlink" title="make -j"></a>make -j</h1><blockquote>
<p>æ—¢ç„¶IOä¸æ˜¯ç“¶é¢ˆï¼Œé‚£CPUå°±åº”è¯¥æ˜¯ä¸€ä¸ªå½±å“ç¼–è¯‘é€Ÿåº¦çš„é‡è¦å› ç´ äº†ã€‚</p>
</blockquote>
<p>ç”¨make -jå¸¦ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æŠŠé¡¹ç›®åœ¨è¿›è¡Œå¹¶è¡Œç¼–è¯‘ï¼Œæ¯”å¦‚åœ¨ä¸€å°åŒæ ¸çš„æœºå™¨ä¸Šï¼Œå®Œå…¨å¯ä»¥ç”¨make -<br>j4ï¼Œè®©makeæœ€å¤šå…è®¸4ä¸ªç¼–è¯‘å‘½ä»¤åŒæ—¶æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥æ›´æœ‰æ•ˆçš„åˆ©ç”¨CPUèµ„æºã€‚</p>
<p>è¿˜æ˜¯ç”¨Kernelæ¥æµ‹è¯•ï¼š</p>
<ul>
<li><p>ç”¨makeï¼š 40åˆ†16ç§’</p>
</li>
<li><p>ç”¨make -j4ï¼š23åˆ†16ç§’</p>
</li>
<li><p>ç”¨make -j8ï¼š22åˆ†59ç§’</p>
</li>
</ul>
<p>ç”±æ­¤çœ‹æ¥ï¼Œåœ¨å¤šæ ¸CPUä¸Šï¼Œé€‚å½“çš„è¿›è¡Œå¹¶è¡Œç¼–è¯‘è¿˜æ˜¯å¯ä»¥æ˜æ˜¾æé«˜ç¼–è¯‘é€Ÿåº¦çš„ã€‚ä½†å¹¶è¡Œçš„ä»»åŠ¡ä¸å®œå¤ªå¤šï¼Œä¸€èˆ¬æ˜¯ä»¥CPUçš„æ ¸å¿ƒæ•°ç›®çš„ä¸¤å€ä¸ºå®œã€‚</p>
<p>ä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆä¸æ˜¯å®Œå…¨æ²¡æœ‰costçš„ï¼Œå¦‚æœé¡¹ç›®çš„Makefileä¸è§„èŒƒï¼Œæ²¡æœ‰æ­£ç¡®çš„è®¾ç½®å¥½ä¾èµ–å…³ç³»ï¼Œå¹¶è¡Œç¼–è¯‘çš„ç»“æœå°±æ˜¯ç¼–è¯‘ä¸èƒ½æ­£å¸¸è¿›è¡Œã€‚å¦‚æœä¾èµ–å…³ç³»è®¾ç½®è¿‡äºä¿å®ˆ<br>ï¼Œåˆ™å¯èƒ½æœ¬èº«ç¼–è¯‘çš„å¯å¹¶è¡Œåº¦å°±ä¸‹é™äº†ï¼Œä¹Ÿä¸èƒ½å–å¾—æœ€ä½³çš„æ•ˆæœã€‚</p>
<h1 id="ccache"><a href="#ccache" class="headerlink" title="ccache"></a>ccache</h1><blockquote>
<p>ccacheç”¨äºæŠŠç¼–è¯‘çš„ä¸­é—´ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä»¥ä¾¿åœ¨å†æ¬¡ç¼–è¯‘çš„æ—¶å€™å¯ä»¥èŠ‚çœæ—¶é—´ã€‚è¿™å¯¹äºç©Kernelæ¥è¯´å®åœ¨æ˜¯å†å¥½ä¸è¿‡äº†ï¼Œå› ä¸ºç»å¸¸éœ€è¦ä¿®æ”¹ä¸€äº›Kernelçš„ä»£ç ï¼Œç„¶å<br>å†é‡æ–°ç¼–è¯‘ï¼Œè€Œè¿™ä¸¤æ¬¡ç¼–è¯‘å¤§éƒ¨åˆ†ä¸œè¥¿å¯èƒ½éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚å¯¹äºå¹³æ—¶å¼€å‘é¡¹ç›®æ¥è¯´ï¼Œä¹Ÿæ˜¯ä¸€æ ·ã€‚ä¸ºä»€ä¹ˆä¸æ˜¯ç›´æ¥ç”¨makeæ‰€æ”¯æŒçš„å¢é‡ç¼–è¯‘å‘¢ï¼Ÿè¿˜æ˜¯å› ä¸ºç°å®ä¸­ï¼Œå› <br>ä¸ºMakefileçš„ä¸è§„èŒƒï¼Œå¾ˆå¯èƒ½è¿™ç§â€œèªæ˜â€çš„æ–¹æ¡ˆæ ¹æœ¬ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œåªæœ‰æ¯æ¬¡make cleanå†makeæ‰è¡Œã€‚</p>
</blockquote>
<p>å®‰è£…å®Œccacheåï¼Œå¯ä»¥åœ¨/usr/local/binä¸‹å»ºç«‹gccï¼Œg++ï¼Œc++ï¼Œccçš„symbolic<br>linkï¼Œé“¾åˆ°/usr/bin/ccacheä¸Šã€‚æ€»ä¹‹ç¡®è®¤ç³»ç»Ÿåœ¨è°ƒç”¨gccç­‰å‘½ä»¤æ—¶ä¼šè°ƒç”¨åˆ°ccacheå°±å¯ä»¥äº†ï¼ˆé€šå¸¸æƒ…å†µä¸‹/usr/local/binä¼šåœ¨PATHä¸­æ’åœ¨/usr/binå‰é¢ï¼‰ã€‚</p>
<p>ç»§ç»­æµ‹è¯•ï¼š</p>
<ul>
<li><p>ç”¨ccacheçš„ç¬¬ä¸€æ¬¡ç¼–è¯‘(make -j4)ï¼š23åˆ†38ç§’</p>
</li>
<li><p>ç”¨ccacheçš„ç¬¬äºŒæ¬¡ç¼–è¯‘(make -j4)ï¼š8åˆ†48ç§’</p>
</li>
<li><p>ç”¨ccacheçš„ç¬¬ä¸‰æ¬¡ç¼–è¯‘(ä¿®æ”¹è‹¥å¹²é…ç½®ï¼Œmake -j4)ï¼š23åˆ†48ç§’</p>
</li>
</ul>
<p>çœ‹æ¥ä¿®æ”¹é…ç½®ï¼ˆæˆ‘æ”¹äº†CPUç±»å‹â€¦ï¼‰å¯¹ccacheçš„å½±å“æ˜¯å¾ˆå¤§çš„ï¼Œå› ä¸ºåŸºæœ¬å¤´æ–‡ä»¶å‘ç”Ÿå˜åŒ–åï¼Œå°±å¯¼è‡´æ‰€æœ‰ç¼“å­˜æ•°æ®éƒ½æ— æ•ˆäº†ï¼Œå¿…é¡»é‡å¤´æ¥åšã€‚ä½†å¦‚æœåªæ˜¯ä¿®æ”¹ä¸€äº›.<br>cæ–‡ä»¶çš„ä»£ç ï¼Œccacheçš„æ•ˆæœè¿˜æ˜¯ç›¸å½“æ˜æ˜¾çš„ã€‚è€Œä¸”ä½¿ç”¨ccacheå¯¹é¡¹ç›®æ²¡æœ‰ç‰¹åˆ«çš„ä¾èµ–ï¼Œå¸ƒç½²æˆæœ¬å¾ˆä½ï¼Œè¿™åœ¨æ—¥å¸¸å·¥ä½œä¸­å¾ˆå®ç”¨ã€‚</p>
<p>å¯ä»¥ç”¨ccache -sæ¥æŸ¥çœ‹cacheçš„ä½¿ç”¨å’Œå‘½ä¸­æƒ…å†µï¼š</p>
<p>cache directory                   /home/lifanxi/.ccache</p>
<p>cache hit                           7165</p>
<p>cache miss                         14283</p>
<p>called for link                       71</p>
<p>not a C/C++ file                     120</p>
<p>no input file                       3045</p>
<p>files in cache                     28566</p>
<p>cache size                          81.7 Mbytes</p>
<p>max cache size                     976.6 Mbytes</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾ç„¶åªæœ‰ç¬¬äºŒç¼–æ¬¡è¯‘æ—¶cacheå‘½ä¸­äº†ï¼Œcache missæ˜¯ç¬¬ä¸€æ¬¡å’Œç¬¬ä¸‰æ¬¡ç¼–è¯‘å¸¦æ¥çš„ã€‚ä¸¤æ¬¡cacheå ç”¨äº†81.7Mçš„ç£ç›˜ï¼Œè¿˜æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚</p>
<h1 id="distcc"><a href="#distcc" class="headerlink" title="distcc"></a>distcc</h1><blockquote>
<p>ä¸€å°æœºå™¨çš„èƒ½åŠ›æœ‰é™ï¼Œå¯ä»¥è”åˆå¤šå°ç”µè„‘ä¸€èµ·æ¥ç¼–è¯‘ã€‚è¿™åœ¨å…¬å¸çš„æ—¥å¸¸å¼€å‘ä¸­ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºå¯èƒ½æ¯ä¸ªå¼€å‘äººå‘˜éƒ½æœ‰è‡ªå·±çš„å¼€å‘ç¼–è¯‘ç¯å¢ƒï¼Œå®ƒä»¬çš„ç¼–è¯‘å™¨ç‰ˆæœ¬ä¸€èˆ¬<br>æ˜¯ä¸€è‡´çš„ï¼Œå…¬å¸çš„ç½‘ç»œä¹Ÿé€šå¸¸å…·æœ‰è¾ƒå¥½çš„æ€§èƒ½ã€‚è¿™æ—¶å°±æ˜¯distccå¤§æ˜¾èº«æ‰‹çš„æ—¶å€™äº†ã€‚</p>
</blockquote>
<p>ä½¿ç”¨distccï¼Œå¹¶ä¸åƒæƒ³è±¡ä¸­é‚£æ ·è¦æ±‚æ¯å°ç”µè„‘éƒ½å…·æœ‰å®Œå…¨ä¸€è‡´çš„ç¯å¢ƒï¼Œå®ƒåªè¦æ±‚æºä»£ç å¯ä»¥ç”¨make -jå¹¶è¡Œç¼–è¯‘ï¼Œå¹¶ä¸”å‚ä¸åˆ†å¸ƒå¼ç¼–è¯‘çš„ç”µè„‘ç³»ç»Ÿä¸­å…·æœ‰ç›¸åŒçš„ç¼–è¯‘<br>å™¨ã€‚å› ä¸ºå®ƒçš„åŸç†åªæ˜¯æŠŠé¢„å¤„ç†å¥½çš„æºæ–‡ä»¶åˆ†å‘åˆ°å¤šå°è®¡ç®—æœºä¸Šï¼Œé¢„å¤„ç†ã€ç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶çš„é“¾æ¥å’Œå…¶å®ƒé™¤ç¼–è¯‘ä»¥å¤–çš„å·¥ä½œä»ç„¶æ˜¯åœ¨å‘èµ·ç¼–è¯‘çš„ä¸»æ§ç”µè„‘ä¸Šå®Œæˆï¼Œ<br>æ‰€ä»¥åªè¦æ±‚å‘èµ·ç¼–è¯‘çš„é‚£å°æœºå™¨å…·å¤‡ä¸€å¥—å®Œæ•´çš„ç¼–è¯‘ç¯å¢ƒå°±å¯ä»¥äº†ã€‚</p>
<p>distccå®‰è£…åï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸‹å®ƒçš„æœåŠ¡ï¼š</p>
<p>/usr/bin/distccd  â€“daemon â€“allow 10.64.0.0/16</p>
<p>é»˜è®¤çš„3632ç«¯å£å…è®¸æ¥è‡ªåŒä¸€ä¸ªç½‘ç»œçš„distccè¿æ¥ã€‚</p>
<p>ç„¶åè®¾ç½®ä¸€ä¸‹DISTCC_HOSTSç¯å¢ƒå˜é‡ï¼Œè®¾ç½®å¯ä»¥å‚ä¸ç¼–è¯‘çš„æœºå™¨åˆ—è¡¨ã€‚</p>
<blockquote>
<p>é€šå¸¸localhostä¹Ÿå‚ä¸ç¼–è¯‘ï¼Œä½†å¦‚æœå¯ä»¥å‚ä¸ç¼–è¯‘çš„æœºå™¨å¾ˆå¤šï¼Œåˆ™å¯ä»¥æŠŠlocalhostä»è¿™ä¸ªåˆ—è¡¨</p>
<p>ä¸­å»æ‰ï¼Œè¿™æ ·æœ¬æœºå°±å®Œå…¨åªæ˜¯è¿›è¡Œé¢„å¤„ç†ã€åˆ†å‘å’Œé“¾æ¥äº†ï¼Œç¼–è¯‘éƒ½åœ¨åˆ«çš„æœºå™¨ä¸Šå®Œæˆã€‚</p>
</blockquote>
<p>å› ä¸ºæœºå™¨å¾ˆå¤šæ—¶ï¼Œlocalhostçš„å¤„ç†è´Ÿæ‹…å¾ˆé‡ï¼Œæ‰€ä»¥å®ƒå°±ä¸å†â€œå…¼èŒâ€ç¼–è¯‘äº†ã€‚</p>
<p>export DISTCC_HOSTS=&quot;localhost 10.64.25.1 10.64.25.2 10.64.25.3&quot;</p>
<p>ç„¶åä¸ccacheç±»ä¼¼æŠŠg++ï¼Œgccç­‰å¸¸ç”¨çš„å‘½ä»¤é“¾æ¥åˆ°/usr/bin/distccä¸Šå°±å¯ä»¥äº†ã€‚</p>
<p>åœ¨makeçš„æ—¶å€™ï¼Œä¹Ÿå¿…é¡»ç”¨-jå‚æ•°ï¼Œä¸€èˆ¬æ˜¯å‚æ•°å¯ä»¥ç”¨æ‰€æœ‰å‚ç”¨ç¼–è¯‘çš„è®¡ç®—æœºCPUå†…æ ¸æ€»æ•°çš„ä¸¤å€åšä¸ºå¹¶è¡Œçš„ä»»åŠ¡æ•°ã€‚</p>
<p>åŒæ ·æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<ul>
<li><p>ä¸€å°åŒæ ¸è®¡ç®—æœºï¼Œmake -j4ï¼š23åˆ†16ç§’</p>
</li>
<li><p>ä¸¤å°åŒæ ¸è®¡ç®—æœºï¼Œmake -j4ï¼š16åˆ†40ç§’</p>
</li>
<li><p>ä¸¤å°åŒæ ¸è®¡ç®—æœºï¼Œmake -j8ï¼š15åˆ†49ç§’</p>
</li>
</ul>
<p>è·Ÿæœ€å¼€å§‹ç”¨ä¸€å°åŒæ ¸æ—¶çš„23åˆ†é’Ÿç›¸æ¯”ï¼Œè¿˜æ˜¯å¿«äº†ä¸å°‘çš„ã€‚å¦‚æœæœ‰æ›´å¤šçš„è®¡ç®—æœºåŠ å…¥ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p>
<p>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ä»¥ç”¨distccmon-textæ¥æŸ¥çœ‹ç¼–è¯‘ä»»åŠ¡çš„åˆ†é…æƒ…å†µã€‚distccä¹Ÿå¯ä»¥ä¸ccacheåŒæ—¶ä½¿ç”¨ï¼Œé€šè¿‡è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡å°±å¯ä»¥åšåˆ°ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h1><ul>
<li><p>tmpfsï¼š è§£å†³IOç“¶é¢ˆï¼Œå……åˆ†åˆ©ç”¨æœ¬æœºå†…å­˜èµ„æº</p>
</li>
<li><p>make -jï¼š å……åˆ†åˆ©ç”¨æœ¬æœºè®¡ç®—èµ„æº</p>
</li>
<li><p>distccï¼š åˆ©ç”¨å¤šå°è®¡ç®—æœºèµ„æº</p>
</li>
<li><p>ccacheï¼š å‡å°‘é‡å¤ç¼–è¯‘ç›¸åŒä»£ç çš„æ—¶é—´</p>
</li>
</ul>
<blockquote>
<p>è¿™äº›å·¥å…·çš„å¥½å¤„éƒ½åœ¨äºå¸ƒç½²çš„æˆæœ¬ç›¸å¯¹è¾ƒä½ï¼Œç»¼åˆåˆ©ç”¨è¿™äº›å·¥å…·ï¼Œå°±å¯ä»¥è½»è½»æ¾æ¾çš„èŠ‚çœç›¸å½“å¯è§‚çš„æ—¶é—´ã€‚</p>
</blockquote>
<p>ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯è¿™äº›å·¥å…·æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œæ›´å¤šçš„ç”¨æ³•å¯ä»¥å‚è€ƒå®ƒä»¬å„è‡ªçš„man pageã€‚</p>

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/a_fish_flock_ai_plugin_for_ue4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/a_fish_flock_ai_plugin_for_ue4/" itemprop="url">ä¸€ä¸ªåŸºäºè™šå¹»4ç¾¤èšé±¼ç¾¤AIæ’ä»¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-18T19:29:22+00:00">
                10-18-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          <p>A fish flock AI Plugin for Unreal Engine 4<br>ä¸€ä¸ªåŸºäºè™šå¹»4çš„é±¼ç¾¤ AI æ’ä»¶</p>
<p>this Plugin version can Run <strong>2000+</strong> fishes at the same time<br>è¿™ä¸ªæ’ä»¶ç‰ˆæœ¬å¯ä»¥åŒæ—¶è¿è¡Œ <strong>2000+</strong> æ¡é±¼å„¿</p>
<p>æºç å·²æ”¾åˆ°<a href="https://github.com/no5ix/fish" target="_blank" rel="noopener"><i class="fa fa-fw fa-github fa-2x"></i>fish</a></p>
<!--ä½¿ç”¨ fa-lg (33%é€’å¢)ã€fa-2xã€ fa-3xã€fa-4xï¼Œæˆ–è€… fa-5x ç±» æ¥æ”¾å¤§å›¾æ ‡ã€‚ -->
<p><i class="fa fa-fw fa-2x fa-play-circle"></i><strong>Video Preview è§†é¢‘æ¼”ç¤º</strong></p>
<!-- <video preload="auto" autoplay="autoplay" loop="loop" width="100%" controls="controls"> -->
<video loop="loop" width="100%" controls="controls"><br><source src="/img/a_fish_flock_ai_plugin_for_ue4/Flock_AI_Fish_Unreal_VR_Video_Preview_640P.mp4" type="video/mp4"><br></video>


<h1 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h1><p><a href="https://pan.baidu.com/s/1ghnKNjt" target="_blank" rel="noopener"><i class="fa fa-download fa-2x fa-fw"></i>MyFish.exe (Win64)</a></p>
<p><strong>. . .</strong>
          <!--noindex-->
          
          <!--/noindex-->
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </p></div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/XXTEAçš„pythonå®ç°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/XXTEAçš„pythonå®ç°/" itemprop="url">XXTEAçš„pythonå®ç°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-13T02:04:00+00:00">
                09-13-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Misc/" itemprop="url" rel="index">
                    <span itemprop="name">Misc</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <p>åœ¨æ•°æ®çš„åŠ è§£å¯†é¢†åŸŸï¼Œç®—æ³•åˆ†ä¸ºå¯¹ç§°å¯†é’¥ä¸éå¯¹ç§°å¯†é’¥ä¸¤ç§ã€‚</p>
<p>å¯¹ç§°å¯†é’¥ä¸éå¯¹ç§°å¯†é’¥ç”±äºå„è‡ªçš„ç‰¹ç‚¹ï¼Œæ‰€åº”ç”¨çš„é¢†åŸŸæ˜¯ä¸å°½ç›¸åŒçš„ã€‚</p>
<p>å¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•ç”±äºå…¶é€Ÿåº¦å¿«ï¼Œä¸€èˆ¬ç”¨äºæ•´ä½“æ•°æ®çš„åŠ å¯†ï¼Œè€Œéå¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•çš„å®‰å…¨æ€§èƒ½ä½³ï¼Œåœ¨æ•°å­—ç­¾åé¢†åŸŸå¾—åˆ°å¹¿æ³›çš„åº”ç”¨ã€‚</p>
<p>å¾®å‹åŠ å¯†ç®—æ³•ï¼ˆTEAï¼‰åŠå…¶ç›¸å…³å˜ç§ï¼ˆXTEAï¼ŒBlock TEAï¼ŒXXTEAï¼‰ éƒ½æ˜¯åˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œå®ƒä»¬å¾ˆå®¹æ˜“è¢«æè¿°ï¼Œå®ç°ä¹Ÿå¾ˆç®€å•ï¼ˆå…¸å‹çš„å‡ è¡Œä»£ç ï¼‰ã€‚</p>
<p>TEAæ˜¯Tiny Encryption Algorithmçš„ç¼©å†™ï¼Œä»¥åŠ å¯†è§£å¯†é€Ÿåº¦å¿«ï¼Œå®ç°ç®€å•è‘—ç§°ã€‚</p>
<p>TEA ç®—æ³•æœ€åˆæ˜¯ç”±å‰‘æ¡¥è®¡ç®—æœºå®éªŒå®¤çš„ David Wheeler å’Œ Roger Needham åœ¨ 1994 å¹´è®¾è®¡çš„ã€‚</p>
<p>è¯¥ç®—æ³•ä½¿ç”¨ 128 ä½çš„å¯†é’¥ä¸º 64 ä½çš„ä¿¡æ¯å—è¿›è¡ŒåŠ å¯†ï¼Œå®ƒéœ€è¦è¿›è¡Œ 64 è½®è¿­ä»£ï¼Œå°½ç®¡ä½œè€…è®¤ä¸º 32 è½®å·²ç»è¶³å¤Ÿäº†ã€‚</p>
<p>è¯¥ç®—æ³•ä½¿ç”¨äº†ä¸€ä¸ªç¥ç§˜å¸¸æ•°Î´ä½œä¸ºå€æ•°ï¼Œå®ƒæ¥æºäºé»„é‡‘æ¯”ç‡ï¼Œä»¥ä¿è¯æ¯ä¸€è½®åŠ å¯†éƒ½ä¸ç›¸åŒã€‚</p>
<p>ä½†Î´çš„ç²¾ç¡®å€¼ä¼¼ä¹å¹¶ä¸é‡è¦ï¼Œè¿™é‡Œ TEA æŠŠå®ƒå®šä¹‰ä¸º Î´=ã€Œ(âˆš5 - 1)231ã€ï¼ˆä¹Ÿå°±æ˜¯ç¨‹åºä¸­çš„ 0Ã—9E3779B9ï¼‰ã€‚</p>
<p>ä¹‹å TEA ç®—æ³•è¢«å‘ç°å­˜åœ¨ç¼ºé™·ï¼Œä½œä¸ºå›åº”ï¼Œè®¾è®¡è€…æå‡ºäº†ä¸€ä¸ª TEA çš„å‡çº§ç‰ˆæœ¬â€”â€”XTEAï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºâ€œteanâ€ï¼‰ã€‚</p>
<p>XTEA è·Ÿ TEA ä½¿ç”¨äº†ç›¸åŒçš„ç®€å•è¿ç®—ï¼Œä½†å®ƒé‡‡ç”¨äº†æˆªç„¶ä¸åŒçš„é¡ºåºï¼Œä¸ºäº†é˜»æ­¢å¯†é’¥è¡¨æ”»å‡»ï¼Œå››ä¸ªå­å¯†é’¥ï¼ˆåœ¨åŠ å¯†è¿‡ç¨‹ä¸­ï¼ŒåŸ 128 ä½çš„å¯†é’¥è¢«æ‹†åˆ†ä¸º 4 ä¸ª 32 ä½çš„å­å¯†é’¥ï¼‰é‡‡ç”¨äº†ä¸€ç§ä¸å¤ªæ­£è§„çš„æ–¹å¼è¿›è¡Œæ··åˆï¼Œä½†é€Ÿåº¦æ›´æ…¢äº†ã€‚</p>
<p>åœ¨è·Ÿæè¿° XTEA ç®—æ³•çš„åŒä¸€ä»½æŠ¥å‘Šä¸­ï¼Œè¿˜ä»‹ç»äº†å¦å¤–ä¸€ç§è¢«ç§°ä¸º Block TEA ç®—æ³•çš„å˜ç§ï¼Œå®ƒå¯ä»¥å¯¹ 32 ä½å¤§å°ä»»æ„å€æ•°çš„å˜é‡å—è¿›è¡Œæ“ä½œã€‚</p>
<p>è¯¥ç®—æ³•å°† XTEA è½®å¾ªå‡½æ•°ä¾æ¬¡åº”ç”¨äºå—ä¸­çš„æ¯ä¸ªå­—ï¼Œå¹¶ä¸”å°†å®ƒé™„åŠ äºå®ƒçš„é‚»å­—ã€‚</p>
<p>è¯¥æ“ä½œé‡å¤å¤šå°‘è½®ä¾èµ–äºå—çš„å¤§å°ï¼Œä½†è‡³å°‘éœ€è¦ 6 è½®ã€‚</p>
<p>è¯¥æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºå®ƒæ— éœ€æ“ä½œæ¨¡å¼ï¼ˆCBCï¼ŒOFBï¼ŒCFB ç­‰ï¼‰ï¼Œå¯†é’¥å¯ç›´æ¥ç”¨äºä¿¡æ¯ã€‚</p>
<p>å¯¹äºé•¿çš„ä¿¡æ¯å®ƒå¯èƒ½æ¯” XTEA æ›´æœ‰æ•ˆç‡ã€‚</p>
<p>åœ¨ 1998 å¹´ï¼ŒMarkku-Juhani Saarinen ç»™å‡ºäº†ä¸€ä¸ªå¯æœ‰æ•ˆæ”»å‡» Block TEA ç®—æ³•çš„ä»£ç ï¼Œä½†ä¹‹åå¾ˆå¿« David J. Wheeler å’Œ Roger M. Needham å°±ç»™å‡ºäº† Block TEA ç®—æ³•çš„ä¿®è®¢ç‰ˆï¼Œè¿™ä¸ªç®—æ³•è¢«ç§°ä¸º XXTEAã€‚</p>
<p>XXTEA ä½¿ç”¨è·Ÿ Block TEA ç›¸ä¼¼çš„ç»“æ„ï¼Œä½†åœ¨å¤„ç†å—ä¸­æ¯ä¸ªå­—æ—¶åˆ©ç”¨äº†ç›¸é‚»å­—ã€‚</p>
<p>å®ƒåˆ©ç”¨ä¸€ä¸ªæ›´å¤æ‚çš„ MX å‡½æ•°ä»£æ›¿äº† XTEA è½®å¾ªå‡½æ•°ï¼ŒMX ä½¿ç”¨ 2 ä¸ªè¾“å…¥é‡ã€‚</p>
<p>XXTEA ç®—æ³•å¾ˆå®‰å…¨ï¼Œè€Œä¸”éå¸¸å¿«é€Ÿï¼Œéå¸¸é€‚åˆåº”ç”¨äº Web å¼€å‘ä¸­ã€‚</p>
<img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/XXTEAçš„pythonå®ç°/py_xxtea1.png">
<p>TEAç®—æ³•æ˜¯ç”±å‰‘æ¡¥å¤§å­¦è®¡ç®—æœºå®éªŒå®¤çš„David Wheelerå’ŒRoger Needhamäº1994å¹´å‘æ˜ï¼Œ</p>
<p>TEAæ˜¯Tiny Encryption Algorithmçš„ç¼©å†™ï¼Œä»¥åŠ å¯†è§£å¯†é€Ÿåº¦å¿«ï¼Œå®ç°ç®€å•è‘—ç§°ã€‚</p>
<p>TEAç®—æ³•æ¯ä¸€æ¬¡å¯ä»¥æ“ä½œ64bit(8byte)ï¼Œé‡‡ç”¨128bit(16byte)ä½œä¸ºkeyï¼Œç®—æ³•é‡‡ç”¨è¿­ä»£çš„å½¢å¼ï¼Œæ¨èçš„è¿­ä»£è½®æ•°æ˜¯64è½®ï¼Œæœ€å°‘32è½®ã€‚</p>
<p>ä¸ºè§£å†³TEAç®—æ³•å¯†é’¥è¡¨æ”»å‡»çš„é—®é¢˜ï¼ŒTEAç®—æ³•å…ˆåç»å†äº†å‡ æ¬¡æ”¹è¿›ï¼Œä»XTEAåˆ°BLOCK TEAï¼Œç›´è‡³æœ€æ–°çš„XXTEAã€‚</p>
<p>XTEAä¹Ÿç§°åšTEANï¼Œå®ƒä½¿ç”¨ä¸TEAç›¸åŒçš„ç®€å•è¿ç®—ï¼Œä½†å››ä¸ªå­å¯†é’¥é‡‡å–ä¸æ­£è§„çš„æ–¹å¼è¿›è¡Œæ··åˆä»¥é˜»æ­¢å¯†é’¥è¡¨æ”»å‡»ã€‚</p>
<p>Block TEAç®—æ³•å¯ä»¥å¯¹32ä½çš„ä»»æ„æ•´æ•°å€é•¿åº¦çš„å˜é‡å—è¿›è¡ŒåŠ è§£å¯†çš„æ“ä½œï¼Œè¯¥ç®—æ³•å°†XTEAè½®å¾ªå‡½æ•°ä¾æ¬¡åº”ç”¨äºå—ä¸­çš„æ¯ä¸ªå­—ï¼Œå¹¶ä¸”å°†å®ƒé™„åŠ äºè¢«åº”ç”¨å­—çš„é‚»å­—ã€‚</p>
<p>XXTEAä½¿ç”¨è·ŸBlock TEAç›¸ä¼¼çš„ç»“æ„ï¼Œä½†åœ¨å¤„ç†å—ä¸­æ¯ä¸ªå­—æ—¶åˆ©ç”¨äº†ç›¸é‚»å­—ï¼Œä¸”ç”¨æ‹¥æœ‰ä¸¤ä¸ªè¾“å…¥é‡çš„MXå‡½æ•°ä»£æ›¿äº†XTEAè½®å¾ªå‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> struct  </span><br><span class="line">  </span><br><span class="line">_DELTA = <span class="number">0x9E3779B9</span>  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_long2str</span><span class="params">(v, w)</span>:</span>  </span><br><span class="line">    n = (len(v) - <span class="number">1</span>) &lt;&lt; <span class="number">2</span>  </span><br><span class="line">    <span class="keyword">if</span> w:  </span><br><span class="line">        m = v[<span class="number">-1</span>]  </span><br><span class="line">        <span class="keyword">if</span> (m &lt; n - <span class="number">3</span>) <span class="keyword">or</span> (m &gt; n): <span class="keyword">return</span> <span class="string">''</span>  </span><br><span class="line">        n = m  </span><br><span class="line">    s = struct.pack(<span class="string">'&lt;%iL'</span> % len(v), *v)  </span><br><span class="line">    <span class="keyword">return</span> s[<span class="number">0</span>:n] <span class="keyword">if</span> w <span class="keyword">else</span> s  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_str2long</span><span class="params">(s, w)</span>:</span>  </span><br><span class="line">    n = len(s)  </span><br><span class="line">    m = (<span class="number">4</span> - (n &amp; <span class="number">3</span>) &amp; <span class="number">3</span>) + n  </span><br><span class="line">    s = s.ljust(m, <span class="string">"\0"</span>)  </span><br><span class="line">    v = list(struct.unpack(<span class="string">'&lt;%iL'</span> % (m &gt;&gt; <span class="number">2</span>), s))  </span><br><span class="line">    <span class="keyword">if</span> w: v.append(n)  </span><br><span class="line">    <span class="keyword">return</span> v  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">encrypt</span><span class="params">(str, key)</span>:</span>  </span><br><span class="line">    <span class="keyword">if</span> str == <span class="string">''</span>: <span class="keyword">return</span> str  </span><br><span class="line">    v = _str2long(str, <span class="keyword">True</span>)  </span><br><span class="line">    k = _str2long(key.ljust(<span class="number">16</span>, <span class="string">"\0"</span>), <span class="keyword">False</span>)  </span><br><span class="line">    n = len(v) - <span class="number">1</span>  </span><br><span class="line">    z = v[n]  </span><br><span class="line">    y = v[<span class="number">0</span>]  </span><br><span class="line">    sum = <span class="number">0</span>  </span><br><span class="line">    q = <span class="number">6</span> + <span class="number">52</span> // (n + <span class="number">1</span>)  </span><br><span class="line">    <span class="keyword">while</span> q &gt; <span class="number">0</span>:  </span><br><span class="line">        sum = (sum + _DELTA) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">        e = sum &gt;&gt; <span class="number">2</span> &amp; <span class="number">3</span>  </span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> xrange(n):  </span><br><span class="line">            y = v[p + <span class="number">1</span>]  </span><br><span class="line">            v[p] = (v[p] + ((z &gt;&gt; <span class="number">5</span> ^ y &lt;&lt; <span class="number">2</span>) + (y &gt;&gt; <span class="number">3</span> ^ z &lt;&lt; <span class="number">4</span>) ^ (sum ^ y) + (k[p &amp; <span class="number">3</span> ^ e] ^ z))) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">            z = v[p]  </span><br><span class="line">        y = v[<span class="number">0</span>]  </span><br><span class="line">        v[n] = (v[n] + ((z &gt;&gt; <span class="number">5</span> ^ y &lt;&lt; <span class="number">2</span>) + (y &gt;&gt; <span class="number">3</span> ^ z &lt;&lt; <span class="number">4</span>) ^ (sum ^ y) + (k[n &amp; <span class="number">3</span> ^ e] ^ z))) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">        z = v[n]  </span><br><span class="line">        q -= <span class="number">1</span>  </span><br><span class="line">    <span class="keyword">return</span> _long2str(v, <span class="keyword">False</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decrypt</span><span class="params">(str, key)</span>:</span>  </span><br><span class="line">    <span class="keyword">if</span> str == <span class="string">''</span>: <span class="keyword">return</span> str  </span><br><span class="line">    v = _str2long(str, <span class="keyword">False</span>)  </span><br><span class="line">    k = _str2long(key.ljust(<span class="number">16</span>, <span class="string">"\0"</span>), <span class="keyword">False</span>)  </span><br><span class="line">    n = len(v) - <span class="number">1</span>  </span><br><span class="line">    z = v[n]  </span><br><span class="line">    y = v[<span class="number">0</span>]  </span><br><span class="line">    q = <span class="number">6</span> + <span class="number">52</span> // (n + <span class="number">1</span>)  </span><br><span class="line">    sum = (q * _DELTA) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">    <span class="keyword">while</span> (sum != <span class="number">0</span>):  </span><br><span class="line">        e = sum &gt;&gt; <span class="number">2</span> &amp; <span class="number">3</span>  </span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> xrange(n, <span class="number">0</span>, <span class="number">-1</span>):  </span><br><span class="line">            z = v[p - <span class="number">1</span>]  </span><br><span class="line">            v[p] = (v[p] - ((z &gt;&gt; <span class="number">5</span> ^ y &lt;&lt; <span class="number">2</span>) + (y &gt;&gt; <span class="number">3</span> ^ z &lt;&lt; <span class="number">4</span>) ^ (sum ^ y) + (k[p &amp; <span class="number">3</span> ^ e] ^ z))) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">            y = v[p]  </span><br><span class="line">        z = v[n]  </span><br><span class="line">        v[<span class="number">0</span>] = (v[<span class="number">0</span>] - ((z &gt;&gt; <span class="number">5</span> ^ y &lt;&lt; <span class="number">2</span>) + (y &gt;&gt; <span class="number">3</span> ^ z &lt;&lt; <span class="number">4</span>) ^ (sum ^ y) + (k[<span class="number">0</span> &amp; <span class="number">3</span> ^ e] ^ z))) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">        y = v[<span class="number">0</span>]  </span><br><span class="line">        sum = (sum - _DELTA) &amp; <span class="number">0xffffffff</span>  </span><br><span class="line">    <span class="keyword">return</span> _long2str(v, <span class="keyword">True</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:  </span><br><span class="line">    <span class="keyword">print</span> decrypt(encrypt(<span class="string">'Hello XXTEA!'</span>, <span class="string">'16bytelongstring'</span>), <span class="string">'16bytelongstring'</span>)</span><br></pre></td></tr></table></figure>

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/å†…é›¶å¤´å’Œå¤–é›¶å¤´/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/å†…é›¶å¤´å’Œå¤–é›¶å¤´/" itemprop="url">å†…é›¶å¤´å’Œå¤–é›¶å¤´</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-12T10:05:48+00:00">
                09-12-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Misc/" itemprop="url" rel="index">
                    <span itemprop="name">Misc</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          
            <h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜:"></a>é—®é¢˜:</h1><p>åœ¨å†…å­˜ç®¡ç†ä¸­ï¼Œâ€œå†…é›¶å¤´â€å’Œâ€œå¤–é›¶å¤´â€ä¸ªæŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å›ºå®šå¼åˆ†åŒºåˆ†é…ã€å¯å˜å¼åˆ†åŒºåˆ†é…ã€é¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€æ®µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œå„ä¼šå­˜åœ¨ä½•ç§é›¶å¤´ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<h1 id="è§£ç­”ï¼š"><a href="#è§£ç­”ï¼š" class="headerlink" title="è§£ç­”ï¼š"></a>è§£ç­”ï¼š</h1><blockquote>
<p>åœ¨å­˜å‚¨ç®¡ç†ä¸­ï¼Œ</p>
<p>å†…é›¶å¤´æ˜¯æŒ‡åˆ†é…ç»™ä½œä¸šçš„å­˜å‚¨ç©ºé—´ä¸­æœªè¢«åˆ©ç”¨çš„éƒ¨åˆ†ï¼Œ</p>
<p>å¤–é›¶å¤´æ˜¯æŒ‡ç³»ç»Ÿä¸­æ— æ³•åˆ©ç”¨çš„å°å­˜å‚¨å—ã€‚</p>
</blockquote>
<ul>
<li><ol>
<li>åœ¨å›ºå®šå¼åˆ†åŒºåˆ†é…ä¸­ï¼Œä¸ºå°†ä¸€ä¸ªç”¨æˆ·ä½œä¸šè£…å…¥å†…å­˜ï¼Œå†…å­˜åˆ†é…ç¨‹åºä»ç³»ç»Ÿåˆ†åŒºè¡¨ä¸­æ‰¾å‡ºä¸€ä¸ªèƒ½æ»¡è¶³ä½œä¸šè¦æ±‚çš„ç©ºé—²åˆ†åŒºåˆ†é…ç»™ä½œä¸šï¼Œç”±äºä¸€ä¸ªä½œä¸šçš„å¤§å°å¹¶ä¸ä¸€å®šä¸åˆ†åŒºå¤§å°ç›¸ç­‰ï¼Œå› æ­¤ï¼Œåˆ†åŒºä¸­æœ‰ä¸€éƒ¨åˆ†å­˜å‚¨ç©ºé—´æµªè´¹æ‰äº†ã€‚</li>
</ol>
</li>
</ul>
<p>ç”±æ­¤å¯çŸ¥ï¼Œå›ºå®šå¼åˆ†åŒºåˆ†é…ä¸­å­˜åœ¨å†…é›¶å¤´ã€‚</p>
<ul>
<li><ol>
<li>åœ¨å¯å˜å¼åˆ†åŒºåˆ†é…ä¸­ï¼Œä¸ºæŠŠä¸€ä¸ªä½œä¸šè£…å…¥å†…å­˜ï¼Œåº”æŒ‰ç…§ä¸€å®šçš„åˆ†é…ç®—æ³•ä»ç³»ç»Ÿä¸­æ‰¾å‡ºä¸€ä¸ªèƒ½æ»¡è¶³ä½œä¸šéœ€æ±‚çš„ç©ºé—²åˆ†åŒºåˆ†é…ç»™ä½œä¸šï¼Œå¦‚æœè¿™ä¸ªç©ºé—²åˆ†åŒºçš„å®¹é‡æ¯”ä½œä¸šç”³ è¯·çš„ç©ºé—´å®¹é‡è¦å¤§ï¼Œåˆ™å°†è¯¥åˆ†åŒºä¸€åˆ†ä¸ºäºŒï¼Œä¸€éƒ¨åˆ†åˆ†é…ç»™ä½œä¸šï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ä»ç„¶ç•™ä½œç³»ç»Ÿçš„ç©ºé—²åˆ†åŒºã€‚</li>
</ol>
</li>
</ul>
<p>ç”±æ­¤å¯çŸ¥ï¼Œå¯å˜å¼åˆ†åŒºåˆ†é…ä¸­å­˜åœ¨å¤–é›¶å¤´ã€‚</p>
<ul>
<li><ol>
<li>åœ¨é¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä½œä¸šçš„åœ°å€ç©ºé—´è¢«åˆ’åˆ†æˆè‹¥å¹²å¤§å°ç›¸ç­‰çš„é¡µé¢ï¼Œå­˜å‚¨ç©ºé—´ä¹Ÿåˆ†æˆä¹Ÿé¡µå¤§å°ç›¸ç­‰çš„ç‰©ç†å—ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½œä¸šçš„å¤§å°ä¸å¯èƒ½éƒ½æ˜¯ç‰©ç†å—å¤§å°çš„æ•´æ•°å€ï¼Œå› æ­¤ä½œä¸šçš„æœ€åä¸€é¡µä¸­ä»æœ‰éƒ¨åˆ†ç©ºé—´è¢«æµªè´¹æ‰äº†ã€‚</li>
</ol>
</li>
</ul>
<p>ç”±æ­¤å¯çŸ¥ï¼Œé¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­å­˜åœ¨å†…é›¶å¤´ã€‚</p>
<ul>
<li><ol>
<li>åœ¨æ®µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œä½œä¸šçš„åœ°å€ç©ºé—´ç”±è‹¥å¹²ä¸ªé€»è¾‘åˆ†æ®µç»„æˆï¼Œæ¯æ®µåˆ†é…ä¸€ä¸ªè¿ç»­çš„å†…å­˜åŒºï¼Œä½†å„æ®µä¹‹é—´ä¸è¦æ±‚è¿ç»­ï¼Œå…¶å†…å­˜çš„åˆ†é…æ–¹å¼ç±»ä¼¼äºåŠ¨æ€åˆ†åŒºåˆ†é…ã€‚</li>
</ol>
</li>
</ul>
<p>ç”±æ­¤å¯çŸ¥ï¼Œæ®µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­å­˜åœ¨å¤–é›¶å¤´ã€‚</p>
<h1 id="è¯¦ç»†è§£é‡Š"><a href="#è¯¦ç»†è§£é‡Š" class="headerlink" title="è¯¦ç»†è§£é‡Š"></a>è¯¦ç»†è§£é‡Š</h1><blockquote>
<p>æ“ä½œç³»ç»Ÿåœ¨åˆ†é…å†…å­˜æ—¶ï¼Œæœ‰æ—¶å€™ä¼šäº§ç”Ÿä¸€äº›ç©ºé—²ä½†æ˜¯æ— æ³•è¢«æ­£å¸¸ä½¿ç”¨çš„å†…å­˜åŒºåŸŸï¼Œè¿™äº›å°±æ˜¯å†…å­˜ç¢ç‰‡ï¼Œæˆ–è€…ç§°ä¸ºå†…å­˜é›¶å¤´ï¼Œè¿™äº›å†…å­˜é›¶å¤´ä¸€å…±åˆ†ä¸ºä¸¤ç±»ï¼šå†…é›¶å¤´å’Œå¤–é›¶å¤´ã€‚</p>
</blockquote>
<ul>
<li><p>å†…é›¶å¤´æ˜¯æŒ‡è¿›ç¨‹åœ¨å‘æ“ä½œç³»ç»Ÿè¯·æ±‚å†…å­˜åˆ†é…æ—¶ï¼Œç³»ç»Ÿæ»¡è¶³äº†è¿›ç¨‹æ‰€éœ€è¦çš„å†…å­˜éœ€æ±‚åï¼Œè¿˜é¢å¤–è¿˜å¤šåˆ†äº†ä¸€äº›å†…å­˜ç»™è¯¥è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´é¢å¤–å¤šå‡ºæ¥çš„è¿™éƒ¨åˆ†å†…å­˜å½’è¯¥è¿›ç¨‹æ‰€æœ‰ï¼Œå…¶ä»–è¿›ç¨‹æ˜¯æ— æ³•è®¿é—®çš„ã€‚</p>
</li>
<li><p>å¤–é›¶å¤´æ˜¯æŒ‡å†…å­˜ä¸­å­˜åœ¨ç€ä¸€äº›ç©ºé—²çš„å†…å­˜åŒºåŸŸï¼Œè¿™äº›å†…å­˜åŒºåŸŸè™½ç„¶ä¸å½’ä»»ä½•è¿›ç¨‹æ‰€æœ‰ï¼Œä½†æ˜¯å› ä¸ºå†…å­˜åŒºåŸŸå¤ªå°ï¼Œæ— æ³•æ»¡è¶³å…¶ä»–è¿›ç¨‹æ‰€ç”³è¯·çš„å†…å­˜å¤§å°è€Œå½¢æˆçš„å†…å­˜é›¶å¤´ã€‚</p>
</li>
</ul>
<h2 id="é¡µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ"><a href="#é¡µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ" class="headerlink" title="é¡µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ"></a>é¡µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ</h2><p>é¡µå¼å­˜å‚¨ç®¡ç†æ˜¯ä»¥é¡µä¸ºå•ä½ï¼ˆé¡µé¢çš„å¤§å°ç”±ç³»ç»Ÿç¡®å®šï¼Œä¸”å¤§å°æ˜¯å›ºå®šçš„ï¼‰å‘è¿›ç¨‹åˆ†é…å†…å­˜çš„ï¼Œ</p>
<blockquote>
<p>ä¾‹å¦‚ï¼šå‡è®¾å†…å­˜æ€»å…±æœ‰100K,åˆ†ä¸º10é¡µï¼Œæ¯é¡µå¤§å°ä¸º10Kã€‚<br>ç°åœ¨è¿›ç¨‹Aæå‡ºç”³è¯·56Kå†…å­˜ï¼Œå› ä¸ºé¡µå¼å­˜å‚¨ç®¡ç†æ˜¯ä»¥é¡µä¸ºå•ä½è¿›ç¨‹å†…å­˜åˆ†é…çš„ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šå‘è¿›ç¨‹Aæä¾›6ä¸ªé¡µé¢ï¼Œä¹Ÿå°±æ˜¯60Kçš„å†…å­˜ç©ºé—´ï¼Œé‚£ä¹ˆåœ¨æœ€åä¸€é¡µä¸­è¿›ç¨‹åªä½¿ç”¨äº†6Kï¼Œä»è€Œå¤šå‡ºäº†4Kçš„å†…å­˜ç¢ç‰‡ï¼Œä½†æ˜¯è¿™4Kçš„å†…å­˜ç¢ç‰‡ç³»ç»Ÿå·²ç»åˆ†é…ç»™è¿›ç¨‹Aäº†ï¼Œå…¶ä»–è¿›ç¨‹æ˜¯æ— æ³•å†è®¿é—®è¿™äº›å†…å­˜åŒºåŸŸçš„ï¼Œ</p>
</blockquote>
<p>è¿™ç§å†…å­˜ç¢ç‰‡å°±æ˜¯å†…é›¶å¤´ã€‚</p>
<h2 id="æ®µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ"><a href="#æ®µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ" class="headerlink" title="æ®µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ"></a>æ®µå¼å­˜å‚¨ç®¡ç†çš„æƒ…å†µ</h2><p>æ®µå¼å­˜å‚¨ç®¡ç†æ˜¯æ®µï¼ˆæ®µçš„å¤§å°æ˜¯ç¨‹åºé€»è¾‘ç¡®å®šï¼Œä¸”å¤§å°ä¸æ˜¯å›ºå®šçš„ï¼‰ä¸ºå•ä½å‘è¿›ç¨‹è¿›è¡Œå†…å­˜åˆ†é…çš„ï¼Œè¿›ç¨‹ç”³è¯·å¤šå°‘å†…å­˜ï¼Œç³»ç»Ÿå°±ç»™è¿›ç¨‹åˆ†é…å¤šå°‘å†…å­˜ï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿå†…é›¶å¤´ï¼Œä½†æ˜¯æ®µå¼åˆ†é…ä¼šäº§ç”Ÿå¤–é›¶å¤´ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼šå‡è®¾å†…å­˜æ€»çš„å¤§å°ä¸º100Kï¼Œç°åœ¨è¿›ç¨‹Aå‘ç³»ç»Ÿç”³è¯·60Kçš„å†…å­˜ï¼Œç³»ç»Ÿåœ¨æ»¡è¶³äº†è¿›ç¨‹Açš„å†…å­˜ç”³è¯·è¦æ±‚åï¼Œè¿˜å‰©ä¸‹40Kçš„ç©ºé—²å†…å­˜åŒºåŸŸï¼›è¿™æ—¶å¦‚æœè¿›ç¨‹Bå‘ç³»ç»Ÿç”³è¯·50Kçš„å†…å­˜åŒºåŸŸï¼Œè€Œç³»ç»Ÿåªå‰©ä¸‹äº†40Kçš„å†…å­˜åŒºåŸŸï¼Œè™½ç„¶è¿™40Kçš„å†…å­˜åŒºåŸŸä¸å½’ä»»ä½•è¿›ç¨‹æ‰€æœ‰ï¼Œä½†æ˜¯å› ä¸ºå¤§å°æ— æ³•æ»¡è¶³è¿›ç¨‹Bçš„è¦æ±‚ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•åˆ†é…ç»™è¿›ç¨‹Bï¼Œè¿™æ ·å°±äº§ç”Ÿäº†å¤–é›¶å¤´ã€‚</p>
</blockquote>
<p>è¯·æ±‚æ®µå¼å­˜å‚¨ç®¡ç†æ˜¯åœ¨æ®µå¼å­˜å‚¨ç®¡ç†çš„åŸºç¡€ä¸Šå¢åŠ äº†è¯·æ±‚è°ƒæ®µåŠŸèƒ½å’Œæ®µç½®æ¢åŠŸèƒ½ã€‚<br>æ‰€ä»¥æ®µå¼å’Œè¯·æ±‚æ®µå¼å­˜å‚¨ç®¡ç†ä¼šäº§ç”Ÿå¤–é›¶å¤´</p>
<h1 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h1><p>ä¸‹é¢çš„å†…å­˜ç®¡ç†æ¨¡å¼ä¸­ï¼Œä¼šäº§ç”Ÿå¤–é›¶å¤´çš„æ˜¯(æ­£ç¡®ç­”æ¡ˆB, D)</p>
<p>Aã€é¡µå¼<br>Bã€æ®µå¼<br>Cã€è¯·æ±‚é¡µå¼<br>Dã€è¯·æ±‚æ®µå¼</p>

          
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/PHPçš„é­”æœ¯/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/PHPçš„é­”æœ¯/" itemprop="url">PHPçš„é­”æœ¯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-01T00:16:06+00:00">
                09-01-2016
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Misc/" itemprop="url" rel="index">
                    <span itemprop="name">Misc</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      

      
      
        <div class="post-eof"></div>
      

      
      

      
        
          <blockquote>
<p>PHP å°†æ‰€æœ‰ä»¥ <strong>ï¼ˆä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰å¼€å¤´çš„ç±»æ–¹æ³•ä¿ç•™ä¸ºé­”æœ¯æ–¹æ³•ã€‚æ‰€ä»¥åœ¨å®šä¹‰ç±»æ–¹æ³•æ—¶ï¼Œé™¤äº†ä¸Šè¿°é­”æœ¯æ–¹æ³•ï¼Œå»ºè®®ä¸è¦ä»¥ </strong> ä¸ºå‰ç¼€ã€‚</p>
</blockquote>
<p><strong>. . .</strong>
          <!--noindex-->
          
          <!--/noindex-->
        
      


      

    
      <footer class="post-footer">
        

        

        

        
        
          <div class="post-eof"></div>
        
      </footer>
      
    </p></div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>


      
    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/23/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><a class="page-number" href="/page/26/">26</a><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><a class="page-number" href="/page/29/">29</a><a class="page-number" href="/page/30/">30</a><a class="page-number" href="/page/31/">31</a><a class="page-number" href="/page/32/">32</a><a class="page-number" href="/page/33/">33</a><a class="page-number" href="/page/34/">34</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/">38</a><a class="extend next" rel="next" href="/page/25/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">298</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->

        </div>

        
        

        
        

        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
