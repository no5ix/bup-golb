<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">

<script>
    (function(){
        if(''){
            let localStoragePasswdKey = 'ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå…­ä¹‹çŠ¶æ€åŒæ­¥' + '_last_passwd';
            let tryCnt = 0;
            function checkPassword(password) {
                password = password == null ? null : password.trim();
                if (password !== '') {
                    if (password != null) {
                        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†ç¡®è®¤è€Œä¸”å¯†ç é”™è¯¯çš„æ—¶å€™, å› ä¸ºå½“password == nullçš„æ—¶å€™è¯´æ˜ç”¨æˆ·ç‚¹äº†å–æ¶ˆ
                        alert('Error!');
                        if (++tryCnt < 3) {
                            password = prompt('Open Sesame');
                            checkPassword(password);
                            return;
                        }
                    }

                    // if (history.length > 1) {
                    //     alert('back!');
                    //     history.back();
                    // } else {
                        // alert('blankkkk!');
                    //     window.location.href = "about:blank";
                    // }
                    if (document.referrer) {
                        window.location.href = document.referrer;
                    } else {
                        window.location.href = "about:blank";; // fallback if no referrer
                    }

                } else {
                    localStorage.setItem(localStoragePasswdKey, password);
                }
            }

            var password_verify_on_local = false;
            const hostname = window.location.hostname;
            if (password_verify_on_local || (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1" || hostname.startsWith("192")))) {
                const lspk = localStorage.getItem(localStoragePasswdKey) || "";
                if (lspk !== '') {
                    var password = prompt('Open Sesame');
                    checkPassword(password);
                }
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="GafferOnGames,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content="è‡ªæˆ‘æ€»ç»“çŠ¶æ€åŒæ­¥çš„è¦ç‚¹ä¸º :   input+state : æ—¢é€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯åˆä¼šå‘é€çŠ¶æ€ä¿¡æ¯æ¥è¿›è¡ŒåŒæ­¥ å‘é€ç«¯ ä¼˜å…ˆçº§ç´¯åŠ å™¨ : åªå‘é€ä¸€äº›é‡è¦çš„å®ä½“çŠ¶æ€æ›´æ–°, è€Œä¸æ˜¯æ‰€æœ‰éƒ½å‘. å¦‚æœé‡åˆ°ä¸€ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ä¸åˆé€‚æ”¾åˆ°è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªç‰©ä½“å¹¶å°è¯•ä¸‹ä¸€ä¸ªã€‚å½“ä½ åºåˆ—åŒ–å®Œè¿™ä¸ªæ•°æ®åŒ…ä»¥åï¼Œå°†é‚£äº›å·²ç»åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é‡ç½®ä¸º0ï¼Œä½†æ˜¯é‚£äº›æ²¡æœ‰åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆ">
<meta name="keywords" content="GafferOnGames">
<meta property="og:type" content="article">
<meta property="og:title" content="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå…­ä¹‹çŠ¶æ€åŒæ­¥">
<meta property="og:url" content="https://hulinhong.com/state_synchronization/index.html">
<meta property="og:site_name" content="ğŸš™">
<meta property="og:description" content="è‡ªæˆ‘æ€»ç»“çŠ¶æ€åŒæ­¥çš„è¦ç‚¹ä¸º :   input+state : æ—¢é€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯åˆä¼šå‘é€çŠ¶æ€ä¿¡æ¯æ¥è¿›è¡ŒåŒæ­¥ å‘é€ç«¯ ä¼˜å…ˆçº§ç´¯åŠ å™¨ : åªå‘é€ä¸€äº›é‡è¦çš„å®ä½“çŠ¶æ€æ›´æ–°, è€Œä¸æ˜¯æ‰€æœ‰éƒ½å‘. å¦‚æœé‡åˆ°ä¸€ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ä¸åˆé€‚æ”¾åˆ°è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªç‰©ä½“å¹¶å°è¯•ä¸‹ä¸€ä¸ªã€‚å½“ä½ åºåˆ—åŒ–å®Œè¿™ä¸ªæ•°æ®åŒ…ä»¥åï¼Œå°†é‚£äº›å·²ç»åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é‡ç½®ä¸º0ï¼Œä½†æ˜¯é‚£äº›æ²¡æœ‰åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆ">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2025-12-17T18:31:29.677Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå…­ä¹‹çŠ¶æ€åŒæ­¥">
<meta name="twitter:description" content="è‡ªæˆ‘æ€»ç»“çŠ¶æ€åŒæ­¥çš„è¦ç‚¹ä¸º :   input+state : æ—¢é€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯åˆä¼šå‘é€çŠ¶æ€ä¿¡æ¯æ¥è¿›è¡ŒåŒæ­¥ å‘é€ç«¯ ä¼˜å…ˆçº§ç´¯åŠ å™¨ : åªå‘é€ä¸€äº›é‡è¦çš„å®ä½“çŠ¶æ€æ›´æ–°, è€Œä¸æ˜¯æ‰€æœ‰éƒ½å‘. å¦‚æœé‡åˆ°ä¸€ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ä¸åˆé€‚æ”¾åˆ°è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªç‰©ä½“å¹¶å°è¯•ä¸‹ä¸€ä¸ªã€‚å½“ä½ åºåˆ—åŒ–å®Œè¿™ä¸ªæ•°æ®åŒ…ä»¥åï¼Œå°†é‚£äº›å·²ç»åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é‡ç½®ä¸º0ï¼Œä½†æ˜¯é‚£äº›æ²¡æœ‰åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: false,
    mediumzoom: true,
    darkmode_js: false,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":188,"transition":{"header":"fadeIn","menu":"fadeIn","logo":"fadeIn","post_block_else":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","footer":"fadeIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå…­ä¹‹çŠ¶æ€åŒæ­¥ | ğŸš™</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ğŸš™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ğŸ’¨ ğŸ’¨ ğŸ’¨</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <div class="site-search-div">
    <button class="search-icon" id="search-button">
      <i class="fa fa-search"></i>
    </button>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">Ã—</i>
  </div>


<script type="text/javascript" id="local.search.active">
    {/* var inputArea       = document.querySelector("#local-search-input");
    inputArea.onclick   = function(){ getSearchFile(); this.focus(); }
    inputArea.onkeydown = function(){ if(event.keyCode == 13) return false } */}
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/state_synchronization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mike">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸš™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿå…­ä¹‹çŠ¶æ€åŒæ­¥</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-26T11:13:35+00:00">
                01-26-2017
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GS/" itemprop="url" rel="index">
                    <span itemprop="name">GS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/snapshot_compression/" rel="next" title="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/ipc/" rel="prev" title="è¿›ç¨‹é—´çš„é€šä¿¡ä¸åŒæ­¥">
              <p class="post-nav-pre-next-title">
                  è¿›ç¨‹é—´çš„é€šä¿¡ä¸åŒæ­¥
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <h1 id="è‡ªæˆ‘æ€»ç»“"><a href="#è‡ªæˆ‘æ€»ç»“" class="headerlink" title="è‡ªæˆ‘æ€»ç»“"></a>è‡ªæˆ‘æ€»ç»“</h1><p>çŠ¶æ€åŒæ­¥çš„è¦ç‚¹ä¸º : </p>
<ul>
<li><strong>input+state</strong> : æ—¢é€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯åˆä¼šå‘é€çŠ¶æ€ä¿¡æ¯æ¥è¿›è¡ŒåŒæ­¥</li>
<li><strong>å‘é€ç«¯</strong><ul>
<li><strong>ä¼˜å…ˆçº§ç´¯åŠ å™¨</strong> : åªå‘é€ä¸€äº›é‡è¦çš„å®ä½“çŠ¶æ€æ›´æ–°, è€Œä¸æ˜¯æ‰€æœ‰éƒ½å‘. å¦‚æœé‡åˆ°ä¸€ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ä¸åˆé€‚æ”¾åˆ°è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªç‰©ä½“å¹¶å°è¯•ä¸‹ä¸€ä¸ªã€‚å½“ä½ åºåˆ—åŒ–å®Œè¿™ä¸ªæ•°æ®åŒ…ä»¥åï¼Œå°†é‚£äº›å·²ç»åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é‡ç½®ä¸º0ï¼Œä½†æ˜¯é‚£äº›æ²¡æœ‰åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼åˆ™ä¿æŒä¸å˜ã€‚</li>
</ul>
</li>
<li><strong>æ¥æ”¶ç«¯</strong><ul>
<li><strong>æŠ—ç½‘ç»œæŠ–åŠ¨</strong> : åšä¸€ä¸ªjitter bufferæ¥ç¼“å†²æ•°æ®, ç„¶åä»¥ç›¸åŒæ—¶é—´çš„é—´éš”å‡åŒ€å–å‡º</li>
<li><strong>åº”ç”¨çŠ¶æ€æ›´æ–°</strong> : ä¸€æ—¦ä½ çš„æ•°æ®åŒ…ä»æŠ–åŠ¨ç¼“å†²å™¨é‡Œé¢å‡ºæ¥ï¼Œä½ è¯¥åœ¨çŠ¶æ€æ›´æ–°ç›´æ¥åº”ç”¨è¿™äº›ä¿¡æ¯è¿›è¡Œä»¿çœŸã€‚</li>
</ul>
</li>
<li><strong>å¯¹ä¸¤è¾¹éƒ½é‡åŒ–(è¿™é‡Œçš„é‡åŒ–æŒ‡çš„æ˜¯&lt;&lt;<a href="/snapshot_compression/" title="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©">ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©</a>&gt;&gt;è¯´çš„é‡åŒ–å‹ç¼©æŠ€æœ¯)</strong> : å¦‚æœåªæœ‰æ¥æ”¶ç«¯ç”¨äº†é‡åŒ–çš„æ•°æ®, é‚£æ¥æ”¶ç«¯æ¨¡æ‹Ÿçš„ç»“æœå¾ˆå¯èƒ½ä¸å‘é€ç«¯ä¸åŒ, æ‰€ä»¥è¦å¯¹ä¸¤è¾¹éƒ½é‡åŒ–æ¥é¿å…å‘é€ç«¯å’Œæ¥æ”¶ç«¯æ¨¡æ‹Ÿçš„å·®å¼‚</li>
<li><strong>é•¿æ—¶é—´ä¸¢åŒ…çš„å¹³æ»‘å¤„ç†</strong> : å¯¹äºä¸åŒçš„ç½‘ç»œæ–­å¼€æ—¶é—´ç”¨ä¸åŒçš„å¹³æ»‘å› å­, æ¥è‡ªé€‚åº”è¯¯å·®</li>
<li><strong>å¢é‡å‹ç¼©</strong> : <ul>
<li><strong>ç›¸å¯¹ç¼–ç </strong> : åœ¨æ•°æ®åŒ…çš„åŒ…å¤´é‡Œé¢å‘é€æœ€è¿‘ç¡®è®¤çš„æ•°æ®åŒ…çš„åºåˆ—å·ï¼ˆè¿™ä¸ªæ•°æ®æ˜¯ä»å¯é çš„ç¡®è®¤ç³»ç»Ÿé‡Œé¢å¾—åˆ°çš„ï¼‰ç„¶åå¯¹æ¯ä¸ªç‰©ä½“ç¼–ç ç›¸å¯¹è¿™ä¸ªåŸºå‡†å¸§çš„åç§»é‡</li>
<li><strong>ç»å¯¹ç¼–ç </strong></li>
</ul>
</li>
</ul>
<h1 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h1><p><a href="https://gafferongames.com/post/state_synchronization/" target="_blank" rel="noopener">åŸæ–‡å‡ºå¤„</a></p>
<p>åŸæ–‡æ ‡é¢˜ : <strong>State Synchronization</strong> (<em>Keeping simulations in sync by sending state</em>)</p>
<hr>
<p></p><h2 id="introduction">Introduction</h2><p></p>
<p>Hi, I&rsquo;m <a href="https://gafferongames.com/about" target="_blank" rel="noopener">Glenn Fiedler</a> and welcome to <strong><a href="https://gafferongames.com/categories/networked-physics/" target="_blank" rel="noopener">Networked Physics</a></strong>.</p><br><p>In the <a href="https://gafferongames.com/post/snapshot_compression/" target="_blank" rel="noopener">previous article</a> we discussed techniques for compressing snapshots.</p><br><p>In this article we round out our discussion of networked physics strategies with <strong>state synchronization</strong>, the third and final strategy in this article series.</p><br><h2 id="state-synchronization">State Synchronization</h2><br><p>What is state synchronization? The basic idea is that, somewhat like deterministic lockstep, we run the simulation on both sides but, <em>unlike</em> deterministic lockstep, we don&rsquo;t just send input, we send both input <u>and</u> state.</p><br><p>This gives state synchronization interesting properties. Because we send state, we don&rsquo;t need perfect determinism to stay in sync, and because the simulation runs on both sides, objects continue moving forward between updates.</p><br><p>This lets us approach state synchronization differently to snapshot interpolation. Instead of sending state updates for every object in each packet, we can now send updates for only a few, and if we&rsquo;re smart about how we select the objects for each packet, we can save bandwidth by concentrating updates on the most important objects.</p><br><p>So what&rsquo;s the catch? State synchronization is an approximate and lossy synchronization strategy. In practice, this means you&rsquo;ll spend a lot of time tracking down sources of extrapolation divergence and pops. But other than that, it&rsquo;s a quick and easy strategy to get started with.</p><br><h2 id="implementation">Implementation</h2><br><p>Here&rsquo;s the state sent over the network per-object:</p><br><pre>struct StateUpdate<br>{<br>    int index;<br>    vec3f position;<br>    quat4f orientation;<br>    vec3f linear_velocity;<br>    vec3f angular_velocity;<br>};<br></pre><br><p>Unlike snapshot interpolation, we&rsquo;re not just sending visual quantities like position and orientation, we&rsquo;re also sending <em>non-visual</em> state such as linear and angular velocity. Why is this?</p><br><p>The reason is that state synchronization runs the simulation on both sides, so it&rsquo;s <em>always extrapolating</em> from the last state update applied to each object. If linear and angular velocity aren&rsquo;t synchronized, this extrapolation is done with incorrect velocities, leading to pops when objects are updated.</p><br><p>While we must send the velocities, there&rsquo;s no point wasting bandwidth sending (0,0,0) over and over while an object is at rest. We can fix this with a trivial optimization, like so:</p><br><pre>void serialize_state_update( Stream &amp; stream,<br>                             int &amp; index,<br>                             StateUpdate &amp; state_update )<br>{<br>    serialize_int( stream, index, 0, NumCubes - 1 );<br>    serialize_vector( stream, state_update.position );<br>    serialize_quaternion( stream, state_update.orientation );<br>    bool at_rest = stream.IsWriting() ? state_update.AtRest() : false;<br>    serialize_bool( stream, at_rest );<br>    if ( !at_rest )<br>    {<br>        serialize_vector( stream, state_update.linear_velocity );<br>        serialize_vector( stream, state_update.angular_velocity );<br>    }<br>    else if ( stream.IsReading() )<br>    {<br>        state_update.linear_velocity = vec3f(0,0,0);<br>        state_update.angular_velocity = vec3f(0,0,0);<br>    }<br>}<br></pre><br><p>What you see above is a <em>serialize function</em>. It&rsquo;s a trick I like to use to unify packet read and write. I like it because it&rsquo;s expressive while at the same time it&rsquo;s difficult to desync read and write. You can read more about them <a href="https://gafferongames.com/post/serialization_strategies/" target="_blank" rel="noopener">here</a>.</p><br><h2 id="packet-structure">Packet Structure</h2><br><p>Now let&rsquo;s look at the overall structure of packets being sent:</p><br><pre>const int MaxInputsPerPacket = 32;<br>const int MaxStateUpdatesPerPacket = 64;<br><br>struct Packet<br>{<br>    uint32_t sequence;<br>    Input inputs[MaxInputsPerPacket];<br>    int num_object_updates;<br>    StateUpdate state_updates[MaxStateUpdatesPerPacket];<br>};<br></pre><br><p>First we include a sequence number in each packet so we can determine out of order, lost or duplicate packets. I recommend you run the simulation at the same framerate on both sides (for example 60HZ) and in this case the sequence number can work double duty as the frame number.</p><br><p>Input is included in each packet because it&rsquo;s needed for extrapolation. Like deterministic lockstep we send multiple redundant inputs so in the case of packet loss it&rsquo;s very unlikely that an input gets dropped. Unlike deterministic lockstep, if don&rsquo;t have the next input we don&rsquo;t stop the simulation and wait for it, we continue extrapolating forward with the last input received.</p><br><p>Next you can see that we only send a maximum of 64 state updates per-packet. Since we have a total of 901 cubes in the simulation so we need some way to select the n most important state updates to include in each packet. We need some sort of prioritization scheme.</p><br><p>To get started each frame walk over all objects in your simulation and calculate their current priority. For example, in the cube simulation I calculate priority for the player cube as 1000000 because I always want it to be included in every packet, and for interacting (red cubes) I give them a higher priority of 100 while at rest objects have priority of 1.</p><br><p>Unfortunately if you just picked objects according to their current priority each frame you&rsquo;d only ever send red objects while in a katamari ball and white objects on the ground would never get updated. We need to take a slightly different approach, one that prioritizes sending important objects while also <em>distributing</em> updates across all objects in the simulation.</p><br><h2 id="priority-accumulator">Priority Accumulator</h2><br><p>You can do this with a priority accumulator. This is an array of float values, one value per-object, that is remembered from frame to frame. Instead of taking the immediate priority value for the object and sorting on that, each frame we add the current priority for each object to its priority accumulator value then sort objects in order from largest to smallest priority accumulator value. The first n objects in this sorted list are the objects you should send that frame.</p><br><p>You could just send state updates for all n objects but typically you have some maximum bandwidth you want to support like 256kbit/sec. Respecting this bandwidth limit is easy. Just calculate how large your packet header is and how many bytes of preamble in the packet (sequence, # of objects in packet and so on) and work out conservatively the number of bytes remaining in your packet while staying under your bandwidth target.</p><br><p>Then take the n most important objects according to their priority accumulator values and as you construct the packet, walk these objects in order and measure if their state updates will fit in the packet. If you encounter a state update that doesn&rsquo;t fit, skip over it and try the next one. After you serialize the packet, reset the priority accumulator to zero for objects that fit but leave the priority accumulator value alone for objects that didn&rsquo;t. This way objects that don&rsquo;t fit are first in line to be included in the next packet.</p><br><p>The desired bandwidth can even be adjusted on the fly. This makes it really easy to adapt state synchronization to changing network conditions, for example if you detect the connection is having difficulty you can reduce the amount of bandwidth sent (congestion avoidance) and the quality of state synchronization scales back automatically. If the network connection seems like it should be able to handle more bandwidth later on then you can raise the bandwidth limit.</p><br><h2 id="jitter-buffer">Jitter Buffer</h2><br><p>The priority accumulator covers the sending side, but on the receiver side there is much you need to do when applying these state updates to ensure that you don&rsquo;t see divergence and pops in the extrapolation between object updates.</p><br><p>The very first thing you need to consider is that network jitter exists. You don&rsquo;t have any guarantee that packets you sent nicely spaced out 60 times per-second arrive that way on the other side. What happens in the real world is you&rsquo;ll typically receive two packets one frame, 0 packets the next, 1, 2, 0 and so on because packets tend to clump up across frames. To handle this situation you need to implement a jitter buffer for your state update packets. If you fail to do this you&rsquo;ll have a poor quality extrapolation and pops in stacks of objects because objects in different state update packets are slightly out of phase with each other with respect to time.</p><br><p>All you do in a jitter buffer is hold packets before delivering them to the application at the correct time as indicated by the sequence number (frame number) in the packet. The delay you need to hold packets for in this buffer is a much smaller amount of time relative to interpolation delay for snapshot interpolation but it&rsquo;s the same basic idea. You just need to delay packets just enough (say 4-5 frames @ 60HZ) so that they come out of the buffer properly spaced apart.</p><br><h2 id="applying-state-updates">Applying State Updates</h2><br><p>Once the packet comes out of the jitter how do you apply state updates? My recommendation is that you should snap the physics state hard. This means you apply the values in the state update directly to the simulation.</p><br><p>I recommend against trying to apply some smoothing between the state update and the current state at the simulation level. This may sound counterintuitive but the reason for this is that the simulation extrapolates from the state update so you want to make sure it extrapolates from a valid physics state for that object rather than some smoothed, total bullshit made-up one. This is especially important when you are networking large stacks of objects.</p><br><p>Surprisingly, without any smoothing the result is already pretty good:</p><br><video preload="auto" controls="controls" width="100%"><br><source src="/img/state_synchronization_uncompressed_1.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video><br><p>As you can see it&rsquo;s already looking quite good and barely any bandwidth optimization has been performed. Contrast this with the first video for snapshot interpolation which was at 18mbit/sec and you can see that using the simulation to extrapolate between state updates is a great way to use less bandwidth.</p><br><p>Of course we can do a lot better than this and each optimization we do lets us squeeze more state updates in the same amount of bandwidth. The next obvious thing we can do is to apply all the standard quantization compression techniques such as bounding and quantizing position, linear and angular velocity value and using the smallest three compression as described in <a href="https://gafferongames.com/post/snapshot_compression/" target="_blank" rel="noopener">snapshot compression</a>.</p><br><p>But here it gets a bit more complex. We are extrapolating from those state updates so if we quantize these values over the network then the state that arrives on the right side is slightly different from the left side, leading to a slightly different extrapolation and a pop when the next state update arrives for that object.</p><br><video preload="auto" controls="controls" width="100%"><br><source src="/img/state_synchronization_uncompressed_2.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video><br><h2 id="quantize-both-sides">Quantize Both Sides</h2><br><p>The solution is to quantize the state on both sides. This means that on both sides before each simulation step you quantize the entire simulation state as if it had been transmitted over the network. Once this is done the left and right side are both extrapolating from quantized state and their extrapolations are very similar.</p><br><p>Because these quantized values are being fed back into the simulation, you&rsquo;ll find that much more precision is required than snapshot interpolation where they were just visual quantities used for interpolation. In the cube simulation I found it necessary to have 4096 position values per-meter, up from 512 with snapshot interpolation, and a whopping 15 bits per-quaternion component in smallest three (up from 9). Without this extra precision significant popping occurs because the quantization forces physics objects into penetration with each other, fighting against the simulation which tries to keep the objects out of penetration. I also found that softening the constraints and reducing the maximum velocity which the simulation used to push apart penetrating objects also helped reduce the amount of popping.</p><br><video preload="auto" controls="controls" width="100%"><br><source src="/img/state_synchronization_uncompressed_3.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video><br><p>With quantization applied to both sides you can see the result is perfect once again. It may look visually about the same as the uncompressed version but in fact we&rsquo;re able to fit many more state updates per-packet into the 256kbit/sec bandwidth limit. This means we are better able to handle packet loss because state updates for each object are sent more rapidly. If a packet is lost, it&rsquo;s less of a problem because state updates for those objects are being continually included in future packets.</p><br><p>Be aware that when a burst of packet loss occurs like <sup>1</sup>&frasl;<sub>4</sub> a second with no packets getting through, and this is inevitable that eventually something like this will happen, you will probably get a different result on the left and the right sides. We have to plan for this. In spite of all effort that we have made to ensure that the extrapolation is as close as possible (quantizing both sides and so on) pops can and will occur if the network stops delivering packets.</p><br><h2 id="visual-smoothing">Visual Smoothing</h2><br><p>We can cover up these pops with smoothing.</p><br><p>Remember how I said earlier that you should not apply smoothing at the simulation level because it ruins the extrapolation? What we&rsquo;re going to do for smoothing instead is calculating and maintaining position and orientation error offsets that we reduce over time. Then when we render the cubes in the right side we don&rsquo;t render them at the simulation position and orientation, we render them at the simulation position + error offset, and orientation * orientation error.</p><br><p>Over time we work to reduce these error offsets back to zero for position error and identity for orientation error. For error reduction I use an exponentially smoothed moving average tending towards zero. So in effect, I multiply the position error offset by some factor each frame (eg. 0.9) until it gets close enough to zero for it to be cleared (thus avoiding denormals). For orientation, I slerp a certain amount (0.1) towards identity each frame, which has the same effect for the orientation error.</p><br><p>The trick to making this all work is that when a state update comes in you take the current simulation position and add the position error to that, and subtract that from the new position, giving the new position error offset which gives an identical result to the current (smoothed) visual position.</p><br><p>The same process is then applied to the error quaternion (using multiplication by the conjugate instead of subtraction) and this way you effectively calculate on each state update the new position error and orientation error relative to the new state such that the object appears to have not moved at all. Thus state updates are smooth and have no immediate visual effect, and the error reduction smoothes out any error in the extrapolation over time without the player noticing in the common case.</p><br><p>I find that using a single smoothing factor gives unacceptable results. A factor of 0.95 is perfect for small jitters because it smooths out high frequency jitter really well, but at the same time it is too slow for large position errors, like those that happen after multiple seconds of packet loss:</p><br><video preload="auto" controls="controls" width="100%"><br><source src="/img/state_synchronization_uncompressed_4.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video><br><p>The solution I use is two different scale factors at different error distances, and to make sure the transition is smooth I blend between those two factors linearly according to the amount of positional error that needs to be reduced. In this simulation, having 0.95 for small position errors (25cms or less) while having a tighter blend factor of 0.85 for larger distances (1m error or above) gives a good result. The same strategy works well for orientation using the dot product between the orientation error and the identity matrix. I found that in this case a blend of the same factors between dot 0.1 and 0.5 works well.</p><br><p>The end result is smooth error reduction for small position and orientation errors combined with a tight error reduction for large pops. As you can see above you don&rsquo;t want to drag out correction of these large pops, they need to be fast and so they&rsquo;re over quickly otherwise they&rsquo;re really disorienting for players, but at the same time you want to have really smooth error reduction when the error is small hence the adaptive error reduction approach works really well.</p><br><video preload="auto" controls="controls" width="100%"><br><source src="/img/state_synchronization_uncompressed_5.mp4" type="video/mp4"><br>Your browser does not support the video tag.<br></video><br><h2 id="delta-compression">Delta Compression</h2><br><p>Even though I would argue the result above is probably good enough already it is possible to improve the synchronization considerably from this point. For example to support a world with larger objects or more objects being interacted with. So lets work through some of those techniques and push this technique as far as it can go.</p><br><p>There is an easy compression that can be performed. Instead of encoding absolute position, if it is within a range of the player cube center, encode position as a relative offset to the player center position. In the common cases where bandwidth is high and state updates need to be more frequent (katamari ball) this provides a large win.</p><br><p>Next, what if we do want to perform some sort of delta encoding for state synchronization? We can but it&rsquo;s quite different in this case than it is with snapshots because we&rsquo;re not including every cube in every packet, so we can&rsquo;t just track the most recent packet received and say, OK all these state updates in this packet are relative to packet X.</p><br><p>What you actually have to do is per-object update keep track of the packet that includes the base for that update. You also need to keep track of exactly the set of packets received so that the sender knows which packets are valid bases to encode relative to. This is reasonably complicated and requires a bidirectional ack system over UDP. Such a system is designed for exactly this sort of situation where you need to know exactly which packets definitely got through. You can find a tutorial on how to implement this in <a href="https://gafferongames.com/post/reliability_and_flow_control/" target="_blank" rel="noopener">this article</a>.</p><br><p>So assuming that you have an ack system you know with packet sequence numbers get through. What you do then is per-state update write one bit if the update is relative or absolute, if absolute then encode with no base as before, otherwise if relative send the 16 bit sequence number per-state update of the base and then encode relative to the state update data sent in that packet. This adds 1 bit overhead per-update as well as 16 bits to identify the sequence number of the base per-object update. Can we do better?</p><br><p>Yes. In turns out that of course you&rsquo;re going to have to buffer on the send and receive side to implement this relative encoding and you can&rsquo;t buffer forever. In fact, if you think about it you can only buffer up a couple of seconds before it becomes impractical and in the common case of moving objects you&rsquo;re going to be sending the updates for same object frequently (katamari ball) so practically speaking the base sequence will only be from a short time ago.</p><br><p>So instead of sending the 16 bit sequence base per-object, send in the header of the packet the most recent acked packet (from the reliability ack system) and per-object encode the offset of the base sequence relative to that value using 5 bits. This way at 60 packets per-second you can identify an state update with a base half a second ago. Any base older than this is unlikely to provide a good delta encoding anyway because it&rsquo;s old, so in that case just drop back to absolute encoding for that update.</p><br><p>Now lets look at the type of objects that are going to have these absolute encodings rather than relative. They&rsquo;re the objects at rest. What can we do to make them as efficient as possible? In the case of the cube simulation one bad result that can occur is that a cube comes to rest (turns grey) and then has its priority lowered significantly. If that very last update with the position of that object is missed due to packet loss, it can take a long time for that object to have its at rest position updated.</p><br><p>We can fix this by tracking objects which have recently come to rest and bumping their priority until an ack comes back for a packet they were sent in. Thus they are sent at an elevated priority compared with normal grey cubes (which are at rest and have not moved) and keep resending at that elevated rate until we know that update has been received, thus &ldquo;committing&rdquo; that grey cube to be at rest at the correct position.</p><br><h2 id="conclusion">Conclusion</h2><br><p>And that&rsquo;s really about it for this technique. Without anything fancy it&rsquo;s already pretty good, and on top of that another order of magnitude improvement is available with delta compression, at the cost of significant complexity!</p>




<h1 id="è¯‘æ–‡">è¯‘æ–‡</h1>


<p><a href="http://gad.qq.com/program/translateview/7164500" target="_blank" rel="noopener">è¯‘æ–‡å‡ºå¤„</a></p>
<div class="WordSection1"><b style="margin: 0cm 0cm 0.0001pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;line-height:240%;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222;font-weight:normal">è¯‘è€…ï¼šé™ˆæ•¬å‡¤ï¼ˆ<span>nunu</span>ï¼‰<span>    </span>å®¡æ ¡ï¼šå´”å›½å†›ï¼ˆé£æ‰¬<span>971</span>ï¼‰</span> </b><p class="MsoNormal"><span> </span> </p><p class="MsoNormal" align="left"><br></p><h2 id="ä»‹ç»">ä»‹ç»</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ ¼ä¼¦Â·è²å¾·å‹’ã€‚æ¬¢è¿é˜…è¯»ã€Šç½‘ç»œç‰©ç†æ¨¡æ‹Ÿã€‹çš„ç³»åˆ—æ–‡ç« ï¼Œè¿™ä¸ªç³»åˆ—æ–‡ç« çš„ä¸»é¢˜æ˜¯å…³äºå¦‚ä½•å°†ä¸€ä¸ªç‰©ç†æ¨¡æ‹Ÿé€šè¿‡ç½‘ç»œé€šä¿¡è¿›è¡ŒåŒæ­¥ã€‚</span> <p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†è®¨è®ºç¬¬ä¸‰ç§ä¹Ÿæ˜¯æœ€åä¸€ç§åŒæ­¥çš„ç­–ç•¥ï¼šçŠ¶æ€åŒæ­¥ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left"><br></p><h2 id="çŠ¶æ€åŒæ­¥æ¦‚å¿µ">çŠ¶æ€åŒæ­¥æ¦‚å¿µ</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æ˜¯æœ€ç®€å•çš„åŒæ­¥ç­–ç•¥ä¹Ÿæ˜¯æœ€å®¹æ˜“ç†è§£çš„åŒæ­¥ç­–ç•¥ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯æˆ‘å¼€å§‹å®ç°ã€Šé›‡ä½£å…µ<span>2</span>ï¼šæˆ˜ç«çº·é£ã€‹çš„ç½‘ç»œç‰©ç†éƒ¨åˆ†çš„æ—¶å€™æˆ‘é¦–å…ˆå°è¯•çš„åŒæ­¥ç­–ç•¥ã€‚è¿™ä¸ªåŒæ­¥ç­–ç•¥çš„åŸºæœ¬æƒ³æ³•æ˜¯æˆ‘ä»¬åœ¨ç½‘ç»œçš„ä¸¤ä¾§åŒæ—¶è¿è¡Œä»¿çœŸï¼Œä½†æ˜¯ä¸å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥ä¸åŒçš„æ˜¯å¸§åŒæ­¥ä¼šé€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯å¹¶ä¸”ä¾èµ–å®Œç¾çš„ç¡®å®šæ€§æ¥ä¿æŒåŒæ­¥ï¼Œè¿™ç§åŒæ­¥ç­–ç•¥æ˜¯æ—¢é€šè¿‡ç½‘ç»œå‘é€è¾“å…¥ä¿¡æ¯åˆä¼šå‘é€çŠ¶æ€ä¿¡æ¯æ¥è¿›è¡ŒåŒæ­¥ã€‚</span> <p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™å°±èµ‹äºˆäº†çŠ¶æ€åŒæ­¥ä¸ä¹‹å‰çš„åŒæ­¥ç­–ç•¥å®Œå…¨ä¸åŒçš„å±æ€§ã€‚ä¸å…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥ä¸åŒï¼Œè¿™ç§åŒæ­¥ç­–ç•¥ä¸éœ€è¦è¦æ±‚ç¡®å®šæ€§æ¥ä¿æŒåŒæ­¥ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è¿…é€Ÿçš„é€šè¿‡ç½‘ç»œå‘é€çŠ¶æ€æ¥çº æ­£ä»»ä½•çš„åå·®ã€‚è¿™ç§åŒæ­¥ç­–ç•¥ä¹Ÿè·Ÿå¿«ç…§ä¿¡æ¯çš„æ’å€¼ä¸åŒï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸åœ¨æ•°æ®åŒ…é‡Œé¢çš„è¯ï¼Œè¿™ä¸ªç‰©ä½“è¿˜æ˜¯ä¼šç»§ç»­ç§»åŠ¨ï¼Œå› ä¸ºç½‘ç»œä¸¤ä¾§çš„ä»¿çœŸéƒ½åœ¨æŒç»­çš„è¿è¡Œã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ­£æ˜¯ç”±äºè¿™ä¸€ç‰¹æ€§ï¼ŒçŠ¶æ€åŒæ­¥çš„å®ç°æ–¹æ³•æ‰ä¼šä¸å¿«ç…§ä¿¡æ¯çš„æ’å€¼æœ‰å·®åˆ«ã€‚ä¸å†æ˜¯åœ¨æ¯ä¸ªæ•°æ®åŒ…é‡Œé¢å‘é€æ¯ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åªå¯¹å‡ ä¸ªå¯¹è±¡è¿›è¡Œæ›´æ–°ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªæ•°æ®åŒ…é€‰æ‹©è¦åŒæ­¥çš„ç‰©ä½“çš„æ—¶å€™æ–¹æ¡ˆæ¯”è¾ƒèªæ˜çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¸¦å®½ï¼ŒæŠŠæ³¨æ„åŠ›ä¸»è¦é›†ä¸­åœ¨æœ€é‡è¦çš„ç‰©ä½“çš„æ›´æ–°ä¸Šï¼Œè€Œé‚£äº›ä¸é‚£ä¹ˆé‡è¦çš„ç‰©ä½“ï¼Œä»–ä»¬çš„æ›´æ–°ä¿¡æ¯å¯ä»¥ä»¥ä¸€ä¸ªè¾ƒä½çš„é€Ÿç‡è¿›è¡Œå‘é€ã€‚è¿™æ ·çš„è¯ï¼Œç›¸æ¯”è¾ƒå¿«ç…§ä¿¡æ¯æ’å€¼è¿™ç§è¦åœ¨ä¸€ä¸ªå¿«ç…§é‡Œé¢åŒ…æ‹¬æ‰€æœ‰ç‰©ä½“çš„æ–¹æ³•ï¼ŒçŠ¶æ€åŒæ­¥è¿™ç§æ–¹æ³•ä½¿ç”¨çš„å¸¦å®½å¯ä»¥å‡å°‘ä¸€ä¸ªæ•°é‡çº§ã€‚æ­¤å¤–ï¼ŒçŠ¶æ€åŒæ­¥è¿™ç§æ–¹æ³•ä¸ä¼šåœ¨ç½‘ç»œå»¶è¿Ÿä¹‹ä¸Šè¿˜è¦é™„åŠ æ’å€¼å¸¦æ¥çš„å»¶è¿Ÿï¼Œå› ä¸ºå®ƒç›¸æ¯”è¾ƒäºå¿«ç…§ä¿¡æ¯æ’å€¼è¿™ç§æ–¹æ³•ï¼Œå»¶è¿Ÿä¹Ÿæ›´ä½ã€‚</span> </p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™æ ·åšçš„ä»£ä»·æ˜¯çŠ¶æ€åŒæ­¥æ˜¯ä¸€ä¸ªè¿‘ä¼¼å’Œæœ‰æŸçš„åŒæ­¥ç­–ç•¥ã€‚å¦‚æœæ¨é€ä¿¡æ¯çš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜å¯¼è‡´å¤§é‡çš„æ•°æ®åŒ…ä¸¢å¤±çš„è¯ï¼Œè¿œç¨‹çš„æ¨¡æ‹Ÿä»¿çœŸä½¿ç”¨çš„æ˜¯è¿‡æœŸçš„æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ªåŒæ­¥ç­–ç•¥çš„è¯ï¼Œä½ ä¼šèŠ±å¾ˆå¤šæ—¶é—´è¿½è¸ªç”±äºè¿›è¡Œé¢„æµ‹æ‰€å¸¦æ¥çš„å·®å¼‚ã€‚å¦‚æœä½¿ç”¨è¿™ä¸ªåŒæ­¥ç­–ç•¥çš„è¯ï¼Œåœ¨å¤§é‡ç‰©ä½“å †å çš„æ—¶å€™ï¼Œä¼šçœ‹åˆ°å¾ˆå¤šç‰©ä½“çš„ç§»åŠ¨ä¸æ­£å¸¸ï¼Œå¹¶ä¸”å¾ˆéš¾ç²¾ç¡®åœ°è¿½æŸ¥ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ å¦‚ä½•è¿½è¸ªå¹¶é€šè¿‡ç½‘ç»œå‘é€é‡åŒ–å’Œå‹ç¼©çš„ç‰©ç†çŠ¶æ€æ¥å‡å°‘åˆ†æ­§çš„æ ¹æºã€‚</span> </p><p class="MsoNormal" align="left"><br></p><h2 id="å®ç°">å®ç°</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è®©æˆ‘ä»¬ä»å®é™…çš„å®ç°æ¥çœ‹ä¸‹è¿™ä¸ªåŒæ­¥ç­–ç•¥ã€‚è¿™é‡Œæ˜¯æ¯ä¸ªå‘é€çš„å¯¹è±¡çš„ç½‘ç»œçŠ¶æ€ï¼š<br><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StateUpdate</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    vec3f position;</span><br><span class="line">    quat4f orientation;</span><br><span class="line">    vec3f linear_velocity;</span><br><span class="line">    vec3f angular_velocity;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å‘é€çš„ä¸ä»…ä»…æ˜¯ä¸€äº›åƒä½ç½®ã€æ–¹å‘è¿™æ ·çš„è§†è§‰ä¿¡æ¯ï¼Œè¿™ä¸ªåœ°æ–¹ä¸å¿«ç…§ä¿¡æ¯æ’å€¼é‚£ç§æ–¹æ³•ç›¸åŒï¼Œæˆ‘ä»¬è¿˜å‘é€äº†å¾ˆå¤šéè§†è§‰çš„ç‰©ä½“çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦ï¼Œè¿™æ˜¯ä¸å¿«ç…§ä¿¡æ¯æ’å€¼é‚£ç§æ–¹æ³•ä¸åŒçš„åœ°æ–¹ã€‚è¿™ä¹ˆåšæ˜¯å¿…è¦çš„æ˜¯å› ä¸ºç‰©ç†ä»¿çœŸéœ€è¦å¯¹æ¯ä¸ªç‰©ä½“æœ€è¿‘çš„çŠ¶æ€è¿›è¡Œå¤–æ¨ã€‚å› æ­¤ï¼ŒçŠ¶æ€æ›´æ–°éœ€è¦æä¾›æ‰€æœ‰è¿›è¡Œå¤–æ¨æ‰€éœ€çš„ä¿¡æ¯ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®çš„è¿›è¡Œæ¨æµ‹ã€‚å¦‚æœä¸€ä¸ªç‰©ä½“çš„é€Ÿåº¦ä¿¡æ¯æ²¡æœ‰å‘é€çš„è¯ï¼Œåœ¨é¢„æµ‹ç‰©ä½“å‰è¿›çš„æ—¶å€™ï¼Œå°±ä¼šä½¿ç”¨ä¸€ä¸ªä¸æ­£ç¡®çš„é€Ÿåº¦ä¿¡æ¯ï¼Œè¿™å°†å¯¼è‡´ä¸‹ä¸€æ¬¡ç‰©ä½“ä¿¡æ¯è¿›è¡Œæ›´æ–°çš„æ—¶å€™æœ‰ä¸€ä¸ªæ‹‰æ‰¯ã€‚</span> <p></p><p class="MsoNormal" align="left"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å½“æˆ‘ä»¬åœ¨ç½‘ç»œä¸Šå¯¹çŠ¶æ€æ›´æ–°è¿›è¡Œåºåˆ—åŒ–çš„æ—¶å€™ï¼Œæ²¡æœ‰å¿…è¦å¯¹ä¸åŠ¨çš„ç‰©ä½“æµªè´¹ç½‘ç»œå¸¦å®½ï¼Œä¸ºè¿™äº›ä¸åŠ¨çš„ç‰©ä½“å‘é€ä»€ä¹ˆ<span>(0,0,0)</span>æ¥è¡¨ç¤ºçº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦ã€‚æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„ä¼˜åŒ–ï¼Œé€šè¿‡æŠŠç‰©ä½“çš„é™æ­¢çŠ¶æ€åŒ…å«åœ¨å†…æ¥ç»™æ¯ä¸ªé™æ­¢çš„ç‰©ä½“èŠ‚çœ<span>24</span>å­—èŠ‚çš„å¸¦å®½ï¼š<br><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">serialize_state_update</span><span class="params">( Stream &amp; stream,</span></span></span><br><span class="line"><span class="function"><span class="params">                             <span class="keyword">int</span> &amp; index,</span></span></span><br><span class="line"><span class="function"><span class="params">                             StateUpdate &amp; state_update )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    serialize_int( stream, index, <span class="number">0</span>, NumCubes - <span class="number">1</span> );</span><br><span class="line">    serialize_vector( stream, state_update.position );</span><br><span class="line">    serialize_quaternion( stream, state_update.orientation );</span><br><span class="line">    <span class="keyword">bool</span> at_rest = stream.IsWriting() ? state_update.AtRest() : <span class="literal">false</span>;   </span><br><span class="line">    serialize_bool( stream, at_rest );</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ( !at_rest )</span><br><span class="line">    &#123;</span><br><span class="line">        serialize_vector( stream, state_update.linear_velocity );</span><br><span class="line">        serialize_vector( stream, state_update.angular_velocity );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( stream.IsReading() )</span><br><span class="line">    &#123;</span><br><span class="line">        state_update.linear_velocity = vec3f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        state_update.angular_velocity = vec3f(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>ä¸Šé¢çš„ä»£ç å°±æ˜¯æˆ‘æ‰€è°“çš„åºåˆ—åŒ–åŠŸèƒ½ã€‚è¿™é‡Œé¢æœ‰ä¸€ä¸ªæˆ‘å–œæ¬¢çš„å°æŠ€å·§æ¥ç»Ÿä¸€ä½æ‰“åŒ…å™¨çš„è¯»å–å’Œå†™å…¥å‡½æ•°ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åˆ†å¼€å®ç°çš„ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨ä¸¤ç§ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œè°ƒç”¨ï¼šå†™å…¥çš„æ—¶å€™å’Œè¯»å–çš„æ—¶å€™ã€‚ä½ å¯ä»¥é€šè¿‡<span>IsReading/IsWriting</span>å‡½æ•°æ¥çŸ¥é“è‡ªå·±ç›®å‰å¤„åœ¨å“ªä¸ªä¸Šä¸‹æ–‡ã€‚æˆ‘å–œæ¬¢è¿™ä¸ªæŠ€å·§çš„åŸå› æ˜¯å¦‚ä½•è¯»å–å’Œå†™å…¥åŠŸèƒ½ç»Ÿä¸€åœ¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œè¯»å–å’Œå†™å…¥çš„ä¸åŒæ­¥å°±ä¼šå¾ˆå°‘å‘ç”Ÿã€‚å¦‚æœä½ å¸Œæœ›è¯»å–å’Œå†™å…¥åŠŸèƒ½ç»Ÿä¸€åœ¨ä¸€èµ·å¹¶ä¸”åƒæˆ‘è¿™æ ·è¿›è¡Œæ•°æ®åŒ…çš„æ•°æ®ï¼Œè¯·å‚è€ƒ</span><span><a rel="noopener" href="https://gafferongames.com/post/serialization_strategies/" target="_blank"><span><span>è¿™é‡Œ</span></span></a></span><span style="color: rgb(40, 40, 40);"></span><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€‚</span> </p><span style="color: rgb(34, 34, 34);"><br><h2 id="æ•°æ®åŒ…ç»“æ„ä½“">æ•°æ®åŒ…ç»“æ„ä½“</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">å½“æŠŠçŠ¶æ€æ›´æ–°å†™å…¥çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªç‰©ä½“æ˜¯é™æ­¢ä¸åŠ¨çš„è¯ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®åªåºåˆ—åŒ–äº†ä¸€æ¯”ç‰¹çš„ä¿¡æ¯è€Œä¸ä¼šæ›´æ–°çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦çš„ä¿¡æ¯ã€‚å¦‚æœè¿™ä¸ªç‰©ä½“ä¸æ˜¯é™æ­¢ä¸åŠ¨çš„è¯ï¼Œä¼šæŠŠçº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦çš„ä¿¡æ¯å†™å…¥ä¹‹å‰å…ˆå†™å…¥ä¸€æ¯”ç‰¹çš„ä¿¡æ¯ã€‚åœ¨ä»æ•°æ®åŒ…è¿›è¡Œè¯»å–çš„æ—¶å€™ï¼Œä»£ç ä¼šè¯»å–è¿™ä¸ªæ¯”ç‰¹ä½ï¼Œå¦‚æœè¿™ä¸ªæ¯”ç‰¹ä½æ˜¯<span>0</span>çš„è¯ï¼Œä¼šä»è¿™ä¸ªæ¯”ç‰¹æµé‡Œé¢è¯»å–çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦çš„ä¿¡æ¯ï¼Œå¦åˆ™çš„è¯ï¼Œä¼šæŠŠç‰©ä½“çš„çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦å…¨éƒ¨æ¸…ä¸ºï¼ˆ<span>0,0,0</span>ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•è€Œæœ‰æ•ˆçš„æ— æŸå¸¦å®½å‹ç¼©ç­–ç•¥èƒ½å¤Ÿé’ˆå¯¹é™æ­¢ä¸åŠ¨çš„ç‰©ä½“è¿›è¡Œæ•°æ®çš„å‹ç¼©ï¼Œèƒ½å¤ŸèŠ‚çœå°†è¿‘ä¸€åŠçš„å¸¦å®½ã€‚</span></span><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¢«å‘é€çš„æ•°æ®åŒ…çš„ç»“æ„ï¼š<br><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MaxInputsPerPacket = <span class="number">32</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MaxStateUpdatesPerPacket = <span class="number">64</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Packet</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint32_t</span> sequence;</span><br><span class="line">    Input inputs[MaxInputsPerPacket];</span><br><span class="line">    <span class="keyword">int</span> num_object_updates;</span><br><span class="line">    StateUpdate state_updates[MaxStateUpdatesPerPacket];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><br>ä»ä¸Šé¢çš„æ•°æ®åŒ…ç»“æ„ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆç™»åœºçš„æ˜¯æˆ‘ä»¬åœ¨æ¯ä¸ªæ•°æ®åŒ…åŒ…å«çš„åºåˆ—å·ï¼Œé€šè¿‡è¿™ä¸ªæ•°æ®ä¿¡æ¯æˆ‘ä»¬å¯ä»¥åˆ¤æ–­æ•°æ®åŒ…æ˜¯å¦å‡ºæ•…éšœã€ä¸¢å¤±æˆ–è€…é‡å¤ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ åœ¨ç½‘ç»œä¸¤ä¾§çš„è¿è¡Œéƒ½æŒ‰ç…§ç›¸åŒçš„å¸§é€Ÿç‡ï¼ˆæ¯”å¦‚è¯´<span>60fps</span>ï¼‰è¿›è¡Œä»¿çœŸã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ è¿˜å¯ä»¥ç»™åºåˆ—å·èµ‹äºˆå¦å¤–ä¸€é‡ä»»åŠ¡ï¼šä½œä¸ºçŠ¶æ€æ›´æ–°çš„å¸§å·ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¾“å…¥ä¿¡æ¯è¢«åŒ…å«åœ¨æ¯ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œè¿™æ˜¯å› ä¸ºä»¿çœŸéœ€è¦è¾“å…¥ä¿¡æ¯æ‰èƒ½è¿›è¡Œå¤–æ¨ã€‚å½“ä»¿çœŸåœ¨ç½‘ç»œçš„å¦å¤–ä¸€ä¾§è¿è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡çŠ¶æ€æ›´æ–°çš„ä¿¡æ¯ä»¥åŠè¿è¡Œç©å®¶ç›¸åŒçš„è¾“å…¥ä¿¡æ¯æ¥å¾€å‰é¢„æµ‹åç»­çŠ¶æ€çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¸Œæœ›é¢„æµ‹å‡ºæ¥çš„çŠ¶æ€èƒ½å¤Ÿå’ŒçœŸå®çš„çŠ¶æ€å°½å¯èƒ½çš„æ¥è¿‘ã€‚å°±è·Ÿå…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥ä¸€æ ·ï¼Œæˆ‘ä»¬å‘é€äº†å¤šä¸ªå†—ä½™è¾“å…¥ä¿¡æ¯ï¼Œè¿™æ ·å³ä½¿åœ¨æœ‰åŒ…ä¸¢å¤±çš„æƒ…å†µä¸‹ï¼Œè¾“å…¥ä¿¡æ¯ä¹Ÿä¸å¤ªå¯èƒ½å®Œå…¨è¢«ä¸¢å¼ƒè€Œä¸èƒ½åˆ°è¾¾ç½‘ç»œçš„å¦å¤–ä¸€ç«¯ï¼Œä½†æ˜¯è·Ÿå…·æœ‰ç¡®å®šæ€§çš„å¸§åŒæ­¥ä¸ä¸€æ ·çš„æ˜¯ï¼Œå°±ç®—æ˜¯æœ€åçš„æƒ…å†µä¸‹ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ”¶åˆ°åç»­çš„è¾“å…¥ä¿¡æ¯çš„æƒ…å†µï¼‰ï¼Œæˆ‘ä»¬æœ¬åœ°çš„ä»¿çœŸä¹Ÿä¸ä¼šåœæ­¢å¹¶ä¸”ç­‰å¾…åç»­çš„è¾“å…¥ä¿¡æ¯çš„åˆ°æ¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šæ ¹æ®æœ€åæ”¶åˆ°çš„è¾“å…¥ä¿¡æ¯ç»§ç»­å¾€å‰æ¨¡æ‹Ÿã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åŒ…é‡Œé¢æˆ‘ä»¬æœ€å¤šå‘é€<span>64</span>ä¸ªçŠ¶æ€æ›´æ–°ã€‚æˆ‘ä»¬åœ¨ä»¿çœŸçš„åœºæ™¯ä¸­ä¸€å…±æœ‰<span>901</span>ä¸ªç«‹æ–¹ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€äº›æ–¹æ³•æ¥ä»è¿™<span>901</span>ä¸ªç«‹æ–¹ä½“é‡Œé¢é€‰å‡ºä¸€äº›æœ€é‡è¦çš„ç«‹æ–¹ä½“ï¼Œåœ¨æ¯ä¸€ä¸ªæ•°æ®åŒ…è¿›è¡Œæ•°æ®æ›´æ–°ã€‚æˆ‘ä»¬éœ€è¦æŸç§ä¼˜å…ˆçº§æ–¹æ¡ˆï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ‰¾åˆ°æœ€é‡è¦çš„ç‰©ä½“ï¼Œå…è®¸æˆ‘ä»¬åªä¼šå¾ˆé¢‘ç¹çš„å‘é€æœ€é‡è¦çš„ç‰©ä½“çš„çŠ¶æ€ä¿¡æ¯ï¼Œè€Œé‚£äº›ä¸æ€ä¹ˆé‡è¦çš„ç‰©ä½“çš„æ›´æ–°å°±ä¼šä¸é‚£ä¹ˆçš„é¢‘ç¹ï¼Œé›¶é›¶æ•£æ•£çš„æ›´æ–°ï¼Œè¿™æ ·ä¿è¯æ‰€æœ‰å¯¹è±¡éƒ½æœ‰æœºä¼šè¿›è¡Œæ›´æ–°å’Œå‘é€ï¼Œä½†æ˜¯åˆèƒ½è®©æœ€é‡è¦çš„é‚£äº›ç‰©ä½“å§‹ç»ˆå¾—åˆ°æ›´æ–°ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è¿™æ ·å°±è¦æ±‚åœ¨ä»¿çœŸçš„æ¯ä¸€å¸§å¼€å§‹çš„æ—¶å€™éå†æ‰€æœ‰çš„ç‰©ä½“å¹¶ä¸”è®¡ç®—å®ƒä»¬å½“å‰çš„ä¼˜å…ˆçº§ã€‚è®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œåœ¨ç«‹æ–¹ä½“æ¨¡æ‹Ÿè¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘æŠŠç©å®¶ç«‹æ–¹ä½“çš„ä¼˜å…ˆçº§è®¾ä¸º<span>100000</span>ï¼Œå› ä¸ºæˆ‘å¸Œæœ›ç©å®¶ç«‹æ–¹ä½“çš„æ›´æ–°ä¿¡æ¯èƒ½å¤ŸåŒ…å«åœ¨æ¯ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œè€Œå¯¹äºå‘ç”Ÿäº¤äº’çš„ç«‹æ–¹ä½“ï¼ˆé‚£äº›çº¢è‰²çš„ç«‹æ–¹ä½“ï¼‰ï¼Œæˆ‘èµ‹äºˆå®ƒä»¬çš„ä¼˜å…ˆçº§ä¸º<span>100</span>ï¼Œè€Œæ‰€æœ‰é™æ­¢ä¸åŠ¨çš„ç«‹æ–¹ä½“ï¼Œä¼˜å…ˆçº§ä¸º<span>1</span>ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">éå¸¸é—æ†¾çš„æ˜¯å¦‚æœåªæœ‰è¿™ä¸€ä¸ªæœºåˆ¶çš„è¯ï¼Œæ˜¯ä¸è¶³ä»¥å…¬å¹³åˆ†é…å¯¹è±¡çš„æ›´æ–°çš„ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœä½ åˆšåˆšä»…ä»…æ˜¯åœ¨æ¯ä¸€å¸§å¯¹ç‰©ä½“çš„å½“å‰ä¼˜å…ˆçº§è¿›è¡Œäº†æ’åºï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœäººç‰©ç«‹æ–¹ä½“å’Œçº¢è‰²ç«‹æ–¹ä½“æœ‰äº¤äº’çš„è¯ï¼Œé‚£ä¹ˆå°±æ°¸è¿œåªæœ‰çº¢è‰²ç«‹æ–¹ä½“çš„ä¿¡æ¯ä¼šè¢«å‘é€ï¼Œè€Œåœ°é¢ä¸Šçš„ç™½è‰²ç«‹æ–¹ä½“åˆ™æ°¸è¿œä¸ä¼šæ›´æ–°ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¨å¾®ä¸åŒçš„æ–¹æ³•ï¼Œä¼˜å…ˆå‘é€é‡è¦çš„å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¼šåœ¨ä»¿çœŸçš„è¿‡ç¨‹è®©é‚£äº›ä¸é‡è¦çš„ç‰©ä½“ä¹Ÿæœ‰æ›´æ–°çš„æœºä¼šã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><br><h2 id="ä¼˜å…ˆçº§ç´¯åŠ å™¨">ä¼˜å…ˆçº§ç´¯åŠ å™¨</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½ å¯ä»¥é€šè¿‡ä¼˜å…ˆçº§ç´¯åŠ å™¨åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™æ˜¯ä¸€ç»„æµ®ç‚¹æ•°å€¼ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„æµ®ç‚¹æ•°å€¼ï¼Œåœ¨å¸§ä¸å¸§ä¹‹é—´ä¼šä¸€ç›´ä¿ç•™ã€‚æœ‰äº†è¿™ä¸ªå€¼ä»¥åï¼Œä¸å†æ˜¯æ ¹æ®å½“å‰å¸§ä¸­è¿™ä¸ªç‰©ä½“çš„é‡è¦æ€§è¿›è¡Œæ’åºï¼Œè€Œæ˜¯åœ¨æ¯ä¸€å¸§ä¸­å°†æ¯ä¸ªç‰©ä½“çš„é‡è¦æ€§åŠ åˆ°è¿™ä¸ªä¼˜å…ˆçº§ç´¯åŠ å™¨ä¸­ï¼Œç„¶åå¯¹ä¼˜å…ˆçº§ç´¯åŠ å™¨çš„å€¼è¿›è¡Œä»å¤§åˆ°å°è¿›è¡Œæ’åºã€‚è¿™ä¸ªæ’åºçš„é¡ºåºä¸­å‰é¢çš„ç‰©ä½“å°±æ˜¯è¿™ä¸€å¸§ä¸­ä½ åº”è¯¥å‘é€çš„ç‰©ä½“ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½ å¯ä»¥ä¸ºæ‰€æœ‰çš„<span>N</span>ä¸ªç‰©ä½“å‘é€çŠ¶æ€æ›´æ–°ä¿¡æ¯ï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ä½ çš„å¸¦å®½ä¼šæœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚è¯´ä½ éœ€è¦æ§åˆ¶åœ¨<span>256k</span>æ¯”ç‰¹æ¯ç§’ã€‚å°Šé‡è¿™ä¸ªå¸¦å®½é™åˆ¶æ˜¯å¾ˆå®¹æ˜“çš„ã€‚åªè¦è®¡ç®—å‡ºä½ çš„æ•°æ®åŒ…Headeræœ‰å¤šå¤§ï¼Œå¹¶ä¸”è®¡ç®—ä¸‹æ•°æ®åŒ…çš„preambleéƒ¨åˆ†æœ‰å¤šå¤§ï¼ˆè¿™ä¸»è¦æ˜¯æŒ‡åºå·ã€æ ‡è®°å“ªäº›ç‰©ä½“åœ¨è¿™ä¸ªæ•°æ®åŒ…ç­‰ä¿¡æ¯ï¼‰ï¼Œè¿™æ ·å°±èƒ½è®¡ç®—å‡ºæ¥ä½ çš„æ•°æ®åŒ…è¿˜å‰©ä¸‹å¤šå°‘å­—èŠ‚ï¼Œå¯ä»¥é€šè¿‡è®¡åˆ’ä¼ é€’å¤šå°‘ä¸ªç‰©ä½“çš„æ›´æ–°ä¿¡æ¯æ¥ç¡®ä¿å¸¦å®½å°äºçº¦å®šçš„æœ€å¤§å¸¦å®½ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç„¶åæ ¹æ®å®ƒä»¬çš„ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é€‰å–æ•°ç›®å’Œä¸Šé¢è®¡ç®—ç›¸ç¬¦åˆçš„<span>n</span>ä¸ªæœ€é‡è¦çš„ç‰©ä½“ï¼Œç„¶åç”¨è¿™<span>n</span>ä¸ªæœ€é‡è¦çš„ç‰©ä½“çš„æ›´æ–°ä¿¡æ¯æ¥æ„å»ºä½ çš„æ•°æ®åŒ…ã€‚å¯¹è¿™<span>n</span>ä¸ªæœ€é‡è¦çš„ç‰©ä½“è¿›è¡Œä¾æ¬¡éå†å¹¶æµ‹è¯•å®ƒä»¬çš„æ•°æ®æ›´æ–°ä¿¡æ¯æ˜¯å¦åº”è¯¥æ”¾åœ¨è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ã€‚å¦‚æœé‡åˆ°ä¸€ä¸ªç‰©ä½“çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯ä¸åˆé€‚æ”¾åˆ°è¿™ä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªç‰©ä½“å¹¶å°è¯•ä¸‹ä¸€ä¸ªã€‚å½“ä½ åºåˆ—åŒ–å®Œè¿™ä¸ªæ•°æ®åŒ…ä»¥åï¼Œå°†é‚£äº›å·²ç»åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼é‡ç½®ä¸º<span>0</span>ï¼Œä½†æ˜¯é‚£äº›æ²¡æœ‰åœ¨è¿™å¸§æ›´æ–°è¿‡çš„ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼åˆ™ä¿æŒä¸å˜ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">é€šè¿‡ä½¿ç”¨è¿™ä¸ªåŠæ³•ï¼Œåˆšæ‰æ£€æµ‹ä¸åˆé€‚æ”¾åˆ°æ•°æ®åŒ…çš„ç‰©ä½“çš„æ›´æ–°ä¿¡æ¯ä¼šè¢«é¦–å…ˆåŒ…å«åœ¨ä¸‹ä¸€å¸§çš„æ•°æ®åŒ…é‡Œé¢ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½¿ç”¨è¿™ç§åŒæ­¥ç­–ç•¥ï¼Œæ‰€éœ€çš„å¸¦å®½ç”šè‡³å¯ä»¥åŠ¨æ€è°ƒæ•´ã€‚è¿™ä½¿å¾—è¿™ç§åŒæ­¥ç­–ç•¥å¯ä»¥å¾ˆå®¹æ˜“çš„æ ¹æ®ä¸æ–­å˜åŒ–çš„ç½‘ç»œæ¡ä»¶æ¥è°ƒæ•´çŠ¶æ€åŒæ­¥çš„ä¿¡æ¯é‡ï¼Œè®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœä½ å‘ç°è¿æ¥æœ‰å›°éš¾ï¼Œå°±å¯ä»¥å‡å°‘å‘é€æ‰€å çš„å¸¦å®½ï¼ˆæ‹¥å¡é¿å…ï¼‰ï¼Œè¿™æ ·çŠ¶æ€åŒæ­¥çš„è§„æ¨¡ä¼šé€æ­¥çš„è‡ªåŠ¨å›å¤å›æ¥ã€‚å¦‚æœç½‘ç»œè¿æ¥ä¼¼ä¹å¯ä»¥å¤„ç†æ›´å¤šçš„å¸¦å®½ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå¸¦å®½é™åˆ¶æé«˜ã€‚</span></span><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">æˆ‘ä»¬è¿™é‡Œæ‰€åšçš„å¤„ç†ä¸»è¦æ˜¯åœ¨ç½‘ç»œå‘é€è¿™ä¸€ç«¯ã€‚</span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);"><br></span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);"><br></span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br><h2 id="æŠ–åŠ¨ç¼“å†²åŒº">æŠ–åŠ¨ç¼“å†²åŒº</h2><br><span style="color: rgb(34, 34, 34);">å¯¹ç‰©ä½“åšäº†ä¼˜å…ˆçº§çš„æ’åºï¼Œå¹¶ä¸”åœ¨æ¯å¸§é‡Œé¢æ›´æ–°ç‰©ä½“åœ¨ä¼˜å…ˆçº§ç´¯åŠ å™¨é‡Œé¢çš„å€¼ï¼Œå¹¶åœ¨æ¯æ¬¡å‘é€æ•°æ®åŒ…çš„æ—¶å€™åªå‘é€<span>n</span>ä¸ªæœ€é‡è¦çš„ç‰©ä½“ã€‚ä½†æ˜¯åœ¨ç½‘ç»œæ¥æ”¶è¿™ä¸€ç«¯ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚å½“åº”ç”¨æ¥æ”¶è¿‡æ¥çš„çŠ¶æ€æ›´æ–°ä¿¡æ¯çš„æ—¶å€™ï¼Œå¦‚ä½•é¿å…ä¸ä¹‹å‰é¢„æµ‹çš„ç‰©ä½“çŠ¶æ€ä¿¡æ¯ä¹‹é—´çš„å·®å¼‚ä¼šè¢«ç©å®¶æ„Ÿè§‰åˆ°ã€‚</span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span><span style="color:#222222;"><br></span></span><span style="color: rgb(34, 34, 34);">ä½ éœ€è¦è€ƒè™‘çš„ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯ï¼Œç½‘ç»œæŠ–åŠ¨çš„å­˜åœ¨ã€‚ä½ æ²¡æœ‰ä»»ä½•åŠæ³•æ¥ç¡®ä¿ä½ å‘é€çš„æ•°æ®åŒ…å°±æ˜¯å®Œç¾çš„æ˜¯æ¯ç§’<span>60</span>æ¬¡çš„é¢‘ç‡æŠµè¾¾ç½‘ç»œçš„å¦å¤–ä¸€ä¾§ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ä¼šå‘ç”Ÿçš„äº‹æƒ…æ˜¯ä½ å¯èƒ½åœ¨ä¸€å¸§ä¸­æ”¶åˆ°ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œç„¶ååœ¨ä¸‹ä¸€å¸§ä¸€ä¸ªæ•°æ®åŒ…ä¹Ÿæ”¶ä¸åˆ°ï¼Œç„¶åä¸‹é¢å‡ å¸§å¯èƒ½æ˜¯<span>1</span>ä¸ªï¼Œ<span>2</span>ä¸ªæˆ–è€…<span>0</span>ä¸ªã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œä½ éœ€è¦å®ç°ä¸€ä¸ªæŠ–åŠ¨ç¼“å†²å™¨æ¥ä¿å­˜ä½ çš„çŠ¶æ€æ›´æ–°æ•°æ®åŒ…ã€‚</span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);"><br></span></span></div><div class="WordSection1"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">å¦‚æœä½ ä¸è¿™æ ·åšï¼Œæ‰€åšçš„æ¨æµ‹è´¨é‡å°±å¾ˆéš¾ä¿è¯è€Œä¸”ä¼šå‡ºç°å¯¹è±¡å †å çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºåœ¨ä¸åŒçš„çŠ¶æ€æ›´æ–°æ•°æ®åŒ…é‡Œé¢ï¼Œæ¯ä¸€ä¸ªç‰©ä½“çš„ä¿¡æ¯éƒ½ä¼šæœ‰äº›è½»å¾®çš„å˜åŒ–ã€‚</span></span><span style="color: rgb(33, 33, 33);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"> </span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åœ¨æŠ–åŠ¨ç¼“å†²å™¨ä½ æ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯ä¿å­˜è¿™äº›æ•°æ®åŒ…ï¼Œç„¶åæ ¹æ®æ•°æ®åŒ…é‡Œé¢çš„åºå·ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯å¸§å·äº†ï¼‰æ¥åœ¨æ­£ç¡®çš„æ—¶é—´å°†æ•°æ®åŒ…å‘ç»™åº”ç”¨ç¨‹åºå¤„ç†ã€‚ä½ éœ€è¦åœ¨è¿™ä¸ªç¼“å†²åŒºæ¥ä¿å­˜æ•°æ®åŒ…æ‰€å¯¼è‡´çš„å»¶è¿Ÿç›¸æ¯”è¾ƒå¿«ç…§ä¿¡æ¯æ’å€¼æ‰€å¸¦æ¥çš„å»¶è¿Ÿæ˜¯ä¸€æ®µéå¸¸å¾®å°çš„æ—¶é—´ï¼Œä½†æ˜¯è¿™ä¸¤ç§åŒæ­¥ç­–ç•¥çš„åŸºæœ¬æ€æƒ³æ˜¯ä¸€è‡´çš„ã€‚ä½ åªè¦ç¨å¾®å»¶è¿Ÿä¸€ä¸‹æ•°æ®åŒ…è®©æ—¶é—´åˆšåˆšå¥½å°±å¥½ï¼ˆæ¯”å¦‚è¯´æ¯ç§’<span>60</span>æ¬¡æ›´æ–°çš„æƒ…å†µå»¶è¿Ÿä¸ª<span>4-5</span>å¸§ï¼‰ï¼Œè¿™æ ·æ•°æ®åŒ…å°±èƒ½å¤Ÿä»¥åˆé€‚çš„é—´éš”ä»ç¼“å†²åŒºé‡Œé¢å‡ºæ¥åˆ°è¾¾åº”ç”¨ç¨‹åºã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><br><h2 id="åº”ç”¨çŠ¶æ€æ›´æ–°">åº”ç”¨çŠ¶æ€æ›´æ–°</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä¸€æ—¦ä½ çš„æ•°æ®åŒ…ä»æŠ–åŠ¨ç¼“å†²å™¨é‡Œé¢å‡ºæ¥ï¼Œä½ è¯¥å¦‚ä½•ä½¿ç”¨æ•°æ®åŒ…çš„ä¿¡æ¯è¿›è¡ŒçŠ¶æ€æ›´æ–°å‘¢ï¼Ÿæˆ‘çš„å»ºè®®æ˜¯ï¼Œä½ è¦åŠªåŠ›å¯¹é½è¿™ç§çŠ¶æ€ã€‚åœ¨çŠ¶æ€æ›´æ–°ç›´æ¥åº”ç”¨è¿™äº›ä¿¡æ¯è¿›è¡Œä»¿çœŸã€‚æˆ‘åå¯¹åœ¨çŠ¶æ€æ›´æ–°å’Œå½“å‰ä»¿çœŸçš„ç›®å‰çŠ¶æ€ä¹‹é—´åšä¸€äº›å¹³æ»‘çš„æ›´æ›¿ã€‚è¿™å¬èµ·æ¥å¯èƒ½æœ‰æ‚–å¸¸ç†ï¼Œä½†è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå½“å‰æœ‰äº›ç‰©ä½“çš„çŠ¶æ€å¯èƒ½æ˜¯æ ¹æ®ä¹‹å‰çŠ¶æ€æ¨æµ‹å‡ºæ¥çš„ï¼Œæ‰€ä»¥ä½ è¦ä¿è¯è¿™ä¸ªç‰©ä½“çš„é¢„æµ‹ä¿¡æ¯æ˜¯ä»ç‰©ä½“æœ‰æ•ˆçš„ç‰©ç†çŠ¶æ€å‡ºå‘ï¼Œè€Œä¸æ˜¯ä¸€äº›å¹³æ»‘å‡ºæ¥çš„å®Œå…¨æ˜¯è™šå‡çš„æ•°æ®å‡ºå‘ã€‚è¿™åœ¨ä½ æœ‰å¤§é‡çš„ç‰©ä½“å¯¹è±¡çš„æ—¶å€™ä¼šæ ¼å¤–çš„é‡è¦ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²è¿…é€Ÿå»ºç«‹äº†ä¸€ä¸ªå®ç”¨çš„åŒæ­¥ç­–ç•¥è€Œæ²¡åšæœ‰å¤ªå¤šçš„å·¥ä½œã€‚äº‹å®ä¸Šï¼Œè¿™ç§åŒæ­¥ç­–ç•¥å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œå·²ç»å®Œå…¨å¯ä»¥åœ¨äº’è”ç½‘ä¸Šè¿›è¡Œæ¸¸æˆå¯¹æˆ˜äº†ï¼Œå¹¶ä¸”å®ƒå¯¹ä¸¢åŒ…ã€æŠ–åŠ¨å’Œå¸¦å®½é™åˆ¶éƒ½å¤„ç†çš„ç›¸å½“ä¸é”™ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ã€è§†é¢‘1ï¼š</span></span><span style="color:#222222;font-family:å¾®è½¯é›…é»‘;font-size:medium;">cube_state_sync_uncompressed</span>ã€‘</div><div class="WordSection1"><br><br><video preload="auto" loop="loop" width="100%" controls="controls"><br><source src="/img/state_synchronization_uncompressed_1.mp4" type="video/mp4"><br></video><br><br><br></div><div class="WordSection1"><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><span style="color: rgb(34, 34, 34);">æ­£å¦‚ä½ å¯ä»¥çœ‹åˆ°çš„é‚£æ ·ï¼Œè¿™ç§åŒæ­¥ç­–ç•¥å·²ç»çœ‹ä¸Šå»ç›¸å½“ä¸é”™äº†ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰åšä»»ä½•çš„å¸¦å®½ä¼˜åŒ–ã€‚ä¸å¿«ç…§ä¿¡æ¯æ’å€¼é‚£ç§ç­–ç•¥çš„ç¬¬ä¸€æ¬¡<span>18m</span>æ¯ç§’çš„ä¿¡æ¯é‡ç›¸æ¯”ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨çŠ¶æ€æ›´æ–°ä¹‹é—´è¿›è¡ŒçŠ¶æ€çš„æ¨æµ‹æ˜¯ä½¿ç”¨æ›´å°‘çš„å¸¦å®½çš„å¥½æ–¹æ³•ã€‚</span><span><br></span><span style="color: rgb(34, 34, 34);">å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ¯”ç°åœ¨çš„çŠ¶æ€å¥½çš„å¤šï¼Œæ¯æ¬¡æˆ‘ä»¬åšä¼˜åŒ–çš„æ—¶å€™æˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å¸¦å®½æ¥ä¼ é€’æ›´å¤šçš„ç‰©ä½“çŠ¶æ€æ›´æ–°ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥åšçš„ä¸‹ä¸€ä¸ªæ˜æ˜¾æœ‰æ•ˆæœçš„äº‹æƒ…æ˜¯åº”ç”¨æ‰€æœ‰çš„æ ‡å‡†é‡åŒ–å‹ç¼©æŠ€æœ¯ï¼Œæ¯”å¦‚å‹ç¼©è¾¹ç•Œå’Œé‡åŒ–ä½ç½®ã€çº¿æ€§é€Ÿåº¦å’Œè§’é€Ÿåº¦çš„å€¼ä»¥åŠå¦‚åŒã€Šç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©ã€‹é‡Œé¢çš„æè¿°çš„<span>â€œ</span>æœ€å°çš„ä¸‰ä¸ªå˜é‡<span>â€</span>æ–¹æ³•ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ä½†åœ¨è¿™é‡Œå®ƒå˜å¾—æ›´å¤æ‚ä¸€ç‚¹ã€‚æˆ‘ä»¬ä»è¿™äº›çŠ¶æ€æ›´æ–°å‘å‰è¿›è¡Œæ¨æµ‹ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬é‡åŒ–è¿™äº›é€šè¿‡ç½‘ç»œä¼ é€’çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆåˆ°è¾¾å³ä¾§çš„çŠ¶æ€å°†ä¸å·¦ä¾§çš„çŠ¶æ€ç¨æœ‰ä¸åŒï¼Œè¿™ä¼šè®©æ¨æµ‹å˜å¾—æ›´åŠ ä¸å‡†ï¼Œå¹¶ä¸”å½“ä¸‹ä¸€ä¸ªçŠ¶æ€æ›´æ–°åˆ°è¾¾çš„æ—¶å€™ä¼šå‡ºç°ä¸€äº›æ‹‰æ‰¯ç°è±¡ã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ã€è§†é¢‘2ï¼š </span></span><span style="color:#222222;font-family:å¾®è½¯é›…é»‘;font-size:medium;">cube_state_sync_compressed</span>ã€‘</div><div class="WordSection1"><br><br><video preload="auto" loop="loop" width="100%" controls="controls"><br><source src="/img/state_synchronization_uncompressed_2.mp4" type="video/mp4"><br></video><br><br><br></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;"><br></span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><br><h2 id="å¯¹ä¸¤è¾¹éƒ½é‡åŒ–">å¯¹ä¸¤è¾¹éƒ½é‡åŒ–</h2><br><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">è§£å†³çš„åŠæ³•æ˜¯é‡åŒ–ä¸¤ä¾§çš„çŠ¶æ€ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ¯ä¸€ä¸ªä»¿çœŸè¿›è¡Œä¸€æ¬¡æ›´æ–°ä¹‹å‰ï¼Œä½ è¦å¯¹ç½‘ç»œçš„ä¸¤ä¾§åŒæ—¶é‡åŒ–æ•´ä¸ªæ¨¡æ‹ŸçŠ¶æ€ï¼Œå°±å¥½åƒå®ƒä»¬éƒ½å·²ç»åœ¨ç½‘ç»œä¸Šä¼ è¾“äº†ä¸€æ ·ã€‚ä¸€æ—¦è¿™æ ·åšäº†çš„è¯ï¼Œå·¦ä¾§å’Œå³ä¾§éƒ½æ˜¯ä»é‡åŒ–çš„çŠ¶æ€è¿›è¡Œæ¨æµ‹ï¼Œè¿™æ ·å®ƒä»¬çš„æ¨æµ‹ç»“æœå°±ä¼šéå¸¸çš„æ¥è¿‘ã€‚</span></span><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ç”±äºè¿™äº›é‡åŒ–ä»¥åçš„å€¼ä¼šè¢«åé¦ˆåˆ°ä»¿çœŸä¸­å»ï¼Œä½ ä¼šå‘ç°è¿™ç§æ–¹æ³•å¯¹ç²¾ç¡®åº¦çš„è¦æ±‚æ¯”å¿«ç…§ä¿¡æ¯æ’å€¼çš„æ–¹æ³•æ‰€è¦æ±‚çš„ç²¾ç¡®åº¦è¦é«˜çš„å¤šï¼Œå› ä¸ºåœ¨å¿«ç…§ä¿¡æ¯æ’å€¼çš„æ–¹æ³•é‡Œé¢ï¼Œä½¿ç”¨çš„æ•°æ®åªæ˜¯ç”¨æ¥æ’å€¼çš„è§†è§‰ä¿¡æ¯ã€‚åœ¨ç«‹æ–¹ä½“æ¨¡æ‹Ÿè¿™ä¸ªæƒ…å†µä¸‹ï¼Œæˆ‘å‘ç°æœ‰å¿…è¦å¯¹äºæ¯ç±³è¦æœ‰<span>4096</span>ä¸ªä½ç½®çš„ç²¾åº¦ï¼Œè€Œåœ¨å¿«ç…§ä¿¡æ¯æ’å€¼çš„æ–¹æ³•é‡Œæ¯ç±³åªè¦æœ‰<span>512</span>ä¸ªä½ç½®çš„ç²¾åº¦å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥å››å…ƒæ•°æœ€å°çš„ä¸‰ä¸ªåˆ†é‡æ¯ä¸ªè¦<span>15</span>æ¯”ç‰¹ä½ï¼ˆåœ¨å¿«ç…§ä¿¡æ¯æ’å€¼çš„æ–¹æ³•é‡Œå››å…ƒæ•°æœ€å°çš„ä¸‰ä¸ªåˆ†é‡æ¯ä¸ªåªè¦<span>9</span>ä¸ªæ¯”ç‰¹ä½çš„ä¿¡æ¯å°±è¡Œï¼‰ã€‚å¦‚æœæ²¡æœ‰è¿™ç§é¢å¤–çš„ç²¾åº¦å‡ºç°ï¼Œå°±éå¸¸å®¹æ˜“å‡ºç°ç‰©ä½“çš„æ‹‰æ‰¯çš„æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºé‡åŒ–ä»¥åçš„æ•°æ®ä¼šè¿«ä½¿ç‰©ç†å¯¹è±¡ç›¸äº’æ¸—é€ï¼Œè¿™ä¸æ¨¡æ‹Ÿè¦æ‰€æ±‚çš„å°½é‡ä¿æŒç‰©ç†å¯¹è±¡ä¸ç›¸äº’æ¸—é€çš„åŠªåŠ›æ˜¯èƒŒé“è€Œé©°çš„ã€‚æˆ‘è¿˜å‘ç°ï¼Œè½¯åŒ–çº¦æŸä»¥åŠå‡å°‘æ¨¡æ‹Ÿç”¨äºæ¨å¼€ç›¸äº’æ¸—é€çš„ç‰©ç†å¯¹è±¡çš„æœ€å¤§é€Ÿåº¦ä¹Ÿæœ‰åŠ©äºå‡å°‘å‡ºç°ç‰©ä½“æ‹‰æ‰¯çš„æƒ…å†µã€‚</span></span></div><div class="WordSection1"><span style="color: rgb(34, 34, 34);"><span style="font-family:å¾®è½¯é›…é»‘;font-size:medium;">ã€è§†é¢‘3ï¼š </span></span><span style="color:#222222;font-family:å¾®è½¯é›…é»‘;font-size:medium;">cube_state_sync_quantize_both_sides</span>ã€‘</div><div class="WordSection1"><br><br><video preload="auto" loop="loop" width="100%" controls="controls"><br><source src="/img/state_synchronization_uncompressed_3.mp4" type="video/mp4"><br></video><br><br><br></div><div class="WordSection1"><br><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åœ¨é‡åŒ–åº”ç”¨äºç½‘ç»œä¸¤ä¾§çš„æ¨¡æ‹Ÿä»¥åï¼Œå°±å¯ä»¥å†æ¬¡çœ‹åˆ°ç»“æœæ˜¯æ¯”è¾ƒå®Œç¾çš„ã€‚è¿™ç§å¤„ç†ä»¥åï¼Œçœ‹èµ·æ¥è§†è§‰æ•ˆæœä¸æœªå‹ç¼©ç‰ˆæœ¬å·®ä¸å¤šï¼Œä½†äº‹å®ä¸Šé€šè¿‡è¿™ç§æ–¹æ¡ˆæˆ‘ä»¬èƒ½å¤Ÿé€‚åº”æ¯ä¸ªåŒ…è¿›è¡Œæ›´å¤šçš„çŠ¶æ€æ›´æ–°ï¼ŒåŒæ—¶è¿˜èƒ½æ»¡è¶³æ¯ç§’<span>256</span>æ¯”ç‰¹çš„å¸¦å®½é™åˆ¶ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†æ•°æ®åŒ…çš„ä¸¢å¤±ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ›´æ–°å¯ä»¥æ›´è¿…é€Ÿçš„å‘é€ã€‚å¦‚æœå‡ºç°æ•°æ®åŒ…ä¸¢å¤±çš„æƒ…å†µï¼Œå¯¹æ•´ä¸ªæ¨¡æ‹Ÿæ¥è¯´ä¹Ÿä¼šå¼•å‘æ›´å°‘çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºé€šè¿‡æœªæ¥åˆ°æ¥çš„ä¹¦åŒ…æ­£åœ¨æŒç»­ä¸æ–­åœ°å¯¹è¿™äº›ç‰©ä½“è¿›è¡ŒçŠ¶æ€æ›´æ–°ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¯·æ³¨æ„å¦‚æœå‡ºç°æ•°æ®åŒ…çš„é›†ä¸­ä¸¢å¼ƒçš„æƒ…å†µï¼Œæ¯”å¦‚è¯´åœ¨å››åˆ†ä¹‹ä¸€ç§’çš„æ—¶é—´æ²¡æœ‰æ•°æ®åŒ…é€šè¿‡ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸å¯é¿å…çš„ï¼Œæ€»æ˜¯ä¼šå‘ç”Ÿä¸€äº›è¿™æ ·çš„äº‹æƒ…ï¼Œä½ å¯èƒ½ä¼šåœ¨ç½‘ç»œçš„ä¸¤ä¾§å¾—åˆ°å®Œå…¨ä¸åŒçš„ç»“æœã€‚æˆ‘ä»¬å¿…é¡»ä¸ºè¿™ç§æƒ…å†µè¿›è¡Œè§„åˆ’ã€‚æˆ‘ä»¬ä¼šå°½ä¸€åˆ‡åŠªåŠ›æ¥ç¡®ä¿å¤–æ¨æ˜¯å°½å¯èƒ½ä¸å®é™…ç»“æœç›¸æ¥è¿‘çš„ï¼ˆé‡‡ç”¨åœ¨ç½‘ç»œçš„ä¸¤ä¾§è¿›è¡Œé‡åŒ–ä»¥åŠå…¶ä»–ä¸€äº›æ–¹æ¡ˆï¼‰ï¼Œä½†æ˜¯ç”±äºç½‘ç»œåœæ­¢ä¼ è¾“æ•°æ®åŒ…ï¼Œè¿˜æ˜¯ä¼šå‘ç”Ÿå„ç§æ‹‰æ‰¯å’Œä¸å‡†ç¡®çš„æƒ…å†µã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><h2 id="è§†è§‰å¹³æ»‘">è§†è§‰å¹³æ»‘</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿˜è®°å¾—æˆ‘ä¹‹å‰è¯´è¿‡çš„é‚£ä¸ªäº‹æƒ…ä¹ˆï¼Ÿä½ ä¸åº”è¯¥å¯¹æ¨¡æ‹Ÿè¿™ä¸€ä¾§ä½¿ç”¨å¹³æ»‘ç®—æ³•ï¼Œå› ä¸ºå®ƒä¼šå¯¹å¤–æ¨æœ‰ä¸å¥½çš„å½±å“å—<span>? </span>æˆ‘ä»¬è¦åšçš„ä¸æ˜¯å¹³æ»‘è€Œæ˜¯è®¡ç®—å’Œç»´æŠ¤ä½ç½®å’Œæ–¹å‘çš„è¯¯å·®è¡¥å¿ï¼Œè¿™ä¸ªé‡ä¼šéšç€æ—¶é—´è€Œå‡å°‘ã€‚ç„¶åå½“æˆ‘ä»¬åœ¨ç½‘ç»œçš„å³ä¾§æ¸²æŸ“ç«‹æ–¹ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç”¨æ¨¡æ‹Ÿçš„ä½ç½®å’Œæ–¹å‘å¯¹è¿™äº›ç«‹æ–¹ä½“è¿›è¡Œæ¸²æŸ“ï¼Œæˆ‘ä»¬æ˜¯ç”¨æ¨¡æ‹Ÿçš„ä½ç½®å’Œæ–¹å‘å†åŠ ä¸Šè¯¯å·®è¡¥å¿æ¥å¯¹è¿™äº›ç«‹æ–¹ä½“è¿›è¡Œæ¸²æŸ“ã€‚ä½ç½®ä¿¡æ¯æ˜¯æ¨¡æ‹Ÿä½ç½®ä¿¡æ¯åŠ ä¸Šè¯¯å·®è¡¥å¿ï¼Œæ–¹å‘ä¿¡æ¯æ˜¯æ¨¡æ‹Ÿçš„æ–¹å‘ä¿¡æ¯å†ä¹˜ä»¥æ–¹å‘çš„è¯¯å·®è¡¥å¿ã€‚</span> <p></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬åŠªåŠ›å‡å°‘è¿™äº›è¯¯å·®è¡¥å¿ï¼Œè®©ä½ç½®çš„è¯¯å·®è¡¥å¿å°½é‡è¶‹è¿‘äº<span>0</span>ï¼Œè€Œæ–¹å‘çš„è¯¯å·®è¡¥å¿å°½é‡è¶‹è¿‘äº<span>ä¸€è‡´</span>ã€‚ä¸ºäº†å‡å°‘è¯¯å·®ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªæŒ‡æ•°å¹³æ»‘çš„ç§»åŠ¨ï¼Œå¹³å‡çº¿è¶‹è¿‘é›¶ã€‚æ‰€ä»¥å®é™…ä¸Šï¼Œæˆ‘ç”¨æ¯ä¸€å¸§çš„ä½ç½®è¯¯å·®ä¹˜ä»¥æŸä¸ªç³»æ•°ï¼ˆæ¯”å¦‚è¯´æ˜¯<span>0.9</span>ï¼‰ï¼Œç›´åˆ°å®ƒæ¥è¿‘äºé›¶è€Œè¢«æ¸…é™¤<span>(</span>è¿™æ ·å°±é¿å…äº†çªå˜<span>)</span>ã€‚å¯¹äºæ–¹å‘è€Œè¨€ï¼Œæˆ‘ç”¨æŸä¸€ä¸ªå›ºå®šçš„é‡ï¼ˆæ¯”å¦‚è¯´æ˜¯<span>0.1</span>ï¼‰æ¥å¯¹æ¯ä¸€å¸§çš„æ ‡å‡†å‘é‡è¿›è¡Œçƒé¢æ’å€¼ï¼Œè¿™ä¸ªå¯ä»¥è¾¾åˆ°æ–¹å‘è¯¯å·®ç›¸åŒçš„æ•ˆæœã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è®©æ‰€æœ‰äº‹æƒ…éƒ½èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„è¯€çªåœ¨äºå½“ä¸€ä¸ªçŠ¶æ€æ›´æ–°æ•°æ®åŒ…åˆ°è¾¾çš„æ—¶å€™ï¼Œä½ è·å–å½“å‰çš„æ¨¡æ‹Ÿä½ç½®ä¿¡æ¯ï¼Œå¹¶æŠŠä½ç½®è¯¯å·®æ·»åŠ ä¸Šå»ï¼Œç„¶åå†ä»æ–°çš„ä½ç½®é‡Œé¢å‡å»è¿™ä¸ªå€¼ï¼Œè¿™æ ·å°±å¯ä»¥è®©æ–°ä½ç½®çš„ä½ç½®è¯¯å·®å’Œå½“å‰çš„è§†è§‰ä½ç½®æ¯”è¾ƒä¸€è‡´ï¼ˆå¹³æ»‘ï¼‰ã€‚ç„¶åæŠŠç›¸åŒçš„è¿‡ç¨‹åº”ç”¨äºå››å…ƒæ•°è¯¯å·®ï¼ˆä½¿ç”¨ä¹˜æ³•çš„å…±è½­è€Œä¸æ˜¯å‡æ³•æ¥ä¸åŸºå‡†æ–¹å‘ä¿¡æ¯è¿›è¡Œå åŠ ï¼‰ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ä½ å°±å¯ä»¥æœ‰æ•ˆçš„è®¡ç®—åœ¨æ¯ä¸ªçŠ¶æ€æ›´æ–°æ•°æ®åŒ…åˆ°è¾¾çš„æ—¶å€™ï¼Œç›¸å¯¹äºæ–°çš„çŠ¶æ€ä¸‹æ–°çš„ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®ï¼Œè¿™æ ·å¤„ç†çš„è¯ç‰©ä½“çœ‹ä¸Šå»å°±æ ¹æœ¬æ²¡æœ‰è¿›è¡Œä»»ä½•çš„ç§»åŠ¨ã€‚å› æ­¤çŠ¶æ€æ›´æ–°çš„éå¸¸å¹³æ»‘ï¼Œæ²¡æœ‰ä»»ä½•çªç„¶ç§»åŠ¨çš„è§†è§‰æ•ˆæœï¼Œè€Œä¸”å¯ä»¥éšç€æ—¶é—´æ…¢æ…¢å‡å°‘ç”±äºæ¨æ–­å¸¦æ¥çš„è¯¯å·®è€Œé€šå¸¸æƒ…å†µä¸‹è¿™ä¹ˆå¤„ç†ä¸ä¼šè®©ç©å®¶æ³¨æ„åˆ°ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘å‘ç°åªä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„å¹³æ»‘å› å­ä¼šäº§ç”Ÿä¸å¯æ¥å—çš„ç»“æœã€‚å¹³æ»‘å› å­<span>0.95</span>å¯¹äºé‚£äº›å°çš„æŠ–åŠ¨æ¥è¯´æ˜¯éå¸¸å®Œç¾çš„ï¼Œå› ä¸ºå®ƒå¯¹é‚£äº›é«˜é¢‘æŠ–åŠ¨çš„å¹³æ»‘æ˜¯éå¸¸å®Œç¾çš„ï¼Œä½†æ˜¯å®ƒå¯¹äºå¤§çš„ä½ç½®è¯¯å·®æ¥è¯´å¹³æ»‘çš„å¤ªæ…¢äº†ï¼Œæ¯”å¦‚è¯´å‘ç”Ÿäº†å¥½å‡ ç§’æ•°æ®åŒ…ä¸¢å¤±ä»¥åï¼Œç‰©ä½“çš„ä½ç½®å’Œå®é™…ä½ç½®å·®çš„æ¯”è¾ƒå¤§ï¼Œè¿™æ—¶å€™ç”¨è¿™ä¸ªå› å­æ¥å¹³æ»‘å°±å¤ªæ…¢äº†ï¼š</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€è§†é¢‘4ï¼š</span><span style="color:#222222;font-family:&#39;å¾®è½¯é›…é»‘, sans-serif&#39;;"><span style="font-size: 16px;">cube_state_sync_basic_smoothing</span></span><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;">ã€‘</span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video preload="auto" loop="loop" width="100%" controls="controls"><br><source src="/img/state_synchronization_uncompressed_4.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯é’ˆå¯¹ä¸åŒçš„è¯¯å·®è·ç¦»ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å¹³æ»‘å› å­ï¼Œå¹¶ä¸”æˆ‘ä¼šæ ¹æ®éœ€è¦å‡å°‘çš„ä½ç½®è¯¯å·®çš„å¤§å°æ¥å¯¹è¿™ä¸¤ä¸ªå¹³æ»‘å› å­è¿›è¡Œçº¿æ€§çš„æ··åˆæ¥è®©è¿‡æ¸¡éå¸¸çš„å¹³æ»‘ã€‚åœ¨è¿™ä¸ªæ¨¡æ‹Ÿä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<span>0.95</span>æ¥å¹³æ»‘å°çš„ä½ç½®è¯¯å·®<span>(</span>é’ˆå¯¹<span>25</span>å˜ç±³æˆ–è€…è¯¯å·®æ›´å°çš„æƒ…å†µ<span>)</span>ï¼Œè€Œå¯¹äºå¤§ä¸€ç‚¹çš„è·ç¦»è€Œè¨€ä¼šä½¿ç”¨ä¸€ä¸ªæ›´ä¸¥æ ¼çš„æ··åˆç³»æ•°<span>0.85(</span>é’ˆå¯¹<span>1</span>ç±³æˆ–è€…è¯¯å·®æ›´å¤§çš„æƒ…å†µ<span>)</span>ï¼Œè¿™ç»™å‡ºäº†ä¸€ä¸ªéå¸¸å¥½çš„ç»“æœã€‚å¯¹äºæ–¹å‘è€Œè¨€ï¼Œç›¸åŒçš„ç­–ç•¥é€‚ç”¨äºå¯¹æ–¹å‘è¯¯å·®å’Œå•ä½çŸ©é˜µä½¿ç”¨ç‚¹ç§¯çš„æƒ…å†µã€‚æˆ‘å‘ç°åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ··åˆç³»æ•°åˆ†åˆ«é‡‡ç”¨<span>0.1</span>å’Œ<span>0.5</span>çš„æ•ˆæœå°±éå¸¸çš„å¥½ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æœ€ç»ˆçš„ç»“æœæ˜¯å¯¹å°çš„ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®çš„å¹³æ»‘æ“ä½œä¸å¯¹å¤§çš„ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®çš„å¿«é€Ÿæ”¶æ•›å¾ˆå¥½çš„ç»“åˆåœ¨äº†ä¸€èµ·ã€‚æ­£å¦‚ä½ åœ¨ä¸Šé¢çœ‹åˆ°çš„é‚£æ ·ï¼Œä½ ä¸æƒ³æ‹–ç€ä¸€ç›´ä¸å¤„ç†è¿™äº›å¤§çš„ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®ï¼Œè¿™äº›å¤§çš„ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®éœ€è¦è¢«å¿«é€Ÿçš„è§£å†³å¦åˆ™å®ƒä»¬ä¼šç»™ç©å®¶é€ æˆéå¸¸å¤§çš„å›°æ‰°ï¼Œä½†æ˜¯åŒæ—¶å½“ä½ç½®è¯¯å·®å’Œæ–¹å‘è¯¯å·®å¾ˆå°çš„æ—¶å€™ä½ å¸Œæœ›è¿™ä¸ªè¯¯å·®å‡å°‘çš„è¿‡ç¨‹èƒ½å¤Ÿéå¸¸çš„å¹³æ»‘ï¼Œå› æ­¤è‡ªé€‚åº”è¯¯å·®å‡å°‘æ–¹æ³•æ•ˆæœå¾ˆå¥½ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€è§†é¢‘5ï¼š</span><span style="color:#222222;font-family:&#39;å¾®è½¯é›…é»‘, sans-serif&#39;;"><span style="font-size: 16px;">cube_state_sync_adaptive_smoothing.mp4</span></span><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;">ã€‘</span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br><br><video preload="auto" loop="loop" width="100%" controls="controls"><br><source src="/img/state_synchronization_uncompressed_5.mp4" type="video/mp4"><br></video><br><br><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="color: rgb(34, 34, 34); font-family: å¾®è½¯é›…é»‘, sans-serif; font-size: 12pt;"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><h2 id="å¢é‡å‹ç¼©">å¢é‡å‹ç¼©</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">å°½ç®¡æˆ‘è®¤ä¸ºä¸Šè¿°ç»“æœå¯èƒ½å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œä»è¿™ä¸€ç‚¹ä¸Šæ¥çœ‹å¯ä»¥å¤§å¤§æé«˜åŒæ­¥çš„è´¨é‡ã€‚è®©æˆ‘ä»¬ä¸¾äº›ç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼Œæ¯”å¦‚æ”¯æŒä¸€ä¸ªæœ‰å¤§é‡å¯¹è±¡çš„ä¸–ç•Œæˆ–è€…æœ‰æ›´å¤šçš„å¯¹è±¡ä¸ä¹‹äº¤äº’ã€‚æ‰€ä»¥è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›æŠ€æœ¯ä¸Šçš„æ”¹è¿›ï¼Œæ¥æ¨åŠ¨è¿™é¡¹æŠ€æœ¯å°½å¯èƒ½çš„å®Œç¾ã€‚</span> <p></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æœ‰ä¸€ç§ç®€å•çš„å‹ç¼©ï¼Œå¯ä»¥ç«‹åˆ»æ‰§è¡Œã€‚ä¸å†æ˜¯ç¼–ç ç»å¯¹ä½ç½®ï¼Œå¦‚æœä½ç½®æ˜¯åœ¨ç©å®¶ç«‹æ–¹ä½“ä¸­å¿ƒçš„æŸä¸ªèŒƒå›´ä¹‹å†…çš„è¯ï¼Œå°±ä¼šä»¥ç©å®¶çš„ä¸­å¿ƒä½ç½®çš„åç§»é‡æ¥è¿›è¡Œç¼–ç ã€‚å¦‚æœæ˜¯å¸¸è§æƒ…å†µä¸‹ï¼Œå¸¦å®½å¾ˆé«˜è€Œä¸”çŠ¶æ€æ›´æ–°éœ€è¦éå¸¸çš„é¢‘ç¹ï¼ˆ<span>katamari</span>çƒï¼‰ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•å°±èƒ½èŠ‚çœä¸‹å¾ˆå¤šå¸¦å®½ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ¥ä¸‹æ¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹çŠ¶æ€åŒæ­¥æ‰§è¡ŒæŸç§å¢é‡ç¼–ç æ€ä¹ˆåŠ<span>? </span>æˆ‘ä»¬å¯ä»¥åšåˆ°ä½†æ˜¯å…·ä½“çš„æ–¹æ³•ä¼šå’Œå¿«ç…§é‡Œé¢çš„å¢é‡ç¼–ç æ–¹æ³•å·®åˆ«å¾ˆå¤§ï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬çš„æ¯ä¸ªæ•°æ®åŒ…ä¸ä¼šåŒ…å«æ¯ä¸€ä¸ªç«‹æ–¹ä½“çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è·Ÿè¸ªæœ€æ–°æ”¶åˆ°çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”è‡ªä»¥ä¸ºåœ°è§‰å¾—è¿™ä¸ªæ•°æ®åŒ…çš„æ‰€æœ‰è¿™äº›çŠ¶æ€æ›´æ–°éƒ½æ˜¯ç›¸å¯¹äº<span>X</span>è¿™ä¸ªæ•°æ®åŒ…çš„ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ä½ å®é™…è¦åšçš„å°±æ˜¯é€å¯¹è±¡çš„è¿›è¡Œæ›´æ–°ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œè·Ÿè¸ªåŒ…æ‹¬æ›´æ–°çš„åŸºç¡€å€¼ã€‚ä½ è¿˜éœ€è¦è·Ÿè¸ªæ”¶åˆ°çš„æ•°æ®åŒ…çš„å‡†å¤‡çš„æ•°é‡ï¼Œè¿™æ ·å‘é€æ–¹æ‰èƒ½çŸ¥é“å“ªäº›æ•°æ®åŒ…å¯ä»¥ä½œä¸ºå¢é‡ç¼–ç æœ‰æ•ˆçš„åŸºç¡€å€¼ã€‚è¿™æ˜¯ç›¸å½“å¤æ‚çš„ï¼Œå¹¶ä¸”æ˜¯éœ€è¦é€šè¿‡<span>UDP</span>åè®®è¿›è¡ŒåŒå‘ç¡®è®¤çš„ç³»ç»Ÿã€‚è¿™æ ·ä¸€ä¸ªç³»ç»Ÿæ˜¯ä¸“ä¸ºè¿™ç§æƒ…å†µè®¾è®¡çš„ï¼Œå› ä¸ºä½ è‚¯å®šéœ€è¦çŸ¥é“å“ªäº›æ•°æ®åŒ…ç¡®å®šæ˜¯åˆ°è¾¾äº†å¦å¤–ä¸€ä¾§ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ª<a href="http://gad.qq.com/college/articledetail/7161834" target="_blank" rel="noopener">æ•™ç¨‹</a>é‡Œé¢æ‰¾åˆ°å…·ä½“å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½çš„æŒ‡å—ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ‰€ä»¥å‡è®¾ä½ æœ‰ä¸€ä¸ªç¡®è®¤ç³»ç»Ÿï¼Œè¿™æ ·ä½ å°±çŸ¥é“å·²ç»å‘é€åˆ°ç½‘ç»œå¦å¤–ä¸€ä¾§çš„æ•°æ®åŒ…çš„åºåˆ—å·ã€‚ä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨æ¯ä¸ªçŠ¶æ€æ›´æ–°çš„æ—¶å€™ï¼Œç”¨ä¸€ä½æ•°æ®æ¥è®°å½•ä¸‹è¿™ä¸ªæ›´æ–°åˆ°åº•æ˜¯ç›¸å¯¹æ›´æ–°è¿˜æ˜¯ç»å¯¹æ›´æ–°ï¼Œå¦‚æœæ˜¯ç»å¯¹æ›´æ–°å°±æ²¡æœ‰é’ˆå¯¹åŸºç¡€ç¼–ç è¿™å›äº‹ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªç›¸å¯¹æ›´æ–°ï¼Œæ‰€ä»¥è¦å‘é€<span>16</span>ä½åºåˆ—å·æ¥æ ‡è®°æ¯ä¸ªçŠ¶æ€ç›¸å¯¹åº”çš„åŸºç¡€çŠ¶æ€ï¼Œç„¶åç›¸å¯¹äºåŸºç¡€çŠ¶æ€å¯¹æ›´æ–°æ•°æ®è¿›è¡Œç¼–ç å¹¶é€šè¿‡æ•°æ®åŒ…è¿›è¡Œå‘é€ã€‚è¿™ä¸ºæ¯æ¬¡æ›´æ–°å¢åŠ äº†<span>1</span>æ¯”ç‰¹å¼€é”€ï¼Œä»¥åŠéœ€è¦å¢åŠ <span>16</span>ä½åºåˆ—å·çš„å¼€é”€æ¥æ ‡è®°æ¯ä¸ªç‰©ä½“æ›´æ–°çš„åŸºå‡†å¸§ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½å—<span>?</span></span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#2B2B2B;background:#F8F8F8"> </span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ˜¯çš„ã€‚ç¡®å®å¯ä»¥åšçš„æ›´å¥½ã€‚ä½ è¦åœ¨å‘é€å’Œæ¥æ”¶ç«¯è¿›è¡Œç¼“å†²æ¥å®ç°è¿™ä¸ªç›¸å¯¹ç¼–ç æœºåˆ¶ï¼Œä½†æ˜¯ä½ ä¸å¯èƒ½æ°¸è¿œç¼“å†²ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ ä»”ç»†æƒ³æƒ³ï¼Œä½ åªèƒ½ç¼“å†²å‡ ç§’é’Ÿç„¶åæ•´ä¸ªç¼“å†²å°±å˜å¾—ä¸åˆ‡å®é™…ï¼Œå¯¹äºç‰©ä½“åœ¨ç§»åŠ¨è¿™ä¸ªå¸¸è§çš„æƒ…å†µï¼Œä½ ä¼šç»å¸¸å‘é€ç›¸åŒå¯¹è±¡çš„æ›´æ–°ä¿¡æ¯ï¼ˆæ¯”å¦‚è¯´<span>katamari</span>çƒï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸ŠåŸºå‡†å¸§åªèƒ½æ˜¯å¾ˆçŸ­æ—¶é—´ä¹‹å‰çš„ä¸€å¸§çŠ¶æ€ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æ‰€ä»¥å¯¹æ¯ä¸ªç‰©ä½“å‘é€<span>16</span>ä½çš„åºåˆ—å·æ¥è¡¨æ˜åŸºå‡†å¸§ï¼Œåœ¨æ•°æ®åŒ…çš„åŒ…å¤´é‡Œé¢å‘é€æœ€è¿‘ç¡®è®¤çš„æ•°æ®åŒ…çš„åºåˆ—å·ï¼ˆè¿™ä¸ªæ•°æ®æ˜¯ä»å¯é çš„ç¡®è®¤ç³»ç»Ÿé‡Œé¢å¾—åˆ°çš„ï¼‰ç„¶åå¯¹æ¯ä¸ªç‰©ä½“ç¼–ç ç›¸å¯¹è¿™ä¸ªåŸºå‡†å¸§çš„åç§»é‡ï¼Œè¿™ä¸ªåç§»é‡ä½¿ç”¨<span>5</span>ä½ä¿¡æ¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼åœ¨æ¯ç§’<span>60</span>ä¸ªæ•°æ®åŒ…çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è¯†åˆ«ç›¸å¯¹äºåŸºå‡†å¸§åŠç§’å‰çš„çŠ¶æ€æ›´æ–°ã€‚ä»»ä½•æ¯”è¿™ä¸ªå€¼æ›´è€çš„åŸºå‡†å¸§ä¸å¤ªå¯èƒ½æä¾›ä¸€ä¸ªè‰¯å¥½çš„å¢é‡ç¼–ç çš„åŸºå‡†ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬å¤ªè€äº†ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹å°±è¦åˆ‡å›åˆ°ç»å¯¹ç¼–ç è¿›è¡ŒçŠ¶æ€æ›´æ–°ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ä¼šä½¿ç”¨è¿™äº›ç»å¯¹ç¼–ç è€Œä¸æ˜¯ç›¸å¯¹ç¼–ç çš„å¯¹è±¡çš„ç±»å‹ã€‚ä»–ä»¬æ˜¯é™æ­¢çš„å¯¹è±¡ã€‚æˆ‘ä»¬èƒ½åšä»€ä¹ˆæ¥è®©ä»–ä»¬çš„æ›´æ–°å°½å¯èƒ½çš„é«˜æ•ˆ<span>?</span>åœ¨è¿™ç§ç«‹æ–¹ä½“æ¨¡æ‹Ÿçš„æƒ…å†µï¼Œä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„å¾ˆç³Ÿç³•çš„ç»“æœæ˜¯ä¸€ä¸ªç«‹æ–¹ä½“è¿›è¡Œåœæ­¢çŠ¶æ€ï¼ˆå˜æˆç°è‰²ï¼‰ç„¶åå®ƒçš„ä¼˜å…ˆçº§æ˜¾è‘—é™ä½ã€‚å¦‚æœç”±äºæ•°æ®åŒ…çš„ä¸¢å¤±ï¼Œå¯¼è‡´æœ€åå¯¹è±¡çš„ä½ç½®æ›´æ–°ä¿¡æ¯è¢«é”™è¿‡çš„è¯ï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰ä¼šè½®åˆ°è¿™ä¸ªç‰©ä½“æ¥æ›´æ–°å®ƒçš„åœæ­¢ä½ç½®ä¿¡æ¯ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">æˆ‘ä»¬å¯ä»¥é€šè¿‡è·Ÿè¸ªå“ªäº›æœ€è¿‘å˜æˆåœæ­¢çŠ¶æ€çš„å¯¹è±¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¼šæé«˜è¿™äº›å¯¹è±¡çš„ä¼˜å…ˆçº§ç›´åˆ°ä¸€ä¸ªç¡®è®¤åŒ…è¿”å›æ¥æ ‡è®°è¿™äº›å¯¹è±¡çš„ä½ç½®æ›´æ–°ä¿¡æ¯å·²ç»è¢«æˆåŠŸçš„å‘é€äº†ã€‚å› æ­¤ä»–ä»¬çš„å‘é€ä¼˜å…ˆçº§ä¼šç›¸å¯¹äºæ­£å¸¸çš„ç°è‰²ç«‹æ–¹ä½“ï¼ˆé‚£äº›å¤„äºé™æ­¢çŠ¶æ€æ²¡æœ‰ç§»åŠ¨çš„ç«‹æ–¹ä½“ï¼‰çš„å‘é€ä¼˜å…ˆçº§æœ‰ä¸€å®šçš„æé«˜ï¼Œå¹¶ä¸”ä¼šåœ¨è¿™ä¸ªæé«˜åçš„ä¼˜å…ˆçº§ä¸Šä¸€ç›´å‘é€ï¼Œç›´åˆ°æˆ‘ä»¬çŸ¥é“å¯¹è¿™äº›ç«‹æ–¹ä½“çš„æ›´æ–°ä¿¡æ¯å·²ç»æ”¶åˆ°ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œçš„å¦å¤–ä¸€ä¾§ä¼šâ€œæ‰¿è¯ºâ€æŠŠè¿™äº›ç°è‰²çš„ç«‹æ–¹ä½“æ”¾åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šåœæ­¢ã€‚</span> </p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><h2 id="æœ€å">æœ€å</h2><br><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">è¿™å°±æ˜¯æœ‰å…³äºè¿™ç§æŠ€æœ¯çš„å…¨éƒ¨å†…å®¹ã€‚å®ƒéå¸¸çš„æœ‰è¶£ï¼Œä¸éœ€è¦ä»»ä½•èŠ±å“¨çš„å†…å®¹å°±å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥åšä¸€ä¸ªæ•°é‡çº§çš„å¸¦å®½èŠ‚çœï¼ˆé€šè¿‡å¢é‡ç¼–ç ï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆçš„å¤æ‚æ€§éå¸¸çš„é«˜ã€‚</span> <p></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><br></p><p class="MsoNormal" align="left" style="line-height: 16.8pt; vertical-align: baseline;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222"><br></span></p><p class="MsoNormal" align="left" style="line-height: 18pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">ã€ç‰ˆæƒå£°æ˜ã€‘</span> </p><p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;;color:#222222">åŸæ–‡ä½œè€…æœªåšæƒåˆ©å£°æ˜ï¼Œè§†ä¸ºå…±äº«çŸ¥è¯†äº§æƒè¿›å…¥å…¬å…±é¢†åŸŸï¼Œè‡ªåŠ¨è·å¾—æˆæƒã€‚</span> </p><p class="MsoNormal"><span style="font-family:&quot;å¾®è½¯é›…é»‘&quot;,&quot;sans-serif&quot;"> </span> </p></div>                    <br>                

      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/GafferOnGames/" rel="tag"><i class="fa fa-tag"></i> GafferOnGames</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/snapshot_compression/" rel="next" title="ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    ç½‘ç»œç‰©ç†æ¨¡æ‹Ÿäº”ä¹‹å¿«ç…§å‹ç¼©
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/ipc/" rel="prev" title="è¿›ç¨‹é—´çš„é€šä¿¡ä¸åŒæ­¥">
                <p class="post-nav-pre-next-title">
                    è¿›ç¨‹é—´çš„é€šä¿¡ä¸åŒæ­¥
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zNSAyNUg0NVYzNUgzNVYyNVoiIGZpbGw9IiNEREREREQiLz4KPC9zdmc+" data-src="/uploads/avatar.png" alt="Mike">
          </a>
          <p class="site-author-name" itemprop="name">Mike</p>
           
              <p class="site-description motion-element" itemprop="description">ğŸš™ ğŸš— ğŸ’¨ ğŸ’¨ If you want to create a blog like this, just follow my open-source project, "hexo-theme-neo", click the GitHub button below and check it out ^_^ . It is recommended to use Chrome, Safari, or Edge to read this blog since this blog was developed on Edge (Chromium kernel version) and tested on Safari.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">298</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/no5ix" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://open.spotify.com/user/313duq77ekebrfyak3xijqewzss4?si=e7653b829a9747bf" target="_blank" title="Spotify">
                  
                    <i class="fa fa-fw fa-spotify"></i>
                  
                    
                      Spotify
                    
                </a>
              </span>
            
          
          
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- ç½‘æ˜“äº‘éŸ³ä¹ -->

        </div>

        
        

        
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#è‡ªæˆ‘æ€»ç»“"><span class="nav-text">è‡ªæˆ‘æ€»ç»“</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸæ–‡"><span class="nav-text">åŸæ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#state-synchronization"><span class="nav-text">State Synchronization</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#implementation"><span class="nav-text">Implementation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#packet-structure"><span class="nav-text">Packet Structure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#priority-accumulator"><span class="nav-text">Priority Accumulator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jitter-buffer"><span class="nav-text">Jitter Buffer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#applying-state-updates"><span class="nav-text">Applying State Updates</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#quantize-both-sides"><span class="nav-text">Quantize Both Sides</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#visual-smoothing"><span class="nav-text">Visual Smoothing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#delta-compression"><span class="nav-text">Delta Compression</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#conclusion"><span class="nav-text">Conclusion</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#è¯‘æ–‡"><span class="nav-text">è¯‘æ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»‹ç»"><span class="nav-text">ä»‹ç»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#çŠ¶æ€åŒæ­¥æ¦‚å¿µ"><span class="nav-text">çŠ¶æ€åŒæ­¥æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°"><span class="nav-text">å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°æ®åŒ…ç»“æ„ä½“"><span class="nav-text">æ•°æ®åŒ…ç»“æ„ä½“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¼˜å…ˆçº§ç´¯åŠ å™¨"><span class="nav-text">ä¼˜å…ˆçº§ç´¯åŠ å™¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æŠ–åŠ¨ç¼“å†²åŒº"><span class="nav-text">æŠ–åŠ¨ç¼“å†²åŒº</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åº”ç”¨çŠ¶æ€æ›´æ–°"><span class="nav-text">åº”ç”¨çŠ¶æ€æ›´æ–°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¯¹ä¸¤è¾¹éƒ½é‡åŒ–"><span class="nav-text">å¯¹ä¸¤è¾¹éƒ½é‡åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è§†è§‰å¹³æ»‘"><span class="nav-text">è§†è§‰å¹³æ»‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¢é‡å‹ç¼©"><span class="nav-text">å¢é‡å‹ç¼©</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœ€å"><span class="nav-text">æœ€å</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mike</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  















  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/mediumzoom/medium-zoom.js?v=1.1.0"></script>





  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

    <script src="/js/src/local-search.js"></script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>






<script type="text/javascript" src="/js/src/headroom.js"></script>

<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="/js/src/code-highlight-modification.js"></script>

<!-- Flashcards Script -->
<script type="text/javascript" src="/js/src/flashcards.js"></script>
